"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5438],{39898:function(e,i,t){var n=t(57437);t(2265),t(23508);var a=t(66648);i.Z=e=>{let{nguphap:i}=e;return(0,n.jsxs)("div",{className:"cauhoi-container",children:[(0,n.jsx)("h1",{children:"Mở Rộng"}),i&&i.map((e,i)=>(0,n.jsxs)("div",{className:"row",children:[(0,n.jsxs)("h2",{children:[i+1,". ",e.tieude]}),e.noidung&&(0,n.jsx)("p",{children:e.noidung}),(0,n.jsx)("div",{className:"image-container",children:(0,n.jsx)(a.default,{src:e.src,alt:"H\xecnh ảnh",width:1200,height:1200,layout:"intrinsic",className:"image-styled",style:{objectFit:"contain"}})})]},i))]})}},85151:function(e,i,t){t.d(i,{Z:function(){return w}});var n=t(57437),a=t(2265),l=t(66648);t(21682);var s=t(77761);t(62034);var c=t(46289),r=t(23394),o=t(85839),h=t(89745),u=t(64379),d=t.n(u),g=t(12808),m=t(65606);function x(e){let{tumoi:i,onFinish:t,isGianthe:s,pathBaitap:c,diem:u=100}=e,[x,p]=(0,a.useState)([]),[j,v]=(0,a.useState)([]),[f,b]=(0,a.useState)({pinyin:null,nghia:null}),[y,N]=(0,a.useState)({pinyin:null,hanzi:null,nghia:null,gianthe:null}),[S,C]=(0,a.useState)([]),[w,k]=(0,a.useState)({id:null,hanziId:null,type:null}),[Z,D]=(0,a.useState)([]),[B,M]=(0,a.useState)(!1),[T,z]=(0,a.useState)("https://hocdichchuhan.github.io/img/gif/correct4.gif"),[G,I]=(0,a.useState)(!1),[P,L]=(0,a.useState)(0),[E,H]=(0,a.useState)([]),[R,F]=(0,a.useState)(0);(0,a.useEffect)(()=>{if(i&&i.length>0){let e={};i.forEach(i=>{let t=i.gianthe.length;e[t]||(e[t]=[]),e[t].push(i)}),H(Object.values(e)),F(0)}},[i]);let A=E[R]||[],_=(0,a.useRef)(null),V=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(A.length>0){let e=[...A].sort(()=>Math.random()-.5);p(e.map((e,i)=>({...e,id:i}))),v(e.map((e,i)=>({...e,id:i})).sort(()=>Math.random()-.5)),b({pinyin:null,nghia:null}),C([]),k({id:null,hanziId:null,type:null}),D([]),M(!1)}},[R,E]);let O=async(e,i)=>{try{await Promise.all([(0,m.Pf)(e,i)])}catch(i){console.error("Lỗi update:",i);let e={message:"Lỗi update: "+i.message};d().fire(i.message,"","info"),setState(i=>({...i,error:e}))}finally{}},W=async()=>{let e=Math.floor(1e3*(P+u/i.length))/1e3;await O("".concat(c,"/pinyin"),e),L(e)},U=(e,i)=>{let t={...f,[e]:i};b(t),t.pinyin&&t.nghia&&!G&&J(t)},J=async e=>{var i,n;I(!0);let{pinyin:a,nghia:l}=e,s=a.id===l.id,c=()=>{I(!1),b({pinyin:null,nghia:null}),k({id:null,hanziId:null,type:null})};if(s){N(l),z("https://hocdichchuhan.github.io/img/gif/correct".concat(Math.floor(3*Math.random())+1,".gif"));let e=a.id;k({id:e,hanziId:e,type:"correct"}),null===(i=_.current)||void 0===i||i.play(),D(i=>[...i,e]),setTimeout(()=>{(0,h.Z)(l.gianthe,10+l.id)},300),await W(),setTimeout(()=>{C(i=>{let n=[...i,e];return n.length===A.length&&(M(!0),setTimeout(()=>{R+1<E.length?F(R+1):null==t||t()},500)),n}),D(i=>i.filter(i=>i!==e)),c()},500)}else z("https://hocdichchuhan.github.io/img/gif/wrong".concat(Math.floor(5*Math.random())+1,".gif")),k({id:a.id,hanziId:l.id,type:"wrong"}),null===(n=V.current)||void 0===n||n.play(),setTimeout(()=>{c()},800)},q=(e,i)=>{var t;let n=(null===(t=f[i])||void 0===t?void 0:t.id)===e.id,a=S.includes(e.id),l=Z.includes(e.id),s="pinyin"===i&&w.id===e.id||"nghia"===i&&w.hanziId===e.id;return l?"matchedCorrect bg-green-500 border-green-500 text-white":a?"bg-blue-500 border-green-500 text-white":s&&"wrong"===w.type?"matchedWrong border-red-500 animate-shake":s&&"correct"===w.type?"border-green-500 animate-pulse":n?"bg-blue-400 border-blue-400":"bg-black border-gray-500 text-white"};return(0,n.jsxs)("div",{className:"MatchingGameContaniner",children:[(0,n.jsx)("audio",{ref:_,src:r.Z}),(0,n.jsx)("audio",{ref:V,src:o.Z}),(0,n.jsxs)("div",{className:"d-flex row align-items-center justify-content-center",children:[(0,n.jsx)("div",{className:"col-12 col-md-6 MatchingGameContaniner",children:(0,n.jsx)(l.default,{src:T,alt:"Loading...",width:200,height:200,style:{objectFit:"contain"}})}),y.tiengtrung&&(0,n.jsxs)("div",{className:"col-12 col-md-6 MatchingGameContaniner",children:[(0,n.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-2",children:[(0,n.jsx)("h2",{className:"text-danger",children:s?y.gianthe:y.tiengtrung||null}),(0,n.jsx)(g.Z,{lassName:"btn-phatamthanh",variant:"danger",onClick:()=>(0,h.Z)(y.gianthe,3),children:"\uD83D\uDD0A"})]}),y.hanviet&&(0,n.jsxs)("h2",{children:["H\xe1n Việt: ",(0,n.jsx)("strong",{className:"text-danger",children:y.hanviet||null})]}),(0,n.jsxs)("h2",{className:"text-primary",children:["Pinyin: ",(0,n.jsx)("strong",{children:y.pinyin||null})]}),(0,n.jsxs)("h2",{children:["Nghĩa ",(0,n.jsx)("strong",{className:"text-primary",children:y.nghia||null})]})]})]}),(0,n.jsxs)("div",{className:"flex flex-col flex justify-center items-center h-full",children:[(0,n.jsx)("h3",{className:"mb-2",children:"Nghĩa"}),j.map((e,i)=>(0,n.jsx)("button",{className:"relative flex items-center justify-between w-full py-2 px-4 my-1 rounded border transition-all duration-300 fs-3 ".concat(q(e,"nghia")),onClick:()=>U("nghia",e,i),disabled:S.includes(e.id),children:e.nghia},e.id))]}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("h3",{className:"mb-2",children:"Pinyin"}),x.map((e,i)=>(0,n.jsx)("button",{className:"relative flex items-center justify-between w-full py-2 px-4 my-1 rounded border transition-all duration-300 fs-3  ".concat(q(e,"pinyin")),onClick:()=>U("pinyin",e,i),disabled:S.includes(e.id),children:e.pinyin},e.id))]})]})}var p=t(16793),j=t(25527),v=t(3492),f=t(9761);function b(e){let{items:i,onFinish:t,isGianthe:s,pathBaitap:c,diem:u=100}=e,[d,m]=(0,a.useState)(0),[x,p]=(0,a.useState)(""),[j,v]=(0,a.useState)(""),[b,y]=(0,a.useState)("https://hocdichchuhan.github.io/img/gif/correct4.gif"),[N,S]=(0,a.useState)("https://hocdichchuhan.github.io/img/gif/correct4.gif"),[C,w]=(0,a.useState)(!1),[k,Z]=(0,a.useState)(!1),D=(0,a.useRef)(null),B=(0,a.useRef)(null),M=i[d];i[d-1],(0,a.useEffect)(()=>{(async()=>{S(await (0,f.o)(M.nghia))})()},[M.gianthe]);let T=()=>{Z(!1),d>=i.length-1?null==t||t():m(d+1)},z=()=>{d>0&&m(d-1)};return i&&i.length&&i[d]?(0,n.jsxs)("div",{className:"MatchingGameContaniner",children:[(0,n.jsx)("audio",{ref:D,src:r.Z}),(0,n.jsx)("audio",{ref:B,src:o.Z}),(0,n.jsx)("div",{className:"row align-items-center justify-content-center",style:{width:"100%"},children:M.tiengtrung&&(0,n.jsxs)("div",{className:"MatchingGameContaniner",children:[(0,n.jsx)("div",{className:"image-container",children:(0,n.jsx)(l.default,{src:N,alt:"H\xecnh ảnh",width:400,height:400,className:"image-styled",style:{objectFit:"cover"}})}),k&&(0,n.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-2",children:[(0,n.jsxs)("h2",{children:["Tiếng Trung: ",(0,n.jsx)("strong",{className:"text-danger",children:s?M.gianthe:M.tiengtrung||null})," "]}),(0,n.jsx)(g.Z,{variant:"danger",onClick:()=>(0,h.Z)(M.gianthe,d+100),children:"\uD83D\uDD0A"})]}),M.hanviet&&(0,n.jsxs)("h2",{children:["H\xe1n Việt: ",(0,n.jsx)("strong",{className:"text-success",children:M.hanviet||null})]}),k&&(0,n.jsxs)("h2",{children:["Pinyin: ",(0,n.jsx)("strong",{className:"text-primary",children:M.pinyin||null})]}),(0,n.jsxs)("h2",{children:["Nghĩa: ",(0,n.jsx)("strong",{children:M.nghia||null})]}),(0,n.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-2",children:[(0,n.jsx)(g.Z,{className:"p-3",variant:"secondary",onClick:()=>z(),children:"Previous"}),k?(0,n.jsx)(g.Z,{className:"p-3",variant:"primary",onClick:()=>T(),children:"Next"}):(0,n.jsx)(g.Z,{variant:"warning",className:"p-3",onClick:()=>Z(!0),children:"Đ\xe1p \xe1n"})]})]})})]}):(0,n.jsx)("div",{children:"Đang tải dữ liệu..."})}t(31467);var y=t(9460),N=t(28996),S=t(87138);function C(e){let{title:i,link:t,onClose:a}=e;return(0,n.jsx)("div",{className:"loadingData",onClick:()=>{a&&a()},children:(0,n.jsxs)("div",{className:"loadingData-container",onClick:e=>{e.stopPropagation()},children:[(0,n.jsx)(l.default,{src:"https://hocdichchuhan.github.io/img/gif/correct.gif",alt:"Loading...",width:200,height:200,style:{objectFit:"contain"}}),(0,n.jsx)("h2",{children:i}),(0,n.jsx)(S.default,{className:"itemCard-title-luanngu",href:t,target:"_self",children:(0,n.jsx)(g.Z,{className:"btn-phatamthanh",variant:"warning",children:"B\xe0i tiếp theo"})})]})})}var w=e=>{let{baihoc:i,id:t,nguphaps:l,isGianthe:r,hsk:o,pathBaitap:h}=e,[u,g]=(0,a.useState)(!1),[f,S]=(0,a.useState)([]),w=(0,a.useRef)([]),[k,Z]=(0,a.useState)(null),[D,B]=(0,a.useState)(!1),[M,T]=(0,a.useState)(),[z,G]=(0,a.useState)(),I=(0,a.useRef)(null),[P,L]=(0,a.useState)(0),[E,H]=(0,a.useState)(0),[R,F]=(0,a.useState)(0),[A,_]=(0,a.useState)(0),[V,O]=(0,a.useState)(!1),[W,U]=(0,a.useState)(!1),[J,q]=(0,a.useState)(!1),[K,Q]=(0,a.useState)(!1),[X,Y]=(0,a.useState)(!0),[$,ee]=(0,a.useState)(0),[ei,et]=(0,a.useState)(0),[en,ea]=(0,a.useState)(0),[el,es]=(0,a.useState)(0),[ec,er]=(0,a.useState)(0),[eo,eh]=(0,a.useState)(0),[eu,ed]=(0,a.useState)("tumoi"),eg=t.replace(/b0/gi,""),em=async(e,i)=>{try{await Promise.all([(0,m.Pf)(e,i)])}catch(i){console.error("Lỗi update:",i);let e={message:"Lỗi update: "+i.message};d().fire(i.message,"","info"),setState(i=>({...i,error:e}))}finally{}},ex=async()=>{O(!0),ed("nghia")},ep=()=>{var e,t,a;let l=null===(a=i.hoithoai)||void 0===a?void 0:null===(t=a.map(e=>e.tumoi))||void 0===t?void 0:null===(e=t.filter(Boolean))||void 0===e?void 0:e.flat();return(0,n.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:l.length>0&&(0,n.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,n.jsx)("h2",{children:"B\xe0i tập 1: T\xecm \xe2m pinyin của từ tiếng Trung."}),(0,n.jsx)("hr",{}),(0,n.jsx)(p.Z,{tumoi:l,onFinish:()=>ex(),isGianthe:r,pathBaitap:h})]})})},ej=()=>{var e,t,a;let l=null===(a=i.hoithoai)||void 0===a?void 0:null===(t=a.map(e=>e.tumoi))||void 0===t?void 0:null===(e=t.filter(Boolean))||void 0===e?void 0:e.flat();return(0,n.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:l.length>0&&(0,n.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,n.jsx)("h2",{children:"B\xe0i tập 2: T\xecm \xfd nghĩa của từ tiếng Trung."}),(0,n.jsx)("hr",{}),(0,n.jsx)(c.Z,{tumoi:l,onFinish:()=>ex(),isGianthe:r,pathBaitap:h})]})})},ev=()=>{var e,t,a;let l=null===(a=i.hoithoai)||void 0===a?void 0:null===(t=a.map(e=>e.tumoi))||void 0===t?void 0:null===(e=t.filter(Boolean))||void 0===e?void 0:e.flat();return(0,n.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:l.length>0&&(0,n.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,n.jsx)("h2",{children:"B\xe0i tập: T\xecm \xfd nghĩa của từ Pinyin."}),(0,n.jsx)("hr",{}),(0,n.jsx)(x,{tumoi:l,onFinish:()=>{ed("doc")},isGianthe:r,pathBaitap:h})]})})},ef=async()=>{U(!0),ed("nghe")},eb=()=>{var e,t,a;let l=null===(a=i.hoithoai)||void 0===a?void 0:null===(t=a.map(e=>e.tumoi))||void 0===t?void 0:null===(e=t.filter(Boolean))||void 0===e?void 0:e.flat();return(0,n.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:l.length>0&&(0,n.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,n.jsx)("h2",{children:"B\xe0i tập 3: Nhập từ vựng tiếng Trung c\xf3 nghĩa như đề đ\xe3 cho v\xe0o \xf4 trống:"}),(0,n.jsx)("hr",{}),(0,n.jsx)(j.Z,{items:l,onFinish:()=>ef(),isGianthe:r,pathBaitap:h})]})})},ey=()=>{var e,t,a;let l=null===(a=i.hoithoai)||void 0===a?void 0:null===(t=a.map(e=>e.tumoi))||void 0===t?void 0:null===(e=t.filter(Boolean))||void 0===e?void 0:e.flat();return(0,n.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:l.length>0&&(0,n.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,n.jsxs)("h2",{children:["\xd4n tập từ mới",E+1,":"]}),(0,n.jsx)("hr",{}),(0,n.jsx)(b,{items:l,onFinish:()=>ed("pinyin"),isGianthe:r,pathBaitap:h})]})})},eN=async()=>{let e=Math.floor(1e3*(el+100/i.speak.length))/1e3;await em("".concat(h,"/noi"),e),es(e)},eS=()=>{ed("cauhoi")},eC=()=>(console.log(i.speak[0]),(0,n.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:i.speak&&(0,n.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,n.jsx)("h2",{children:"B\xe0i tập 5: Mời bạn ph\xe1t \xe2m lại c\xe2u tiếng Trung sau đ\xe2y:"}),(0,n.jsx)("hr",{}),(0,n.jsx)(v.Z,{validCau:i.speak,isGianthe:r,onNext:()=>eS(),congdiem:()=>eN(),pathBaitap:h})]})})),ew=()=>{if(!i.listen)return null;let e=i.listen;return console.log(e),(0,n.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:(0,n.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,n.jsx)("h2",{children:"B\xe0i tập 4: Ho\xe0n th\xe0nh c\xe2u thoại m\xe0 bạn nghe được:"}),(0,n.jsx)("hr",{}),(0,n.jsx)(y.Z,{validCau:e,isGianthe:r,pathBaitap:h,onNext:()=>ed("noi")})]})})},ek=()=>{if(!i.cauhoi)return null;let e=i.cauhoi;return console.log(i.cauhoi),(0,n.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:(0,n.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,n.jsx)("h2",{children:"B\xe0i tập 6: Trả lời c\xe2u hỏi trong b\xe0i"}),(0,n.jsx)("hr",{}),(0,n.jsx)(N.Z,{dsCau:e,isGianthe:r,pathBaitap:h,hsk:o,id:t,onNext:()=>q(!0)})]})})};return i?(0,n.jsxs)("div",{className:"baihocgiaotiep-container",children:[(0,n.jsx)("div",{className:"MatchingGameContaniner",children:(0,n.jsxs)("div",{className:"flex gap-2 mb-4 ",children:[(0,n.jsx)("button",{onClick:()=>ed("tumoi"),className:"btn ".concat("tumoi"===eu?"btn-primary":"btn-outline-secondary"),children:"生词 - Từ Mới"}),(0,n.jsx)("button",{onClick:()=>ed("pinyin"),className:"btn ".concat("pinyin"===eu?"btn-primary":"btn-outline-secondary"),children:"拼音 - Pinyin"}),(0,n.jsx)("button",{onClick:()=>ed("doc"),className:"btn ".concat("doc"===eu?"btn-primary":"btn-outline-secondary"),children:"阅读 - Đọc"}),(0,n.jsx)("button",{onClick:()=>ed("nghia"),className:"btn ".concat("nghia"===eu?"btn-primary":"btn-outline-secondary"),children:"意义 - Nghĩa"}),(0,n.jsx)("button",{onClick:()=>ed("viet"),className:"btn ".concat("viet"===eu?"btn-primary":"btn-outline-secondary"),children:"写字 - Viết"}),(0,n.jsx)("button",{onClick:()=>ed("nghe"),className:"btn ".concat("nghe"===eu?"btn-primary":"btn-outline-secondary"),children:"听力 - Nghe"}),(0,n.jsx)("button",{onClick:()=>ed("noi"),className:"btn ".concat("noi"===eu?"btn-primary":"btn-outline-secondary"),children:"说话 - N\xf3i"}),i.cauhoi&&(0,n.jsx)("button",{onClick:()=>ed("cauhoi"),className:"btn ".concat("cauhoi"===eu?"btn-primary":"btn-outline-secondary"),children:"问答 - Vấn Đ\xe1p"})]})}),(()=>{if(J&&X){let e=t.replace(/\d+/,e=>String(Number(e)+1).padStart(e.length,"0"));return(0,n.jsx)(C,{link:"/hsk/".concat(o,"/").concat(e),title:"Ch\xfac mừng bạn đ\xe3 ho\xe0n th\xe0nh b\xe0i tập. C\xf9ng học b\xe0i tiếp theo nh\xe9!",onClose:()=>Y(!1)})}})(),(0,n.jsxs)("h1",{className:"baihocgiaotiep-title baihocgiaotiep-title-number",children:["B\xe0i ",eg,": "]}),(0,n.jsx)("h1",{className:"baihocgiaotiep-title baihocgiaotiep-title-tiengtrung tiengtrungText",children:r?i.gianthe:i.tieude}),(0,n.jsxs)("h1",{className:"baihocgiaotiep-title baihocgiaotiep-title-tieude",children:["(",i.tieudedich,")"]}),(0,n.jsx)(s.Z,{showStrokeArea:D,activeCharacter:k,strokes:f,pathsRef:w,isShowImage:u,dataTranslate:z,dataWrite:M,strokeAreaRef:I}),(0,n.jsx)("span",{className:"baihocgiaotiep-pinyin",children:i.tieudepinyin}),(0,n.jsx)("div",{children:(()=>{switch(eu){case"pinyin":return(0,n.jsx)(ev,{});case"nghia":return(0,n.jsx)(ej,{});case"tumoi":return(0,n.jsx)(ey,{});case"nghe":return(0,n.jsx)(ew,{});case"noi":return(0,n.jsx)(eC,{});case"doc":return(0,n.jsx)(ep,{});case"viet":return(0,n.jsx)(eb,{});case"cauhoi":return(0,n.jsx)(ek,{});default:return null}})()})]}):null}},46289:function(e,i,t){t.d(i,{Z:function(){return g}});var n=t(57437),a=t(2265),l=t(23394),s=t(85839),c=t(89745),r=t(64379),o=t.n(r),h=t(66648),u=t(12808),d=t(65606);function g(e){let{tumoi:i,onFinish:t,isGianthe:r,pathBaitap:g,diem:m=100}=e,[x,p]=(0,a.useState)([]),[j,v]=(0,a.useState)([]),[f,b]=(0,a.useState)({nghia:null,hanzi:null}),[y,N]=(0,a.useState)({pinyin:null,hanzi:null,nghia:null,gianthe:null}),[S,C]=(0,a.useState)([]),[w,k]=(0,a.useState)({id:null,hanziId:null,type:null}),[Z,D]=(0,a.useState)([]),[B,M]=(0,a.useState)(!1),[T,z]=(0,a.useState)("https://hocdichchuhan.github.io/img/gif/correct4.gif"),[G,I]=(0,a.useState)(!1),[P,L]=(0,a.useState)(0),[E,H]=(0,a.useState)([]),[R,F]=(0,a.useState)(0);(0,a.useEffect)(()=>{if(i&&i.length>0){let e={};i.forEach(i=>{let t=i.gianthe.length;e[t]||(e[t]=[]),e[t].push(i)}),H(Object.values(e)),F(0)}},[i]);let A=E[R]||[],_=(0,a.useRef)(null),V=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(A.length>0){let e=[...A].sort(()=>Math.random()-.5);p(e.map((e,i)=>({...e,id:i}))),v(e.map((e,i)=>({...e,id:i})).sort(()=>Math.random()-.5)),b({nghia:null,hanzi:null}),C([]),k({id:null,hanziId:null,type:null}),D([]),M(!1)}},[R,E]);let O=async(e,i)=>{try{await Promise.all([(0,d.Pf)(e,i)])}catch(i){console.error("Lỗi update:",i);let e={message:"Lỗi update: "+i.message};o().fire(i.message,"","info"),setState(i=>({...i,error:e}))}finally{}},W=async()=>{let e=Math.floor(1e3*(P+m/i.length))/1e3;await O("".concat(g,"/nghia"),e),L(e)},U=(e,i)=>{let t={...f,[e]:i};b(t),console.log(t),t.nghia&&t.hanzi&&!G&&J(t)},J=async e=>{var i,n;I(!0);let{nghia:a,hanzi:l}=e,s=a.id===l.id;console.log(a);let r=()=>{I(!1),b({nghia:null,hanzi:null}),k({id:null,hanziId:null,type:null})};if(s){N(l),z("https://hocdichchuhan.github.io/img/gif/correct".concat(Math.floor(3*Math.random())+1,".gif"));let e=a.id;k({id:e,hanziId:e,type:"correct"}),null===(i=_.current)||void 0===i||i.play(),D(i=>[...i,e]),setTimeout(()=>{(0,c.Z)(l.gianthe,10+l.id)},300),await W(),setTimeout(()=>{C(i=>{let n=[...i,e];return n.length===A.length&&(M(!0),setTimeout(()=>{R+1<E.length?F(R+1):null==t||t()},500)),n}),D(i=>i.filter(i=>i!==e)),r()},500)}else z("https://hocdichchuhan.github.io/img/gif/wrong".concat(Math.floor(5*Math.random())+1,".gif")),k({id:a.id,hanziId:l.id,type:"wrong"}),null===(n=V.current)||void 0===n||n.play(),setTimeout(()=>{r()},800)},q=(e,i)=>{var t;let n=(null===(t=f[i])||void 0===t?void 0:t.id)===e.id,a=S.includes(e.id),l=Z.includes(e.id),s="pinyin"===i&&w.id===e.id||"nghia"===i&&w.id===e.id||"hanzi"===i&&w.hanziId===e.id;return l?"matchedCorrect bg-green-500 border-green-500 text-white":a?"bg-blue-500 border-green-500 text-white":s&&"wrong"===w.type?"matchedWrong border-red-500 animate-shake":s&&"correct"===w.type?"border-green-500 animate-pulse":n?"bg-blue-400 border-blue-400":"bg-black border-gray-500 text-white"};return(0,n.jsxs)("div",{className:"MatchingGameContaniner",children:[(0,n.jsx)("audio",{ref:_,src:l.Z}),(0,n.jsx)("audio",{ref:V,src:s.Z}),(0,n.jsxs)("div",{className:"d-flex row align-items-center justify-content-center",children:[(0,n.jsx)("div",{className:"col-12 col-md-6 MatchingGameContaniner",children:(0,n.jsx)(h.default,{src:T,alt:"Loading...",width:200,height:200,style:{objectFit:"contain"}})}),y.tiengtrung&&(0,n.jsxs)("div",{className:"col-12 col-md-6 MatchingGameContaniner",children:[(0,n.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-2",children:[(0,n.jsx)("h2",{className:"text-danger",children:r?y.gianthe:y.tiengtrung||null}),(0,n.jsx)(u.Z,{lassName:"btn-phatamthanh",variant:"danger",onClick:()=>(0,c.Z)(y.gianthe,3),children:"\uD83D\uDD0A"})]}),(0,n.jsx)("h2",{className:"text-danger",children:y.pinyin||null}),(0,n.jsx)("h2",{className:"text-danger",children:y.nghia||null})]})]}),(0,n.jsxs)("div",{className:"flex flex-col flex justify-center items-center h-full",children:[(0,n.jsx)("h3",{className:"mb-2",children:"Chữ H\xe1n"}),j.map((e,i)=>(0,n.jsx)("button",{className:"relative flex items-center justify-between w-full py-2 px-4 my-1 rounded border transition-all duration-300 fs-3 ".concat(q(e,"hanzi")),onClick:()=>U("hanzi",e,i),disabled:S.includes(e.id),children:r?e.gianthe:e.tiengtrung},e.id))]}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("h3",{className:"mb-2",children:"Nghĩa"}),x.map((e,i)=>(0,n.jsx)("button",{className:"relative flex items-center justify-between w-full py-2 px-4 my-1 rounded border transition-all duration-300 fs-3 ".concat(q(e,"nghia")),onClick:()=>U("nghia",e,i),disabled:S.includes(e.id),children:e.nghia},e.id))]})]})}},28996:function(e,i,t){t.d(i,{Z:function(){return m}});var n=t(57437),a=t(2265),l=t(89745),s=t(60516),c=t(65606),r=t(12808),o=t(73137),h=t(23830),u=t(34231),d=t(64379),g=t.n(d);function m(e){let{dsCau:i,isGianthe:t,pathBaitap:d,hsk:m,id:x,onNext:p,isShowNghia:j=!0}=e,[v,f]=(0,a.useState)(null),[b,y]=(0,a.useState)({}),[N,S]=(0,a.useState)(!1),[C,w]=(0,a.useState)(!1),k=(e,i)=>{g().fire({icon:e,title:i,position:"center",showConfirmButton:!1,timer:1500,timerProgressBar:!0})};(0,a.useEffect)(()=>{let e=localStorage.getItem("userLogin");if(e){let t=JSON.parse(e);f(t),i.forEach(async(e,i)=>{let n="".concat(d,"/cauhoi/").concat(t.uid,"/").concat(i),a=await (0,s.U2)((0,s.iH)(c.db,n));a.exists()&&y(e=>({...e,[i]:{userInput:a.val().userInput||"",nghia:a.val().nghiacuanguoidung||""}}))})}},[i,d]);let Z=(e,i,t)=>{y(n=>({...n,[e]:{...n[e],[i]:t}}))},D=async()=>{if(v){for(let l=0;l<i.length;l++){var e,t,n,a;let r=i[l],o=(null===(t=b[l])||void 0===t?void 0:null===(e=t.userInput)||void 0===e?void 0:e.trim())||"",h=(null===(a=b[l])||void 0===a?void 0:null===(n=a.nghia)||void 0===n?void 0:n.trim())||"",u="".concat(d,"/cauhoi/").concat(v.uid,"/").concat(l);await (0,s.t8)((0,s.iH)(c.db,u),{userInput:o,nghia:r.nghia,hanviet:r.gianthe,nghiacuanguoidung:h,time:Date.now()})}k("success","Đ\xe3 lưu to\xe0n bộ b\xe0i l\xe0m!")}},B=async()=>{if(!v)return;console.log(123);let e="".concat(d,"/cauhoi/").concat(v.uid),t="user/baitap/".concat(v.uid,"/").concat(m,"_").concat(x),n=Date.now();try{let a=await (0,s.U2)((0,s.iH)(c.db,e));if(a.exists()){let e=a.val(),l=i.map((i,t)=>{var a,l;return{tiengtrung:i.tiengtrung,gianthe:i.gianthe,pinyin:i.pinyin,nghia:i.nghia,cautraloi:(null===(a=e[t])||void 0===a?void 0:a.userInput)||"",nghiacuanguoidung:(null===(l=e[t])||void 0===l?void 0:l.nghiacuanguoidung)||"",time:n}});await (0,s.t8)((0,s.iH)(c.db,t),{hsk:m,id:x,timeSubmit:n,cauTraLoi:l}),k("success","Đ\xe3 gửi b\xe0i tập th\xe0nh c\xf4ng!"),p()}else k("warning","Chưa c\xf3 dữ liệu để gửi!")}catch(e){console.error("Lỗi:",e),k("error","Lỗi khi gửi b\xe0i tập!")}};return(0,n.jsxs)("div",{className:"container py-4",children:[(0,n.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,n.jsxs)("div",{className:"btn-group",children:[(0,n.jsx)(r.Z,{variant:"outline-primary",onClick:()=>S(!N),children:N?"Ẩn Pinyin":"Hiện Pinyin"}),j&&(0,n.jsx)(r.Z,{variant:"outline-danger",onClick:()=>w(!C),children:C?"Ẩn Nghĩa":"Hiện Nghĩa"})]}),(0,n.jsx)(r.Z,{variant:"success",onClick:B,children:"\uD83D\uDCE4 Gửi B\xe0i Tập"})]}),i.map((e,i)=>{var a,s;return(0,n.jsx)(o.Z,{className:"mb-4 shadow-sm",children:(0,n.jsxs)(o.Z.Body,{children:[(0,n.jsxs)("div",{className:"d-flex",children:[(0,n.jsxs)("h5",{className:"mb-3 text-primary fw-bold fs-3",children:["\uD83D\uDCDD C\xe2u ",i+1,": ",t?e.gianthe:e.tiengtrung]}),(0,n.jsx)(r.Z,{variant:"outline-secondary",onClick:()=>(0,l.Z)(e.gianthe),children:"\uD83D\uDD0A"})]}),N&&(0,n.jsxs)("div",{className:"text-muted mb-2",children:["\uD83D\uDCDA Pinyin: ",e.pinyin]}),C&&(0,n.jsxs)("div",{className:"mb-3",children:["\uD83D\uDCA1 Nghĩa: ",e.nghia]}),(0,n.jsxs)(h.Z.Group,{className:"mb-2",children:[(0,n.jsx)(h.Z.Label,{children:"Nhập c\xe2u trả lời của bạn:"}),(0,n.jsx)(u.Z,{value:(null===(a=b[i])||void 0===a?void 0:a.userInput)||"",className:"form-control fs-3",placeholder:"你的回答",onChange:e=>Z(i,"userInput",e.target.value)})]}),(0,n.jsxs)(h.Z.Group,{className:"mb-3",children:[(0,n.jsx)(h.Z.Label,{children:"Nhập nghĩa của c\xe2u trả lời:"}),(0,n.jsx)(u.Z,{value:(null===(s=b[i])||void 0===s?void 0:s.nghia)||"",className:"form-control fs-5",placeholder:"Nhập nghĩa của c\xe2u trả lời",onChange:e=>Z(i,"nghia",e.target.value)})]})]})},i)}),(0,n.jsxs)("div",{className:"d-flex justify-content-end gap-2 mt-4",children:[(0,n.jsx)(r.Z,{variant:"outline-secondary",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"⬆️ Về đầu"}),(0,n.jsx)(r.Z,{variant:"primary",onClick:()=>D(),children:"\uD83D\uDCBE Lưu tạm thời"}),(0,n.jsx)(r.Z,{variant:"success",onClick:()=>B(),children:"\uD83D\uDCE4 Gửi B\xe0i Tập"})]})]})}}}]);