(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5938],{5926:function(e,t,a){Promise.resolve().then(a.bind(a,7322))},7322:function(e,t,a){"use strict";a.d(t,{default:function(){return f}});var s=a(7437),n=a(2265),l=a(8708),i=a(2808);a(4379);var r=a(5606);a(8833),a(494),a(1795);var c=a(9768),o=a(7138),d=a(6648);a(1243);var u=a(3508);a(4109),a(8971);var h=a(6854);a(9992);var m=a(5776),v=a(7593);function f(e){var t;let{hsk:a}=e,[f,x]=(0,n.useState)(!0),[g,j]=(0,n.useState)(),[p,N]=(0,n.useState)(),[w,S]=(0,n.useState)(),[b,y]=(0,n.useState)(!1),[C,k]=(0,n.useState)(!1),[O,D]=(0,n.useState)(!1),[T,E]=(0,n.useState)(!1);(0,n.useEffect)(()=>{_();let e=(0,u.GJ)(),t=(0,u.bg)();k(e),y(t)},[]),(0,n.useEffect)(()=>{sessionStorage.getItem("hasShownUseralldiem")||(E(!0),sessionStorage.setItem("hasShownUseralldiem","true"))},[]);let _=async()=>{try{x(!0);var e=JSON.parse(localStorage.getItem("allData"));e||await L(),e=await JSON.parse(localStorage.getItem("allData"));let t=await e.find(e=>"hsk"===e.key);if(!t||!t.value){console.error("No valid data found for 'phatam'");return}let s=t.value[a];s&&N(s),x(!1)}catch(e){x(!1),console.error("Error getting dichthuat data: ",e)}};g&&(t=g.split("="))[1]&&t[1].split("&")[0];let L=async()=>{try{let e=(await (0,r.UD)("/users")).map(e=>{if("account"===e.key&&e.value){let t={};for(let a in e.value)if(e.value.hasOwnProperty(a)){let{username:s,password:n,...l}=e.value[a];t[a]=l}return{...e,value:t}}return e});await localStorage.setItem("allData",JSON.stringify(e))}catch(e){console.error("Error fetching data:",e)}};return f?(0,s.jsx)(c.Z,{}):(0,s.jsx)(l.Z,{body:(0,s.jsxs)("div",{className:"giaotiepContainer container",children:[(0,s.jsx)(o.default,{className:"itemCard-title-luanngu",href:"/hsk/".concat(a,"/edit/b001"),target:"_self",children:C&&(0,s.jsx)(i.Z,{className:"btn-phatamthanh",variant:"warning",children:"Edit"})}),p?(0,s.jsx)("div",{className:"",children:(0,s.jsxs)("div",{className:"baihoc-containerHSK row",children:[(0,s.jsx)(v.Z,{show:T,onClose:()=>E(!1),children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-12 col-md-6",children:(0,s.jsx)(h.Z,{})}),(0,s.jsx)("div",{className:"col-12 col-md-6",children:(0,s.jsx)(m.Z,{})})]})}),Object.entries(p).map((e,t)=>{let[n,l]=e;return(0,s.jsx)("div",{className:"col-12 col-md-4",style:{marginTop:"20px"},children:(0,s.jsx)(o.default,{className:"itemCard-title-luanngu",href:"/hsk/".concat(a,"/").concat(n),target:"_self",children:(0,s.jsx)("div",{className:"itemCard-container",children:(0,s.jsxs)("div",{className:"itemCard-content",children:[(0,s.jsxs)("div",{className:"itemCard-content-title",children:[(0,s.jsxs)("span",{children:["B\xe0i ",t+1,":  "]}),(0,s.jsx)("span",{className:"tiengtrungText",children:l.tieude})]}),(0,s.jsx)("div",{className:"itemCard-content-chuthich",children:(0,s.jsx)("span",{children:l.tieudedich})}),(0,s.jsx)("div",{className:"image-container",children:(0,s.jsx)(d.default,{src:"https://hocdichchuhan.github.io/img/".concat(a,"/").concat(n,"_ht1.png"),alt:"H\xecnh ảnh",width:250,height:250,className:"image-styled",style:{objectFit:"cover"}})})]})})})},n)})]})}):null]})})}},5776:function(e,t,a){"use strict";a.d(t,{Z:function(){return v}});var s=a(7437),n=a(2265),l=a(5606),i=a(516),r=a(6800),c=a.n(r),o=a(2574);let d=n.forwardRef((e,t)=>{let{bsPrefix:a,variant:n,animation:l="border",size:i,as:r="div",className:d,...u}=e;a=(0,o.vE)(a,"spinner");let h="".concat(a,"-").concat(l);return(0,s.jsx)(r,{ref:t,...u,className:c()(d,h,i&&"".concat(h,"-").concat(i),n&&"text-".concat(n))})});d.displayName="Spinner";var u=a(6648);function h(e){return"".concat(Math.floor(e/3600),"h ").concat(Math.floor(e%3600/60),"m")}function m(){let e=new Date;return Array.from({length:7}).map((t,a)=>{let s=new Date(e);return s.setDate(e.getDate()-a),s.toISOString().slice(0,10)})}function v(){let[e,t]=(0,n.useState)([]),[a,r]=(0,n.useState)(!0),[c,o]=(0,n.useState)(""),[v,f]=(0,n.useState)(null),[x,g]=(0,n.useState)({});(0,n.useEffect)(()=>{let e=(0,i.iH)(l.db,"user/account"),a=(0,i.jM)(e,async e=>{if(!e.exists())return;let a=e.val(),s=m();for(let e of Object.keys(a)){let n=a[e],r=(0,i.iH)(l.db,"user/activityLogs/".concat(e));(0,i.jM)(r,a=>{let l=!1,i=0;if(a.exists()){let e=a.val();for(let t of s){var r,c;(null===(r=e[t])||void 0===r?void 0:r.totalSeconds)&&(i+=e[t].totalSeconds),(null===(c=e[t])||void 0===c?void 0:c.isOnline)&&(l=!0)}}t(t=>[...t.filter(t=>t.uid!==e),{uid:e,name:n.name,email:n.email,photoURL:n.photoURL,isOnline:l,totalSecondsWeek:i}].sort((e,t)=>e.isOnline!==t.isOnline?t.isOnline-e.isOnline:t.totalSecondsWeek-e.totalSecondsWeek))})}r(!1)});return()=>a()},[]);let j=e.filter(e=>{var t,a;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(c))||(null===(a=e.email)||void 0===a?void 0:a.toLowerCase().includes(c))});return a?(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(d,{animation:"border"})," Đang tải..."]}):(0,s.jsxs)("div",{className:"w-full max-w-md mx-auto mt-4 shadow rounded-xl p-3",style:{width:"100%",cursor:"pointer",borderRadius:"10px",backgroundColor:"white"},children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-center mb-4",children:"\uD83C\uDF96 Thời Gian Học Tập \uD83C\uDF96"}),(0,s.jsx)("input",{type:"text",className:"form-control mb-3",placeholder:"T\xecm kiếm theo t\xean...",value:c,onChange:e=>o(e.target.value.toLowerCase())}),j.map((e,t)=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"d-flex flex-wrap align-items-center justify-content-between p-3 border rounded mb-1 shadow-sm",style:{backgroundColor:"white"},onClick:()=>{if((null==v?void 0:v.uid)===e.uid)f(null),g({});else{f(e);let t=(0,i.iH)(l.db,"user/activityLogs/".concat(e.uid));(0,i.jM)(t,e=>{g(e.val()||{})})}},children:[(0,s.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,s.jsx)(u.default,{src:e.photoURL||"/default-avatar.png",alt:"avatar",width:40,height:40,className:"rounded-circle border"}),(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"fw-semibold",children:e.name})}),(0,s.jsx)("div",{className:"ms-2",style:{width:10,height:10,borderRadius:"50%",backgroundColor:e.isOnline?"green":"red"},title:e.isOnline?"Đang online":"Offline"})]}),(0,s.jsx)("div",{className:"fw-semibold text-danger",children:h(e.totalSecondsWeek)})]}),(null==v?void 0:v.uid)===e.uid&&(0,s.jsx)("div",{className:"mt-2 px-3 pb-3",children:(0,s.jsx)("ul",{className:"list-group",children:m().map(e=>{var t;let a=new Date(e),n=["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ S\xe1u","Thứ Bảy"][a.getDay()],l="".concat(a.getDate(),"/").concat(a.getMonth()+1),i=null===(t=x[e])||void 0===t?void 0:t.totalSeconds;return(0,s.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{children:n})," (",l,")"]}),(0,s.jsx)("span",{className:i?"":"text-danger",children:i?h(i):"Kh\xf4ng học tập"})]},e)})})})]},t))]})}}},function(e){e.O(0,[621,4358,7481,9208,9461,5617,7138,7143,8472,609,6901,8708,4547,1682,3913,3832,9511,2971,7023,1744],function(){return e(e.s=5926)}),_N_E=e.O()}]);