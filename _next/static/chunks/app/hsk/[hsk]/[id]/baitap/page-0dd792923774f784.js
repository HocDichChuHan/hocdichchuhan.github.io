(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1265],{20370:function(e,a,n){Promise.resolve().then(n.bind(n,64266))},64266:function(e,a,n){"use strict";n.d(a,{default:function(){return y}});var i=n(57437),t=n(2265),s=n(98708),l=n(12808),c=n(64379),r=n.n(c),o=n(65606);n(58833),n(10494),n(91795);var u=n(19768),h=n(87138);n(66648),n(31243);var d=n(23508);n(84109);var m=n(85151);n(39898);var g=n(1725),x=n(27220),p=n(60516);function j(e){let{hsk:a,id:n}=e,[s,l]=(0,t.useState)([]);return(0,t.useEffect)(()=>{let e=(0,p.iH)(o.db,"/users/hsk/".concat(a)),i=(0,p.jM)(e,e=>{if(e.exists()){let a=e.val(),i=Object.keys(a).filter(e=>parseInt(e.replace("b",""))<=parseInt(n.replace("b",""))),t=[];i.forEach(e=>{let n=a[e];Array.isArray(null==n?void 0:n.hoithoai)&&n.hoithoai.forEach(a=>{Array.isArray(null==a?void 0:a.tumoi)&&a.tumoi.forEach(a=>{t.push({...a,bai:e})})})});let s={};t.forEach(e=>{s[e.tiengtrung]||(s[e.tiengtrung]=e)});let c=Object.values(s);c.sort((e,a)=>e.pinyin.localeCompare(a.pinyin)),l(c)}else r().fire({icon:"info",title:"Kh\xf4ng c\xf3 dữ liệu",timer:1500,toast:!1,position:"center",showConfirmButton:!1})});return()=>i()},[a,n]),(0,i.jsxs)("div",{className:"container py-4",children:[(0,i.jsxs)("h3",{className:"mb-4 sticky-top bg-light py-2",children:["\uD83D\uDCCA Danh s\xe1ch từ mới ",a.toUpperCase()," t\xednh đến B\xe0i ",parseInt(n.replace("b",""))]}),(0,i.jsx)("div",{className:"list-group",children:s.map((e,a)=>(0,i.jsx)("div",{className:"list-group-item",children:(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("strong",{className:"fs-3",children:[a+1,". ",e.tiengtrung,"  "]}),(0,i.jsxs)("strong",{className:"fs-5",children:["(",e.pinyin,"):   "]}),(0,i.jsx)("span",{className:"fs-5",children:e.nghia})]}),(0,i.jsx)("span",{className:"badge bg-primary ",children:"B\xe0i ".concat(e.bai.replace("b",""))})]})},a))})]})}var f=n(16463),v=n(46854);n(49992);var b=n(27593),N=n(45776);function y(e){var a;let{id:n,hsk:c}=e,[p,y]=(0,t.useState)(!0),[w,k]=(0,t.useState)(),[C,S]=(0,t.useState)(),[D,q]=(0,t.useState)(),[M,z]=(0,t.useState)(),[Z,E]=(0,t.useState)([]),[O,A]=(0,t.useState)([]),[T,R]=(0,t.useState)(!1),[I,L]=(0,t.useState)(!1),[B,_]=(0,t.useState)(!1),[U,G]=(0,t.useState)([]),J=(0,t.useRef)([]),[P,F]=(0,t.useState)(null),[H,K]=(0,t.useState)(!1),[V,X]=(0,t.useState)(),[Y,W]=(0,t.useState)(),Q=(0,t.useRef)(null),[$,ee]=(0,t.useState)(!1),ea=(0,f.useRouter)(),[en,ei]=(0,t.useState)(!1),[et,es]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(0,d.sq)()?y(!1):ea.push("/hsk/".concat(c,"/").concat(n))},[]),(0,t.useEffect)(()=>{el();let e=(0,d.GJ)(),a=(0,d.bg)();L(e),R(a);let n=localStorage.getItem("isGianthe");null!==n&&ee(JSON.parse(n))},[]),(0,t.useEffect)(()=>{sessionStorage.getItem("hasShownUseralldiem")||(ei(!0),sessionStorage.setItem("hasShownUseralldiem","true"))},[]);let el=async()=>{try{y(!0);var e=JSON.parse(localStorage.getItem("allData"));e||await ec(),e=await JSON.parse(localStorage.getItem("allData"));let a=await e.find(e=>"hsk"===e.key),i=await a.value[c],t=await a.value[c][n];if(!a||!a.value){console.error("No valid data found for 'phatam'");return}t.nguphap&&E(t.nguphap),t.nguphapimg&&A(t.nguphapimg),S(a),q(t),z(i),y(!1)}catch(e){y(!1),console.error("Error getting dichthuat data: ",e)}};w&&(a=w.split("="))[1]&&a[1].split("&")[0];let ec=async()=>{try{let e=(await (0,o.UD)("/users")).map(e=>{if("account"===e.key&&e.value){let a={};for(let n in e.value)if(e.value.hasOwnProperty(n)){let{username:i,password:t,...s}=e.value[n];a[n]=s}return{...e,value:a}}return e});await localStorage.setItem("allData",JSON.stringify(e))}catch(e){console.error("Error fetching data:",e)}},er=async()=>{let e=$?"Phồn Thể 繁體中文":"Giản Thể 简体中文";await r().fire({position:"center",icon:"success",html:"<div style=\"font-size: 36px;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;\">Chuyển đổi qua ".concat(e,"</div>"),showConfirmButton:!1,timer:1e3});let a=!$;ee(a),localStorage.setItem("isGianthe",JSON.stringify(a))};return p?(0,i.jsx)(u.Z,{}):(0,i.jsx)(s.Z,{isStudy:!0,body:(0,i.jsxs)("div",{className:"",style:{backgroundColor:"#f3f3f3"},children:[(0,i.jsx)(h.default,{className:"itemCard-title-luanngu",href:"/hsk/".concat(c,"/edit/").concat(n),target:"_self",children:I&&(0,i.jsx)(l.Z,{className:"btn-phatamthanh",variant:"warning",children:"Edit"})}),(0,i.jsx)(b.Z,{show:en,onClose:()=>ei(!1),children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-12 col-md-6",children:(0,i.jsx)(v.Z,{})}),(0,i.jsx)("div",{className:"col-12 col-md-6",children:(0,i.jsx)(N.Z,{})})]})}),(0,i.jsx)(b.Z,{show:et,onClose:()=>es(!1),children:(0,i.jsx)(j,{hsk:c,id:n})}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-12 col-md-2 d-none d-md-inline",children:(0,i.jsx)(g.Z,{MucLuc:M,hsk:c})}),(0,i.jsxs)("div",{className:"col-12 col-md-7",children:[(0,i.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:$?(0,i.jsx)(l.Z,{className:"",variant:"danger",onClick:()=>er(),children:"Chuyển đổi qua Phồn Thể 繁體"}):(0,i.jsx)(l.Z,{className:"",variant:"primary",onClick:()=>er(),children:" Chuyển đổi qua Giản Thể 简体"})}),(()=>{if(!D)return null;let e=(0,d.sq)(),a="/user/account/".concat(e,"/diem/").concat(c,"_").concat(n);return(0,i.jsx)(m.Z,{baihoc:D,hsk:c,id:n,nguphaps:Z,isGianthe:$,pathBaitap:a,showStrokeArea:H,activeCharacter:P,strokes:U,pathsRef:J,isShowImage:B,dataTranslate:Y,dataWrite:V,strokeAreaRef:Q})})()]}),(0,i.jsxs)("div",{className:"col-12 col-md-3",children:[(0,i.jsx)(x.Z,{hsk:c,id:n}),(0,i.jsx)(l.Z,{variant:"info",onClick:()=>ei(!0),children:"Xem tất cả điểm"}),(0,i.jsx)(l.Z,{variant:"primary",className:"mt-3",onClick:()=>es(!0),children:"Xem tất từ mới đ\xe3 học"}),(0,i.jsx)("br",{}),I&&(0,i.jsx)(N.Z,{})]})]})]})})}},1725:function(e,a,n){"use strict";n.d(a,{Z:function(){return l}});var i=n(57437);n(2265),n(98708),n(64379),n(65606),n(58833),n(10494),n(91795),n(19768);var t=n(87138);n(66648),n(31243),n(23508),n(84109),n(85151),n(39898);var s=n(16463);function l(e){let{MucLuc:a,hsk:n}=e,l=(0,s.usePathname)();if(!a)return null;let c=Object.keys(a);return(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsxs)("h5",{className:"mb-3",children:["\uD83D\uDCDA Mục Lục ",n.toUpperCase()]}),(0,i.jsx)("ul",{className:"list-group",children:c.map((e,s)=>{let c=a[e],r=(null==c?void 0:c.tieude)||"Kh\xf4ng c\xf3 ti\xeau đề",o=(null==c?void 0:c.tieudedich)||"",u="/hsk/".concat(n,"/").concat(e),h=l===u;return(0,i.jsx)("li",{className:"list-group-item list-group-item-action p-3 ".concat(h?"active":""),style:{cursor:"pointer"},children:(0,i.jsxs)(t.default,{href:u,className:"text-decoration-none d-block ".concat(h?"text-white":"text-dark"),children:[(0,i.jsxs)("div",{className:"text-center fw-bold fs-5 mb-1",children:["B\xe0i ",s+1]}),(0,i.jsx)("div",{className:"text-center fw-bold tiengtrungText",style:{color:h?"white":"red"},children:r}),(0,i.jsx)("div",{className:"text-center",children:o})]})},e)})})]})}},62034:function(e,a,n){"use strict";var i=n(57437),t=n(2265),s=n(12808),l=n(89745);a.Z=e=>{let{cauHoi:a,fetSelectedword:n,isGianthe:c}=e,[r,o]=(0,t.useState)({}),u=e=>{o(a=>({...a,[e]:!a[e]}))};return(0,i.jsxs)("div",{className:"cauhoi-container",children:[(0,i.jsx)("h2",{children:"C\xe2u Hỏi Trong B\xe0i"}),(0,i.jsx)("ul",{children:a.map((e,a)=>(0,i.jsxs)("li",{children:[(0,i.jsxs)("div",{className:"chinese-word",children:[!c&&e.tiengtrung.split("").map((e,a)=>(0,i.jsx)("span",{className:"chinese-char tiengtrungText",onClick:()=>n(e),children:e},a)),c&&e.gianthe.split("").map((e,a)=>(0,i.jsx)("span",{className:"chinese-char tiengtrungText",onClick:()=>n(e),children:e},a))]}),(0,i.jsx)("p",{children:e.pinyin}),r[a]&&(0,i.jsx)("p",{className:"nghia",children:e.nghia}),(0,i.jsx)(s.Z,{variant:"secondary",size:"sm",onClick:()=>u(a),style:{marginRight:"8px"},children:r[a]?"Ẩn Nghĩa":"Hiện Nghĩa"}),(0,i.jsx)(s.Z,{className:"btn-phatamthanh",variant:"danger",onClick:()=>(0,l.Z)(e.gianthe,a+10),children:"\uD83D\uDD0A"}),(0,i.jsx)("hr",{})]},a))})]})}},10494:function(e,a,n){"use strict";var i=n(57437),t=n(2265);n(66648),n(74231);let s=(0,t.memo)(e=>(0,i.jsxs)("div",{className:"itemCard-container",onClick:e.cardClick,onMouseEnter:e.cardClick,children:[(0,i.jsxs)("div",{className:"itemCard-title",children:[(0,i.jsx)("div",{className:"itemCard-img-des"}),(0,i.jsx)(l,{link:e.videoLink})]}),(0,i.jsx)("div",{className:"itemCard-content p-3 rounded shadow-sm",children:(0,i.jsx)("h3",{className:"itemCard-content-title text-center",children:e.title})})]}));function l(e){return(0,i.jsx)(t.Suspense,{fallback:(0,i.jsx)("div",{children:"Loading..."}),children:(0,i.jsx)("iframe",{ref:e.iframeRef,height:e.height,src:e.link,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})})}s.displayName="ItemCardYoutubeNoAuthor",a.Z=s},84109:function(e,a,n){"use strict";n.d(a,{Z:function(){return s}});var i=n(57437),t=n(2265);function s(e){let{vanmaus:a,thanhmaus:n}=e,[s,l]=(0,t.useState)({row:null,col:null}),c=n.flatMap(e=>e.chitiet.map(e=>e.tukhoa)),r=a.flatMap(e=>e.chitiet.map(e=>e.tukhoa)),o=(e,a)=>{e.includes("\xfc")?("nve"===(e=e.replace("\xfc","v"))&&(e="nue"),new Audio("https://blog.dailoan.vn/wp-content/uploads/2024/04/".concat(e,"1.mp3")).play().catch(e=>console.error("Lỗi ph\xe1t \xe2m thanh:",e))):e.includes("f")||e.includes("m")||e.includes("t")||a.includes("n")||e.includes("l")||e.includes("z")||"s"===a||"r"===a||"j"===a||"q"===a||"x"===a||"g"===a||"k"===a||"h"===a||"sh"===a?new Audio("https://blog.dailoan.vn/wp-content/uploads/2024/04/".concat(e,"1_2.mp3")).play().catch(e=>console.error("Lỗi ph\xe1t \xe2m thanh:",e)):new Audio("https://blog.dailoan.vn/wp-content/uploads/2024/04/".concat(e,"1.mp3")).play().catch(e=>console.error("Lỗi ph\xe1t \xe2m thanh:",e))},u=new Set(["a","ba","pa","ma","fa","da","ta","na","la","ga","ka","ha","o","bo","po","mo","fo","ai","bai","pai","mai","dai","tai","nai","lai","gai","kai","hai","an","ban","pan","man","fan","dan","tan","nan","lan","gan","kan","han","ang","bang","pang","mang","fang","dang","tang","nang","lang","gang","kang","hang","ao","bao","pao","mao","dao","tao","nao","lao","gao","kao","hao","e","me","de","te","ne","le","ge","ke","he","ei","bei","pei","mei","fei","dei","nei","lei","gei","hei","en","ben","pen","men","fen","nen","gen","ken","hen","eng","beng","peng","meng","feng","deng","teng","neng","leng","geng","keng","heng","zi","ci","si","zhi","chi","shi","ri","zu","cu","su","zhu","chu","shu","ru","za","ca","sa","zha","cha","sha","zai","cai","sai","zhai","chai","shai","zan","can","san","zhan","chan","shan","zang","cang","sang","zhang","chang","shang","rang","zao","cao","sao","zhao","chao","shao","rao","ze","ce","se","zhe","che","she","re","zei","zhei","shei","zen","cen","sen","zhen","chen","shen","ren","zeng","ceng","seng","zheng","cheng","sheng","reng","yi","bi","pi","mi","di","ti","ni","li","ji","qi","xi","ya","dia","lia","jia","qia","xia","yan","bian","pian","mian","dian","tian","nian","lian","jian","qian","xian","yang","jiang","qiang","xiang","yao","biao","piao","miao","diao","tiao","niao","liao","jiao","qiao","xiao","ye","bie","pie","mie","die","tie","nie","lie","jie","qie","xie","yin","bin","pin","min","nin","lin","jin","qin","xin","ying","bing","ping","ming","ding","ting","ning","ling","jing","qing","xing","yong","jiong","qiong","xiong","you","miu","diu","niu","liu","jiu","qiu","xiu","you","pou","mou","fou","dou","tou","lou","gou","kou","hou","wu","bu","pu","mu","fu","du","tu","nu","lu","gu","ku","hu","wa","gua","kua","hua","wai","guai","kuai","huai","wan","duan","tuan","nuan","luan","guan","kuan","huan","wang","guang","kuang","huang","wei","gui","kui","hui","wen","dun","tun","lun","gun","kun","hun","wo","duo","tuo","nuo","luo","guo","kuo","huo","yu","n\xfc","l\xfc","yuan","j\xfcan","q\xfcan","x\xfcan","yue","n\xfce","l\xfce","jue","que","xue","yun","j\xfcn","q\xfcn","x\xfcn","j\xfc","q\xfc","x\xfc","er"]),h=(e,a)=>(("j"===e||"q"===e||"x"===e)&&a.includes("\xfc")&&"\xfc"!=a&&"\xfcn"!=a&&"\xfcan"!=a&&(a=a.replace("\xfc","u")),e+a);return(0,i.jsx)("div",{className:"bangphatamContainer",children:(0,i.jsxs)("table",{className:"bangphatamContainer-table",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"header-cell",children:"\\"}),r.map((e,a)=>(0,i.jsx)("th",{className:"header-cell ".concat(s.col===a?"highlight-col":""),children:e},e))]})}),(0,i.jsx)("tbody",{children:c.map((e,a)=>(0,i.jsxs)("tr",{className:s.row===a?"highlight-row":"",children:[(0,i.jsx)("td",{className:"header-cell",children:e}),r.map((n,t)=>{var c=h(e,n);let r=u.has(c);return"j\xfc"===c&&(c="ju"),"q\xfc"===c&&(c="qu"),"x\xfc"===c&&(c="xu"),"j\xfcn"===c&&(c="jun"),"q\xfcn"===c&&(c="qun"),"x\xfcn"===c&&(c="xun"),"j\xfcan"===c&&(c="juan"),"q\xfcan"===c&&(c="quan"),"x\xfcan"===c&&(c="xuan"),(0,i.jsx)("td",{className:"table-cell ".concat(s.row===a||s.col===t?"highlight":""," ").concat(r?"":"disabled-cell"),onMouseEnter:()=>l({row:a,col:t}),onMouseLeave:()=>l({row:null,col:null}),onClick:()=>r&&o(c,e),children:r?c:""},"".concat(e,"-").concat(n))})]},e))})]})})}},27220:function(e,a,n){"use strict";n.d(a,{Z:function(){return r}});var i=n(57437),t=n(2265);n(98708),n(64379);var s=n(65606);n(58833),n(10494),n(91795),n(19768),n(87138);var l=n(66648);n(31243),n(23508),n(84109),n(85151),n(39898);var c=n(60516);function r(e){let{hsk:a,id:n}=e,[r,o]=(0,t.useState)([]),[u,h]=(0,t.useState)(null),[d,m]=(0,t.useState)(null);(0,t.useEffect)(()=>{let e="".concat(a,"_").concat(n),i=(0,c.iH)(s.db,"/user/account"),t=(0,c.jM)(i,async a=>{let n=a.val();n&&(!function(){let e=new Date;Array.from({length:7}).map((a,n)=>{let i=new Date(e);return i.setDate(e.getDate()-n),i.toISOString().slice(0,10)})}(),Object.entries(n).forEach(a=>{var n;let[i,t]=a,{nghe:l=0,noi:r=0,doc:u=0,viet:h=0,nghia:d=0,cauhoi:m=0,pinyin:g=0}=(null==t?void 0:null===(n=t.diem)||void 0===n?void 0:n[e])||{};if(!(l||r||u||h||d||m||g))return;let x={uid:i,name:t.name||"Kh\xf4ng r\xf5 t\xean",photoURL:t.photoURL||"Kh\xf4ng r\xf5 link",diem:{nghe:l,noi:r,doc:u,viet:h,nghia:d,cauhoi:m,pinyin:g},isOnline:!1},p=(0,c.iH)(s.db,"user/status/".concat(i));(0,c.jM)(p,e=>{var a;x.isOnline=e.exists()&&(null===(a=e.val())||void 0===a?void 0:a.isOnline),o(e=>[...e.filter(e=>e.uid!==i),x])})}))});return()=>t()},[a,n]);let g=[...r].map(e=>({...e,tong:Math.ceil(e.diem.nghe||0)+Math.ceil(e.diem.noi||0)+Math.ceil(e.diem.doc||0)+Math.ceil(e.diem.nghia||0)+Math.ceil(e.diem.viet||0)+Math.ceil(e.diem.pinyin||0)+Math.ceil(e.diem.cauhoi||0)})).sort((e,a)=>a.tong-e.tong);return(0,i.jsxs)("div",{className:"w-full max-w-md mx-auto mt-4 shadow rounded-xl p-3",style:{width:"100%",cursor:"pointer",borderRadius:"10px",backgroundColor:"white"},children:[(0,i.jsxs)("h3",{className:"text-lg font-bold text-center mb-4",children:["\uD83C\uDF96 Bảng Điểm B\xe0i ",Number(n.replace(/\D/g,""))," \uD83C\uDF96"]}),(0,i.jsx)("div",{className:"",style:{width:"100%"},children:g.map((e,a)=>(0,i.jsxs)("div",{onClick:()=>m(d===e.uid?null:e.uid),className:"relative bg-white p-3 my-2 rounded-xl shadow flex justify-between items-center group hover:bg-yellow-50 transition",style:{width:"100%",cursor:"pointer",borderRadius:"10px",backgroundColor:"white"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#FEF3C7",onMouseLeave:e=>e.currentTarget.style.backgroundColor="white",children:[(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[(0,i.jsxs)("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[(0,i.jsx)(l.default,{src:e.photoURL,alt:"avatar",width:"40",height:"40",className:"rounded-circle border border-1"}),(0,i.jsx)("span",{className:"fw-semibold mx-2",children:e.name}),(0,i.jsx)("div",{className:"ms-2",style:{width:10,height:10,borderRadius:"50%",backgroundColor:e.isOnline?"green":"red"},title:e.isOnline?"Đang online":"Offline"})]}),(0,i.jsx)("div",{className:"fw-semibold",children:(0,i.jsx)("span",{className:"text-danger fw-bold",children:e.tong})})]})}),d===e.uid&&(0,i.jsx)("div",{className:"w-100 mt-3",children:(0,i.jsxs)("div",{className:"text-muted small",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{className:"mx-2",children:"⛩️ Pinyin: "})," ",Math.ceil(e.diem.pinyin||0)]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{className:"mx-2",children:"\uD83D\uDC42 Nghe: "})," ",Math.ceil(e.diem.nghe||0)]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{className:"mx-2",children:"\uD83D\uDDE3 N\xf3i: "})," ",Math.ceil(e.diem.noi||0)]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{className:"mx-2",children:"\uD83D\uDCD6 Đọc: "})," ",Math.ceil(e.diem.doc||0)]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{className:"mx-2",children:"\uD83D\uDCA1 Nghĩa Của Từ: "})," ",Math.ceil(e.diem.nghia||0)]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{className:"mx-2",children:"✍️ Viết: "})," ",Math.ceil(e.diem.viet||0)]}),0!=e.diem.cauhoi&&(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{className:"mx-2",children:"✍️ Vấn Đ\xe1p: "})," ",Math.ceil(e.diem.cauhoi||0)]})]})})]},e.uid))})]})}},74231:function(){}},function(e){e.O(0,[1953,9513,7441,5527,4358,7481,9208,9461,5973,3539,8472,609,6666,6901,7468,4547,1682,5499,5438,305,2971,7023,1744],function(){return e(e.s=20370)}),_N_E=e.O()}]);