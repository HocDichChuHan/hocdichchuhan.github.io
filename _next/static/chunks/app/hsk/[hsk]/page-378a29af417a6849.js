(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5938],{15006:function(e,t,a){Promise.resolve().then(a.bind(a,97429))},97429:function(e,t,a){"use strict";a.d(t,{default:function(){return j}});var s=a(57437),i=a(2265),n=a(98708),r=a(12808);a(64379);var l=a(65606);a(58833),a(10494),a(91795);var c=a(19768),d=a(87138),h=a(66648);a(31243);var o=a(23508);a(84109),a(58971),a(46854),a(49992),a(45776);var u=a(27593),m=a(60516);function g(e){let{hsk:t}=e,[a,n]=(0,i.useState)([]),[r,c]=(0,i.useState)(null);(0,i.useEffect)(()=>{let e=(0,m.iH)(l.db,"user/account");(0,m.U2)(e).then(e=>{let a=e.val();a&&Promise.all(Object.keys(a).map(async e=>{let s=a[e],i=(0,m.iH)(l.db,"user/kiemtra/".concat(t,"/diem/").concat(e)),n=(await (0,m.U2)(i)).val(),r=[];return n&&Object.keys(n).forEach(e=>{let t=n[e]||{},a=t.doc||0,i=t.viet||0,l=t.nghe||0,c=t.noi||0,d=t.nghia||0,h=t.vandap||0,o=t.timeSpent||0,u=t.submittedAt||0,m=a+i+l+c+d+h;m>0&&r.push({userName:s.name,userAvatar:s.photoURL,userStatus:s.isOnline?"Online":"Offline",testNumber:parseInt(e)+1,diemDoc:a,diemViet:i,diemNghe:l,diemNoi:c,diemNghia:d,diemVandap:h,tongDiem:m,timeSpent:"".concat(Math.floor(o/60).toString().padStart(2,"0"),":").concat(Math.floor(o%60).toString().padStart(2,"0")),submittedAt:new Date(u).toLocaleString()})}),r})).then(e=>{let t=e.flat();t.sort((e,t)=>t.tongDiem-e.tongDiem),n(t)})})},[t]);let d=e=>{r===e?c(null):c(e)},o=e=>e.diemDoc+e.diemNghia+e.diemViet+e.diemNghe+e.diemNoi>=700?"✅ Pass":"❌ Fail";return(0,s.jsx)("div",{children:a.map((e,a)=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,s.jsx)(h.default,{src:e.userAvatar,alt:"avatar",width:"40",height:"40",className:"rounded-circle border border-1"}),(0,s.jsx)("span",{className:"fw-semibold mx-2",children:e.userName}),(0,s.jsx)("div",{className:"ms-2",style:{width:10,height:10,borderRadius:"50%",backgroundColor:"Online"===e.userStatus?"green":"red"},title:e.userStatus})]}),(0,s.jsxs)("h5",{children:["Điểm kiểm tra ",t.toUpperCase()," lần ",e.testNumber," của ",e.userName,":"]}),(0,s.jsxs)("p",{children:["\uD83C\uDFAF Tổng điểm: ",(0,s.jsx)("strong",{children:e.tongDiem}),"/1000 ",(0,s.jsx)("strong",{children:o(e)})]}),(0,s.jsxs)("p",{children:["⏰ Thời gian ho\xe0n th\xe0nh: ",(0,s.jsx)("strong",{children:e.timeSpent})]}),(0,s.jsx)("button",{onClick:()=>d(e.userName),className:"btn btn-outline-primary",children:r===e.userName?"Ẩn chi tiết":"Xem chi tiết"}),r===e.userName&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["\uD83D\uDD24 Pinyin: ",(0,s.jsx)("strong",{children:e.diemDoc}),"/200"]}),(0,s.jsxs)("p",{children:["\uD83D\uDCD6 Nghĩa: ",(0,s.jsx)("strong",{children:e.diemNghia}),"/200"]}),(0,s.jsxs)("p",{children:["⌨️ Đ\xe1nh m\xe1y: ",(0,s.jsx)("strong",{children:e.diemViet}),"/200"]}),(0,s.jsxs)("p",{children:["\uD83C\uDFA7 Nghe: ",(0,s.jsx)("strong",{children:e.diemNghe}),"/200"]}),(0,s.jsxs)("p",{children:["\uD83D\uDDE3️ N\xf3i: ",(0,s.jsx)("strong",{children:e.diemNoi}),"/200"]}),(0,s.jsxs)("p",{children:["\uD83E\uDD1D Vấn đ\xe1p: ",(0,s.jsx)("strong",{children:e.diemVandap}),"/500"]})]}),(0,s.jsx)("hr",{})]},a))})}function j(e){var t;let{hsk:a}=e,[m,j]=(0,i.useState)(!0),[x,p]=(0,i.useState)(),[N,f]=(0,i.useState)(),[v,D]=(0,i.useState)(),[S,b]=(0,i.useState)(!1),[y,k]=(0,i.useState)(!1),[w,C]=(0,i.useState)(!1),[O,E]=(0,i.useState)(!1),[_,A]=(0,i.useState)(!1);(0,i.useEffect)(()=>{F();let e=(0,o.GJ)(),t=(0,o.bg)();k(e),b(t)},[]),(0,i.useEffect)(()=>{sessionStorage.getItem("hasShownDiemHsk")||(A(!0),sessionStorage.setItem("hasShownDiemHsk","true"))},[]);let F=async()=>{try{j(!0);var e=JSON.parse(localStorage.getItem("allData"));e||await H(),e=await JSON.parse(localStorage.getItem("allData"));let t=await e.find(e=>"hsk"===e.key);if(!t||!t.value){console.error("No valid data found for 'phatam'");return}let s=t.value[a];s&&f(s),j(!1)}catch(e){j(!1),console.error("Error getting dichthuat data: ",e)}};x&&(t=x.split("="))[1]&&t[1].split("&")[0];let H=async()=>{try{let e=(await (0,l.UD)("/users")).map(e=>{if("account"===e.key&&e.value){let t={};for(let a in e.value)if(e.value.hasOwnProperty(a)){let{username:s,password:i,...n}=e.value[a];t[a]=n}return{...e,value:t}}return e});await localStorage.setItem("allData",JSON.stringify(e))}catch(e){console.error("Error fetching data:",e)}};return m?(0,s.jsx)(c.Z,{}):(0,s.jsx)(n.Z,{isStudy:!0,body:(0,s.jsxs)("div",{className:"giaotiepContainer container",children:[(0,s.jsx)(d.default,{className:"itemCard-title-luanngu",href:"/hsk/".concat(a,"/edit/b001"),target:"_self",children:y&&(0,s.jsx)(r.Z,{className:"btn-phatamthanh",variant:"warning",children:"Edit"})}),(0,s.jsx)(d.default,{className:"itemCard-title-luanngu",href:"/hsk/".concat(a,"/kiemtra"),target:"_self",children:(0,s.jsx)("div",{className:"btn btn-outline-primary p-3 ms-3 fs-3",children:"Thi Thử"})}),N?(0,s.jsx)("div",{className:"",children:(0,s.jsxs)("div",{className:"baihoc-containerHSK row",children:[(0,s.jsx)(u.Z,{show:_,onClose:()=>A(!1),children:(0,s.jsx)(g,{hsk:a})}),Object.entries(N).map((e,t)=>{let[i,n]=e;return(0,s.jsx)("div",{className:"col-12 col-md-4",style:{marginTop:"20px"},children:(0,s.jsx)(d.default,{className:"itemCard-title-luanngu",href:"/hsk/".concat(a,"/").concat(i),target:"_self",children:(0,s.jsx)("div",{className:"itemCard-container",children:(0,s.jsxs)("div",{className:"itemCard-content",children:[(0,s.jsxs)("div",{className:"itemCard-content-title",children:[(0,s.jsxs)("span",{children:["B\xe0i ",t+1,":  "]}),(0,s.jsx)("span",{className:"tiengtrungText",children:n.tieude})]}),(0,s.jsx)("div",{className:"itemCard-content-chuthich",children:(0,s.jsx)("span",{children:n.tieudedich})}),(0,s.jsx)("div",{className:"image-container",children:(0,s.jsx)(h.default,{src:"https://hocdichchuhan.github.io/img/".concat(a,"/").concat(i,"_ht1.png"),alt:"H\xecnh ảnh",width:250,height:250,className:"image-styled",style:{objectFit:"cover"}})})]})})})},i)})]})}):null]})})}}},function(e){e.O(0,[1953,9513,7441,5527,4358,7481,9208,9461,8765,4974,3539,8472,609,6666,6901,7468,4547,1682,3255,5499,5438,305,2971,7023,1744],function(){return e(e.s=15006)}),_N_E=e.O()}]);