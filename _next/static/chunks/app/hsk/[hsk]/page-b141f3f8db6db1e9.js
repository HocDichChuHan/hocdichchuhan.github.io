(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5938],{95926:function(e,t,i){Promise.resolve().then(i.bind(i,97429))},97429:function(e,t,i){"use strict";i.d(t,{default:function(){return j}});var s=i(57437),n=i(2265),a=i(98708),r=i(12808),l=i(64379),c=i.n(l),d=i(65606),h=i(60516);i(58833),i(10494),i(91795),i(19768);var o=i(87138),u=i(66648);i(31243);var m=i(23508);i(84109),i(58971),i(46854),i(49992),i(45776);var g=i(27593);function x(e){let{hsk:t}=e,[i,a]=(0,n.useState)([]),[r,l]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=(0,h.iH)(d.db,"user/account");(0,h.U2)(e).then(e=>{let i=e.val();i&&Promise.all(Object.keys(i).map(async e=>{let s=i[e],n=(0,h.iH)(d.db,"user/kiemtra/".concat(t,"/diem/").concat(e)),a=(await (0,h.U2)(n)).val(),r=[];return a&&Object.keys(a).forEach(e=>{let t=a[e]||{},i=t.doc||0,n=t.viet||0,l=t.nghe||0,c=t.noi||0,d=t.nghia||0,h=t.vandap||0,o=t.timeSpent||0,u=t.submittedAt||0,m=i+n+l+c+d+h;m>0&&r.push({userName:s.name,userAvatar:s.photoURL,userStatus:s.isOnline?"Online":"Offline",testNumber:parseInt(e)+1,diemDoc:i,diemViet:n,diemNghe:l,diemNoi:c,diemNghia:d,diemVandap:h,tongDiem:m,timeSpent:"".concat(Math.floor(o/60).toString().padStart(2,"0"),":").concat(Math.floor(o%60).toString().padStart(2,"0")),submittedAt:new Date(u).toLocaleString()})}),r})).then(e=>{let t=e.flat();t.sort((e,t)=>t.tongDiem-e.tongDiem),a(t)})})},[t]);let c=e=>{r===e?l(null):l(e)},o=e=>e.diemDoc+e.diemNghia+e.diemViet+e.diemNghe+e.diemNoi>=700?"✅ Pass":"❌ Fail";return(0,s.jsx)("div",{children:i.map((e,i)=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,s.jsx)(u.default,{src:e.userAvatar,alt:"avatar",width:"40",height:"40",className:"rounded-circle border border-1"}),(0,s.jsx)("span",{className:"fw-semibold mx-2",children:e.userName}),(0,s.jsx)("div",{className:"ms-2",style:{width:10,height:10,borderRadius:"50%",backgroundColor:"Online"===e.userStatus?"green":"red"},title:e.userStatus})]}),(0,s.jsxs)("h5",{children:["Điểm kiểm tra ",t.toUpperCase()," lần ",e.testNumber," của ",e.userName,":"]}),(0,s.jsxs)("p",{children:["\uD83C\uDFAF Tổng điểm: ",(0,s.jsx)("strong",{children:e.tongDiem}),"/1000 ",(0,s.jsx)("strong",{children:o(e)})]}),(0,s.jsxs)("p",{children:["⏰ Thời gian ho\xe0n th\xe0nh: ",(0,s.jsx)("strong",{children:e.timeSpent})]}),(0,s.jsx)("button",{onClick:()=>c(e.userName),className:"btn btn-outline-primary",children:r===e.userName?"Ẩn chi tiết":"Xem chi tiết"}),r===e.userName&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["\uD83D\uDD24 Pinyin: ",(0,s.jsx)("strong",{children:e.diemDoc}),"/200"]}),(0,s.jsxs)("p",{children:["\uD83D\uDCD6 Nghĩa: ",(0,s.jsx)("strong",{children:e.diemNghia}),"/200"]}),(0,s.jsxs)("p",{children:["⌨️ Đ\xe1nh m\xe1y: ",(0,s.jsx)("strong",{children:e.diemViet}),"/200"]}),(0,s.jsxs)("p",{children:["\uD83C\uDFA7 Nghe: ",(0,s.jsx)("strong",{children:e.diemNghe}),"/200"]}),(0,s.jsxs)("p",{children:["\uD83D\uDDE3️ N\xf3i: ",(0,s.jsx)("strong",{children:e.diemNoi}),"/200"]}),(0,s.jsxs)("p",{children:["\uD83E\uDD1D Vấn đ\xe1p: ",(0,s.jsx)("strong",{children:e.diemVandap}),"/500"]})]}),(0,s.jsx)("hr",{})]},i))})}function j(e){var t;let{hsk:i}=e,[l,j]=(0,n.useState)(!1),[p,N]=(0,n.useState)(),[f,S]=(0,n.useState)(),[b,v]=(0,n.useState)(),[D,k]=(0,n.useState)(!1),[y,w]=(0,n.useState)(!1),[C,O]=(0,n.useState)(!1),[E,_]=(0,n.useState)(!1),[H,V]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{sessionStorage.getItem("hasShownDiemHsk")||(V(!0),sessionStorage.setItem("hasShownDiemHsk","true"))},[]),(0,n.useEffect)(()=>{let e=(0,m.GJ)(),t=(0,m.bg)();w(e),k(t);let s=async()=>{c().fire({title:"Đang tải dữ liệu...",allowOutsideClick:!1,didOpen:()=>{c().showLoading()}});try{let e=(0,h.iH)(d.db,"/users/hsk/".concat(i)),t=await (0,h.U2)(e);if(t.exists()){let e=t.val();if(!e)return;S(e)}}catch(e){console.error("Lỗi khi lấy dữ liệu:",e),c().fire({icon:"error",title:"Lỗi",text:"Kh\xf4ng thể lấy dữ liệu. Vui l\xf2ng thử lại sau!"})}finally{c().close()}};localStorage.getItem("isGianthe"),localStorage.getItem("isShowPinyin"),localStorage.getItem("isShowSpace"),s()},[i]),p&&(t=p.split("="))[1]&&t[1].split("&")[0],(0,s.jsx)(a.Z,{isStudy:!0,body:(0,s.jsxs)("div",{className:"giaotiepContainer container",children:[(0,s.jsx)(o.default,{className:"itemCard-title-luanngu",href:"/hsk/".concat(i,"/edit/b001"),target:"_self",children:y&&(0,s.jsx)(r.Z,{className:"btn-phatamthanh",variant:"warning",children:"Edit"})}),(0,s.jsx)(o.default,{className:"itemCard-title-luanngu",href:"/hsk/".concat(i,"/kiemtra"),target:"_self",children:(0,s.jsx)("div",{className:"btn btn-outline-primary p-3 ms-3 fs-3",children:"Thi Thử"})}),f?(0,s.jsx)("div",{className:"",children:(0,s.jsxs)("div",{className:"baihoc-containerHSK row",children:[(0,s.jsx)(g.Z,{show:H,onClose:()=>V(!1),children:(0,s.jsx)(x,{hsk:i})}),Object.entries(f).map((e,t)=>{let[n,a]=e;return(0,s.jsx)("div",{className:"col-12 col-md-4",style:{marginTop:"20px"},children:(0,s.jsx)(o.default,{className:"itemCard-title-luanngu",href:"/hsk/".concat(i,"/").concat(n),target:"_self",children:(0,s.jsx)("div",{className:"itemCard-container",children:(0,s.jsxs)("div",{className:"itemCard-content",children:[(0,s.jsxs)("div",{className:"itemCard-content-title",children:[(0,s.jsxs)("span",{children:["B\xe0i ",t+1,":  "]}),(0,s.jsx)("span",{className:"tiengtrungText",children:a.tieude})]}),(0,s.jsx)("div",{className:"itemCard-content-chuthich",children:(0,s.jsx)("span",{children:a.tieudedich})}),(0,s.jsx)("div",{className:"image-container",children:(0,s.jsx)(u.default,{src:"https://hocdichchuhan.github.io/img/".concat(i,"/").concat(n,"_ht1.png"),alt:"H\xecnh ảnh",width:250,height:250,className:"image-styled",style:{objectFit:"cover"}})})]})})})},n)})]})}):null]})})}}},function(e){e.O(0,[1953,9513,7441,5527,4358,7481,9208,9461,8765,4974,3539,8472,609,6666,6901,7468,4547,1682,3255,5499,5438,305,2971,7023,1744],function(){return e(e.s=95926)}),_N_E=e.O()}]);