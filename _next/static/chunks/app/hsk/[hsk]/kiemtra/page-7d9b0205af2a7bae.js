(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[66],{5109:function(e,t,n){Promise.resolve().then(n.bind(n,60028))},60028:function(e,t,n){"use strict";n.d(t,{default:function(){return S}});var i=n(57437),a=n(2265),l=n(66802),r=n(12808),s=n(64379),c=n.n(s),o=n(60516),h=n(65606),u=n(19768);n(87138);var d=n(66648);n(31243);var g=n(23508);n(27593);var m=n(16793),A=n(46289),f=n(25527),p=n(3492);n(31467);var b=n(9460),x=n(89745),v=n(73137),j=n(23830),y=n(34231);let N=(0,a.forwardRef)(function(e,t){let{dsCau:n,isGianthe:i,pathBaitap:l,hsk:s,id:u,onNext:d,isShowNghia:g=!0}=e,[m,A]=(0,a.useState)(null),[f,p]=(0,a.useState)({}),[b,N]=(0,a.useState)(!1),[C,w]=(0,a.useState)(!1),E=(e,t)=>{c().fire({icon:e,title:t,position:"center",showConfirmButton:!1,timer:1500,timerProgressBar:!0})};(0,a.useEffect)(()=>{let e=localStorage.getItem("userLogin");e&&(A(JSON.parse(e)),n.forEach(async(e,t)=>{let n="".concat(l,"/cauhoi/").concat(t),i=await (0,o.U2)((0,o.iH)(h.db,n));i.exists()&&p(e=>({...e,[t]:{userInput:i.val().userInput||"",nghia:i.val().nghiacuanguoidung||""}}))}))},[n,l]);let D=(e,t,n)=>{p(i=>({...i,[e]:{...i[e],[t]:n}}))},S=async()=>{if(m){for(let r=0;r<n.length;r++){var e,t,i,a;let s=n[r],c=(null===(t=f[r])||void 0===t?void 0:null===(e=t.userInput)||void 0===e?void 0:e.trim())||"",u=(null===(a=f[r])||void 0===a?void 0:null===(i=a.nghia)||void 0===i?void 0:i.trim())||"",d="".concat(l,"/cauhoi/").concat(r);await (0,o.t8)((0,o.iH)(h.db,d),{userInput:c,nghia:s.nghia,hanviet:s.gianthe,nghiacuanguoidung:u,time:Date.now()})}E("success","Đ\xe3 lưu to\xe0n bộ b\xe0i l\xe0m!")}},k=async()=>{if(!m)return;await S();let e="".concat(l,"/cauhoi"),t="user/baitap/".concat(m.uid,"/").concat(s,"_").concat(u),i=Date.now();try{let a=await (0,o.U2)((0,o.iH)(h.db,e));if(a.exists()){let e=a.val(),l=n.map((t,n)=>{var a,l;return{tiengtrung:t.tiengtrung,gianthe:t.gianthe,pinyin:t.pinyin,nghia:t.nghia,cautraloi:(null===(a=e[n])||void 0===a?void 0:a.userInput)||"",nghiacuanguoidung:(null===(l=e[n])||void 0===l?void 0:l.nghiacuanguoidung)||"",time:i}});await (0,o.t8)((0,o.iH)(h.db,t),{hsk:s,id:u,timeSubmit:i,cauTraLoi:l}),E("success","Đ\xe3 gửi b\xe0i tập th\xe0nh c\xf4ng!"),d()}else E("warning","Chưa c\xf3 dữ liệu để gửi!")}catch(e){console.error("Lỗi:",e),E("error","Lỗi khi gửi b\xe0i tập!")}};return(0,a.useImperativeHandle)(t,()=>({handleSendAll:k})),a.createElement("div",{className:"container py-4"},a.createElement("div",{className:"d-flex justify-content-between align-items-center mb-4"},a.createElement("div",{className:"btn-group"},a.createElement(r.Z,{variant:"outline-primary",onClick:()=>N(!b)},b?"Ẩn Pinyin":"Hiện Pinyin"),g&&a.createElement(r.Z,{variant:"outline-danger",onClick:()=>w(!C)},C?"Ẩn Nghĩa":"Hiện Nghĩa")),a.createElement(r.Z,{variant:"success",onClick:k},"\uD83D\uDCE4 Gửi B\xe0i Tập")),n.map((e,t)=>{var n,l;return a.createElement(v.Z,{className:"mb-4 shadow-sm",key:t},a.createElement(v.Z.Body,null,a.createElement("div",{className:"d-flex"},a.createElement("h5",{className:"mb-3 text-primary fw-bold fs-3"},"\uD83D\uDCDD C\xe2u ".concat(t+1,": ").concat(i?e.gianthe:e.tiengtrung)),a.createElement(r.Z,{variant:"outline-secondary",onClick:()=>(0,x.Z)(e.gianthe)},"\uD83D\uDD0A")),b&&a.createElement("div",{className:"text-muted mb-2"},"\uD83D\uDCDA Pinyin: ".concat(e.pinyin)),C&&a.createElement("div",{className:"mb-3"},"\uD83D\uDCA1 Nghĩa: ".concat(e.nghia)),a.createElement(j.Z.Group,{className:"mb-2"},a.createElement(j.Z.Label,null,"Nhập c\xe2u trả lời của bạn bằng Tiếng Trung:"),a.createElement(y.Z,{value:(null===(n=f[t])||void 0===n?void 0:n.userInput)||"",className:"form-control fs-3",placeholder:"Nhập c\xe2u trả lời của bạn bằng tiếng Trung",onChange:e=>D(t,"userInput",e.target.value)})),a.createElement(j.Z.Group,{className:"mb-3"},a.createElement(j.Z.Label,null,"Nhập nghĩa của c\xe2u trả lời:"),a.createElement(y.Z,{value:(null===(l=f[t])||void 0===l?void 0:l.nghia)||"",className:"form-control fs-5",placeholder:"Nhập nghĩa của c\xe2u trả lời",onChange:e=>D(t,"nghia",e.target.value)}))))}),a.createElement("div",{className:"d-flex justify-content-end gap-2 mt-4"},a.createElement(r.Z,{variant:"outline-secondary",onClick:()=>window.scrollTo({top:0,behavior:"smooth"})},"⬆️ Về đầu"),a.createElement(r.Z,{variant:"primary",onClick:()=>S()},"\uD83D\uDCBE Lưu tạm thời"),a.createElement(r.Z,{variant:"success",onClick:()=>k()},"\uD83D\uDCE4 Gửi B\xe0i Tập")))});function C(e){let{seconds:t,onEnd:n,ready:l}=e,[r,s]=(0,a.useState)(t);return(0,a.useEffect)(()=>{if(!l)return;if(r<=0){null==n||n();return}let e=setInterval(()=>{s(e=>e-1)},1e3);return()=>clearInterval(e)},[r,n]),(0,i.jsxs)("span",{className:"fs-1",style:{fontWeight:"bold",color:r<=5?"red":"black"},children:["⏰ ","".concat(Math.floor(r/60),":").concat((r%60).toString().padStart(2,"0"))]})}function w(e){let{hsk:t,user:n,numberTest:l}=e,[r,s]=(0,a.useState)(0),[c,u]=(0,a.useState)(0),[g,m]=(0,a.useState)(0),[A,f]=(0,a.useState)(0),[p,b]=(0,a.useState)(0),[x,v]=(0,a.useState)(0),[j,y]=(0,a.useState)(0),[N,C]=(0,a.useState)(0),[w,E]=(0,a.useState)(0);return(0,a.useEffect)(()=>{if(!n)return;let e=(0,o.iH)(h.db,"user/kiemtra/".concat(t,"/diem/").concat(n.uid,"/").concat(l)),i=(0,o.jM)(e,e=>{let t=e.val()||{},n=t.doc||0,i=t.viet||0,a=t.nghe||0,l=t.noi||0,r=t.nghia||0,c=t.vandap||0,o=t.timeSpent||0,h=t.submittedAt||0;s(n),u(i),m(a),f(l),v(r),b(c),E(n+i+a+l+r+c),y(o),C(h)});return()=>{(0,o.S1)(e,"value",i)}},[t,n]),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,i.jsx)(d.default,{src:n.photoURL,alt:"avatar",width:"40",height:"40",className:"rounded-circle border border-1"}),(0,i.jsx)("span",{className:"fw-semibold mx-2",children:n.name}),(0,i.jsx)("div",{className:"ms-2",style:{width:10,height:10,borderRadius:"50%",backgroundColor:n.isOnline?"green":"red"},title:n.isOnline?"Đang online":"Offline"})]}),(0,i.jsxs)("h5",{children:["Điểm kiểm tra ",t.toUpperCase()," lần ",l+1," của ",n.name,":"]}),(0,i.jsxs)("p",{children:["\uD83D\uDD24 Pinyin: ",(0,i.jsx)("strong",{children:r}),"/200"]}),"     ",(0,i.jsxs)("p",{children:["\uD83D\uDCD6 Nghĩa: ",(0,i.jsx)("strong",{children:x}),"/200"]}),"    ",(0,i.jsxs)("p",{children:["⌨️ Đ\xe1nh m\xe1y: ",(0,i.jsx)("strong",{children:c}),"/200"]}),"      ",(0,i.jsxs)("p",{children:["\uD83C\uDFA7 Nghe: ",(0,i.jsx)("strong",{children:g}),"/200"]}),"      ",(0,i.jsxs)("p",{children:["\uD83D\uDDE3️ N\xf3i: ",(0,i.jsx)("strong",{children:A}),"/200"]}),"        ",(0,i.jsxs)("p",{children:["\uD83E\uDD1D Vấn đ\xe1p: ",(0,i.jsx)("strong",{children:p}),"/500"]}),(0,i.jsx)("hr",{}),(0,i.jsxs)("p",{children:["\uD83C\uDFAF Tổng điểm:",(0,i.jsxs)("strong",{children:[" ",w]}),"/1500"]}),(0,i.jsxs)("p",{children:["⏰ Thời gian ho\xe0n th\xe0nh:",(0,i.jsxs)("strong",{children:[" ","".concat(Math.floor(j/60).toString().padStart(2,"0"),":").concat(Math.floor(j%60).toString().padStart(2,"0"))]}),"s"]})]})}async function E(e,t){let n=(0,o.iH)(h.db,"user/kiemtra/".concat(t,"/diem/").concat(e)),i=await (0,o.U2)(n);return i.exists()?Object.keys(i.val()).length:0}n(62474);var D=n(16463);function S(e){let{hsk:t}=e,[n,s]=(0,a.useState)(!0),[d,x]=(0,a.useState)(),[v,j]=(0,a.useState)(),[y,S]=(0,a.useState)(!1),[k,B]=(0,a.useState)(!1),[M,T]=(0,a.useState)(0),[I,O]=(0,a.useState)([]),[Z,z]=(0,a.useState)(!1),[L,Q]=(0,a.useState)(null),[G,R]=(0,a.useState)("doc"),[P,U]=(0,a.useState)(!1),[F,H]=(0,a.useState)(!1);(0,a.useRef)();let[K,V]=(0,a.useState)(null),_=(0,D.useRouter)(),q=(0,a.useRef)(null);(0,a.useEffect)(()=>{J()},[t]);let J=async()=>{(await c().fire({title:"X\xe1c nhận l\xe0m b\xe0i kiểm tra",text:"Bạn vui l\xf2ng x\xe1c nhận c\xf3 đủ thời gian để l\xe0m b\xe0i kiểm tra. Tổng thời gian l\xe0m b\xe0i kiểm tra l\xe0 60 ph\xfat.",icon:"info",showCancelButton:!0,confirmButtonText:"T\xf4i đ\xe3 sẵn s\xe0ng",cancelButtonText:"Tho\xe1t",allowOutsideClick:!1,allowEscapeKey:!1})).isConfirmed&&(U(!0),V(Date.now()),console.log("Người d\xf9ng x\xe1c nhận l\xe0m b\xe0i"))};(0,a.useEffect)(()=>{$();let e=(0,g.GJ)(),t=(0,g.bg)();B(e),S(t);let n=localStorage.getItem("isGianthe");null!==n&&z(JSON.parse(n))},[P]),(0,a.useEffect)(()=>{ee()},[v]),(0,a.useEffect)(()=>{let e=localStorage.getItem("userLogin");if(e){let t=JSON.parse(e);Q(t),W(t)}},[]);let W=async e=>T(await E(e.uid,t)),Y=async()=>{if(!L){c().fire({icon:"error",title:"Kh\xf4ng t\xecm thấy người d\xf9ng!",timer:1500,toast:!1,position:"center",showConfirmButton:!0});return}if(!q.current){c().fire({icon:"error",title:"Component chưa sẵn s\xe0ng!",timer:1500,position:"center",showConfirmButton:!1});return}if(await q.current.handleSendAll(),(await c().fire({title:"X\xe1c nhận nộp b\xe0i kiểm tra",text:"Bạn vui l\xf2ng x\xe1c nhận đ\xe3 ho\xe0n th\xe0nh v\xe0 muốn nộp b\xe0i kiểm tra n\xe0y.",icon:"info",showCancelButton:!0,confirmButtonText:"T\xf4i x\xe1c nhận",cancelButtonText:"Tho\xe1t",allowOutsideClick:!1,allowEscapeKey:!1})).isConfirmed){let e=Date.now();try{let n="user/kiemtra/".concat(t,"/diem/").concat(L.uid,"/").concat(M),i=(0,o.iH)(h.db,n);await (0,o.Vx)(i,{timeSpent:(e-K)/1e3,submittedAt:e});let a=c().fire({icon:"success",title:"B\xe0i đ\xe3 được nộp th\xe0nh c\xf4ng!",timer:1500,toast:!1,position:"center",showConfirmButton:!1});U(!1),_.push("/hsk/".concat(t)),a.isConfirmed}catch(e){console.error("Error submitting data:",e),c().fire({icon:"error",title:"Đ\xe3 xảy ra lỗi khi nộp b\xe0i!",timer:1500,toast:!1,position:"center",showConfirmButton:!1})}}},X=async()=>{let e=Z?"Phồn Thể 繁體中文":"Giản Thể 简体中文";await c().fire({position:"center",icon:"success",html:"<div style=\"font-size: 36px;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;\">Chuyển đổi qua ".concat(e,"</div>"),showConfirmButton:!1,timer:1e3});let t=!Z;z(t),localStorage.setItem("isGianthe",JSON.stringify(t))},$=async()=>{try{s(!0);let e="user/kiemtra/".concat(t),n=(0,o.iH)(h.db,e),i=await (0,o.U2)(n);if(!i.exists())return console.log("Kh\xf4ng c\xf3 dữ liệu tại đường dẫn n\xe0y."),null;{let e=i.val();return j(e),e}}catch(e){return console.error("Error getting data:",e),null}finally{s(!1)}},ee=async()=>{v&&O(v.tumoi)},et=()=>{var e,n;null==I||null===(n=I.map(e=>e.tumoi))||void 0===n||null===(e=n.filter(Boolean))||void 0===e||e.flat();let a={};I.forEach(e=>{e.bai&&(a[e.bai]||(a[e.bai]=[]),a[e.bai].push(e))});let l=[];Object.values(a).forEach(e=>{if(e.length>0){let t=Math.floor(Math.random()*e.length);l.push(e[t])}});let r=Object.values(a).flat().filter(e=>!l.includes(e));for(;l.length<40&&r.length>0;){let e=Math.floor(Math.random()*r.length);l.push(r.splice(e,1)[0])}let s=l.sort(()=>Math.random()-.5);return(0,i.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:s.length>0&&(0,i.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,i.jsx)("h2",{children:"B\xe0i Test 1: Kĩ năng đọc: Lựa chọn cặp từ ch\xednh x\xe1c."}),(0,i.jsx)("hr",{}),(0,i.jsx)(m.Z,{tumoi:s,onFinish:()=>R("nghia"),isGianthe:Z,pathBaitap:"user/kiemtra/".concat(t,"/diem/").concat(L.uid,"/").concat(M),diem:200})]})})},en=()=>{var e,n;null==I||null===(n=I.map(e=>e.tumoi))||void 0===n||null===(e=n.filter(Boolean))||void 0===e||e.flat();let a={};I.forEach(e=>{e.bai&&(a[e.bai]||(a[e.bai]=[]),a[e.bai].push(e))});let l=[];Object.values(a).forEach(e=>{if(e.length>0){let t=Math.floor(Math.random()*e.length);l.push(e[t])}});let r=Object.values(a).flat().filter(e=>!l.includes(e));for(;l.length<40&&r.length>0;){let e=Math.floor(Math.random()*r.length);l.push(r.splice(e,1)[0])}let s=l.sort(()=>Math.random()-.5);return(0,i.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:s.length>0&&(0,i.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,i.jsx)("h2",{children:"B\xe0i Test 1: Kĩ năng đọc: Lựa chọn cặp từ ch\xednh x\xe1c."}),(0,i.jsx)("hr",{}),(0,i.jsx)(A.Z,{tumoi:s,onFinish:()=>R("viet"),isGianthe:Z,pathBaitap:"user/kiemtra/".concat(t,"/diem/").concat(L.uid,"/").concat(M),diem:200})]})})},ei=()=>{var e,n;null==I||null===(n=I.map(e=>e.tumoi))||void 0===n||null===(e=n.filter(Boolean))||void 0===e||e.flat();let a={};I.forEach(e=>{e.bai&&(a[e.bai]||(a[e.bai]=[]),a[e.bai].push(e))});let l=[];Object.values(a).forEach(e=>{if(e.length>0){let t=Math.floor(Math.random()*e.length);l.push(e[t])}});let r=Object.values(a).flat().filter(e=>!l.includes(e));for(;l.length<20&&r.length>0;){let e=Math.floor(Math.random()*r.length);l.push(r.splice(e,1)[0])}let s=l.sort(()=>Math.random()-.5);return(0,i.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:s.length>0&&(0,i.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,i.jsx)("h2",{children:"B\xe0i Test 2: Kĩ năng Viết: Nhập từ tiếng Trung đ\xfang với nghĩa."}),(0,i.jsx)("hr",{}),(0,i.jsx)(f.Z,{items:s,onFinish:()=>R("nghe"),isGianthe:Z,pathBaitap:"user/kiemtra/".concat(t,"/diem/").concat(L.uid,"/").concat(M),diem:200})]})})},ea=()=>{let e={};v.listen.forEach(t=>{t.bai&&(e[t.bai]||(e[t.bai]=[]),e[t.bai].push(t))});let n=[];Object.values(e).forEach(e=>{if(e.length>0){let t=Math.floor(Math.random()*e.length);n.push(e[t])}});let a=Object.values(e).flat().filter(e=>!n.includes(e));for(;n.length<20&&a.length>0;){let e=Math.floor(Math.random()*a.length);n.push(a.splice(e,1)[0])}let l=n.sort(()=>Math.random()-.5);return(0,i.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:(0,i.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,i.jsx)("h2",{children:"B\xe0i Test 3: Luyện nghe: Ho\xe0n th\xe0nh c\xe2u m\xe0 bạn nghe được:"}),(0,i.jsx)("hr",{}),(0,i.jsx)(b.Z,{validCau:l,isGianthe:Z,pathBaitap:"user/kiemtra/".concat(t,"/diem/").concat(L.uid,"/").concat(M),onNext:()=>R("noi"),diem:200})]})})},el=()=>{let e={};v.speak.forEach(t=>{t.bai&&(e[t.bai]||(e[t.bai]=[]),e[t.bai].push(t))});let n=[];Object.values(e).forEach(e=>{if(e.length>0){let t=Math.floor(Math.random()*e.length);n.push(e[t])}});let a=Object.values(e).flat().filter(e=>!n.includes(e));for(;n.length<20&&a.length>0;){let e=Math.floor(Math.random()*a.length);n.push(a.splice(e,1)[0])}let l=n.sort(()=>Math.random()-.5);return(0,i.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:l&&(0,i.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,i.jsx)("h2",{children:"B\xe0i Test 4: Luyện n\xf3i: N\xf3i lại c\xe2u tiếng Trung sau đ\xe2y:"}),(0,i.jsx)("hr",{}),(0,i.jsx)(p.Z,{validCau:l,isGianthe:Z,onNext:()=>handleNextCau(),congdiem:()=>congdiemSpeech(),pathBaitap:"user/kiemtra/".concat(t,"/diem/").concat(L.uid,"/").concat(M),diem:200})]})})},er=()=>{let e={};v.cauhoi.forEach(t=>{t.bai&&(e[t.bai]||(e[t.bai]=[]),e[t.bai].push(t))});let n=[];Object.values(e).forEach(e=>{if(e.length>0){let t=Math.floor(Math.random()*e.length);n.push(e[t])}});let a=Object.values(e).flat().filter(e=>!n.includes(e));for(;n.length<20&&a.length>0;){let e=Math.floor(Math.random()*a.length);n.push(a.splice(e,1)[0])}let l=n.sort(()=>Math.random()-.5);return(0,i.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:(0,i.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,i.jsx)("h2",{children:"B\xe0i Test 5: Trả lời c\xe2u hỏi trong b\xe0i:"}),(0,i.jsx)("hr",{}),(0,i.jsx)(N,{ref:q,dsCau:l,isGianthe:Z,pathBaitap:"user/kiemtra/".concat(t,"/diem/").concat(L.uid,"/").concat(M),hsk:t,id:"test",onNext:()=>R("cauhoi"),diem:200,isShowNghia:!1,isSendAll:F})]})})};return n?(0,i.jsx)(u.Z,{}):(0,i.jsx)(l.Z,{isStudy:!0,body:(0,i.jsxs)("div",{className:"ktBTContainer",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-center  p-3 border rounded bg-light mb-3",children:[(0,i.jsx)("div",{className:"col-8",children:L&&(0,i.jsx)(w,{hsk:t,user:L,numberTest:M})}),(0,i.jsxs)("div",{className:"col-4 border-start ps-3",children:[(0,i.jsxs)("div",{className:"p-3 border rounded bg-light mb-3",children:[(0,i.jsx)("h3",{children:"Thời gian l\xe0m b\xe0i:"}),(0,i.jsx)(C,{seconds:4800,onEnd:()=>Y(),ready:P})]}),(0,i.jsx)(r.Z,{variant:"success",className:"fs-3",onClick:()=>Y(),children:"\uD83D\uDCE4 Nộp b\xe0i"})]})]}),(0,i.jsx)("div",{className:"MatchingGameContaniner",children:(0,i.jsxs)("div",{className:"flex gap-2 mb-4 ",children:[(0,i.jsx)("button",{onClick:()=>R("doc"),className:"btn ".concat("doc"===G?"btn-primary":"btn-outline-secondary"),children:"Pinyin Test"}),(0,i.jsx)("button",{onClick:()=>R("nghia"),className:"btn ".concat("nghia"===G?"btn-primary":"btn-outline-secondary"),children:"Nghĩa Của Từ"}),(0,i.jsx)("button",{onClick:()=>R("viet"),className:"btn ".concat("viet"===G?"btn-primary":"btn-outline-secondary"),children:"Đ\xe1nh M\xe1y Từ Vựng"}),(0,i.jsx)("button",{onClick:()=>R("nghe"),className:"btn ".concat("nghe"===G?"btn-primary":"btn-outline-secondary"),children:"B\xe0i Nghe"}),(0,i.jsx)("button",{onClick:()=>R("noi"),className:"btn ".concat("noi"===G?"btn-primary":"btn-outline-secondary"),children:"B\xe0i N\xf3i"}),(0,i.jsx)("button",{onClick:()=>R("cauhoi"),className:"btn ".concat("cauhoi"===G?"btn-primary":"btn-outline-secondary"),children:"Vấn Đ\xe1p"})]})}),Z?(0,i.jsx)(r.Z,{className:"",variant:"danger",onClick:()=>X(),children:"Chuyển đổi qua Phồn Thể 繁體"}):(0,i.jsx)(r.Z,{className:"",variant:"primary",onClick:()=>X(),children:" Chuyển đổi qua Giản Thể 简体"}),(0,i.jsxs)("h1",{className:"baihocgiaotiep-title baihocgiaotiep-title-number",children:["Kiểm Tra ",t.toUpperCase()," "]}),(0,i.jsx)("div",{children:(()=>{switch(G){case"nghe":return(0,i.jsx)(ea,{});case"noi":return(0,i.jsx)(el,{});case"doc":return(0,i.jsx)(et,{});case"nghia":return(0,i.jsx)(en,{});case"viet":return(0,i.jsx)(ei,{});case"cauhoi":return(0,i.jsx)(er,{});default:return null}})()})]})})}},19768:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=n(57437),a=n(2265),l={src:"/_next/static/media/Loading.3170e5c7.gif",height:480,width:475,blurWidth:0,blurHeight:0},r=n(66648);class s extends a.Component{render(){return(0,i.jsx)("div",{className:"loadingData",children:(0,i.jsxs)("div",{className:"loadingData-container",children:[(0,i.jsx)(r.default,{src:l,alt:"Loading...",width:100,height:100}),(0,i.jsx)("h2",{children:"Website đang tải dữ liệu, xin vui l\xf2ng chờ trong gi\xe2y l\xe1t"})]})})}}},46289:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var i=n(57437),a=n(2265),l=n(23394),r=n(85839),s=n(89745),c=n(64379),o=n.n(c),h=n(66648),u=n(12808),d=n(65606);function g(e){let{tumoi:t,onFinish:n,isGianthe:c,pathBaitap:g,diem:m=100}=e,[A,f]=(0,a.useState)([]),[p,b]=(0,a.useState)([]),[x,v]=(0,a.useState)({nghia:null,hanzi:null}),[j,y]=(0,a.useState)({pinyin:null,hanzi:null,nghia:null,gianthe:null}),[N,C]=(0,a.useState)([]),[w,E]=(0,a.useState)({id:null,hanziId:null,type:null}),[D,S]=(0,a.useState)([]),[k,B]=(0,a.useState)(!1),[M,T]=(0,a.useState)("https://tiengtrungdongyang.com/img/gif/correct4.gif"),[I,O]=(0,a.useState)(!1),[Z,z]=(0,a.useState)(0),[L,Q]=(0,a.useState)([]),[G,R]=(0,a.useState)(0);(0,a.useEffect)(()=>{if(t&&t.length>0){let e={};t.forEach(t=>{let n=t.gianthe.length;e[n]||(e[n]=[]),e[n].push(t)}),Q(Object.values(e)),R(0)}},[t]);let P=L[G]||[],U=(0,a.useRef)(null),F=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(P.length>0){let e=[...P].sort(()=>Math.random()-.5);f(e.map((e,t)=>({...e,id:t}))),b(e.map((e,t)=>({...e,id:t})).sort(()=>Math.random()-.5)),v({nghia:null,hanzi:null}),C([]),E({id:null,hanziId:null,type:null}),S([]),B(!1)}},[G,L]);let H=async(e,t)=>{try{await Promise.all([(0,d.Pf)(e,t)])}catch(t){console.error("Lỗi update:",t);let e={message:"Lỗi update: "+t.message};o().fire(t.message,"","info"),setState(t=>({...t,error:e}))}finally{}},K=async()=>{let e=Math.floor(1e3*(Z+m/t.length))/1e3;await H("".concat(g,"/nghia"),e),z(e)},V=(e,t)=>{let n={...x,[e]:t};v(n),console.log(n),n.nghia&&n.hanzi&&!I&&_(n)},_=async e=>{var t,i;O(!0);let{nghia:a,hanzi:l}=e,r=a.id===l.id;console.log(a);let c=()=>{O(!1),v({nghia:null,hanzi:null}),E({id:null,hanziId:null,type:null})};if(r){y(l),T("https://tiengtrungdongyang.com/img/gif/correct".concat(Math.floor(3*Math.random())+1,".gif"));let e=a.id;E({id:e,hanziId:e,type:"correct"}),null===(t=U.current)||void 0===t||t.play(),S(t=>[...t,e]),setTimeout(()=>{(0,s.Z)(l.gianthe,10+l.id)},300),await K(),setTimeout(()=>{C(t=>{let i=[...t,e];return i.length===P.length&&(B(!0),setTimeout(()=>{G+1<L.length?R(G+1):null==n||n()},500)),i}),S(t=>t.filter(t=>t!==e)),c()},500)}else T("https://tiengtrungdongyang.com/img/gif/wrong".concat(Math.floor(5*Math.random())+1,".gif")),E({id:a.id,hanziId:l.id,type:"wrong"}),null===(i=F.current)||void 0===i||i.play(),setTimeout(()=>{c()},800)},q=(e,t)=>{var n;let i=(null===(n=x[t])||void 0===n?void 0:n.id)===e.id,a=N.includes(e.id),l=D.includes(e.id),r="pinyin"===t&&w.id===e.id||"nghia"===t&&w.id===e.id||"hanzi"===t&&w.hanziId===e.id;return l?"matchedCorrect bg-green-500 border-green-500 text-white":a?"bg-blue-500 border-green-500 text-white":r&&"wrong"===w.type?"matchedWrong border-red-500 animate-shake":r&&"correct"===w.type?"border-green-500 animate-pulse":i?"bg-blue-400 border-blue-400":"bg-black border-gray-500 text-white"};return(0,i.jsxs)("div",{className:"MatchingGameContaniner",children:[(0,i.jsx)("audio",{ref:U,src:l.Z}),(0,i.jsx)("audio",{ref:F,src:r.Z}),(0,i.jsxs)("div",{className:"d-flex row align-items-center justify-content-center",children:[(0,i.jsx)("div",{className:"col-12 col-md-6 MatchingGameContaniner",children:(0,i.jsx)(h.default,{src:M,alt:"Loading...",width:200,height:200,style:{objectFit:"contain"}})}),j.tiengtrung&&(0,i.jsxs)("div",{className:"col-12 col-md-6 MatchingGameContaniner",children:[(0,i.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-2",children:[(0,i.jsx)("h2",{className:"text-danger",children:c?j.gianthe:j.tiengtrung||null}),(0,i.jsx)(u.Z,{lassName:"btn-phatamthanh",variant:"danger",onClick:()=>(0,s.Z)(j.gianthe,3),children:"\uD83D\uDD0A"})]}),(0,i.jsx)("h2",{className:"text-danger",children:j.pinyin||null}),(0,i.jsx)("h2",{className:"text-danger",children:j.nghia||null})]})]}),(0,i.jsxs)("div",{className:"flex flex-col flex justify-center items-center h-full",children:[(0,i.jsx)("h3",{className:"mb-2",children:"Chữ H\xe1n"}),p.map((e,t)=>(0,i.jsx)("button",{className:"relative flex items-center justify-between w-full py-2 px-4 my-1 rounded border transition-all duration-300 fs-3 ".concat(q(e,"hanzi")),onClick:()=>V("hanzi",e,t),disabled:N.includes(e.id),children:c?e.gianthe:e.tiengtrung},e.id))]}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("h3",{className:"mb-2",children:"Nghĩa"}),A.map((e,t)=>(0,i.jsx)("button",{className:"relative flex items-center justify-between w-full py-2 px-4 my-1 rounded border transition-all duration-300 fs-3 ".concat(q(e,"nghia")),onClick:()=>V("nghia",e,t),disabled:N.includes(e.id),children:e.nghia},e.id))]})]})}},62474:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var i=n(64379),a=n.n(i);function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"VN";return new Promise((t,n)=>{if(!("webkitSpeechRecognition"in window)){n("Tr\xecnh duyệt kh\xf4ng hỗ trợ Speech Recognition");return}let i=new window.webkitSpeechRecognition;i.lang=({VN:"vi-VN",CN:"zh-CN"})[e]||"vi-VN",i.continuous=!1,i.interimResults=!1,a().fire({title:"\uD83C\uDFA4 Đang lắng nghe (".concat(e,")"),text:"H\xe3y n\xf3i v\xe0o micro...",allowOutsideClick:!1,allowEscapeKey:!1,position:"top-end",didOpen:()=>{a().showLoading(),i.start()}}),i.onresult=e=>{let n=e.results[0][0].transcript;a().close(),t(n)},i.onerror=e=>{a().close(),n(e.error||"Lỗi kh\xf4ng x\xe1c định")},i.onend=()=>{i.resultReceived||(a().close(),n("Kh\xf4ng nghe thấy \xe2m thanh"))}})}},23508:function(e,t,n){"use strict";n.d(t,{FF:function(){return A},GJ:function(){return v},Gv:function(){return m},LA:function(){return g},PA:function(){return f},Pw:function(){return b},V2:function(){return p},bg:function(){return j},o0:function(){return u},sq:function(){return y},xb:function(){return d},yI:function(){return x}});var i=n(57437),a=n(9782),l=n(31213),r=n(2265),s=n(45749),c=n(66648),o=n(38472),h=n(91654);let u=e=>{if(!e)return"";try{let t=new Date(e);return(0,a.WU)(t,"h:mm a, dd 'Th\xe1ng' MM, yyyy",{locale:l.vi})}catch(t){return console.error("Invalid date format:",e),e}};function d(e){return(0,i.jsxs)("div",{className:"itemCard-container-dashboardView",children:[(0,i.jsxs)("div",{className:"itemCard-UserName itemcard-UserName-sticky",children:[(0,i.jsxs)("div",{className:"itemCard-UserName-1",children:[(0,i.jsx)(c.default,{src:e.imgUser?e.imgUser:s.Z,alt:"img",width:30,height:30}),(0,i.jsxs)("div",{className:"itemCard-UserName-container",children:[(0,i.jsx)("h4",{className:"username-card",children:e.username}),(0,i.jsx)("p",{style:{margin:"0"},children:u(e.dateTime)})]})]}),(()=>{let t=localStorage.getItem("name");return e.username==t?(0,i.jsx)("div",{className:"itemCard-UserName-1",children:(0,i.jsx)("button",{className:"btn btn-options",onClick:e.removeClick,style:{padding:"0",margin:"0"},children:(0,i.jsx)("i",{className:"fa-solid fa-trash"})})}):null})()]}),(0,i.jsx)("div",{className:"itemCard-baiDich",children:e.baidich})]})}let g=(e,t)=>e?e.split(RegExp("(".concat(t,")"),"gi")).map((e,n)=>e.toLowerCase()===t.toLowerCase()?(0,i.jsx)("span",{style:{color:"red"},children:e},n):e.split("\n").map((e,t,n)=>t===n.length-1?e:(0,i.jsxs)(r.Fragment,{children:[e,(0,i.jsx)("br",{})]},t))):null,m=(e,t)=>{if(!e||!t||0===t.length)return null;let n=RegExp("(".concat(t.join("|"),")"),"gi");return e.split(n).map((e,n)=>t.some(t=>t.toLowerCase()===e.toLowerCase())?(0,i.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:(0,i.jsx)(h.Z,{chineseList:e,isGianthe:!0})},n):(0,i.jsx)(r.Fragment,{children:e.split("\n").map((e,t,a)=>(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)(h.Z,{chineseList:e,isGianthe:!0}),t<a.length-1&&(0,i.jsx)("br",{})]},"".concat(n,"-").concat(t)))},n))},A=async e=>{try{let t=await o.Z.get("https://translate.googleapis.com/translate_a/single?client=gtx&dt=t&dt=bd&dj=1&dt=ex&dt=ld&dt=md&dt=qca&dt=rm&dt=ss&sl=vi&tl=en&q=".concat(encodeURIComponent(e)));if(t.data)return t.data.sentences.filter(e=>e.trans).map(e=>e.trans.trim()).join(" ");return e}catch(t){return console.error("Lỗi khi gọi API:",t),e}},f=async e=>{try{let t=await o.Z.get("https://translate.googleapis.com/translate_a/single?client=gtx&dt=t&dt=bd&dj=1&dt=ex&dt=ld&dt=md&dt=qca&dt=rm&dt=ss&sl=zh-CN&tl=zh-TW&q=".concat(encodeURIComponent(e)));if(t.data)return t.data.sentences.filter(e=>e.trans).map(e=>e.trans.trim()).join(" ");return e}catch(t){return console.error("Lỗi khi gọi API:",t),e}},p=async e=>{try{let t=await o.Z.get("https://translate.googleapis.com/translate_a/single?client=gtx&dt=t&dt=bd&dj=1&dt=ex&dt=ld&dt=md&dt=qca&dt=rm&dt=ss&sl=zh-TW&tl=vi&q=".concat(encodeURIComponent(e)));if(t.data)return t.data;return e}catch(t){return console.error("Lỗi khi gọi API:",t),e}},b=e=>e&&e.includes("hocdichchuhan.github.io")?e.replace("hocdichchuhan.github.io","tiengtrungdongyang.com"):e,x=async e=>{let t=encodeURIComponent(e),n=await o.Z.get("https://api.hanzii.net/api/search/vi/".concat(t,"?type=word&page=1&limit=2"));return n.data.found?n.data:null},v=()=>{let e=y();return!!e&&"sDHYFpe6CMazPbsZ0mzSyY8d5Ev1"==e},j=()=>!!y(),y=()=>{let e=JSON.parse(localStorage.getItem("userLogin"));return null==e?void 0:e.uid}},45749:function(e,t){"use strict";t.Z={src:"/_next/static/media/user.f64324c2.jpg",height:200,width:200,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wgARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAG0E//EABUQAQEAAAAAAAAAAAAAAAAAABMk/9oACAEBAAEFAlo//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAwEBPwF//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAgEBPwF//8QAGBAAAgMAAAAAAAAAAAAAAAAAABIxQWH/2gAIAQEABj8CRqjT/8QAGBAAAgMAAAAAAAAAAAAAAAAAESEAMbH/2gAIAQEAAT8hGkETU//aAAwDAQACAAMAAAAQ+//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABgQAAIDAAAAAAAAAAAAAAAAAAARQZGh/9oACAEBAAE/ELbi5YP/2Q==",blurWidth:8,blurHeight:8}}},function(e){e.O(0,[5613,770,5527,4358,7481,9208,9461,8765,4974,3539,8472,609,3830,6901,6802,1654,3104,2971,7023,1744],function(){return e(e.s=5109)}),_N_E=e.O()}]);