(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9855],{3836:function(n,i,e){Promise.resolve().then(e.bind(e,815))},815:function(n,i,e){"use strict";e.d(i,{default:function(){return r}});var t=e(7437),a=e(2265),s=e(8708);e(4379),e(516),e(5606);var c=e(9768);e(7138),e(6648),e(1243);var l=e(3508);function r(n){var i;let{hsk:e}=n,[r,u]=(0,a.useState)(!0),[o,d]=(0,a.useState)(),[h,g]=(0,a.useState)(),[v,m]=(0,a.useState)(),[f,p]=(0,a.useState)(!1),[x,j]=(0,a.useState)(!1),[b,N]=(0,a.useState)(!1),[D,y]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let n=(0,l.GJ)(),i=(0,l.bg)();j(n),p(i)},[]),(o&&(i=o.split("="))[1]&&i[1].split("&")[0],r)?(0,t.jsx)(c.Z,{}):(0,t.jsx)(s.Z,{body:(0,t.jsx)("div",{className:"ktBTContainer"})})}e(7593),e(6793),e(1539),e(3492),e(1467),e(9460),e(8996)},9768:function(n,i,e){"use strict";e.d(i,{Z:function(){return l}});var t=e(7437),a=e(2265),s={src:"/_next/static/media/Loading.3170e5c7.gif",height:480,width:475,blurWidth:0,blurHeight:0},c=e(6648);class l extends a.Component{render(){return(0,t.jsx)("div",{className:"loadingData",children:(0,t.jsxs)("div",{className:"loadingData-container",children:[(0,t.jsx)(c.default,{src:s,alt:"Loading...",width:100,height:100}),(0,t.jsx)("h2",{children:"Website đang tải dữ liệu, xin vui l\xf2ng chờ trong gi\xe2y l\xe1t"})]})})}}},8996:function(n,i,e){"use strict";e.d(i,{Z:function(){return v}});var t=e(7437),a=e(2265),s=e(9745),c=e(516),l=e(5606),r=e(2808),u=e(3137),o=e(3830),d=e(8433),h=e(4379),g=e.n(h);function v(n){let{dsCau:i,isGianthe:e,pathBaitap:h,hsk:v,id:m,onNext:f,isShowNghia:p=!0}=n,[x,j]=(0,a.useState)(null),[b,N]=(0,a.useState)({}),[D,y]=(0,a.useState)(!1),[C,Z]=(0,a.useState)(!1),w=(n,i)=>{g().fire({icon:n,title:i,position:"center",showConfirmButton:!1,timer:1500,timerProgressBar:!0})};(0,a.useEffect)(()=>{let n=localStorage.getItem("userLogin");if(n){let e=JSON.parse(n);j(e),i.forEach(async(n,i)=>{let t="".concat(h,"/cauhoi/").concat(e.uid,"/").concat(i),a=await (0,c.U2)((0,c.iH)(l.db,t));a.exists()&&N(n=>({...n,[i]:{userInput:a.val().userInput||"",nghia:a.val().nghiacuanguoidung||""}}))})}},[i,h]);let k=(n,i,e)=>{N(t=>({...t,[n]:{...t[n],[i]:e}}))},S=async()=>{if(x){for(let s=0;s<i.length;s++){var n,e,t,a;let r=i[s],u=(null===(e=b[s])||void 0===e?void 0:null===(n=e.userInput)||void 0===n?void 0:n.trim())||"",o=(null===(a=b[s])||void 0===a?void 0:null===(t=a.nghia)||void 0===t?void 0:t.trim())||"",d="".concat(h,"/cauhoi/").concat(x.uid,"/").concat(s);await (0,c.t8)((0,c.iH)(l.db,d),{userInput:u,nghia:r.nghia,hanviet:r.gianthe,nghiacuanguoidung:o,time:Date.now()})}w("success","Đ\xe3 lưu to\xe0n bộ b\xe0i l\xe0m!")}},E=async()=>{if(!x)return;console.log(123);let n="".concat(h,"/cauhoi/").concat(x.uid),e="user/baitap/".concat(x.uid,"/").concat(v,"_").concat(m),t=Date.now();try{let a=await (0,c.U2)((0,c.iH)(l.db,n));if(a.exists()){let n=a.val(),s=i.map((i,e)=>{var a,s;return{tiengtrung:i.tiengtrung,gianthe:i.gianthe,pinyin:i.pinyin,nghia:i.nghia,cautraloi:(null===(a=n[e])||void 0===a?void 0:a.userInput)||"",nghiacuanguoidung:(null===(s=n[e])||void 0===s?void 0:s.nghiacuanguoidung)||"",time:t}});await (0,c.t8)((0,c.iH)(l.db,e),{hsk:v,id:m,timeSubmit:t,cauTraLoi:s}),w("success","Đ\xe3 gửi b\xe0i tập th\xe0nh c\xf4ng!"),f()}else w("warning","Chưa c\xf3 dữ liệu để gửi!")}catch(n){console.error("Lỗi:",n),w("error","Lỗi khi gửi b\xe0i tập!")}};return(0,t.jsxs)("div",{className:"container py-4",children:[(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,t.jsxs)("div",{className:"btn-group",children:[(0,t.jsx)(r.Z,{variant:"outline-primary",onClick:()=>y(!D),children:D?"Ẩn Pinyin":"Hiện Pinyin"}),p&&(0,t.jsx)(r.Z,{variant:"outline-danger",onClick:()=>Z(!C),children:C?"Ẩn Nghĩa":"Hiện Nghĩa"})]}),(0,t.jsx)(r.Z,{variant:"success",onClick:E,children:"\uD83D\uDCE4 Gửi B\xe0i Tập"})]}),i.map((n,i)=>{var a,c;return(0,t.jsx)(u.Z,{className:"mb-4 shadow-sm",children:(0,t.jsxs)(u.Z.Body,{children:[(0,t.jsxs)("div",{className:"d-flex",children:[(0,t.jsxs)("h5",{className:"mb-3 text-primary fw-bold fs-3",children:["\uD83D\uDCDD C\xe2u ",i+1,": ",e?n.gianthe:n.tiengtrung]}),(0,t.jsx)(r.Z,{variant:"outline-secondary",onClick:()=>(0,s.Z)(n.gianthe),children:"\uD83D\uDD0A"})]}),D&&(0,t.jsxs)("div",{className:"text-muted mb-2",children:["\uD83D\uDCDA Pinyin: ",n.pinyin]}),C&&(0,t.jsxs)("div",{className:"mb-3",children:["\uD83D\uDCA1 Nghĩa: ",n.nghia]}),(0,t.jsxs)(o.Z.Group,{className:"mb-2",children:[(0,t.jsx)(o.Z.Label,{children:"Nhập c\xe2u trả lời của bạn:"}),(0,t.jsx)(d.Z,{value:(null===(a=b[i])||void 0===a?void 0:a.userInput)||"",className:"form-control fs-3",placeholder:"你的回答",onChange:n=>k(i,"userInput",n.target.value)})]}),(0,t.jsxs)(o.Z.Group,{className:"mb-3",children:[(0,t.jsx)(o.Z.Label,{children:"Nhập nghĩa của c\xe2u trả lời:"}),(0,t.jsx)(d.Z,{value:(null===(c=b[i])||void 0===c?void 0:c.nghia)||"",className:"form-control fs-5",placeholder:"Nhập nghĩa của c\xe2u trả lời",onChange:n=>k(i,"nghia",n.target.value)})]})]})},i)}),(0,t.jsxs)("div",{className:"d-flex justify-content-end gap-2 mt-4",children:[(0,t.jsx)(r.Z,{variant:"outline-secondary",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"⬆️ Về đầu"}),(0,t.jsx)(r.Z,{variant:"primary",onClick:()=>S(),children:"\uD83D\uDCBE Lưu tạm thời"}),(0,t.jsx)(r.Z,{variant:"success",onClick:()=>E(),children:"\uD83D\uDCE4 Gửi B\xe0i Tập"})]})]})}},7593:function(n,i,e){"use strict";e.d(i,{Z:function(){return a}});var t=e(7437);function a(n){let{show:i,children:e,onClose:a}=n;return i?(0,t.jsx)("div",{className:"overlay-container d-flex align-items-center justify-content-center",onClick:()=>{a()},children:(0,t.jsxs)("div",{className:"overlay-content position-relative bg-white rounded p-3 shadow",onClick:n=>{n.stopPropagation()},children:[(0,t.jsx)("button",{className:"btn-close position-absolute top-0 end-0 m-2",onClick:a}),(0,t.jsx)("div",{className:"overlay-scroll",children:e})]})}):null}e(4075)},4075:function(){}},function(n){n.O(0,[5527,4358,7481,9208,9461,5973,7143,8472,609,6666,6901,8708,6602,6045,2971,7023,1744],function(){return n(n.s=3836)}),_N_E=n.O()}]);