(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9855],{63836:function(t,e,n){Promise.resolve().then(n.bind(n,40815))},40815:function(t,e,n){"use strict";n.d(e,{default:function(){return c}});var i=n(57437),a=n(2265),s=n(66802);n(64379),n(60516),n(65606);var r=n(19768);n(87138),n(66648),n(31243);var A=n(23508);function c(t){var e;let{hsk:n}=t,[c,o]=(0,a.useState)(!0),[l,u]=(0,a.useState)(),[d,h]=(0,a.useState)(),[g,m]=(0,a.useState)(),[p,v]=(0,a.useState)(!1),[x,f]=(0,a.useState)(!1),[j,b]=(0,a.useState)(!1),[C,w]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let t=(0,A.GJ)(),e=(0,A.bg)();f(t),v(e)},[]),(l&&(e=l.split("="))[1]&&e[1].split("&")[0],c)?(0,i.jsx)(r.Z,{}):(0,i.jsx)(s.Z,{body:(0,i.jsx)("div",{className:"ktBTContainer"})})}n(27593),n(16793),n(25527),n(3492),n(31467),n(9460),n(28996)},19768:function(t,e,n){"use strict";n.d(e,{Z:function(){return A}});var i=n(57437),a=n(2265),s={src:"/_next/static/media/Loading.3170e5c7.gif",height:480,width:475,blurWidth:0,blurHeight:0},r=n(66648);class A extends a.Component{render(){return(0,i.jsx)("div",{className:"loadingData",children:(0,i.jsxs)("div",{className:"loadingData-container",children:[(0,i.jsx)(r.default,{src:s,alt:"Loading...",width:100,height:100}),(0,i.jsx)("h2",{children:"Website đang tải dữ liệu, xin vui l\xf2ng chờ trong gi\xe2y l\xe1t"})]})})}}},28996:function(t,e,n){"use strict";n.d(e,{Z:function(){return g}});var i=n(57437),a=n(2265),s=n(89745),r=n(60516),A=n(65606),c=n(12808),o=n(73137),l=n(23830),u=n(34231),d=n(64379),h=n.n(d);function g(t){let{dsCau:e,isGianthe:n,pathBaitap:d,hsk:g,id:m,onNext:p,isShowNghia:v=!0}=t,[x,f]=(0,a.useState)(null),[j,b]=(0,a.useState)({}),[C,w]=(0,a.useState)(!1),[N,D]=(0,a.useState)(!1),y=(t,e)=>{h().fire({icon:t,title:e,position:"center",showConfirmButton:!1,timer:1500,timerProgressBar:!0})};(0,a.useEffect)(()=>{let t=localStorage.getItem("userLogin");if(t){let n=JSON.parse(t);f(n),e.forEach(async(t,e)=>{let i="".concat(d,"/cauhoi/").concat(n.uid,"/").concat(e),a=await (0,r.U2)((0,r.iH)(A.db,i));a.exists()&&b(t=>({...t,[e]:{userInput:a.val().userInput||"",nghia:a.val().nghiacuanguoidung||""}}))})}},[e,d]);let E=(t,e,n)=>{b(i=>({...i,[t]:{...i[t],[e]:n}}))},B=async()=>{if(x){for(let s=0;s<e.length;s++){var t,n,i,a;let c=e[s],o=(null===(n=j[s])||void 0===n?void 0:null===(t=n.userInput)||void 0===t?void 0:t.trim())||"",l=(null===(a=j[s])||void 0===a?void 0:null===(i=a.nghia)||void 0===i?void 0:i.trim())||"",u="".concat(d,"/cauhoi/").concat(x.uid,"/").concat(s);await (0,r.t8)((0,r.iH)(A.db,u),{userInput:o,nghia:c.nghia,hanviet:c.gianthe,nghiacuanguoidung:l,time:Date.now()})}y("success","Đ\xe3 lưu to\xe0n bộ b\xe0i l\xe0m!")}},I=async()=>{if(!x)return;console.log(123);let t="".concat(d,"/cauhoi/").concat(x.uid),n="user/baitap/".concat(x.uid,"/").concat(g,"_").concat(m),i=Date.now();try{let a=await (0,r.U2)((0,r.iH)(A.db,t));if(a.exists()){let t=a.val(),s=e.map((e,n)=>{var a,s;return{tiengtrung:e.tiengtrung,gianthe:e.gianthe,pinyin:e.pinyin,nghia:e.nghia,cautraloi:(null===(a=t[n])||void 0===a?void 0:a.userInput)||"",nghiacuanguoidung:(null===(s=t[n])||void 0===s?void 0:s.nghiacuanguoidung)||"",time:i}});await (0,r.t8)((0,r.iH)(A.db,n),{hsk:g,id:m,timeSubmit:i,cauTraLoi:s}),y("success","Đ\xe3 gửi b\xe0i tập th\xe0nh c\xf4ng!"),p()}else y("warning","Chưa c\xf3 dữ liệu để gửi!")}catch(t){console.error("Lỗi:",t),y("error","Lỗi khi gửi b\xe0i tập!")}};return(0,i.jsxs)("div",{className:"container py-4",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,i.jsxs)("div",{className:"btn-group",children:[(0,i.jsx)(c.Z,{variant:"outline-primary",onClick:()=>w(!C),children:C?"Ẩn Pinyin":"Hiện Pinyin"}),v&&(0,i.jsx)(c.Z,{variant:"outline-danger",onClick:()=>D(!N),children:N?"Ẩn Nghĩa":"Hiện Nghĩa"})]}),(0,i.jsx)(c.Z,{variant:"success",onClick:I,children:"\uD83D\uDCE4 Gửi B\xe0i Tập"})]}),e.map((t,e)=>{var a,r;return(0,i.jsx)(o.Z,{className:"mb-4 shadow-sm",children:(0,i.jsxs)(o.Z.Body,{children:[(0,i.jsxs)("div",{className:"d-flex",children:[(0,i.jsxs)("h5",{className:"mb-3 text-primary fw-bold fs-3",children:["\uD83D\uDCDD C\xe2u ",e+1,": ",n?t.gianthe:t.tiengtrung]}),(0,i.jsx)(c.Z,{variant:"outline-secondary",onClick:()=>(0,s.Z)(t.gianthe),children:"\uD83D\uDD0A"})]}),C&&(0,i.jsxs)("div",{className:"text-muted mb-2",children:["\uD83D\uDCDA Pinyin: ",t.pinyin]}),N&&(0,i.jsxs)("div",{className:"mb-3",children:["\uD83D\uDCA1 Nghĩa: ",t.nghia]}),(0,i.jsxs)(l.Z.Group,{className:"mb-2",children:[(0,i.jsx)(l.Z.Label,{children:"Nhập c\xe2u trả lời của bạn:"}),(0,i.jsx)(u.Z,{value:(null===(a=j[e])||void 0===a?void 0:a.userInput)||"",className:"form-control fs-3",placeholder:"你的回答",onChange:t=>E(e,"userInput",t.target.value)})]}),(0,i.jsxs)(l.Z.Group,{className:"mb-3",children:[(0,i.jsx)(l.Z.Label,{children:"Nhập nghĩa của c\xe2u trả lời:"}),(0,i.jsx)(u.Z,{value:(null===(r=j[e])||void 0===r?void 0:r.nghia)||"",className:"form-control fs-5",placeholder:"Nhập nghĩa của c\xe2u trả lời",onChange:t=>E(e,"nghia",t.target.value)})]})]})},e)}),(0,i.jsxs)("div",{className:"d-flex justify-content-end gap-2 mt-4",children:[(0,i.jsx)(c.Z,{variant:"outline-secondary",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"⬆️ Về đầu"}),(0,i.jsx)(c.Z,{variant:"primary",onClick:()=>B(),children:"\uD83D\uDCBE Lưu tạm thời"}),(0,i.jsx)(c.Z,{variant:"success",onClick:()=>I(),children:"\uD83D\uDCE4 Gửi B\xe0i Tập"})]})]})}},62474:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var i=n(64379),a=n.n(i);function s(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"VN";return new Promise((e,n)=>{if(!("webkitSpeechRecognition"in window)){n("Tr\xecnh duyệt kh\xf4ng hỗ trợ Speech Recognition");return}let i=new window.webkitSpeechRecognition;i.lang=({VN:"vi-VN",CN:"zh-CN"})[t]||"vi-VN",i.continuous=!1,i.interimResults=!1,a().fire({title:"\uD83C\uDFA4 Đang lắng nghe (".concat(t,")"),text:"H\xe3y n\xf3i v\xe0o micro...",allowOutsideClick:!1,allowEscapeKey:!1,position:"top-end",didOpen:()=>{a().showLoading(),i.start()}}),i.onresult=t=>{let n=t.results[0][0].transcript;a().close(),e(n)},i.onerror=t=>{a().close(),n(t.error||"Lỗi kh\xf4ng x\xe1c định")},i.onend=()=>{i.resultReceived||(a().close(),n("Kh\xf4ng nghe thấy \xe2m thanh"))}})}},23508:function(t,e,n){"use strict";n.d(e,{FF:function(){return m},GJ:function(){return j},Gv:function(){return g},LA:function(){return h},PA:function(){return p},Pw:function(){return x},V2:function(){return v},bg:function(){return b},o0:function(){return u},sq:function(){return C},xb:function(){return d},yI:function(){return f}});var i=n(57437),a=n(9782),s=n(31213),r=n(2265),A=n(45749),c=n(66648),o=n(38472),l=n(91654);let u=t=>{if(!t)return"";try{let e=new Date(t);return(0,a.WU)(e,"h:mm a, dd 'Th\xe1ng' MM, yyyy",{locale:s.vi})}catch(e){return console.error("Invalid date format:",t),t}};function d(t){return(0,i.jsxs)("div",{className:"itemCard-container-dashboardView",children:[(0,i.jsxs)("div",{className:"itemCard-UserName itemcard-UserName-sticky",children:[(0,i.jsxs)("div",{className:"itemCard-UserName-1",children:[(0,i.jsx)(c.default,{src:t.imgUser?t.imgUser:A.Z,alt:"img",width:30,height:30}),(0,i.jsxs)("div",{className:"itemCard-UserName-container",children:[(0,i.jsx)("h4",{className:"username-card",children:t.username}),(0,i.jsx)("p",{style:{margin:"0"},children:u(t.dateTime)})]})]}),(()=>{let e=localStorage.getItem("name");return t.username==e?(0,i.jsx)("div",{className:"itemCard-UserName-1",children:(0,i.jsx)("button",{className:"btn btn-options",onClick:t.removeClick,style:{padding:"0",margin:"0"},children:(0,i.jsx)("i",{className:"fa-solid fa-trash"})})}):null})()]}),(0,i.jsx)("div",{className:"itemCard-baiDich",children:t.baidich})]})}let h=(t,e)=>t?t.split(RegExp("(".concat(e,")"),"gi")).map((t,n)=>t.toLowerCase()===e.toLowerCase()?(0,i.jsx)("span",{style:{color:"red"},children:t},n):t.split("\n").map((t,e,n)=>e===n.length-1?t:(0,i.jsxs)(r.Fragment,{children:[t,(0,i.jsx)("br",{})]},e))):null,g=(t,e)=>{if(!t||!e||0===e.length)return null;let n=RegExp("(".concat(e.join("|"),")"),"gi");return t.split(n).map((t,n)=>e.some(e=>e.toLowerCase()===t.toLowerCase())?(0,i.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:(0,i.jsx)(l.Z,{chineseList:t,isGianthe:!0})},n):(0,i.jsx)(r.Fragment,{children:t.split("\n").map((t,e,a)=>(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)(l.Z,{chineseList:t,isGianthe:!0}),e<a.length-1&&(0,i.jsx)("br",{})]},"".concat(n,"-").concat(e)))},n))},m=async t=>{try{let e=await o.Z.get("https://translate.googleapis.com/translate_a/single?client=gtx&dt=t&dt=bd&dj=1&dt=ex&dt=ld&dt=md&dt=qca&dt=rm&dt=ss&sl=vi&tl=en&q=".concat(encodeURIComponent(t)));if(e.data)return e.data.sentences.filter(t=>t.trans).map(t=>t.trans.trim()).join(" ");return t}catch(e){return console.error("Lỗi khi gọi API:",e),t}},p=async t=>{try{let e=await o.Z.get("https://translate.googleapis.com/translate_a/single?client=gtx&dt=t&dt=bd&dj=1&dt=ex&dt=ld&dt=md&dt=qca&dt=rm&dt=ss&sl=zh-CN&tl=zh-TW&q=".concat(encodeURIComponent(t)));if(e.data)return e.data.sentences.filter(t=>t.trans).map(t=>t.trans.trim()).join(" ");return t}catch(e){return console.error("Lỗi khi gọi API:",e),t}},v=async t=>{try{let e=await o.Z.get("https://translate.googleapis.com/translate_a/single?client=gtx&dt=t&dt=bd&dj=1&dt=ex&dt=ld&dt=md&dt=qca&dt=rm&dt=ss&sl=zh-TW&tl=vi&q=".concat(encodeURIComponent(t)));if(e.data)return e.data;return t}catch(e){return console.error("Lỗi khi gọi API:",e),t}},x=t=>t&&t.includes("hocdichchuhan.github.io")?t.replace("hocdichchuhan.github.io","tiengtrungdongyang.com"):t,f=async t=>{let e=encodeURIComponent(t),n=await o.Z.get("https://api.hanzii.net/api/search/vi/".concat(e,"?type=word&page=1&limit=2"));return n.data.found?n.data:null},j=()=>{let t=C();return!!t&&"sDHYFpe6CMazPbsZ0mzSyY8d5Ev1"==t},b=()=>!!C(),C=()=>{let t=JSON.parse(localStorage.getItem("userLogin"));return null==t?void 0:t.uid}},45749:function(t,e){"use strict";e.Z={src:"/_next/static/media/user.f64324c2.jpg",height:200,width:200,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wgARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAG0E//EABUQAQEAAAAAAAAAAAAAAAAAABMk/9oACAEBAAEFAlo//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAwEBPwF//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAgEBPwF//8QAGBAAAgMAAAAAAAAAAAAAAAAAABIxQWH/2gAIAQEABj8CRqjT/8QAGBAAAgMAAAAAAAAAAAAAAAAAESEAMbH/2gAIAQEAAT8hGkETU//aAAwDAQACAAMAAAAQ+//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABgQAAIDAAAAAAAAAAAAAAAAAAARQZGh/9oACAEBAAE/ELbi5YP/2Q==",blurWidth:8,blurHeight:8}}},function(t){t.O(0,[2800,770,5527,4358,7481,9208,9461,8765,4974,3539,8472,609,3830,6901,6802,1654,3104,2971,7023,1744],function(){return t(t.s=63836)}),_N_E=t.O()}]);