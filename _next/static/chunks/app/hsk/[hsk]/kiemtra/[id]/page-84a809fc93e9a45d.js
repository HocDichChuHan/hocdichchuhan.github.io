(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9855],{63836:function(n,e,i){Promise.resolve().then(i.bind(i,40815))},40815:function(n,e,i){"use strict";i.d(e,{default:function(){return r}});var t=i(57437),a=i(2265),s=i(66802);i(64379),i(60516),i(65606);var c=i(19768);i(87138),i(66648),i(31243);var o=i(23508);function r(n){var e;let{hsk:i}=n,[r,l]=(0,a.useState)(!0),[u,d]=(0,a.useState)(),[h,g]=(0,a.useState)(),[v,m]=(0,a.useState)(),[p,f]=(0,a.useState)(!1),[x,b]=(0,a.useState)(!1),[N,j]=(0,a.useState)(!1),[D,w]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let n=(0,o.GJ)(),e=(0,o.bg)();b(n),f(e)},[]),(u&&(e=u.split("="))[1]&&e[1].split("&")[0],r)?(0,t.jsx)(c.Z,{}):(0,t.jsx)(s.Z,{body:(0,t.jsx)("div",{className:"ktBTContainer"})})}i(27593),i(16793),i(25527),i(3492),i(31467),i(9460),i(28996)},28996:function(n,e,i){"use strict";i.d(e,{Z:function(){return v}});var t=i(57437),a=i(2265),s=i(89745),c=i(60516),o=i(65606),r=i(12808),l=i(73137),u=i(23830),d=i(34231),h=i(64379),g=i.n(h);function v(n){let{dsCau:e,isGianthe:i,pathBaitap:h,hsk:v,id:m,onNext:p,isShowNghia:f=!0}=n,[x,b]=(0,a.useState)(null),[N,j]=(0,a.useState)({}),[D,w]=(0,a.useState)(!1),[y,C]=(0,a.useState)(!1),k=(n,e)=>{g().fire({icon:n,title:e,position:"center",showConfirmButton:!1,timer:1500,timerProgressBar:!0})};(0,a.useEffect)(()=>{let n=localStorage.getItem("userLogin");if(n){let i=JSON.parse(n);b(i),e.forEach(async(n,e)=>{let t="".concat(h,"/cauhoi/").concat(i.uid,"/").concat(e),a=await (0,c.U2)((0,c.iH)(o.db,t));a.exists()&&j(n=>({...n,[e]:{userInput:a.val().userInput||"",nghia:a.val().nghiacuanguoidung||""}}))})}},[e,h]);let Z=(n,e,i)=>{j(t=>({...t,[n]:{...t[n],[e]:i}}))},S=async()=>{if(x){for(let s=0;s<e.length;s++){var n,i,t,a;let r=e[s],l=(null===(i=N[s])||void 0===i?void 0:null===(n=i.userInput)||void 0===n?void 0:n.trim())||"",u=(null===(a=N[s])||void 0===a?void 0:null===(t=a.nghia)||void 0===t?void 0:t.trim())||"",d="".concat(h,"/cauhoi/").concat(x.uid,"/").concat(s);await (0,c.t8)((0,c.iH)(o.db,d),{userInput:l,nghia:r.nghia,hanviet:r.gianthe,nghiacuanguoidung:u,time:Date.now()})}k("success","Đ\xe3 lưu to\xe0n bộ b\xe0i l\xe0m!")}},E=async()=>{if(!x)return;console.log(123);let n="".concat(h,"/cauhoi/").concat(x.uid),i="user/baitap/".concat(x.uid,"/").concat(v,"_").concat(m),t=Date.now();try{let a=await (0,c.U2)((0,c.iH)(o.db,n));if(a.exists()){let n=a.val(),s=e.map((e,i)=>{var a,s;return{tiengtrung:e.tiengtrung,gianthe:e.gianthe,pinyin:e.pinyin,nghia:e.nghia,cautraloi:(null===(a=n[i])||void 0===a?void 0:a.userInput)||"",nghiacuanguoidung:(null===(s=n[i])||void 0===s?void 0:s.nghiacuanguoidung)||"",time:t}});await (0,c.t8)((0,c.iH)(o.db,i),{hsk:v,id:m,timeSubmit:t,cauTraLoi:s}),k("success","Đ\xe3 gửi b\xe0i tập th\xe0nh c\xf4ng!"),p()}else k("warning","Chưa c\xf3 dữ liệu để gửi!")}catch(n){console.error("Lỗi:",n),k("error","Lỗi khi gửi b\xe0i tập!")}};return(0,t.jsxs)("div",{className:"container py-4",children:[(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,t.jsxs)("div",{className:"btn-group",children:[(0,t.jsx)(r.Z,{variant:"outline-primary",onClick:()=>w(!D),children:D?"Ẩn Pinyin":"Hiện Pinyin"}),f&&(0,t.jsx)(r.Z,{variant:"outline-danger",onClick:()=>C(!y),children:y?"Ẩn Nghĩa":"Hiện Nghĩa"})]}),(0,t.jsx)(r.Z,{variant:"success",onClick:E,children:"\uD83D\uDCE4 Gửi B\xe0i Tập"})]}),e.map((n,e)=>{var a,c;return(0,t.jsx)(l.Z,{className:"mb-4 shadow-sm",children:(0,t.jsxs)(l.Z.Body,{children:[(0,t.jsxs)("div",{className:"d-flex",children:[(0,t.jsxs)("h5",{className:"mb-3 text-primary fw-bold fs-3",children:["\uD83D\uDCDD C\xe2u ",e+1,": ",i?n.gianthe:n.tiengtrung]}),(0,t.jsx)(r.Z,{variant:"outline-secondary",onClick:()=>(0,s.Z)(n.gianthe),children:"\uD83D\uDD0A"})]}),D&&(0,t.jsxs)("div",{className:"text-muted mb-2",children:["\uD83D\uDCDA Pinyin: ",n.pinyin]}),y&&(0,t.jsxs)("div",{className:"mb-3",children:["\uD83D\uDCA1 Nghĩa: ",n.nghia]}),(0,t.jsxs)(u.Z.Group,{className:"mb-2",children:[(0,t.jsx)(u.Z.Label,{children:"Nhập c\xe2u trả lời của bạn:"}),(0,t.jsx)(d.Z,{value:(null===(a=N[e])||void 0===a?void 0:a.userInput)||"",className:"form-control fs-3",placeholder:"你的回答",onChange:n=>Z(e,"userInput",n.target.value)})]}),(0,t.jsxs)(u.Z.Group,{className:"mb-3",children:[(0,t.jsx)(u.Z.Label,{children:"Nhập nghĩa của c\xe2u trả lời:"}),(0,t.jsx)(d.Z,{value:(null===(c=N[e])||void 0===c?void 0:c.nghia)||"",className:"form-control fs-5",placeholder:"Nhập nghĩa của c\xe2u trả lời",onChange:n=>Z(e,"nghia",n.target.value)})]})]})},e)}),(0,t.jsxs)("div",{className:"d-flex justify-content-end gap-2 mt-4",children:[(0,t.jsx)(r.Z,{variant:"outline-secondary",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"⬆️ Về đầu"}),(0,t.jsx)(r.Z,{variant:"primary",onClick:()=>S(),children:"\uD83D\uDCBE Lưu tạm thời"}),(0,t.jsx)(r.Z,{variant:"success",onClick:()=>E(),children:"\uD83D\uDCE4 Gửi B\xe0i Tập"})]})]})}},62474:function(n,e,i){"use strict";i.d(e,{Z:function(){return s}});var t=i(64379),a=i.n(t);function s(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"VN";return new Promise((e,i)=>{if(!("webkitSpeechRecognition"in window)){i("Tr\xecnh duyệt kh\xf4ng hỗ trợ Speech Recognition");return}let t=new window.webkitSpeechRecognition;t.lang=({VN:"vi-VN",CN:"zh-CN"})[n]||"vi-VN",t.continuous=!1,t.interimResults=!1,a().fire({title:"\uD83C\uDFA4 Đang lắng nghe (".concat(n,")"),text:"H\xe3y n\xf3i v\xe0o micro...",allowOutsideClick:!1,allowEscapeKey:!1,position:"top-end",didOpen:()=>{a().showLoading(),t.start()}}),t.onresult=n=>{let i=n.results[0][0].transcript;a().close(),e(i)},t.onerror=n=>{a().close(),i(n.error||"Lỗi kh\xf4ng x\xe1c định")},t.onend=()=>{t.resultReceived||(a().close(),i("Kh\xf4ng nghe thấy \xe2m thanh"))}})}},27593:function(n,e,i){"use strict";i.d(e,{Z:function(){return a}});var t=i(57437);function a(n){let{show:e,children:i,onClose:a}=n;return e?(0,t.jsx)("div",{className:"overlay-container d-flex align-items-center justify-content-center",onClick:()=>{a()},children:(0,t.jsxs)("div",{className:"overlay-content position-relative bg-white rounded p-3 shadow",onClick:n=>{n.stopPropagation()},children:[(0,t.jsx)("button",{className:"btn-close position-absolute top-0 end-0 m-2",onClick:a}),(0,t.jsx)("div",{className:"overlay-scroll",children:i})]})}):null}i(24075)},24075:function(){}},function(n){n.O(0,[2866,5527,4358,7481,9208,9461,8765,4974,3539,8472,609,3830,6901,6802,2408,3104,2971,7023,1744],function(){return n(n.s=63836)}),_N_E=n.O()}]);