(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[66],{5109:function(e,t,a){Promise.resolve().then(a.bind(a,7876))},7876:function(e,t,a){"use strict";a.d(t,{default:function(){return g}});var n=a(7437),i=a(2265),s=a(8708);a(4379);var l=a(516),r=a(5606),c=a(9768);a(7138),a(6648),a(1243);var o=a(3508);a(7593);var h=a(6793),A=a(5527),d=a(3492);a(1467);var u=a(9460),m=a(8996);function g(e){let{hsk:t}=e,[a,g]=(0,i.useState)(!0),[p,x]=(0,i.useState)(),[f,j]=(0,i.useState)(),[b,v]=(0,i.useState)(!1),[N,y]=(0,i.useState)(!1),[E,C]=(0,i.useState)(!1),[B,M]=(0,i.useState)(!1),[S,k]=(0,i.useState)([]),[w,O]=(0,i.useState)(!1),[I,Q]=(0,i.useState)(null),[z,D]=(0,i.useState)("doc");(0,i.useEffect)(()=>{L();let e=(0,o.GJ)(),t=(0,o.bg)();y(e),v(t);let a=localStorage.getItem("isGianthe");null!==a&&O(JSON.parse(a))},[]),(0,i.useEffect)(()=>{T()},[f]),(0,i.useEffect)(()=>{let e=localStorage.getItem("userLogin");e&&Q(JSON.parse(e))},[]);let L=async()=>{try{g(!0),console.log(t);let e=(0,l.iH)(r.db,"user/kiemtra/".concat(t)),a=await (0,l.U2)(e);if(!a.exists())return console.log("Kh\xf4ng c\xf3 dữ liệu tại đường dẫn n\xe0y."),null;{let e=a.val();return console.log("Dữ liệu lấy được:",e),j(e),e}}catch(e){return console.error("Error getting data:",e),null}finally{g(!1)}},T=async()=>{f&&k(f.tumoi)},U=()=>{var e,a;null==S||null===(a=S.map(e=>e.tumoi))||void 0===a||null===(e=a.filter(Boolean))||void 0===e||e.flat();let i={};S.forEach(e=>{e.bai&&(i[e.bai]||(i[e.bai]=[]),i[e.bai].push(e))});let s=[];Object.values(i).forEach(e=>{if(e.length>0){let t=Math.floor(Math.random()*e.length);s.push(e[t])}});let l=Object.values(i).flat().filter(e=>!s.includes(e));for(;s.length<40&&l.length>0;){let e=Math.floor(Math.random()*l.length);s.push(l.splice(e,1)[0])}let r=s.sort(()=>Math.random()-.5);return(0,n.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:r.length>0&&(0,n.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,n.jsx)("h2",{children:"B\xe0i Test 1: Kĩ năng đọc: Lựa chọn cặp từ ch\xednh x\xe1c."}),(0,n.jsx)("hr",{}),(0,n.jsx)(h.Z,{tumoi:r,onFinish:()=>D("viet"),isGianthe:w,pathBaitap:"user/kiemtra/".concat(t,"/diem/").concat(I.uid)})]})})},Z=()=>{var e,a;null==S||null===(a=S.map(e=>e.tumoi))||void 0===a||null===(e=a.filter(Boolean))||void 0===e||e.flat();let i={};S.forEach(e=>{e.bai&&(i[e.bai]||(i[e.bai]=[]),i[e.bai].push(e))});let s=[];Object.values(i).forEach(e=>{if(e.length>0){let t=Math.floor(Math.random()*e.length);s.push(e[t])}});let l=Object.values(i).flat().filter(e=>!s.includes(e));for(;s.length<20&&l.length>0;){let e=Math.floor(Math.random()*l.length);s.push(l.splice(e,1)[0])}let r=s.sort(()=>Math.random()-.5);return(0,n.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:r.length>0&&(0,n.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,n.jsx)("h2",{children:"B\xe0i Test 2: Kĩ năng Viết: Nhập từ tiếng Trung đ\xfang với nghĩa."}),(0,n.jsx)("hr",{}),(0,n.jsx)(A.Z,{items:r,onFinish:()=>D("nghe"),isGianthe:w,pathBaitap:"user/kiemtra/".concat(t,"/diem/").concat(I.uid)})]})})},G=()=>{let e={};f.listen.forEach(t=>{t.bai&&(e[t.bai]||(e[t.bai]=[]),e[t.bai].push(t))});let a=[];Object.values(e).forEach(e=>{if(e.length>0){let t=Math.floor(Math.random()*e.length);a.push(e[t])}});let i=Object.values(e).flat().filter(e=>!a.includes(e));for(;a.length<20&&i.length>0;){let e=Math.floor(Math.random()*i.length);a.push(i.splice(e,1)[0])}let s=a.sort(()=>Math.random()-.5);return(0,n.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:(0,n.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,n.jsx)("h2",{children:"B\xe0i Test 3: Luyện nghe: Ho\xe0n th\xe0nh c\xe2u m\xe0 bạn nghe được:"}),(0,n.jsx)("hr",{}),(0,n.jsx)(u.Z,{validCau:s,isGianthe:w,pathBaitap:"user/kiemtra/".concat(t,"/diem/").concat(I.uid),onNext:()=>D("noi")})]})})},P=()=>{let e={};f.speak.forEach(t=>{t.bai&&(e[t.bai]||(e[t.bai]=[]),e[t.bai].push(t))});let a=[];Object.values(e).forEach(e=>{if(e.length>0){let t=Math.floor(Math.random()*e.length);a.push(e[t])}});let i=Object.values(e).flat().filter(e=>!a.includes(e));for(;a.length<20&&i.length>0;){let e=Math.floor(Math.random()*i.length);a.push(i.splice(e,1)[0])}let s=a.sort(()=>Math.random()-.5);return(0,n.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:s&&(0,n.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,n.jsx)("h2",{children:"B\xe0i Test 4: Luyện n\xf3i: N\xf3i lại c\xe2u tiếng Trung sau đ\xe2y:"}),(0,n.jsx)("hr",{}),(0,n.jsx)(d.Z,{validCau:s,isGianthe:w,onNext:()=>handleNextCau(),congdiem:()=>congdiemSpeech(),pathBaitap:"user/kiemtra/".concat(t,"/diem/").concat(I.uid)})]})})},R=()=>{let e={};f.cauhoi.forEach(t=>{t.bai&&(e[t.bai]||(e[t.bai]=[]),e[t.bai].push(t))});let a=[];Object.values(e).forEach(e=>{if(e.length>0){let t=Math.floor(Math.random()*e.length);a.push(e[t])}});let i=Object.values(e).flat().filter(e=>!a.includes(e));for(;a.length<20&&i.length>0;){let e=Math.floor(Math.random()*i.length);a.push(i.splice(e,1)[0])}let s=a.sort(()=>Math.random()-.5);return console.log(s),(0,n.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:(0,n.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,n.jsx)("h2",{children:"B\xe0i Test 5: Trả lời c\xe2u hỏi trong b\xe0i:"}),(0,n.jsx)("hr",{}),(0,n.jsx)(m.Z,{dsCau:s,isGianthe:w,pathBaitap:"user/kiemtra/".concat(t,"/diem/").concat(I.uid),hsk:t,onNext:()=>setIsAllSpeechCompleted(!0)})]})})};return a?(0,n.jsx)(c.Z,{}):(0,n.jsx)(s.Z,{body:(0,n.jsxs)("div",{className:"ktBTContainer",children:[(0,n.jsx)("div",{className:"MatchingGameContaniner",children:(0,n.jsxs)("div",{className:"flex gap-2 mb-4 ",children:[(0,n.jsx)("button",{onClick:()=>D("doc"),className:"btn ".concat("doc"===z?"btn-primary":"btn-outline-secondary"),children:"阅读 - Đọc"}),(0,n.jsx)("button",{onClick:()=>D("viet"),className:"btn ".concat("viet"===z?"btn-primary":"btn-outline-secondary"),children:"写字 - Viết"}),(0,n.jsx)("button",{onClick:()=>D("nghe"),className:"btn ".concat("nghe"===z?"btn-primary":"btn-outline-secondary"),children:"听力 - Nghe"}),(0,n.jsx)("button",{onClick:()=>D("noi"),className:"btn ".concat("noi"===z?"btn-primary":"btn-outline-secondary"),children:"说话 - N\xf3i"}),(0,n.jsx)("button",{onClick:()=>D("cauhoi"),className:"btn ".concat("cauhoi"===z?"btn-primary":"btn-outline-secondary"),children:"问答 - Vấn Đ\xe1p"})]})}),(0,n.jsxs)("h1",{className:"baihocgiaotiep-title baihocgiaotiep-title-number",children:["Kiểm Tra ",t.toUpperCase()," "]}),(0,n.jsx)("div",{children:(()=>{switch(z){case"nghe":return(0,n.jsx)(G,{});case"noi":return(0,n.jsx)(P,{});case"doc":return(0,n.jsx)(U,{});case"viet":return(0,n.jsx)(Z,{});case"cauhoi":return(0,n.jsx)(R,{});default:return null}})()})]})})}a(8433),a(2474)},9745:function(e,t){"use strict";let a=null,n=-1,i=!1;t.Z=(e,t)=>{if(speechSynthesis.speaking&&n!==t&&speechSynthesis.cancel(),n===t){speechSynthesis.speaking&&i?(speechSynthesis.pause(),console.log("pause"),i=!1):(speechSynthesis.resume(),console.log("resume"),i=!0);return}i=!0,(a=new SpeechSynthesisUtterance(e)).lang="zh-CN",a.rate=.8,speechSynthesis.speak(a),n=t,a.onend=()=>{n=-1}}},9768:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var n=a(7437),i=a(2265),s={src:"/_next/static/media/Loading.3170e5c7.gif",height:480,width:475,blurWidth:0,blurHeight:0},l=a(6648);class r extends i.Component{render(){return(0,n.jsx)("div",{className:"loadingData",children:(0,n.jsxs)("div",{className:"loadingData-container",children:[(0,n.jsx)(l.default,{src:s,alt:"Loading...",width:100,height:100}),(0,n.jsx)("h2",{children:"Website đang tải dữ liệu, xin vui l\xf2ng chờ trong gi\xe2y l\xe1t"})]})})}}},7593:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var n=a(7437);function i(e){let{show:t,children:a,onClose:i}=e;return t?(0,n.jsx)("div",{className:"overlay-container d-flex align-items-center justify-content-center",onClick:()=>{i()},children:(0,n.jsxs)("div",{className:"overlay-content position-relative bg-white rounded p-3 shadow",onClick:e=>{e.stopPropagation()},children:[(0,n.jsx)("button",{className:"btn-close position-absolute top-0 end-0 m-2",onClick:i}),(0,n.jsx)("div",{className:"overlay-scroll",children:a})]})}):null}a(4075)},3508:function(e,t,a){"use strict";a.d(t,{GJ:function(){return p},LA:function(){return d},PA:function(){return u},V2:function(){return m},bg:function(){return x},o0:function(){return h},sq:function(){return f},xb:function(){return A},yI:function(){return g}});var n=a(7437),i=a(9782),s=a(1213),l=a(2265),r=a(5749),c=a(6648),o=a(8472);let h=e=>{if(!e)return"";try{let t=new Date(e);return(0,i.WU)(t,"h:mm a, dd 'Th\xe1ng' MM, yyyy",{locale:s.vi})}catch(t){return console.error("Invalid date format:",e),e}};function A(e){return(0,n.jsxs)("div",{className:"itemCard-container-dashboardView",children:[(0,n.jsxs)("div",{className:"itemCard-UserName itemcard-UserName-sticky",children:[(0,n.jsxs)("div",{className:"itemCard-UserName-1",children:[(0,n.jsx)(c.default,{src:e.imgUser?e.imgUser:r.Z,alt:"img",width:30,height:30}),(0,n.jsxs)("div",{className:"itemCard-UserName-container",children:[(0,n.jsx)("h4",{className:"username-card",children:e.username}),(0,n.jsx)("p",{style:{margin:"0"},children:h(e.dateTime)})]})]}),(()=>{let t=localStorage.getItem("name");return e.username==t?(0,n.jsx)("div",{className:"itemCard-UserName-1",children:(0,n.jsx)("button",{className:"btn btn-options",onClick:e.removeClick,style:{padding:"0",margin:"0"},children:(0,n.jsx)("i",{className:"fa-solid fa-trash"})})}):null})()]}),(0,n.jsx)("div",{className:"itemCard-baiDich",children:e.baidich})]})}let d=(e,t)=>e?e.split(RegExp("(".concat(t,")"),"gi")).map((e,a)=>e.toLowerCase()===t.toLowerCase()?(0,n.jsx)("span",{style:{color:"red"},children:e},a):e.split("\n").map((e,t,a)=>t===a.length-1?e:(0,n.jsxs)(l.Fragment,{children:[e,(0,n.jsx)("br",{})]},t))):null,u=async e=>{try{let t=await o.Z.get("https://translate.googleapis.com/translate_a/single?client=gtx&dt=t&dt=bd&dj=1&dt=ex&dt=ld&dt=md&dt=qca&dt=rm&dt=ss&sl=zh-CN&tl=zh-TW&q=".concat(encodeURIComponent(e)));if(t.data)return t.data.sentences.filter(e=>e.trans).map(e=>e.trans.trim()).join(" ");return e}catch(t){return console.error("Lỗi khi gọi API:",t),e}},m=async e=>{try{let t=await o.Z.get("https://translate.googleapis.com/translate_a/single?client=gtx&dt=t&dt=bd&dj=1&dt=ex&dt=ld&dt=md&dt=qca&dt=rm&dt=ss&sl=zh-TW&tl=vi&q=".concat(encodeURIComponent(e)));if(t.data)return t.data;return e}catch(t){return console.error("Lỗi khi gọi API:",t),e}},g=async e=>{let t=encodeURIComponent(e),a=await o.Z.get("https://api.hanzii.net/api/search/vi/".concat(t,"?type=word&page=1&limit=2"));return a.data.found?a.data:null},p=()=>"duong171099"==localStorage.getItem("user"),x=()=>!!f(),f=()=>{let e=JSON.parse(localStorage.getItem("userLogin"));return null==e?void 0:e.uid}},1243:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var n=a(7437),i=a(2265),s=a(2808),l=a(8472),r=a(9745);function c(e){let{word:t,dataWrite:a,dataTranslate:c}=e,[o,h]=(0,i.useState)({}),A=c.result,d=a.result[0],u=(e,t)=>e.split(RegExp("(".concat(t,")"),"gi")).map((e,a)=>e.toLowerCase()===t.toLowerCase()?(0,n.jsx)("span",{style:{color:"red"},children:e},a):e),m=async e=>{try{let t=await l.Z.get("https://translate.googleapis.com/translate_a/single?client=gtx&dt=t&dt=bd&dj=1&dt=ex&dt=ld&dt=md&dt=qca&dt=rm&dt=ss&sl=zh-CN&tl=zh-TW&q=".concat(encodeURIComponent(e)));if(t.data)return t.data.sentences[0].trans;return e}catch(t){return console.error("Lỗi khi gọi API:",t),e}},g=async(e,t)=>{let a=await m(e);h(e=>({...e,[t]:a}))};return((0,i.useEffect)(()=>{var e,t;A&&(null===(t=A[0])||void 0===t?void 0:null===(e=t.content[0])||void 0===e?void 0:e.means)&&A[0].content[0].means.forEach((e,t)=>{e.examples&&e.examples.forEach((e,a)=>{let n="".concat(t,"-").concat(a);g(e.e,n)})})},[A]),a&&c)?(0,n.jsx)("div",{className:"tumoi-item",children:(0,n.jsxs)("div",{className:"tumoi-display",children:[(0,n.jsx)("div",{className:"tumoi-display-header",children:(0,n.jsxs)("h4",{children:[t," 【",A[0].cn_vi,"】(",A[0].pinyin,") Bộ thủ: (",d.sets,") H\xecnh th\xe1i: (",d.hinhthai,")"]})}),A[0].content[0].means.map((e,a)=>{let i=e.examples?e.examples:null,l=e.mean;return(0,n.jsxs)("div",{className:"tumoi-nghia",children:[(0,n.jsxs)("h4",{className:"tumoi-nghia-shower",children:["Nghĩa ",a+1,": ",l]}),i&&i.map((e,i)=>{let l=e.e,c=e.m,h=e.p,A=o["".concat(a,"-").concat(i)]||l;return(0,n.jsxs)("div",{className:"tumoi-vidu",children:[(0,n.jsxs)("h5",{children:["V\xed dụ ",i+1]}),(0,n.jsx)("span",{children:u(A,t)}),(0,n.jsx)(s.Z,{className:"btn-phatamthanh",style:{maxWidth:"50px",maxHeight:"50px"},variant:"danger",onClick:()=>(0,r.Z)(l,i),children:"\uD83D\uDD0A"}),(0,n.jsx)("p",{children:h}),(0,n.jsx)("p",{children:c})]},i)}),(0,n.jsx)("hr",{})]},a)})]})}):null}},4075:function(){},5749:function(e,t){"use strict";t.Z={src:"/_next/static/media/user.f64324c2.jpg",height:200,width:200,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wgARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAG0E//EABUQAQEAAAAAAAAAAAAAAAAAABMk/9oACAEBAAEFAlo//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAwEBPwF//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAgEBPwF//8QAGBAAAgMAAAAAAAAAAAAAAAAAABIxQWH/2gAIAQEABj8CRqjT/8QAGBAAAgMAAAAAAAAAAAAAAAAAESEAMbH/2gAIAQEAAT8hGkETU//aAAwDAQACAAMAAAAQ+//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABgQAAIDAAAAAAAAAAAAAAAAAAARQZGh/9oACAEBAAE/ELbi5YP/2Q==",blurWidth:8,blurHeight:8}}},function(e){e.O(0,[5527,4358,7481,9208,9461,5973,7143,8472,609,6666,6901,8708,9936,2971,7023,1744],function(){return e(e.s=5109)}),_N_E=e.O()}]);