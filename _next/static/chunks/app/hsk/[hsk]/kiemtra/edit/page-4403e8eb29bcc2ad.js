(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4260],{5138:function(e,t,n){Promise.resolve().then(n.bind(n,7634))},7634:function(e,t,n){"use strict";n.d(t,{default:function(){return u}});var a=n(7437),i=n(2265),s=n(8708),r=n(2808);n(4379);var l=n(516),c=n(5606),o=n(9768);n(7138),n(6648),n(1243);var A=n(3508);n(7593);var d=n(6793);n(5527),n(3492),n(1467),n(9460),n(8996),n(8433);var h=n(2474);function u(e){let{hsk:t}=e,[n,u]=(0,i.useState)(!0),[g,m]=(0,i.useState)(),[p,x]=(0,i.useState)(),[f,j]=(0,i.useState)(!1),[v,b]=(0,i.useState)(!1),[y,N]=(0,i.useState)(!1),[C,E]=(0,i.useState)(!1),[w,B]=(0,i.useState)([]),[k,S]=(0,i.useState)(!1),[I,Q]=(0,i.useState)(null),[O,T]=(0,i.useState)("doc");(0,i.useEffect)(()=>{z();let e=(0,A.GJ)(),t=(0,A.bg)();b(e),j(t);let n=localStorage.getItem("isGianthe");null!==n&&S(JSON.parse(n))},[]),(0,i.useEffect)(()=>{Z()},[p]),(0,i.useEffect)(()=>{let e=localStorage.getItem("userLogin");e&&Q(JSON.parse(e))},[]),(0,i.useEffect)(()=>{},[t]);let z=async()=>{try{u(!0),console.log(t);let e=(0,l.iH)(c.db,"/users/hsk/".concat(t)),n=await (0,l.U2)(e);if(!n.exists())return console.log("Kh\xf4ng c\xf3 dữ liệu tại đường dẫn n\xe0y."),null;{let e=n.val();return console.log("Dữ liệu lấy được:",e),x(e),e}}catch(e){return console.error("Error getting data:",e),null}finally{u(!1)}},D=(e,t,n)=>{B(a=>{let i=[...a];return i[e]={...i[e],[t]:n},i})},Z=async()=>{if(p){let e=Object.keys(p).filter(e=>parseInt(e.replace("b",""))),t=[];e.forEach(e=>{let n=p[e];Array.isArray(null==n?void 0:n.hoithoai)&&n.hoithoai.forEach(n=>{Array.isArray(null==n?void 0:n.tumoi)&&n.tumoi.forEach(n=>{t.push({...n,bai:e})})})});let n={};t.forEach(e=>{n[e.tiengtrung]||(n[e.tiengtrung]=e)});let a=Object.values(n);a.sort((e,t)=>e.pinyin.localeCompare(t.pinyin)),B([...a].filter(e=>e.bai).sort((e,t)=>{let n=parseInt(e.bai.slice(1)),a=parseInt(t.bai.slice(1));return n!==a?n-a:e.gianthe.length-t.gianthe.length}))}},U=async e=>{await (0,h.Z)("CN")};return n?(0,a.jsx)(o.Z,{}):(0,a.jsx)(s.Z,{body:(0,a.jsxs)("div",{className:"ktBTContainer",children:[(0,a.jsx)("div",{className:"MatchingGameContaniner",children:(0,a.jsxs)("div",{className:"flex gap-2 mb-4 ",children:[(0,a.jsx)("button",{onClick:()=>T("doc"),className:"btn ".concat("doc"===O?"btn-primary":"btn-outline-secondary"),children:"阅读 - Đọc"}),(0,a.jsx)("button",{onClick:()=>T("viet"),className:"btn ".concat("viet"===O?"btn-primary":"btn-outline-secondary"),children:"写字 - Viết"}),(0,a.jsx)("button",{onClick:()=>T("nghe"),className:"btn ".concat("nghe"===O?"btn-primary":"btn-outline-secondary"),children:"听力 - Nghe"}),(0,a.jsx)("button",{onClick:()=>T("noi"),className:"btn ".concat("noi"===O?"btn-primary":"btn-outline-secondary"),children:"说话 - N\xf3i"})]})}),(0,a.jsxs)("h1",{className:"baihocgiaotiep-title baihocgiaotiep-title-number",children:["Kiểm Tra ",t.toUpperCase()," "]}),(0,a.jsx)("div",{children:"doc"===O?(0,a.jsx)(()=>{var e,n;null==w||null===(n=w.map(e=>e.tumoi))||void 0===n||null===(e=n.filter(Boolean))||void 0===e||e.flat();let i={};w.forEach(e=>{e.bai&&(i[e.bai]||(i[e.bai]=[]),i[e.bai].push(e))});let s=[];Object.values(i).forEach(e=>{if(e.length>0){let t=Math.floor(Math.random()*e.length);s.push(e[t])}});let r=Object.values(i).flat().filter(e=>!s.includes(e));for(;s.length<40&&r.length>0;){let e=Math.floor(Math.random()*r.length);s.push(r.splice(e,1)[0])}let l=s.sort(()=>Math.random()-.5);return console.log(l),(0,a.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:l.length>0&&(0,a.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,a.jsx)("h2",{children:"B\xe0i tập 1: Kĩ năng đọc: Lựa chọn cặp từ ch\xednh x\xe1c."}),(0,a.jsx)("hr",{}),(0,a.jsx)(d.Z,{tumoi:l,onFinish:()=>handleFinishTumoi(),isGianthe:k,pathBaitap:"user/hsk/".concat(t,"/kiemtra/").concat(I.uid)})]})})},{}):null}),(()=>{if(w)return(0,a.jsxs)("div",{className:"baihocgiaotiep-tumoi",children:[(0,a.jsx)("h2",{children:"Từ mới"}),(0,a.jsx)("ul",{children:w&&w.map((e,t)=>(0,a.jsxs)("li",{className:"border rounded p-3 mb-3 shadow-sm bg-white",children:[(0,a.jsxs)("h2",{children:["Từ thứ ",t+1,"  B\xe0i ",e.bai]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(r.Z,{variant:"success",onClick:()=>U(t),children:"Get Voice"}),(0,a.jsx)("input",{type:"text",className:"tiengtrungText fs-3",value:e.gianthe?e.gianthe:"",placeholder:"中文简体",onChange:e=>D(t,"gianthe",e.target.value)}),(0,a.jsx)("input",{type:"text",className:"tiengtrungText fs-3",value:e.tiengtrung,placeholder:"中文",onChange:e=>D(t,"tiengtrung",e.target.value)}),(0,a.jsx)("input",{type:"text",className:"pinyinText",placeholder:"pinyin",value:e.pinyin,onChange:e=>D(t,"pinyin",e.target.value)}),(0,a.jsx)("input",{type:"text",className:"nghiaText",placeholder:"nghĩa",value:e.nghia,onChange:e=>D(t,"nghia",e.target.value)}),(0,a.jsx)(r.Z,{variant:"success",onClick:()=>getVoiceTumoiTiengViet(t),children:"Get Voice Dịch"}),(0,a.jsx)(r.Z,{variant:"warning",onClick:()=>getPinyinTuMoi(e.gianthe,t),children:"GetPinyin"})]}),(0,a.jsx)("div",{children:(0,a.jsx)(r.Z,{variant:"danger",onClick:()=>xoaTumoi(t),children:"X\xf3a từ mới n\xe0y"})})]},t))}),(0,a.jsx)(r.Z,{variant:"info",onClick:()=>addTumoi(),children:"Th\xeam Từ Mới"})]})})()]})})}},9745:function(e,t){"use strict";let n=null,a=-1,i=!1;t.Z=(e,t)=>{if(speechSynthesis.speaking&&a!==t&&speechSynthesis.cancel(),a===t){speechSynthesis.speaking&&i?(speechSynthesis.pause(),console.log("pause"),i=!1):(speechSynthesis.resume(),console.log("resume"),i=!0);return}i=!0,(n=new SpeechSynthesisUtterance(e)).lang="zh-CN",n.rate=.8,speechSynthesis.speak(n),a=t,n.onend=()=>{a=-1}}},9768:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var a=n(7437),i=n(2265),s={src:"/_next/static/media/Loading.3170e5c7.gif",height:480,width:475,blurWidth:0,blurHeight:0},r=n(6648);class l extends i.Component{render(){return(0,a.jsx)("div",{className:"loadingData",children:(0,a.jsxs)("div",{className:"loadingData-container",children:[(0,a.jsx)(r.default,{src:s,alt:"Loading...",width:100,height:100}),(0,a.jsx)("h2",{children:"Website đang tải dữ liệu, xin vui l\xf2ng chờ trong gi\xe2y l\xe1t"})]})})}}},7593:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(7437);function i(e){let{show:t,children:n,onClose:i}=e;return t?(0,a.jsx)("div",{className:"overlay-container d-flex align-items-center justify-content-center",onClick:()=>{i()},children:(0,a.jsxs)("div",{className:"overlay-content position-relative bg-white rounded p-3 shadow",onClick:e=>{e.stopPropagation()},children:[(0,a.jsx)("button",{className:"btn-close position-absolute top-0 end-0 m-2",onClick:i}),(0,a.jsx)("div",{className:"overlay-scroll",children:n})]})}):null}n(4075)},3508:function(e,t,n){"use strict";n.d(t,{GJ:function(){return p},LA:function(){return h},PA:function(){return u},V2:function(){return g},bg:function(){return x},o0:function(){return A},sq:function(){return f},xb:function(){return d},yI:function(){return m}});var a=n(7437),i=n(9782),s=n(1213),r=n(2265),l=n(5749),c=n(6648),o=n(8472);let A=e=>{if(!e)return"";try{let t=new Date(e);return(0,i.WU)(t,"h:mm a, dd 'Th\xe1ng' MM, yyyy",{locale:s.vi})}catch(t){return console.error("Invalid date format:",e),e}};function d(e){return(0,a.jsxs)("div",{className:"itemCard-container-dashboardView",children:[(0,a.jsxs)("div",{className:"itemCard-UserName itemcard-UserName-sticky",children:[(0,a.jsxs)("div",{className:"itemCard-UserName-1",children:[(0,a.jsx)(c.default,{src:e.imgUser?e.imgUser:l.Z,alt:"img",width:30,height:30}),(0,a.jsxs)("div",{className:"itemCard-UserName-container",children:[(0,a.jsx)("h4",{className:"username-card",children:e.username}),(0,a.jsx)("p",{style:{margin:"0"},children:A(e.dateTime)})]})]}),(()=>{let t=localStorage.getItem("name");return e.username==t?(0,a.jsx)("div",{className:"itemCard-UserName-1",children:(0,a.jsx)("button",{className:"btn btn-options",onClick:e.removeClick,style:{padding:"0",margin:"0"},children:(0,a.jsx)("i",{className:"fa-solid fa-trash"})})}):null})()]}),(0,a.jsx)("div",{className:"itemCard-baiDich",children:e.baidich})]})}let h=(e,t)=>e?e.split(RegExp("(".concat(t,")"),"gi")).map((e,n)=>e.toLowerCase()===t.toLowerCase()?(0,a.jsx)("span",{style:{color:"red"},children:e},n):e.split("\n").map((e,t,n)=>t===n.length-1?e:(0,a.jsxs)(r.Fragment,{children:[e,(0,a.jsx)("br",{})]},t))):null,u=async e=>{try{let t=await o.Z.get("https://translate.googleapis.com/translate_a/single?client=gtx&dt=t&dt=bd&dj=1&dt=ex&dt=ld&dt=md&dt=qca&dt=rm&dt=ss&sl=zh-CN&tl=zh-TW&q=".concat(encodeURIComponent(e)));if(t.data)return t.data.sentences.filter(e=>e.trans).map(e=>e.trans.trim()).join(" ");return e}catch(t){return console.error("Lỗi khi gọi API:",t),e}},g=async e=>{try{let t=await o.Z.get("https://translate.googleapis.com/translate_a/single?client=gtx&dt=t&dt=bd&dj=1&dt=ex&dt=ld&dt=md&dt=qca&dt=rm&dt=ss&sl=zh-TW&tl=vi&q=".concat(encodeURIComponent(e)));if(t.data)return t.data;return e}catch(t){return console.error("Lỗi khi gọi API:",t),e}},m=async e=>{let t=encodeURIComponent(e),n=await o.Z.get("https://api.hanzii.net/api/search/vi/".concat(t,"?type=word&page=1&limit=2"));return n.data.found?n.data:null},p=()=>"duong171099"==localStorage.getItem("user"),x=()=>!!f(),f=()=>{let e=JSON.parse(localStorage.getItem("userLogin"));return null==e?void 0:e.uid}},1243:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var a=n(7437),i=n(2265),s=n(2808),r=n(8472),l=n(9745);function c(e){let{word:t,dataWrite:n,dataTranslate:c}=e,[o,A]=(0,i.useState)({}),d=c.result,h=n.result[0],u=(e,t)=>e.split(RegExp("(".concat(t,")"),"gi")).map((e,n)=>e.toLowerCase()===t.toLowerCase()?(0,a.jsx)("span",{style:{color:"red"},children:e},n):e),g=async e=>{try{let t=await r.Z.get("https://translate.googleapis.com/translate_a/single?client=gtx&dt=t&dt=bd&dj=1&dt=ex&dt=ld&dt=md&dt=qca&dt=rm&dt=ss&sl=zh-CN&tl=zh-TW&q=".concat(encodeURIComponent(e)));if(t.data)return t.data.sentences[0].trans;return e}catch(t){return console.error("Lỗi khi gọi API:",t),e}},m=async(e,t)=>{let n=await g(e);A(e=>({...e,[t]:n}))};return((0,i.useEffect)(()=>{var e,t;d&&(null===(t=d[0])||void 0===t?void 0:null===(e=t.content[0])||void 0===e?void 0:e.means)&&d[0].content[0].means.forEach((e,t)=>{e.examples&&e.examples.forEach((e,n)=>{let a="".concat(t,"-").concat(n);m(e.e,a)})})},[d]),n&&c)?(0,a.jsx)("div",{className:"tumoi-item",children:(0,a.jsxs)("div",{className:"tumoi-display",children:[(0,a.jsx)("div",{className:"tumoi-display-header",children:(0,a.jsxs)("h4",{children:[t," 【",d[0].cn_vi,"】(",d[0].pinyin,") Bộ thủ: (",h.sets,") H\xecnh th\xe1i: (",h.hinhthai,")"]})}),d[0].content[0].means.map((e,n)=>{let i=e.examples?e.examples:null,r=e.mean;return(0,a.jsxs)("div",{className:"tumoi-nghia",children:[(0,a.jsxs)("h4",{className:"tumoi-nghia-shower",children:["Nghĩa ",n+1,": ",r]}),i&&i.map((e,i)=>{let r=e.e,c=e.m,A=e.p,d=o["".concat(n,"-").concat(i)]||r;return(0,a.jsxs)("div",{className:"tumoi-vidu",children:[(0,a.jsxs)("h5",{children:["V\xed dụ ",i+1]}),(0,a.jsx)("span",{children:u(d,t)}),(0,a.jsx)(s.Z,{className:"btn-phatamthanh",style:{maxWidth:"50px",maxHeight:"50px"},variant:"danger",onClick:()=>(0,l.Z)(r,i),children:"\uD83D\uDD0A"}),(0,a.jsx)("p",{children:A}),(0,a.jsx)("p",{children:c})]},i)}),(0,a.jsx)("hr",{})]},n)})]})}):null}},4075:function(){},5749:function(e,t){"use strict";t.Z={src:"/_next/static/media/user.f64324c2.jpg",height:200,width:200,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wgARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAG0E//EABUQAQEAAAAAAAAAAAAAAAAAABMk/9oACAEBAAEFAlo//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAwEBPwF//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAgEBPwF//8QAGBAAAgMAAAAAAAAAAAAAAAAAABIxQWH/2gAIAQEABj8CRqjT/8QAGBAAAgMAAAAAAAAAAAAAAAAAESEAMbH/2gAIAQEAAT8hGkETU//aAAwDAQACAAMAAAAQ+//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABgQAAIDAAAAAAAAAAAAAAAAAAARQZGh/9oACAEBAAE/ELbi5YP/2Q==",blurWidth:8,blurHeight:8}}},function(e){e.O(0,[5527,4358,7481,9208,9461,5973,7143,8472,609,6666,6901,8708,9936,2971,7023,1744],function(){return e(e.s=5138)}),_N_E=e.O()}]);