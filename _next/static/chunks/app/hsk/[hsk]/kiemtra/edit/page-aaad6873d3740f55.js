(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4260],{75138:function(e,n,t){Promise.resolve().then(t.bind(t,57634))},57634:function(e,n,t){"use strict";t.d(n,{default:function(){return m}});var i=t(57437),a=t(2265),r=t(66802),s=t(12808),l=t(64379),c=t.n(l),o=t(60516),u=t(65606),h=t(19768);t(87138),t(66648),t(31243);var g=t(23508);t(27593),t(16793),t(25527),t(3492),t(31467),t(9460),t(28996),t(34231);var d=t(62474),p=t(48342);function m(e){let{hsk:n}=e,[t,l]=(0,a.useState)(!0),[m,v]=(0,a.useState)(),[x,b]=(0,a.useState)(),[y,f]=(0,a.useState)(),[j,C]=(0,a.useState)(!1),[N,k]=(0,a.useState)(!1),[w,Z]=(0,a.useState)(!1),[D,S]=(0,a.useState)(!1),[E,T]=(0,a.useState)([]),[I,A]=(0,a.useState)([]),[H,L]=(0,a.useState)([]),[O,V]=(0,a.useState)([]),[G,B]=(0,a.useState)(!1),[P,_]=(0,a.useState)(null),[M,R]=(0,a.useState)("doc");(0,a.useEffect)(()=>{K();let e=(0,g.GJ)(),n=(0,g.bg)();k(e),C(n);let t=localStorage.getItem("isGianthe");null!==t&&B(JSON.parse(t))},[]),(0,a.useEffect)(()=>{U(),z(),W(),X()},[x]),(0,a.useEffect)(()=>{let e=localStorage.getItem("userLogin");e&&_(JSON.parse(e))},[]);let J=async()=>{try{let e=(0,o.iH)(u.db,"user/kiemtra/".concat(n,"/tumoi")),t=(0,o.iH)(u.db,"user/kiemtra/".concat(n,"/listen")),i=(0,o.iH)(u.db,"user/kiemtra/".concat(n,"/speak")),a=(0,o.iH)(u.db,"user/kiemtra/".concat(n,"/cauhoi"));await (0,o.t8)(e,E),await (0,o.t8)(t,I),await (0,o.t8)(i,H),await (0,o.t8)(a,O),console.log("Đ\xe3 lưu allTuMoi th\xe0nh c\xf4ng!"),c().fire({icon:"success",title:"Đ\xe3 lưu th\xe0nh c\xf4ng!",timer:1500,toast:!1,position:"center",showConfirmButton:!1})}catch(e){c().fire({icon:"info",title:"Lỗi khi lưu allTuMoi: ".concat(e),timer:1500,toast:!1,position:"center",showConfirmButton:!1}),console.error("Lỗi khi lưu allTuMoi:",e)}},K=async()=>{try{l(!0),console.log(n);let e=(0,o.iH)(u.db,"user/kiemtra/".concat(n)),t=await (0,o.U2)(e);if(!t.exists())return console.log("Kh\xf4ng c\xf3 dữ liệu tại đường dẫn n\xe0y."),null;{let e=t.val();return console.log("Dữ liệu lấy được:",e),b(e),e}}catch(e){return console.error("Error getting data:",e),null}finally{l(!1)}},U=async()=>{if(y){let e=Object.keys(y).filter(e=>parseInt(e.replace("b",""))),n=[];e.forEach(e=>{let t=y[e];Array.isArray(null==t?void 0:t.hoithoai)&&t.hoithoai.forEach(t=>{Array.isArray(null==t?void 0:t.tumoi)&&t.tumoi.forEach(t=>{n.push({...t,bai:e})})})});let t={};n.forEach(e=>{t[e.tiengtrung]||(t[e.tiengtrung]=e)});let i=Object.values(t);i.sort((e,n)=>e.pinyin.localeCompare(n.pinyin)),T([...i].filter(e=>e.bai).sort((e,n)=>{let t=parseInt(e.bai.slice(1)),i=parseInt(n.bai.slice(1));return t!==i?t-i:e.gianthe.length-n.gianthe.length}))}else x&&T(x.tumoi)},z=async()=>{if(y){let e=Object.keys(y).filter(e=>parseInt(e.replace("b",""))),n=[];e.forEach(e=>{let t=y[e];Array.isArray(null==t?void 0:t.listen)&&t.listen.forEach(t=>{n.push({...t,bai:e})})});let t={};n.forEach(e=>{t[e.tiengtrung]||(t[e.tiengtrung]=e)});let i=Object.values(t);i.sort((e,n)=>e.pinyin.localeCompare(n.pinyin)),A([...i].filter(e=>e.bai).sort((e,n)=>{let t=parseInt(e.bai.slice(1)),i=parseInt(n.bai.slice(1));return t!==i?t-i:e.gianthe.length-n.gianthe.length}))}else x&&A(x.listen)},W=async()=>{if(y){let e=Object.keys(y).filter(e=>parseInt(e.replace("b",""))),n=[];e.forEach(e=>{let t=y[e];Array.isArray(null==t?void 0:t.speak)&&t.speak.forEach(t=>{n.push({...t,bai:e})})});let t={};n.forEach(e=>{t[e.tiengtrung]||(t[e.tiengtrung]=e)});let i=Object.values(t);i.sort((e,n)=>e.pinyin.localeCompare(n.pinyin)),L([...i].filter(e=>e.bai).sort((e,n)=>{let t=parseInt(e.bai.slice(1)),i=parseInt(n.bai.slice(1));return t!==i?t-i:e.gianthe.length-n.gianthe.length}))}else x&&L(x.speak)},X=async()=>{if(y){let e=Object.keys(y).filter(e=>parseInt(e.replace("b",""))),n=[];e.forEach(e=>{let t=y[e];Array.isArray(null==t?void 0:t.cauhoi)&&t.cauhoi.forEach(t=>{n.push({...t,bai:e})})});let t={};n.forEach(e=>{t[e.tiengtrung]||(t[e.tiengtrung]=e)});let i=Object.values(t);i.sort((e,n)=>e.pinyin.localeCompare(n.pinyin)),V([...i].filter(e=>e.bai).sort((e,n)=>{let t=parseInt(e.bai.slice(1)),i=parseInt(n.bai.slice(1));return t!==i?t-i:e.gianthe.length-n.gianthe.length}))}else x&&V(x.cauhoi)},F=()=>{if(E)return(0,i.jsxs)("div",{className:"baihocgiaotiep-tumoi",children:[(0,i.jsx)("h2",{children:"Từ mới"}),(0,i.jsx)("ul",{children:E&&E.map((e,n)=>(0,i.jsxs)("li",{className:"border rounded p-3 mb-3 shadow-sm bg-white",children:[(0,i.jsxs)("h2",{children:["Từ thứ ",n+1,"  B\xe0i ",e.bai]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(s.Z,{variant:"success",onClick:()=>Y(n),children:"Get Voice"}),(0,i.jsx)("input",{type:"text",className:"tiengtrungText fs-3",value:e.gianthe?e.gianthe:"",placeholder:"中文简体",onChange:e=>q(n,"gianthe",e.target.value)}),(0,i.jsx)("input",{type:"text",className:"tiengtrungText fs-3",value:e.tiengtrung,placeholder:"中文",onChange:e=>q(n,"tiengtrung",e.target.value)}),(0,i.jsx)("input",{type:"text",className:"pinyinText",placeholder:"pinyin",value:e.pinyin,onChange:e=>q(n,"pinyin",e.target.value)}),(0,i.jsx)("input",{type:"text",className:"nghiaText",placeholder:"nghĩa",value:e.nghia,onChange:e=>q(n,"nghia",e.target.value)}),(0,i.jsx)(s.Z,{variant:"success",onClick:()=>getVoiceTumoiTiengViet(n),children:"Get Voice Dịch"}),(0,i.jsx)(s.Z,{variant:"warning",onClick:()=>getPinyinTuMoi(e.gianthe,n),children:"GetPinyin"})]}),(0,i.jsx)("div",{children:(0,i.jsx)(s.Z,{variant:"danger",onClick:()=>Q(n),children:"X\xf3a từ mới n\xe0y"})})]},n))}),(0,i.jsx)(s.Z,{variant:"info",onClick:()=>addTumoi(),children:"Th\xeam Từ Mới"})]})},q=(e,n,t)=>{T(i=>{let a=[...i];return a[e]={...a[e],[n]:t},a})},Q=e=>{T(n=>{let t=[...n];return t.splice(e,1),t})},Y=async e=>{let n=await (0,d.Z)("CN");T(t=>{let i=[...t];return i[e]={...i[e],gianthe:n},i})};return t?(0,i.jsx)(h.Z,{}):(0,i.jsx)(r.Z,{body:(0,i.jsxs)("div",{className:"ktBTContainer",children:[(0,i.jsx)("div",{className:"MatchingGameContaniner",children:(0,i.jsxs)("div",{className:"flex gap-2 mb-4 ",children:[(0,i.jsx)("button",{onClick:()=>R("doc"),className:"btn ".concat("doc"===M?"btn-primary":"btn-outline-secondary"),children:"阅读 - Đọc"}),(0,i.jsx)("button",{onClick:()=>R("viet"),className:"btn ".concat("viet"===M?"btn-primary":"btn-outline-secondary"),children:"写字 - Viết"}),(0,i.jsx)("button",{onClick:()=>R("nghe"),className:"btn ".concat("nghe"===M?"btn-primary":"btn-outline-secondary"),children:"听力 - Nghe"}),(0,i.jsx)("button",{onClick:()=>R("noi"),className:"btn ".concat("noi"===M?"btn-primary":"btn-outline-secondary"),children:"说话 - N\xf3i"}),(0,i.jsx)("button",{onClick:()=>R("cauhoi"),className:"btn ".concat("cauhoi"===M?"btn-primary":"btn-outline-secondary"),children:"问答 - Vấn Đ\xe1p"})]})}),(0,i.jsx)(s.Z,{className:"p-3 m-3",variant:"primary",onClick:()=>J(),children:"Save"}),(0,i.jsxs)("h1",{className:"baihocgiaotiep-title baihocgiaotiep-title-number",children:["Kiểm Tra ",n.toUpperCase()," "]}),(0,i.jsx)("div",{children:(()=>{switch(M){case"nghe":return(0,i.jsx)(p.Z,{cauhoi:I,setCauhoi:A,dichnghia:!0});case"doc":return F();case"noi":return(0,i.jsx)(p.Z,{cauhoi:H,setCauhoi:L,dichnghia:!0});case"cauhoi":return(0,i.jsx)(p.Z,{cauhoi:O,setCauhoi:V});default:return null}})()})]})})}},48342:function(e,n,t){"use strict";var i=t(57437);t(2265);var a=t(12808),r=t(89745),s=t(23508),l=t(62474);n.Z=e=>{let{cauhoi:n=[],setCauhoi:t,fetSelectedword:c,dichnghia:o=!1}=e,u=async(e,i,a)=>{let r=[...n];r[e][i]=a,t(r)},h=async(e,i,a)=>{let r=await (0,l.Z)(a),s=[...n];s[e][i]=r,t(s)},g=()=>{t([...n,{tiengtrung:"",pinyin:"",nghia:""}])},d=e=>{t(n.filter((n,t)=>t!==e))},p=async(e,n)=>{try{var i;let a=await (0,s.PA)(e),r=await (0,s.V2)(a);if(console.log(r.sentences),!r||!r.sentences||0===r.sentences.length)return;let l=(null===(i=r.sentences[r.sentences.length-1])||void 0===i?void 0:i.src_translit)||"",c=r.sentences.filter(e=>e.trans).map(e=>e.trans.trim()).join(" ");t(e=>{let t=[...e];return t[n]={...t[n],pinyin:l,nghia:c,tiengtrung:a},t})}catch(e){console.error("Lỗi khi lấy Pinyin:",e)}};return(0,i.jsxs)("div",{className:"cauhoi-container",children:[(0,i.jsx)("h2",{children:"Chỉnh Sửa C\xe2u Hỏi"}),(0,i.jsx)("ul",{children:n&&n.map((e,n)=>(0,i.jsxs)("li",{className:"cauhoi-item",children:[(0,i.jsxs)("h2",{children:[n+1,": ",e.bai?"B\xe0i ".concat(e.bai):null]}),(0,i.jsx)(a.Z,{variant:"success",onClick:()=>h(n,"gianthe","CN"),children:"GetVoice C\xe2u Hỏi"}),(0,i.jsx)("input",{type:"text",className:"form-control",value:e.gianthe,onChange:e=>u(n,"gianthe",e.target.value),placeholder:"简体中文 "}),(0,i.jsx)("input",{type:"text",className:"form-control",value:e.tiengtrung,onChange:e=>u(n,"tiengtrung",e.target.value),placeholder:"Nhập c\xe2u hỏi tiếng Trung"}),(0,i.jsx)("input",{type:"text",className:"form-control",value:e.pinyin,onChange:e=>u(n,"pinyin",e.target.value),placeholder:"Nhập phi\xean \xe2m"}),(0,i.jsx)("div",{className:"chinese-word",children:e.tiengtrung.split("").map((e,n)=>(0,i.jsx)("span",{className:"chinese-char tiengtrungText",onClick:()=>c(e),children:e},n))}),!o&&(0,i.jsx)("input",{type:"text",className:"form-control",value:e.nghia,onChange:e=>u(n,"nghia",e.target.value),placeholder:"Nhập nghĩa"}),o&&(0,i.jsx)("input",{type:"text",className:"form-control",value:e.dichnghia,onChange:e=>u(n,"dichnghia",e.target.value),placeholder:"Nhập nghĩa"}),(0,i.jsx)(a.Z,{variant:"success",onClick:()=>h(n,"nghia","VN"),children:"GetVoice Nghĩa"}),(0,i.jsx)(a.Z,{variant:"warning",onClick:()=>p(e.gianthe,n),children:"GetPinyin"}),(0,i.jsx)(a.Z,{className:"btn-phatamthanh",variant:"danger",onClick:()=>(0,r.Z)(e.gianthe,n+10),children:"\uD83D\uDD0A"}),(0,i.jsx)(a.Z,{variant:"danger",size:"sm",onClick:()=>d(n),children:"❌ X\xf3a"}),(0,i.jsx)("hr",{})]},n))}),(0,i.jsx)(a.Z,{variant:"success",onClick:()=>g(),children:"➕ Th\xeam C\xe2u Hỏi"})]})}},19768:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var i=t(57437),a=t(2265),r={src:"/_next/static/media/Loading.3170e5c7.gif",height:480,width:475,blurWidth:0,blurHeight:0},s=t(66648);class l extends a.Component{render(){return(0,i.jsx)("div",{className:"loadingData",children:(0,i.jsxs)("div",{className:"loadingData-container",children:[(0,i.jsx)(s.default,{src:r,alt:"Loading...",width:100,height:100}),(0,i.jsx)("h2",{children:"Website đang tải dữ liệu, xin vui l\xf2ng chờ trong gi\xe2y l\xe1t"})]})})}}},28996:function(e,n,t){"use strict";t.d(n,{Z:function(){return p}});var i=t(57437),a=t(2265),r=t(89745),s=t(60516),l=t(65606),c=t(12808),o=t(73137),u=t(23830),h=t(34231),g=t(64379),d=t.n(g);function p(e){let{dsCau:n,isGianthe:t,pathBaitap:g,hsk:p,id:m,onNext:v,isShowNghia:x=!0}=e,[b,y]=(0,a.useState)(null),[f,j]=(0,a.useState)({}),[C,N]=(0,a.useState)(!1),[k,w]=(0,a.useState)(!1),Z=(e,n)=>{d().fire({icon:e,title:n,position:"center",showConfirmButton:!1,timer:1500,timerProgressBar:!0})};(0,a.useEffect)(()=>{let e=localStorage.getItem("userLogin");if(e){let t=JSON.parse(e);y(t),n.forEach(async(e,n)=>{let i="".concat(g,"/cauhoi/").concat(t.uid,"/").concat(n),a=await (0,s.U2)((0,s.iH)(l.db,i));a.exists()&&j(e=>({...e,[n]:{userInput:a.val().userInput||"",nghia:a.val().nghiacuanguoidung||""}}))})}},[n,g]);let D=(e,n,t)=>{j(i=>({...i,[e]:{...i[e],[n]:t}}))},S=async()=>{if(b){for(let r=0;r<n.length;r++){var e,t,i,a;let c=n[r],o=(null===(t=f[r])||void 0===t?void 0:null===(e=t.userInput)||void 0===e?void 0:e.trim())||"",u=(null===(a=f[r])||void 0===a?void 0:null===(i=a.nghia)||void 0===i?void 0:i.trim())||"",h="".concat(g,"/cauhoi/").concat(b.uid,"/").concat(r);await (0,s.t8)((0,s.iH)(l.db,h),{userInput:o,nghia:c.nghia,hanviet:c.gianthe,nghiacuanguoidung:u,time:Date.now()})}Z("success","Đ\xe3 lưu to\xe0n bộ b\xe0i l\xe0m!")}},E=async()=>{if(!b)return;console.log(123);let e="".concat(g,"/cauhoi/").concat(b.uid),t="user/baitap/".concat(b.uid,"/").concat(p,"_").concat(m),i=Date.now();try{let a=await (0,s.U2)((0,s.iH)(l.db,e));if(a.exists()){let e=a.val(),r=n.map((n,t)=>{var a,r;return{tiengtrung:n.tiengtrung,gianthe:n.gianthe,pinyin:n.pinyin,nghia:n.nghia,cautraloi:(null===(a=e[t])||void 0===a?void 0:a.userInput)||"",nghiacuanguoidung:(null===(r=e[t])||void 0===r?void 0:r.nghiacuanguoidung)||"",time:i}});await (0,s.t8)((0,s.iH)(l.db,t),{hsk:p,id:m,timeSubmit:i,cauTraLoi:r}),Z("success","Đ\xe3 gửi b\xe0i tập th\xe0nh c\xf4ng!"),v()}else Z("warning","Chưa c\xf3 dữ liệu để gửi!")}catch(e){console.error("Lỗi:",e),Z("error","Lỗi khi gửi b\xe0i tập!")}};return(0,i.jsxs)("div",{className:"container py-4",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,i.jsxs)("div",{className:"btn-group",children:[(0,i.jsx)(c.Z,{variant:"outline-primary",onClick:()=>N(!C),children:C?"Ẩn Pinyin":"Hiện Pinyin"}),x&&(0,i.jsx)(c.Z,{variant:"outline-danger",onClick:()=>w(!k),children:k?"Ẩn Nghĩa":"Hiện Nghĩa"})]}),(0,i.jsx)(c.Z,{variant:"success",onClick:E,children:"\uD83D\uDCE4 Gửi B\xe0i Tập"})]}),n.map((e,n)=>{var a,s;return(0,i.jsx)(o.Z,{className:"mb-4 shadow-sm",children:(0,i.jsxs)(o.Z.Body,{children:[(0,i.jsxs)("div",{className:"d-flex",children:[(0,i.jsxs)("h5",{className:"mb-3 text-primary fw-bold fs-3",children:["\uD83D\uDCDD C\xe2u ",n+1,": ",t?e.gianthe:e.tiengtrung]}),(0,i.jsx)(c.Z,{variant:"outline-secondary",onClick:()=>(0,r.Z)(e.gianthe),children:"\uD83D\uDD0A"})]}),C&&(0,i.jsxs)("div",{className:"text-muted mb-2",children:["\uD83D\uDCDA Pinyin: ",e.pinyin]}),k&&(0,i.jsxs)("div",{className:"mb-3",children:["\uD83D\uDCA1 Nghĩa: ",e.nghia]}),(0,i.jsxs)(u.Z.Group,{className:"mb-2",children:[(0,i.jsx)(u.Z.Label,{children:"Nhập c\xe2u trả lời của bạn:"}),(0,i.jsx)(h.Z,{value:(null===(a=f[n])||void 0===a?void 0:a.userInput)||"",className:"form-control fs-3",placeholder:"你的回答",onChange:e=>D(n,"userInput",e.target.value)})]}),(0,i.jsxs)(u.Z.Group,{className:"mb-3",children:[(0,i.jsx)(u.Z.Label,{children:"Nhập nghĩa của c\xe2u trả lời:"}),(0,i.jsx)(h.Z,{value:(null===(s=f[n])||void 0===s?void 0:s.nghia)||"",className:"form-control fs-5",placeholder:"Nhập nghĩa của c\xe2u trả lời",onChange:e=>D(n,"nghia",e.target.value)})]})]})},n)}),(0,i.jsxs)("div",{className:"d-flex justify-content-end gap-2 mt-4",children:[(0,i.jsx)(c.Z,{variant:"outline-secondary",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"⬆️ Về đầu"}),(0,i.jsx)(c.Z,{variant:"primary",onClick:()=>S(),children:"\uD83D\uDCBE Lưu tạm thời"}),(0,i.jsx)(c.Z,{variant:"success",onClick:()=>E(),children:"\uD83D\uDCE4 Gửi B\xe0i Tập"})]})]})}},62474:function(e,n,t){"use strict";t.d(n,{Z:function(){return r}});var i=t(64379),a=t.n(i);function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"VN";return new Promise((n,t)=>{if(!("webkitSpeechRecognition"in window)){t("Tr\xecnh duyệt kh\xf4ng hỗ trợ Speech Recognition");return}let i=new window.webkitSpeechRecognition;i.lang=({VN:"vi-VN",CN:"zh-CN"})[e]||"vi-VN",i.continuous=!1,i.interimResults=!1,a().fire({title:"\uD83C\uDFA4 Đang lắng nghe (".concat(e,")"),text:"H\xe3y n\xf3i v\xe0o micro...",allowOutsideClick:!1,allowEscapeKey:!1,position:"top-end",didOpen:()=>{a().showLoading(),i.start()}}),i.onresult=e=>{let t=e.results[0][0].transcript;a().close(),n(t)},i.onerror=e=>{a().close(),t(e.error||"Lỗi kh\xf4ng x\xe1c định")},i.onend=()=>{i.resultReceived||(a().close(),t("Kh\xf4ng nghe thấy \xe2m thanh"))}})}}},function(e){e.O(0,[5613,770,5527,4358,7481,9208,9461,8765,4974,3539,8472,609,3830,6901,6802,3508,3104,2971,7023,1744],function(){return e(e.s=75138)}),_N_E=e.O()}]);