(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5938],{15006:function(e,t,s){Promise.resolve().then(s.bind(s,97429))},97429:function(e,t,s){"use strict";s.d(t,{default:function(){return j}});var i=s(57437),n=s(2265),a=s(66802),r=s(12808),l=s(64379),c=s.n(l),d=s(65606),h=s(60516);s(58833),s(10494),s(91795),s(19768);var o=s(87138),u=s(66648);s(31243);var m=s(23508);s(84109),s(58971),s(46854),s(49992),s(45776);var g=s(27593);function x(e){let{hsk:t}=e,[s,a]=(0,n.useState)([]),[r,l]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=(0,h.iH)(d.db,"user/account");(0,h.U2)(e).then(e=>{let s=e.val();s&&Promise.all(Object.keys(s).map(async e=>{let i=s[e],n=(0,h.iH)(d.db,"user/kiemtra/".concat(t,"/diem/").concat(e)),a=(await (0,h.U2)(n)).val(),r=[];return a&&Object.keys(a).forEach(e=>{let t=a[e]||{},s=t.doc||0,n=t.viet||0,l=t.nghe||0,c=t.noi||0,d=t.nghia||0,h=t.vandap||0,o=t.timeSpent||0,u=t.submittedAt||0,m=s+n+l+c+d+h;m>0&&r.push({userName:i.name,userAvatar:i.photoURL,userStatus:i.isOnline?"Online":"Offline",testNumber:parseInt(e)+1,diemDoc:s,diemViet:n,diemNghe:l,diemNoi:c,diemNghia:d,diemVandap:h,tongDiem:m,timeSpent:"".concat(Math.floor(o/60).toString().padStart(2,"0"),":").concat(Math.floor(o%60).toString().padStart(2,"0")),submittedAt:new Date(u).toLocaleString()})}),r})).then(e=>{let t=e.flat();t.sort((e,t)=>t.tongDiem-e.tongDiem),a(t)})})},[t]);let c=e=>{r===e?l(null):l(e)},o=e=>e.diemDoc+e.diemNghia+e.diemViet+e.diemNghe+e.diemNoi>=700?"✅ Pass":"❌ Fail";return(0,i.jsx)("div",{children:s.map((e,s)=>(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,i.jsx)(u.default,{src:e.userAvatar,alt:"avatar",width:"40",height:"40",className:"rounded-circle border border-1"}),(0,i.jsx)("span",{className:"fw-semibold mx-2",children:e.userName}),(0,i.jsx)("div",{className:"ms-2",style:{width:10,height:10,borderRadius:"50%",backgroundColor:"Online"===e.userStatus?"green":"red"},title:e.userStatus})]}),(0,i.jsxs)("h5",{children:["Điểm kiểm tra ",t.toUpperCase()," lần ",e.testNumber," của ",e.userName,":"]}),(0,i.jsxs)("p",{children:["\uD83C\uDFAF Tổng điểm: ",(0,i.jsx)("strong",{children:e.tongDiem}),"/1000 ",(0,i.jsx)("strong",{children:o(e)})]}),(0,i.jsxs)("p",{children:["⏰ Thời gian ho\xe0n th\xe0nh: ",(0,i.jsx)("strong",{children:e.timeSpent})]}),(0,i.jsx)("button",{onClick:()=>c(e.userName),className:"btn btn-outline-primary",children:r===e.userName?"Ẩn chi tiết":"Xem chi tiết"}),r===e.userName&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("p",{children:["\uD83D\uDD24 Pinyin: ",(0,i.jsx)("strong",{children:e.diemDoc}),"/200"]}),(0,i.jsxs)("p",{children:["\uD83D\uDCD6 Nghĩa: ",(0,i.jsx)("strong",{children:e.diemNghia}),"/200"]}),(0,i.jsxs)("p",{children:["⌨️ Đ\xe1nh m\xe1y: ",(0,i.jsx)("strong",{children:e.diemViet}),"/200"]}),(0,i.jsxs)("p",{children:["\uD83C\uDFA7 Nghe: ",(0,i.jsx)("strong",{children:e.diemNghe}),"/200"]}),(0,i.jsxs)("p",{children:["\uD83D\uDDE3️ N\xf3i: ",(0,i.jsx)("strong",{children:e.diemNoi}),"/200"]}),(0,i.jsxs)("p",{children:["\uD83E\uDD1D Vấn đ\xe1p: ",(0,i.jsx)("strong",{children:e.diemVandap}),"/500"]})]}),(0,i.jsx)("hr",{})]},s))})}function j(e){var t;let{hsk:s}=e,[l,j]=(0,n.useState)(!1),[p,N]=(0,n.useState)(),[f,S]=(0,n.useState)(),[v,D]=(0,n.useState)(),[b,k]=(0,n.useState)(!1),[y,w]=(0,n.useState)(!1),[C,O]=(0,n.useState)(!1),[E,_]=(0,n.useState)(!1),[H,V]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{sessionStorage.getItem("hasShownDiemHsk")||(V(!0),sessionStorage.setItem("hasShownDiemHsk","true"))},[]),(0,n.useEffect)(()=>{let e=(0,m.GJ)(),t=(0,m.bg)();w(e),k(t);let i=async()=>{c().fire({title:"Đang tải dữ liệu...",allowOutsideClick:!1,didOpen:()=>{c().showLoading()}});try{let e=(0,h.iH)(d.db,"/users/hsk/".concat(s)),t=await (0,h.U2)(e);if(t.exists()){let e=t.val();if(!e)return;S(e)}}catch(e){console.error("Lỗi khi lấy dữ liệu:",e),c().fire({icon:"error",title:"Lỗi",text:"Kh\xf4ng thể lấy dữ liệu. Vui l\xf2ng thử lại sau!"})}finally{c().close()}};localStorage.getItem("isGianthe"),localStorage.getItem("isShowPinyin"),localStorage.getItem("isShowSpace"),i()},[s]),p&&(t=p.split("="))[1]&&t[1].split("&")[0],(0,i.jsx)(a.Z,{isStudy:!0,body:(0,i.jsxs)("div",{className:"giaotiepContainer container",children:[(0,i.jsx)(o.default,{className:"itemCard-title-luanngu",href:"/hsk/".concat(s,"/edit/b001"),target:"_self",children:y&&(0,i.jsx)(r.Z,{className:"btn-phatamthanh",variant:"warning",children:"Edit"})}),(0,i.jsx)(o.default,{className:"itemCard-title-luanngu",href:"/hsk/".concat(s,"/kiemtra"),target:"_self",children:(0,i.jsx)("div",{className:"btn btn-outline-primary p-3 ms-3 fs-3",children:"Thi Thử"})}),f?(0,i.jsx)("div",{className:"",children:(0,i.jsxs)("div",{className:"baihoc-containerHSK row",children:[(0,i.jsx)(g.Z,{show:H,onClose:()=>V(!1),children:(0,i.jsx)(x,{hsk:s})}),Object.entries(f).map((e,t)=>{let[n,a]=e;return(0,i.jsx)("div",{className:"col-6 col-md-3 col-lg-2",style:{marginTop:"20px"},children:(0,i.jsx)(o.default,{className:"itemCard-title-luanngu",href:"/hsk/".concat(s,"/").concat(n),target:"_self",children:(0,i.jsx)("div",{className:"itemCard-container",children:(0,i.jsxs)("div",{className:"itemCard-content",children:[(0,i.jsxs)("div",{className:"itemCard-content-title fs-6",children:[(0,i.jsxs)("span",{children:["B\xe0i ",t+1,":  "]}),(0,i.jsx)("span",{className:"tiengtrungText",children:a.tieude})]}),(0,i.jsx)("div",{className:"itemCard-content-chuthich fs-5",children:(0,i.jsx)("span",{children:a.tieudedich})}),(0,i.jsx)("div",{className:"image-container isShowitemName",children:(0,i.jsx)(u.default,{src:"https://tiengtrungdongyang.com/img/".concat(s,"/").concat(n,"_ht1.png"),alt:"H\xecnh ảnh",width:150,height:150,className:"image-styled",style:{objectFit:"cover"}})})]})})})},n)})]})}):null]})})}}},function(e){e.O(0,[2866,1953,9513,7441,5527,4358,7481,9208,9461,8765,4974,3539,8472,609,3830,6901,6802,2408,4547,1682,3255,3104,5438,305,2971,7023,1744],function(){return e(e.s=15006)}),_N_E=e.O()}]);