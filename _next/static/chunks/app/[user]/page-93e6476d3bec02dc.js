(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1157],{9693:function(e,t,a){Promise.resolve().then(a.bind(a,4456))},35:function(e,t,a){"use strict";a.d(t,{Z:function(){return g}});var n=a(6800),i=a.n(n),l=a(2265),s=a(7437);let r=["as","disabled"];function c({tagName:e,disabled:t,href:a,target:n,rel:i,role:l,onClick:s,tabIndex:r=0,type:c}){e||(e=null!=a||null!=n||null!=i?"a":"button");let u={tagName:e};if("button"===e)return[{type:c||"button",disabled:t},u];let o=n=>{var i;if(!t&&("a"!==e||(i=a)&&"#"!==i.trim())||n.preventDefault(),t){n.stopPropagation();return}null==s||s(n)};return"a"===e&&(a||(a="#"),t&&(a=void 0)),[{role:null!=l?l:"button",disabled:void 0,tabIndex:t?void 0:r,href:a,target:"a"===e?n:void 0,"aria-disabled":t||void 0,rel:"a"===e?i:void 0,onClick:o,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),o(e))}},u]}l.forwardRef((e,t)=>{let{as:a,disabled:n}=e,i=function(e,t){if(null==e)return{};var a,n,i={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,r),[l,{tagName:u}]=c(Object.assign({tagName:a,disabled:n},i));return(0,s.jsx)(u,Object.assign({},i,l,{ref:t}))}).displayName="Button";let u=l.createContext({prefixes:{},breakpoints:["xxl","xl","lg","md","sm","xs"],minBreakpoint:"xs"}),{Consumer:o,Provider:m}=u,d=l.forwardRef((e,t)=>{let{as:a,bsPrefix:n,variant:r="primary",size:o,active:m=!1,disabled:d=!1,className:g,...h}=e,v=function(e,t){let{prefixes:a}=(0,l.useContext)(u);return e||a.btn||"btn"}(n,0),[f,{tagName:p}]=c({tagName:a,disabled:d,...h});return(0,s.jsx)(p,{...f,...h,ref:t,disabled:d,className:i()(g,v,m&&"active",r&&"".concat(v,"-").concat(r),o&&"".concat(v,"-").concat(o),h.href&&d&&"disabled")})});d.displayName="Button";var g=d},4456:function(e,t,a){"use strict";a.d(t,{default:function(){return f}});var n=a(7437),i=a(2265),l=a(8708),s=a(5606);a(9768);var r=a(5319),c=a(5749),u=a(3508),o=a(5720),m=a(6648),d=a(7138),g=a(35),h=a(4379),v=a.n(h);function f(e){let{user:t}=e;var a=this;let[h,f]=(0,i.useState)({datas:null,usernames:null,dateTimes:null,tieudes:null,links:null,likes:null,comments:null,weblinks:null,tieudeTiengTrungs:null,authors:null,imgAuthors:null,baidichs:null,error:null,nav:!1,loading:!1,commentTexts:{},isLikedMap:{},flagLogin:!1,flagAdmin:!1,userData:{name:"",img:"",email:""},flagUpdate:!1,myUser:null}),[b,x]=(0,i.useState)(!0);(0,i.useEffect)(()=>{y()},[]);let y=async()=>{let e=localStorage.getItem("user"),a=localStorage.getItem("name"),n=JSON.parse(localStorage.getItem("allData"));if(!n)return;let i=n.find(e=>"dashboard"===e.key),l=n.find(e=>"account"===e.key),s=l.value[t];var r=Object.entries(i.value).map(e=>{let[t,a]=e;return{key:t,value:a}}),c=Object.entries(l.value).map(e=>{let[t,a]=e;return{key:t,value:a}});try{let t=await Promise.all(r.map(async t=>{let a=t.key,n=Object.entries(t.value).map(e=>{let[t,a]=e;return{key:t,value:a}}),i=await Promise.all(n.map(async t=>{let n="".concat(a,"&").concat(t.key);var i=t.value.comment?Object.entries(t.value.comment).map(e=>{let[t,a]=e;return{key:t,value:a}}):null,l=t.value.like?Object.entries(t.value.like).map(e=>{let[t,a]=e;return{key:t,value:a}}):null,s=t.value.tiengTrung?Object.entries(t.value.tiengTrung).map(e=>{let[t,a]=e;return{key:t,value:a}}):null,r=t.value.dichNghia?Object.entries(t.value.dichNghia).map(e=>{let[t,a]=e;return{key:t,value:a}}):null;let u=c.find(e=>e.key===a),[o,m,d,g,h,v,f,p,b,x,y,k,j,N,T]=await Promise.all([i,l,u.value.name,u.value.img,t.value.tieude,t.value.tieudeTiengTrung,t.value.author,t.value.imgAuthor,t.value.link,t.value.weblink,t.value.dateTime,t.value.id,t.value.baidich,s,r]),w=null,C=null,I=!1;return o&&(w=await Promise.all(o.map(async e=>{let t=o.find(t=>t.key===e.key),a=t.value.user,n=c.find(e=>e.key===a),[i,l,s,r]=await Promise.all([n.value.name,n.value.img,t.value.cmt,t.value.dateTime]);return{username:i,userImage:l,cmt:s,dateTime:r,id:e.key}}))),m&&(C=await Promise.all(m.map(async t=>{let a=m.find(e=>e.key===t.key);t.key===e&&(I=!0);let[n,i]=await Promise.all([a.value.name,a.value.image]);return{username:n,userImage:i}}))),{baivietKey:n,username:d,userImage:g,tieude:h,tieudeTiengTrung:v,author:f,imgAuthor:p,link:b,weblink:x,dateTime:y,comment:w,likes:C,id:k,baidich:j,isLiked:I,tiengTrungs:N,dichNghias:T}}));return{key:a,baivietDatas:i}})),n=[];t.forEach(e=>{n=n.concat(e.baivietDatas)}),n.sort((e,t)=>new Date(t.dateTime)-new Date(e.dateTime));let i={},l={},u={},o={},m={},d={},g={},h={},v={},p={},b={},x={},y={},k={},j={},N={};n.forEach(e=>{i[e.baivietKey]=e.weblink,l[e.baivietKey]=e.tieudeTiengTrung,u[e.baivietKey]=e.author,o[e.baivietKey]=e.link,m[e.baivietKey]=e.imgAuthor,d[e.baivietKey]=e.username,h[e.baivietKey]=e.tieude,g[e.baivietKey]=e.dateTime,v[e.baivietKey]=e.comment,p[e.baivietKey]=e.likes,b[e.baivietKey]=e.id,x[e.baivietKey]=e.userImage,y[e.baivietKey]=e.baidich,k[e.baivietKey]=e.isLiked,j[e.baivietKey]=e.tiengTrungs,N[e.baivietKey]=e.dichNghias});let T=n;f(t=>({...t,datas:T,myUser:e,MyUserName:a,baidichs:y,weblinks:i,tieudeTiengTrungs:l,authors:u,imgAuthors:m,links:o,usernames:d,userImages:x,tieudes:h,dateTimes:g,comments:v,likes:p,ids:b,isLikedMap:k,loading:!1,tiengTrungs:j,dichNghias:N,userData:s,myUser:e}))}catch(e){f({error:e,loading:!1}),console.error("Error fetching data:",e)}},k=async()=>{let e=localStorage.getItem("user"),{userData:t}=h;console.log(t.name);try{await (0,s.Pf)("/users/account/".concat(e,"/name"),t.name),await (0,s.Pf)("/users/account/".concat(e,"/img"),t.img),await v().fire({position:"center",icon:"success",title:"Cập nhật th\xe0nh c\xf4ng",showConfirmButton:!1,timer:1500}),S()}catch(e){console.error("Lỗi tạo b\xe0i mới:",e),v().fire("Lỗi tạo b\xe0i mới: "+e.message,"","info")}},j=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(await (0,s.Z6)(e),n){let n=e.split("/").pop();a.setState(e=>({comments:{...e.comments,[t]:e.comments[t].filter(e=>e.id!==n)}}))}else f(e=>({datas:e.datas.filter(e=>e.baivietKey!==t),baidichs:N(e.baidichs,t),weblinks:N(e.weblinks,t),tieudeTiengTrungs:N(e.tieudeTiengTrungs,t),authors:N(e.authors,t),imgAuthors:N(e.imgAuthors,t),links:N(e.links,t),usernames:N(e.usernames,t),userImages:N(e.userImages,t),tieudes:N(e.tieudes,t),dateTimes:N(e.dateTimes,t),comments:N(e.comments,t),likes:N(e.likes,t),ids:N(e.ids,t),tiengTrungs:N(e.tiengTrungs,t),dichNghias:N(e.dichNghias,t)}))},N=(e,t)=>{let{[t]:a,...n}=e;return n},T=async(e,t)=>{let a=this.state.commentTexts[t],n=localStorage.getItem("user"),i=localStorage.getItem("name"),l=localStorage.getItem("userImage");if(n){let r="".concat(e,"/comment"),c=await (0,s.UD)(r),o=new Date().toISOString(),m=null;m=c?c.length+1:1;let d="".concat(m,"-").concat((0,u.o0)(o));await (0,s.Pf)("".concat(r,"/").concat(d,"/user"),n),await (0,s.Pf)("".concat(r,"/").concat(d,"/cmt"),a),await (0,s.Pf)("".concat(r,"/").concat(d,"/dateTime"),o);let g={username:i,userImage:l,cmt:a,dateTime:o,id:d};f(e=>({comments:{...e.comments,[t]:[...e.comments[t]||[],g]},commentTexts:{...e.commentTexts,[t]:""}}))}},w=async(e,t,a)=>{let n=localStorage.getItem("user"),i=localStorage.getItem("name"),l=localStorage.getItem("userImage");if(n){let r="".concat(e,"/like");if(a)await (0,s.Z6)("".concat(r,"/").concat(n)),f(e=>({likes:{...e.likes,[t]:e.likes[t].filter(e=>e.username!==i)},isLikedMap:{...e.isLikedMap,[t]:!1}}));else{await (0,s.Pf)("".concat(r,"/").concat(n,"/name"),i),await (0,s.Pf)("".concat(r,"/").concat(n,"/image"),l);let e={username:i,userImage:l};f(a=>({likes:{...a.likes,[t]:[...a.likes[t]||[],e]},isLikedMap:{...a.isLikedMap,[t]:!0}}))}}},C=(e,t)=>{f(a=>({commentTexts:{...a.commentTexts,[e]:t.target.value}}))},I=(e,t,a)=>(0,n.jsx)("div",{children:t&&t.map((t,i)=>(0,n.jsx)(p,{imgUser:t.userImage,username:t.username,cmt:t.cmt,dateTime:t.dateTime,removeClick:()=>j("".concat(e,"/comment/").concat(t.id),a,!0)},i))}),S=()=>{f(e=>({...e,flagUpdate:!e.flagUpdate}))},K=e=>{let{name:t,value:a}=e.target;f(e=>({...e,userData:{...e.userData,[t]:a}}))};return(0,n.jsx)(l.Z,{body:(0,n.jsxs)("div",{className:"container",children:[(()=>{let{userData:e,flagUpdate:a,myUser:i}=h;if(!e)return;let l=e.img?e.img:c.Z;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"userDataContainer",children:[(0,n.jsx)("div",{className:"userDataImage",children:(0,n.jsx)(d.default,{href:"",passHref:!0,legacyBehavior:!0,children:(0,n.jsx)(m.default,{src:l,alt:"null",width:300,height:300})})}),!a&&(0,n.jsxs)("div",{className:"userDataInfo",children:[(0,n.jsx)("h3",{children:e.name}),(0,n.jsx)("br",{}),i==t&&(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,n.jsx)("i",{className:"nav-icon fa-solid fa-user-pen"}),(0,n.jsx)("div",{className:"update-personal",onClick:()=>S(),children:"Chỉnh sửa th\xf4ng tin c\xe1 nh\xe2n"})]})]}),a&&(0,n.jsxs)("div",{className:"userDataInfo",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("h5",{children:"T\xean của bạn"}),(0,n.jsx)("input",{type:"text",className:"form-control",name:"name",placeholder:"Nhập t\xean của bạn",value:e.name,onChange:K})]}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("h5",{children:"Đường dẫn ảnh đại diện của bạn"}),(0,n.jsx)("input",{type:"text",className:"form-control",name:"img",id:"","aria-describedby":"helpId",placeholder:"Nhập đường dẫn ảnh đại diện của bạn",value:e.img,onChange:K})]}),(0,n.jsx)("br",{}),(0,n.jsx)(g.Z,{variant:"info",onClick:()=>k(),children:"Cập nhật"}),(0,n.jsx)(g.Z,{variant:"danger",children:"Hủy"})]}),(0,n.jsx)("br",{})]})]}),(0,n.jsx)("hr",{})]})})(),(()=>{let{datas:e,baidichs:a,userImages:i,usernames:l,commentTexts:s,likes:c,dateTimes:u,comments:m,tieudes:d,tieudeTiengTrungs:g,ids:v,isLikedMap:f,tiengTrungs:p,dichNghias:b}=h;var x=!1;return e&&e.length>0?(e.map((e,a)=>{e.baivietKey.split("&")[0]==t&&(x=!0)}),x)?e.map((e,h)=>{let x=e.baivietKey,y=x.split("&")[0];if(y!=t)return null;let k="/users/dashboard/".concat(y,"/").concat(x.split("&")[1]);return(0,n.jsx)(r.Z,{username:l[x]||null,dateTime:u[x]||null,imgUser:i[x]||null,comment:m[x]?I(k,m[x],x):null,likes:c[x]?(0,n.jsx)(o.Z,{likes:c[x]}):null,tieudeTiengTrung:g[x]||null,link:x?"/dashboard/".concat(y,"/").concat(x.split("&")[1]):null,title:d[x]||null,baidich:a[x]||null,img:v[x]?"https://img.youtube.com/vi/".concat(v[x],"/sddefault.jpg"):null,removeClick:()=>j(k,x,!1),sendCmtHandle:()=>T(k,x),commentText:s[x]||"",onChangeHandle:e=>C(x,e),likeClick:()=>w(k,x,f[x]),isLiked:f[x],tiengTrungs:p[x]||null,dichNghias:b[x]||null},h)}):(0,n.jsx)("div",{children:(0,n.jsx)("h2",{children:"Bạn chưa c\xf3 b\xe0i đăng n\xe0o"})}):null})()]})})}function p(e){return(0,n.jsxs)("div",{className:"itemCard-UserName",children:[(0,n.jsxs)("div",{className:"itemCard-UserName-2",children:[(0,n.jsx)(m.default,{src:e.imgUser?e.imgUser:c.Z,alt:"img",width:500,height:500}),(0,n.jsxs)("div",{className:"itemCard-UserName-container ",children:[(0,n.jsxs)("div",{className:"itemCard-UserName-container-1",children:[(0,n.jsx)("h6",{className:"username-card1",children:e.username}),(0,n.jsx)("p",{children:e.cmt})]}),(0,n.jsx)("span",{className:"Time",style:{margin:"0"},children:(0,u.o0)(e.dateTime)})]})]}),localStorage.getItem("name")==e.username?(0,n.jsx)("div",{className:"itemCard-UserName-1",children:(0,n.jsx)("button",{className:"btn btn-options",onClick:e.removeClick,style:{padding:"0",margin:"0"},children:(0,n.jsx)("i",{className:"fa-solid fa-trash"})})}):null]})}},6800:function(e,t){var a;/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var a=arguments[t];a&&(e=l(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var a in e)n.call(e,a)&&e[a]&&(t=l(t,a));return t}(a)))}return e}function l(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0!==(a=(function(){return i}).apply(t,[]))&&(e.exports=a)}()}},function(e){e.O(0,[7481,9461,630,6648,8472,609,8708,3669,2971,7023,1744],function(){return e(e.s=9693)}),_N_E=e.O()}]);