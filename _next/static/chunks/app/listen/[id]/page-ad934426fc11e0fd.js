(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5897],{53711:function(e,t,i){Promise.resolve().then(i.bind(i,20700))},20700:function(e,t,i){"use strict";i.d(t,{default:function(){return w}});var s=i(57437),a=i(2265),n=i(98708),r=i(12808);i(19768);var l=i(23508),c=i(60516),o=i(65606),h=i(39731),d=i(66648),u=i(87138),m=i(64379),g=i.n(m),p=i(89745),x=i(77761),f=i(38472),j=e=>{let{tumoi:t,isGianthe:i}=e,[n,l]=(0,a.useState)(!1),[c,o]=(0,a.useState)([]),h=(0,a.useRef)([]),[d,u]=(0,a.useState)(null),[m,g]=(0,a.useState)(!1),[j,S]=(0,a.useState)(),[y,v]=(0,a.useState)(),w=(0,a.useRef)(null),N=async e=>{try{o([]),u(e),g(!0),await k(e);let t="https://hocdichchuhan.github.io/huongdanviet/".concat(e.charCodeAt(0),".svg"),i=await C(t),s=await f.Z.get("https://api.hanzii.net/api/search/vi/".concat(encodeURIComponent(e),"?type=kanji&page=1&limit=3"));if(!s.data.found)throw Error("Network response was not ok");let a=await f.Z.get("https://api.hanzii.net/api/search/vi/".concat(encodeURIComponent(e),"?type=word&page=1&limit=50"));if(!a.data.found)throw Error("Network response was not ok");S(s.data),v(a.data),l(i)}catch(e){console.error("Error fetching Hanzi data:",e)}},k=async e=>{try{let t=await fetch("https://api.hanzii.net/api/search/vi/".concat(encodeURIComponent(e),"?type=kanji&page=1&limit=3"));if(!t.ok)throw Error("Network response was not ok");let i=await t.json();if(i.found&&i.result.length>0){let e=JSON.parse(i.result[0].strokes);o(e.strokes)}}catch(e){console.error("Error fetching Hanzi data:",e)}},C=async e=>{try{return(await fetch(e,{method:"HEAD"})).ok}catch(e){return console.error("Lỗi khi kiểm tra đường dẫn:",e),!1}};return(0,a.useEffect)(()=>{let e=e=>{w.current&&!w.current.contains(e.target)&&(u(null),g(!1))};return m&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[m]),(0,a.useEffect)(()=>{c.length>0&&setTimeout(()=>{h.current.forEach((e,t)=>{if(e){let i=e.getTotalLength();e.style.strokeDasharray=i,e.style.strokeDashoffset=i,e.style.animation="draw 1.5s ease-in-out ".concat(1*t,"s forwards")}})},100)},[c]),(0,s.jsxs)("div",{className:"baihocgiaotiep-tumoi",children:[(0,s.jsx)("h2",{children:"Từ mới"}),(0,s.jsx)(x.Z,{showStrokeArea:m,activeCharacter:d,strokes:c,pathsRef:h,isShowImage:n,dataTranslate:y,dataWrite:j,strokeAreaRef:w}),(0,s.jsx)("ul",{children:t&&t.map((e,t)=>(0,s.jsxs)("li",{children:[(0,s.jsxs)("div",{className:"d-flex flex-direction-column",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"my-1",children:["Tiếng Trung: ",(0,s.jsx)("strong",{style:{color:"red"},children:i?e.gianthe:e.tiengtrung})]}),e.hanviet&&(0,s.jsxs)("div",{className:"my-1",children:["H\xe1n Việt: ",(0,s.jsx)("strong",{children:e.hanviet})]}),(0,s.jsxs)("div",{className:"my-1",children:["Pinyin: ",(0,s.jsx)("strong",{children:e.pinyin})]}),(0,s.jsxs)("div",{className:"my-1",children:["Nghĩa: ",(0,s.jsx)("strong",{children:e.nghia})]})]}),(0,s.jsx)("div",{className:"ms-3",children:(0,s.jsxs)("div",{className:"chinese-word",children:[!i&&e.tiengtrung.split("").map((e,t)=>(0,s.jsx)("span",{className:"chinese-char tiengtrungText",onClick:()=>N(e),children:e},t)),i&&e.gianthe&&e.gianthe.split("").map((e,t)=>(0,s.jsx)("span",{className:"chinese-char tiengtrungText",onClick:()=>N(e),children:e},t))]})}),(0,s.jsx)(r.Z,{className:"btn-phatamthanh",variant:"danger",onClick:()=>(0,p.Z)(e.tiengtrung,t+10),children:"\uD83D\uDD0A"})]}),(0,s.jsx)("hr",{})]},t))})]})},S=i(21682),y=i(32608),v=i(39898);function w(e){let{id:t}=e,[i,m]=(0,a.useState)(!0),[p,x]=(0,a.useState)(!1),[f,w]=(0,a.useState)(!1),[N,k]=(0,a.useState)(t),[C,E]=(0,a.useState)(),[b,O]=(0,a.useState)(),[Z,T]=(0,a.useState)(),[I,L]=(0,a.useState)(),[H,J]=(0,a.useState)(),[R,A]=(0,a.useState)([]),[D,G]=(0,a.useState)([]),[P,_]=(0,a.useState)([]),[z,U]=(0,a.useState)([]),[F,M]=(0,a.useState)([]),[V,K]=(0,a.useState)([]),[W,q]=(0,a.useState)(!0),[B,Q]=(0,a.useState)(!0),[X,Y]=(0,a.useState)(!1),[$,ee]=(0,a.useState)([]),[et,ei]=(0,a.useState)([]),[es,ea]=(0,a.useState)([]),[en,er]=(0,a.useState)([]),[el,ec]=(0,a.useState)([]),[eo,eh]=(0,a.useState)([]),[ed,eu]=(0,a.useState)([]),[em,eg]=(0,a.useState)([]),[ep,ex]=(0,a.useState)(),[ef,ej]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=(0,l.GJ)(),t=(0,l.bg)();w(e),x(t);let i=async()=>{g().fire({title:"Đang tải dữ liệu...",allowOutsideClick:!1,didOpen:()=>{g().showLoading()}});try{let e=(0,c.iH)(o.db,"/users/listen/".concat(N)),t=await (0,c.U2)(e);if(t.exists()){let e=t.val();if(!e)return;E(e.mp3Link),O(e.img),T(e.tieude),L(e.tieudeTiengTrung),J(e.capdo),ee(e.tumoi),ei(e.nguphaps),eu(e.mp3timelinelist||[]),console.log(e.mp3timelinelist),eS(e.mp3Timeline),ex(e.thamchieu),A(e.gianthe.split("\n")),G(e.tiengtrung.split("\n")),U(e.pinyin.split("\n")),M(e.nghia.split("\n")),K(e.level.split("\n")),_(e.hanviet.split("\n"))}}catch(e){console.error("Lỗi khi lấy dữ liệu:",e),g().fire({icon:"error",title:"Lỗi",text:"Kh\xf4ng thể lấy dữ liệu. Vui l\xf2ng thử lại sau!"})}finally{g().close()}},s=localStorage.getItem("isGianthe"),a=localStorage.getItem("isShowPinyin"),n=localStorage.getItem("isShowSpace");null!==s&&Y(JSON.parse(s)),null!==a&&q(JSON.parse(a)),null!==n&&Q(JSON.parse(n)),i()},[N]),(0,a.useEffect)(()=>{ep&&(async()=>{try{let e=(0,c.iH)(o.db,ep),t=await (0,c.U2)(e);if(t.exists()){let e=t.val();if(!e)return;if(et?ei(t=>[...t,...e.nguphap]):ei(e.nguphap),e.nguphapimg&&ej(e.nguphapimg),e.hoithoai&&Array.isArray(e.hoithoai)){let t=e.hoithoai.flatMap(e=>e.tumoi||[]);$?ee(e=>[...e,...t]):ee(t)}}}catch(e){console.error("Lỗi khi lấy dữ liệu:",e)}finally{}})()},[ep]);let eS=e=>{if(eg(e),!e)return;let t=e.split("*"),i=[],s=[],a=[],n=[];t&&t.length>0&&(t.forEach(e=>{let[t,r,l,c]=e.trim().split("\n");i.push(t.trim()),s.push(r.trim()),a.push(l.trim()),n.push(c.trim())}),ea(i),er(s),ec(a),eh(n))},ey=async()=>{let e=!X;Y(e),localStorage.setItem("isGianthe",JSON.stringify(e))},ev=async()=>{let e=!W;q(e),localStorage.setItem("isShowPinyin",JSON.stringify(e))},ew=async()=>{let e=!B;Q(e),localStorage.setItem("isShowSpace",JSON.stringify(e))};return(0,s.jsx)(n.Z,{isStudy:!0,body:(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"listen-header-container",style:{backgroundColor:"#00586b"},children:(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"row mb-4",children:[(0,s.jsx)("div",{className:"col-12 col-md-8 ",children:(0,s.jsxs)("div",{className:"p-3 m-3",children:[(0,s.jsx)("h1",{className:"text-white",children:Z}),(0,s.jsx)("h3",{className:"text-white",children:I}),(0,s.jsxs)("div",{className:"text-white fs-1",children:["(",H,")"]}),(0,s.jsxs)("div",{className:"btn-group mt-2",children:[(0,s.jsx)(r.Z,{variant:X?"warning":"primary",onClick:()=>ey(),children:X?"Change to Traditional Chinese":"Change to Simple Chinese"}),(0,s.jsxs)(r.Z,{variant:W?"danger":"secondary",onClick:()=>ev(),children:["Pinyin ",W?"On":"Off"]}),(0,s.jsxs)(r.Z,{variant:B?"primary":"secondary",onClick:()=>ew(),children:["Space ",B?"On":"Off"]}),f&&(0,s.jsx)(u.default,{href:"/listen/".concat(t,"/edit"),target:"_self",children:(0,s.jsx)(r.Z,{variant:"warning",children:"Edit"})})]})]})}),(0,s.jsx)("div",{className:"col-12 col-md-4 image-container",children:(0,s.jsx)(d.default,{src:b||"/placeholder-image.jpg",alt:"H\xecnh ảnh",width:380,height:380,className:"image-style rounded",style:{objectFit:"cover"}})})]})})}),(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:"col-12 col-md-8",style:{marginTop:"-160px",padding:"0"},children:[(0,s.jsx)(h.Z,{gianthelist:R,tiengtrunglist:D,hanvietlist:P,pinyinlist:z,nghialist:F,levellist:V,isShowPinyin:W,isShowSpace:B,isGianthe:X,tumoi:$}),(0,s.jsx)(y.Z,{mp3:C,tieude:Z,mp3gianthelist:es,mp3tiengtrunglist:en,mp3pinyinlist:el,mp3nghialist:eo,mp3timelinelist:ed,isShowPinyin:W,isGianthe:X}),(0,s.jsx)(S.Z,{nguphaps:et,isGianthe:X}),(0,s.jsx)(v.Z,{nguphap:ef})]}),(0,s.jsx)("div",{className:"col-12 col-md-4",children:(0,s.jsx)("div",{className:"scroll-tumoi-container ms-5",children:(0,s.jsx)(j,{tumoi:$,isGianthe:X})})})]})})]})})}i(99362)},39898:function(e,t,i){"use strict";var s=i(57437);i(2265),i(23508);var a=i(66648);t.Z=e=>{let{nguphap:t}=e;return(0,s.jsxs)("div",{className:"cauhoi-container",children:[(0,s.jsx)("h1",{children:"Mở Rộng"}),t&&t.map((e,t)=>(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("h2",{children:[t+1,". ",e.tieude]}),e.noidung&&(0,s.jsx)("p",{children:e.noidung}),(0,s.jsx)("div",{className:"image-container",children:(0,s.jsx)(a.default,{src:e.src,alt:"H\xecnh ảnh",width:1200,height:1200,layout:"intrinsic",className:"image-styled",style:{objectFit:"contain"}})})]},t))]})}},99362:function(){}},function(e){e.O(0,[4443,9513,1207,4358,7481,9208,9461,8765,4974,3539,8472,609,9233,6901,7468,1682,4590,2971,7023,1744],function(){return e(e.s=53711)}),_N_E=e.O()}]);