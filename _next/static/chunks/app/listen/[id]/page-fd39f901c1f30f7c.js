(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5897],{53711:function(e,t,i){Promise.resolve().then(i.bind(i,20700))},20700:function(e,t,i){"use strict";i.d(t,{default:function(){return y}});var s=i(57437),a=i(2265),n=i(98708),r=i(12808),l=i(19768),c=i(23508),o=i(60516),h=i(65606),d=i(39731),u=i(66648),m=i(87138);i(64379);var g=i(89745),p=i(77761),f=i(38472),S=e=>{let{tumoi:t,isGianthe:i}=e,[n,l]=(0,a.useState)(!1),[c,o]=(0,a.useState)([]),h=(0,a.useRef)([]),[d,u]=(0,a.useState)(null),[m,S]=(0,a.useState)(!1),[x,j]=(0,a.useState)(),[y,v]=(0,a.useState)(),w=(0,a.useRef)(null),N=async e=>{try{o([]),u(e),S(!0),await k(e);let t="https://hocdichchuhan.github.io/huongdanviet/".concat(e.charCodeAt(0),".svg"),i=await C(t),s=await f.Z.get("https://api.hanzii.net/api/search/vi/".concat(encodeURIComponent(e),"?type=kanji&page=1&limit=3"));if(!s.data.found)throw Error("Network response was not ok");let a=await f.Z.get("https://api.hanzii.net/api/search/vi/".concat(encodeURIComponent(e),"?type=word&page=1&limit=50"));if(!a.data.found)throw Error("Network response was not ok");j(s.data),v(a.data),l(i)}catch(e){console.error("Error fetching Hanzi data:",e)}},k=async e=>{try{let t=await fetch("https://api.hanzii.net/api/search/vi/".concat(encodeURIComponent(e),"?type=kanji&page=1&limit=3"));if(!t.ok)throw Error("Network response was not ok");let i=await t.json();if(i.found&&i.result.length>0){let e=JSON.parse(i.result[0].strokes);o(e.strokes)}}catch(e){console.error("Error fetching Hanzi data:",e)}},C=async e=>{try{return(await fetch(e,{method:"HEAD"})).ok}catch(e){return console.error("Lỗi khi kiểm tra đường dẫn:",e),!1}};return(0,a.useEffect)(()=>{let e=e=>{w.current&&!w.current.contains(e.target)&&(u(null),S(!1))};return m&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[m]),(0,a.useEffect)(()=>{c.length>0&&setTimeout(()=>{h.current.forEach((e,t)=>{if(e){let i=e.getTotalLength();e.style.strokeDasharray=i,e.style.strokeDashoffset=i,e.style.animation="draw 1.5s ease-in-out ".concat(1*t,"s forwards")}})},100)},[c]),(0,s.jsxs)("div",{className:"baihocgiaotiep-tumoi",children:[(0,s.jsx)("h2",{children:"Từ mới"}),(0,s.jsx)(p.Z,{showStrokeArea:m,activeCharacter:d,strokes:c,pathsRef:h,isShowImage:n,dataTranslate:y,dataWrite:x,strokeAreaRef:w}),(0,s.jsx)("ul",{children:t&&t.map((e,t)=>(0,s.jsxs)("li",{children:[(0,s.jsxs)("div",{className:"d-flex flex-direction-column",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"my-1",children:["Tiếng Trung: ",(0,s.jsx)("strong",{style:{color:"red"},children:i?e.gianthe:e.tiengtrung})]}),e.hanviet&&(0,s.jsxs)("div",{className:"my-1",children:["H\xe1n Việt: ",(0,s.jsx)("strong",{children:e.hanviet})]}),(0,s.jsxs)("div",{className:"my-1",children:["Pinyin: ",(0,s.jsx)("strong",{children:e.pinyin})]}),(0,s.jsxs)("div",{className:"my-1",children:["Nghĩa: ",(0,s.jsx)("strong",{children:e.nghia})]})]}),(0,s.jsx)("div",{className:"ms-3",children:(0,s.jsxs)("div",{className:"chinese-word",children:[!i&&e.tiengtrung.split("").map((e,t)=>(0,s.jsx)("span",{className:"chinese-char tiengtrungText",onClick:()=>N(e),children:e},t)),i&&e.gianthe&&e.gianthe.split("").map((e,t)=>(0,s.jsx)("span",{className:"chinese-char tiengtrungText",onClick:()=>N(e),children:e},t))]})}),(0,s.jsx)(r.Z,{className:"btn-phatamthanh",variant:"danger",onClick:()=>(0,g.Z)(e.tiengtrung,t+10),children:"\uD83D\uDD0A"})]}),(0,s.jsx)("hr",{})]},t))})]})},x=i(21682),j=i(32608);function y(e){let{id:t}=e,[i,g]=(0,a.useState)(!0),[p,f]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1),[w,N]=(0,a.useState)(t),[k,C]=(0,a.useState)(),[E,b]=(0,a.useState)(),[Z,O]=(0,a.useState)(),[T,I]=(0,a.useState)(),[J,A]=(0,a.useState)(),[D,G]=(0,a.useState)([]),[H,L]=(0,a.useState)([]),[P,R]=(0,a.useState)([]),[_,z]=(0,a.useState)([]),[U,F]=(0,a.useState)([]),[M,V]=(0,a.useState)([]),[W,q]=(0,a.useState)(!0),[B,K]=(0,a.useState)(!0),[Q,X]=(0,a.useState)(!1),[Y,$]=(0,a.useState)([]),[ee,et]=(0,a.useState)([]),[ei,es]=(0,a.useState)([]),[ea,en]=(0,a.useState)([]),[er,el]=(0,a.useState)([]),[ec,eo]=(0,a.useState)([]),[eh,ed]=(0,a.useState)([]),[eu,em]=(0,a.useState)([]),[eg,ep]=(0,a.useState)();(0,a.useEffect)(()=>{let e=(0,c.GJ)(),t=(0,c.bg)();v(e),f(t);let i=async()=>{g(!0);try{let e=(0,o.iH)(h.db,"/users/listen/".concat(w)),t=await (0,o.U2)(e);if(t.exists()){let e=t.val();if(!e)return;C(e.mp3Link),b(e.img),O(e.tieude),I(e.tieudeTiengTrung),A(e.capdo),$(e.tumoi),et(e.nguphaps),ed(e.mp3timelinelist||[]),console.log(e.mp3timelinelist),ef(e.mp3Timeline),ep(e.thamchieu),G(e.gianthe.split("\n")),L(e.tiengtrung.split("\n")),z(e.pinyin.split("\n")),F(e.nghia.split("\n")),V(e.level.split("\n")),R(e.hanviet.split("\n"))}}catch(e){console.error("Lỗi khi lấy dữ liệu:",e)}finally{g(!1)}},s=localStorage.getItem("isGianthe"),a=localStorage.getItem("isShowPinyin"),n=localStorage.getItem("isShowSpace");null!==s&&X(JSON.parse(s)),null!==a&&q(JSON.parse(a)),null!==n&&K(JSON.parse(n)),i()},[w]),(0,a.useEffect)(()=>{eg&&(async()=>{g(!0);try{let e=(0,o.iH)(h.db,eg),t=await (0,o.U2)(e);if(t.exists()){let e=t.val();if(!e)return;if(ee?et(t=>[...t,...e.nguphap]):et(e.nguphap),e.hoithoai&&Array.isArray(e.hoithoai)){console.log(123);let t=e.hoithoai.flatMap(e=>e.tumoi||[]);Y?$(e=>[...e,...t]):$(t)}}}catch(e){console.error("Lỗi khi lấy dữ liệu:",e)}finally{g(!1)}})()},[eg]);let ef=e=>{if(em(e),!e)return;let t=e.split("*"),i=[],s=[],a=[],n=[];t&&t.length>0&&(t.forEach(e=>{let[t,r,l,c]=e.trim().split("\n");i.push(t.trim()),s.push(r.trim()),a.push(l.trim()),n.push(c.trim())}),es(i),en(s),el(a),eo(n))},eS=async()=>{let e=!Q;X(e),localStorage.setItem("isGianthe",JSON.stringify(e))},ex=async()=>{let e=!W;q(e),localStorage.setItem("isShowPinyin",JSON.stringify(e))},ej=async()=>{let e=!B;K(e),localStorage.setItem("isShowSpace",JSON.stringify(e))};return i?(0,s.jsx)(l.Z,{}):(0,s.jsx)(n.Z,{isStudy:!0,body:(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"listen-header-container",style:{backgroundColor:"#00586b"},children:(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"row mb-4",children:[(0,s.jsx)("div",{className:"col-12 col-md-8 ",children:(0,s.jsxs)("div",{className:"p-3 m-3",children:[(0,s.jsx)("h1",{className:"text-white",children:Z}),(0,s.jsx)("h3",{className:"text-white",children:T}),(0,s.jsxs)("div",{className:"text-white fs-1",children:["(",J,")"]}),(0,s.jsxs)("div",{className:"btn-group mt-2",children:[(0,s.jsx)(r.Z,{variant:Q?"warning":"primary",onClick:()=>eS(),children:Q?"Change to Traditional Chinese":"Change to Simple Chinese"}),(0,s.jsxs)(r.Z,{variant:W?"danger":"secondary",onClick:()=>ex(),children:["Pinyin ",W?"On":"Off"]}),(0,s.jsxs)(r.Z,{variant:B?"primary":"secondary",onClick:()=>ej(),children:["Space ",B?"On":"Off"]}),y&&(0,s.jsx)(m.default,{href:"/listen/".concat(t,"/edit"),target:"_self",children:(0,s.jsx)(r.Z,{variant:"warning",children:"Edit"})})]})]})}),(0,s.jsx)("div",{className:"col-12 col-md-4 image-container",children:(0,s.jsx)(u.default,{src:E||"/placeholder-image.jpg",alt:"H\xecnh ảnh",width:380,height:380,className:"image-style rounded",style:{objectFit:"cover"}})})]})})}),(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:"col-12 col-md-8",style:{marginTop:"-160px",padding:"0"},children:[(0,s.jsx)(d.Z,{gianthelist:D,tiengtrunglist:H,hanvietlist:P,pinyinlist:_,nghialist:U,levellist:M,isShowPinyin:W,isShowSpace:B,isGianthe:Q,tumoi:Y}),(0,s.jsx)(j.Z,{mp3:k,tieude:Z,mp3gianthelist:ei,mp3tiengtrunglist:ea,mp3pinyinlist:er,mp3nghialist:ec,mp3timelinelist:eh,isShowPinyin:W,isGianthe:Q}),(0,s.jsx)(x.Z,{nguphaps:ee,isGianthe:Q})]}),(0,s.jsx)("div",{className:"col-12 col-md-4",children:(0,s.jsx)("div",{className:"scroll-tumoi-container",children:(0,s.jsx)(S,{tumoi:Y,isGianthe:Q})})})]})})]})})}i(99362)},99362:function(){}},function(e){e.O(0,[4443,9513,1207,4358,7481,9208,9461,8765,4974,3539,8472,609,9233,6901,7468,1682,4590,2971,7023,1744],function(){return e(e.s=53711)}),_N_E=e.O()}]);