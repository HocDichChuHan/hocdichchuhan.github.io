(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5897,7295],{53711:function(e,t,s){Promise.resolve().then(s.bind(s,6670))},7449:function(e,t){"use strict";function s(){return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6670:function(e,t,s){"use strict";s.d(t,{default:function(){return b}});var i=s(57437),n=s(2265),a=s(66802),l=s(12808);s(19768);var r=s(23508),c=s(60516),d=s(65606),o=s(39731),h=s(66648),u=s(87138),m=s(64379),x=s.n(m),g=s(57295),p=s(21682),j=s(32608),v=s(34070),f=s(39898),N=s(76879),y=s(27220),S=s(7449),w=s.n(S);function b(e){let{id:t}=e,[s,m]=(0,n.useState)(!0),[S,b]=(0,n.useState)(!1),[k,C]=(0,n.useState)(!1),[Z,D]=(0,n.useState)(t),[_,E]=(0,n.useState)(),[O,L]=(0,n.useState)(),[T,I]=(0,n.useState)(),[P,R]=(0,n.useState)(),[H,A]=(0,n.useState)(),[F,G]=(0,n.useState)([]),[z,V]=(0,n.useState)([]),[J,B]=(0,n.useState)([]),[M,U]=(0,n.useState)([]),[W,q]=(0,n.useState)([]),[K,Q]=(0,n.useState)([]),[X,Y]=(0,n.useState)(!0),[$,ee]=(0,n.useState)(!0),[et,es]=(0,n.useState)(!1),[ei,en]=(0,n.useState)([]),[ea,el]=(0,n.useState)([]),[er,ec]=(0,n.useState)([]),[ed,eo]=(0,n.useState)([]),[eh,eu]=(0,n.useState)([]),[em,ex]=(0,n.useState)([]),[eg,ep]=(0,n.useState)([]),[ej,ev]=(0,n.useState)([]),[ef,eN]=(0,n.useState)(),[ey,eS]=(0,n.useState)([]),[ew,eb]=(0,n.useState)([]),[ek,eC]=(0,n.useState)(!1),[eZ,eD]=(0,n.useState)(""),e_=(0,n.useRef)(null),eE=(0,n.useRef)(null),eO=(0,n.useRef)(null),eL=(0,n.useRef)(null),[eT,eI]=(0,n.useState)(!1),eP=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=(0,r.GJ)(),t=(0,r.bg)();C(e),b(t),eD((0,r.sq)());let s=async()=>{x().fire({title:"Đang tải dữ liệu...",allowOutsideClick:!1,didOpen:()=>{x().showLoading()}});try{let e=(0,c.iH)(d.db,"/users/listen/".concat(Z)),t=await (0,c.U2)(e);if(t.exists()){let e=t.val();if(!e)return;E((0,r.Pw)(e.mp3Link)),L((0,r.Pw)(e.img)),I(e.tieude),R(e.tieudeTiengTrung),A(e.capdo),en(e.tumoi),el(e.nguphaps),ep(e.mp3timelinelist||[]),eR(e.mp3Timeline),eN(e.thamchieu),eb(e.cauhoi||[]),eS(e.nguphapimg||[]),console.log(e.cauhoi),G(e.gianthe.split("\n")),V(e.tiengtrung.split("\n")),U(e.pinyin.split("\n")),q(e.nghia.split("\n")),Q(e.level.split("\n")),B(e.hanviet.split("\n"))}let s=()=>{if(!eL.current)return;let e=eL.current.getBoundingClientRect();e.top<=window.innerHeight&&eI(!0),e.top>window.innerHeight&&eI(!1)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)}catch(e){console.error("Lỗi khi lấy dữ liệu:",e),x().fire({icon:"error",title:"Lỗi",text:"Kh\xf4ng thể lấy dữ liệu. Vui l\xf2ng thử lại sau!"})}finally{x().close()}},i=localStorage.getItem("isGianthe"),n=localStorage.getItem("isShowPinyin"),a=localStorage.getItem("isShowSpace");null!==i&&es(JSON.parse(i)),null!==n&&Y(JSON.parse(n)),null!==a&&ee(JSON.parse(a)),s()},[Z]),(0,n.useEffect)(()=>{ef&&(async()=>{try{let e=(0,c.iH)(d.db,ef),t=await (0,c.U2)(e);if(t.exists()){let e=t.val();if(!e)return;if(ea?el(t=>[...t,...e.nguphap]):el(e.nguphap),ey?eS(t=>[...t,...e.nguphapimg]):eS(e.nguphapimg),e.hoithoai&&Array.isArray(e.hoithoai)){let t=e.hoithoai.flatMap(e=>e.tumoi||[]);ei?en(e=>[...e,...t]):en(t)}}}catch(e){console.error("Lỗi khi lấy dữ liệu:",e)}finally{}})()},[ef]),(0,n.useEffect)(()=>{},[]);let eR=e=>{if(ev(e),!e)return;let t=e.split("*"),s=[],i=[],n=[],a=[];t&&t.length>0&&(t.forEach(e=>{let[t,l,r,c]=e.trim().split("\n");s.push(t.trim()),i.push(l.trim()),n.push(r.trim()),a.push(c.trim())}),ec(s),eo(i),eu(n),ex(a))},eH=async()=>{let e=!et;es(e),localStorage.setItem("isGianthe",JSON.stringify(e))},eA=async()=>{let e=!X;Y(e),localStorage.setItem("isShowPinyin",JSON.stringify(e))},eF=async()=>{let e=!$;ee(e),localStorage.setItem("isShowSpace",JSON.stringify(e))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(w(),{children:[(0,i.jsx)("meta",{property:"og:image",content:O}),(0,i.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,i.jsx)("meta",{name:"twitter:image",content:O})]}),(0,i.jsx)(a.Z,{isStudy:!0,body:(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("div",{className:"listen-header-container",style:{backgroundColor:"#00586b"},children:(0,i.jsx)("div",{className:"container",children:(0,i.jsxs)("div",{className:"row mb-4",children:[(0,i.jsx)("div",{className:"col-12 col-lg-8 ",children:(0,i.jsxs)("div",{className:"p-3 m-3",children:[(0,i.jsx)("h1",{className:"text-linearWhiteBlue",children:T}),(0,i.jsx)("h2",{className:"text-linearWhiteBlue fw-bold tiengtrungText",children:P}),(0,i.jsxs)("div",{className:"text-linearWhiteBlue fs-1",children:["(",H,")"]}),(0,i.jsxs)("div",{className:"btn-group mt-2",children:[(0,i.jsx)(l.Z,{variant:et?"warning":"primary",onClick:()=>eH(),children:et?"Change to Traditional Chinese":"Change to Simple Chinese"}),(0,i.jsxs)(l.Z,{variant:X?"danger":"secondary",onClick:()=>eA(),children:["Pinyin ",X?"On":"Off"]}),(0,i.jsxs)(l.Z,{variant:$?"primary":"secondary",onClick:()=>eF(),children:["Space ",$?"On":"Off"]}),k&&(0,i.jsx)(u.default,{href:"/listen/".concat(t,"/edit"),target:"_self",children:(0,i.jsx)(l.Z,{variant:"warning",children:"Edit"})})]})]})}),(0,i.jsx)("div",{className:"col-12 col-lg-4  image-container transitionImage",children:(0,i.jsx)(h.default,{src:O||"/placeholder-image.jpg",alt:"H\xecnh ảnh",width:380,height:380,className:"image-style rounded",style:{objectFit:"cover"}})})]})})}),(0,i.jsxs)("div",{className:"container",children:[(0,i.jsxs)("div",{className:"row",children:[(0,i.jsxs)("div",{ref:e_,className:"col-12 col-md-8",style:{marginTop:"-160px",padding:"0"},children:[(0,i.jsx)(o.Z,{gianthelist:F,tiengtrunglist:z,hanvietlist:J,pinyinlist:M,nghialist:W,levellist:K,isShowPinyin:X,isShowSpace:$,isGianthe:et,tumoi:ei}),(0,i.jsx)(j.Z,{mp3:_,tieude:T,mp3gianthelist:er,mp3tiengtrunglist:ed,mp3pinyinlist:eh,mp3nghialist:em,mp3timelinelist:eg,isShowPinyin:X,isGianthe:et}),(0,i.jsx)("div",{ref:eE,className:ek?"fullscreen-wrapper":"",children:(0,i.jsx)(v.Z,{mp3:_,tieude:T,mp3gianthelist:er,mp3tiengtrunglist:ed,mp3pinyinlist:eh,mp3nghialist:em,mp3timelinelist:eg,isShowPinyin:X,isGianthe:et,imgsrc:O,tieudeTiengTrung:P,capdo:H,isFullScreen:ek,setIsFullScreen:eC,tumoi:ei})}),(0,i.jsxs)("div",{ref:eO,children:[(0,i.jsx)(p.Z,{ref:eO,nguphaps:ea,isGianthe:et}),(0,i.jsx)(f.Z,{nguphap:ey})]})]}),(0,i.jsx)("div",{className:"col-12 col-md-4 ",children:(0,i.jsx)("div",{className:"scroll-tumoi-container",ref:eP,children:(0,i.jsx)(g.Z,{tumoi:ei,isGianthe:et})})})]}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-12 col-md-8",style:{pointerEvents:S?"auto":"none",opacity:S?1:.5},children:(0,i.jsxs)("div",{ref:eL,children:[(0,i.jsx)("div",{className:"fs-3 mb-3",children:"Bạn Cần Đăng Nhập Để C\xf3 Thể Trả Lời C\xe2u Hỏi"}),(0,i.jsx)(N.Z,{cauHoi:ew,isGianthe:et,uid:eZ,id:t})]})}),(0,i.jsx)("div",{className:"col-12 col-md-4",children:eT&&(0,i.jsx)("div",{className:"viewUserDiem",children:(0,i.jsx)(y.Z,{hsk:"listen",id:t})})})]})]},ek),!ek&&(0,i.jsxs)("div",{style:{position:"fixed",top:"50%",right:"10px",display:"flex",flexDirection:"column",gap:"8px",zIndex:9999},children:[(0,i.jsx)(l.Z,{size:"sm",onClick:()=>{var e;return null===(e=e_.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"Reading"}),(0,i.jsx)(l.Z,{size:"sm",onClick:()=>{var e;return null===(e=eE.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"\uD83C\uDFB5 Listen"}),(0,i.jsx)(l.Z,{size:"sm",onClick:()=>{var e;return null===(e=eO.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"✏ Ngữ ph\xe1p"}),(0,i.jsx)(l.Z,{size:"sm",onClick:()=>{var e;return null===(e=eL.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"❓ C\xe2u hỏi"})]})]})})]})}s(99362),s(20357)},57295:function(e,t,s){"use strict";var i=s(57437),n=s(2265),a=s(12808),l=s(89745),r=s(77761),c=s(66648);s(60992);var d=s(23508),o=s(91654),h=s(27593);t.Z=e=>{let{tumoi:t,isGianthe:s,isShowpinyin:u=!0}=e,[m,x]=(0,n.useState)(!1),[g,p]=(0,n.useState)([]),j=(0,n.useRef)([]),[v,f]=(0,n.useState)(null),[N,y]=(0,n.useState)(!1),[S,w]=(0,n.useState)(),[b,k]=(0,n.useState)(),C=(0,n.useRef)(null),[Z,D]=(0,n.useState)({}),[_,E]=(0,n.useState)({}),[O,L]=(0,n.useState)([]);(0,n.useEffect)(()=>{let e=e=>{C.current&&!C.current.contains(e.target)&&(f(null),y(!1))};return N&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[N]),(0,n.useEffect)(()=>{g.length>0&&setTimeout(()=>{j.current.forEach((e,t)=>{if(e){let s=e.getTotalLength();e.style.strokeDasharray=s,e.style.strokeDashoffset=s,e.style.animation="draw 1.5s ease-in-out ".concat(1*t,"s forwards")}})},100)},[g]);let T=e=>{D(t=>({...t,[e]:!t[e]}))},I=e=>{E(t=>({...t,[e]:!t[e]}))},P=(e,t)=>(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"row align-items-center",children:[(0,i.jsx)("div",{className:"col-6 ps-4 col-md-6 d-flex flex-column  align-items-end",children:(0,i.jsxs)("div",{className:"align-items-start",children:[(0,i.jsxs)("div",{className:"mb-2 text-danger align-items-start",children:[(0,i.jsx)("strong",{}),(0,i.jsx)(o.Z,{chineseList:s?e.gianthe:e.tiengtrung,isGianthe:s,isHighlight:!0}),(0,i.jsx)(a.Z,{variant:"danger",className:"btn-phatamthanh ms-2",onClick:()=>(0,l.Z)(e.tiengtrung,t+10),children:"\uD83D\uDD0A"})]}),e.hanviet&&(0,i.jsxs)("div",{children:["H\xe1n Việt: ",(0,i.jsx)("strong",{children:e.hanviet})]}),(0,i.jsxs)("div",{children:["Pinyin: ",(0,i.jsx)("strong",{children:e.pinyin})]})]})}),(0,i.jsx)("div",{className:"col-6 col-md-6 d-flex justify-content-start align-items-center",children:(0,i.jsx)(c.default,{src:"https://th.bing.com/th?q=".concat(encodeURIComponent(e.gianthe||e.tiengtrung),"&w=450&h=450"),alt:"H\xecnh ảnh",width:150,height:150,style:{objectFit:"cover",borderRadius:6},className:"shadow-sm"})})]})}),R=(e,t)=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"my-1",children:["Nghĩa: ",(0,i.jsx)("strong",{children:e.nghia})]}),(0,i.jsx)("div",{className:"row example-list mt-2 ".concat(Z[t]?"show":"hide"),children:Z[t]&&e.examples&&e.examples.map((s,n)=>(0,i.jsxs)("div",{className:"col-12 col-md-6 mt-3 border rounded pt-2 fade-in",children:[(0,i.jsxs)("div",{children:["V\xed dụ ",n+1]}),(0,i.jsxs)("div",{className:"my-1",children:["Tiếng Trung: ",(0,i.jsx)("span",{className:"fs-3 text-primary",children:(0,d.LA)(s.e,e.gianthe)}),(0,i.jsx)(a.Z,{className:"btn-phatamthanh",variant:"outline-danger",onClick:()=>(0,l.Z)(s.e,n+20),children:"\uD83D\uDD0A"})]}),u&&(0,i.jsxs)("div",{className:"my-1",children:["Pinyin: ",(0,i.jsx)("span",{className:"fs-4 text-muted",children:s.p})]}),(0,i.jsxs)("div",{className:"my-1",children:["Nghĩa: ",(0,i.jsx)("span",{className:"fs-4",children:s.m})]})]},"".concat(t,"_").concat(n)))}),e.examples&&(0,i.jsx)(a.Z,{variant:Z[t]?"secondary":"info",size:"sm",className:"mt-2",onClick:()=>T(t),children:Z[t]?"Ẩn v\xed dụ":"Hiện v\xed dụ"})]}),H=(e,t)=>{let s=e.means&&e.means.length>0&&_[t],n=e.structs&&e.structs.length>0&&_[t];if(!s&&!n)return null;let r=[];s&&e.means.forEach((e,t)=>{r.push({type:"mean",data:e,key:"mean_".concat(t)})}),n&&e.structs.forEach((e,t)=>{r.push({type:"struct",data:e,key:"struct_".concat(t)})});let c=0,o=0;return(0,i.jsx)("div",{className:"row mt-3 g-2",children:r.map((t,s)=>("struct"===t.type&&c++,"mean"===t.type&&o++,(0,i.jsx)("div",{className:"col-12 col-md-6 border rounded p-2 animation-item",children:"mean"===t.type?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"my-1",children:[(0,i.jsxs)("span",{children:["Nghĩa ",1==o?"":o,": ",(0,i.jsx)("strong",{className:"text-danger fs-5",children:t.data.mean})]}),(0,i.jsx)("div",{className:"text-muted small",children:t.data.explain})]}),t.data.examples&&t.data.examples.length>0&&(0,i.jsxs)("div",{className:"mt-2",children:[(0,i.jsx)("div",{className:"fw-semibold mb-1",children:"V\xed dụ:"}),t.data.examples.map((t,n)=>(0,i.jsxs)("div",{className:"border-3 rounded-2 p-2 m-2 animation-item",children:[(0,i.jsxs)("div",{className:"my-1",children:[(0,i.jsx)("span",{className:"fs-5 text-primary",children:(0,d.LA)(t.e,e.gianthe)}),(0,i.jsx)(a.Z,{className:"btn-phatamthanh",variant:"outline-danger",onClick:()=>(0,l.Z)(t.e,n+20),children:"\uD83D\uDD0A"})]}),u&&(0,i.jsx)("div",{className:"text-muted",children:t.p}),(0,i.jsx)("div",{children:t.m})]},"meanex_".concat(s,"_").concat(n)))]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"fs-5",children:[(0,i.jsxs)("span",{children:["Cấu tr\xfac ",c,": "]}),(0,i.jsx)("span",{className:"text-danger fw-semibold",children:t.data.struct})]}),(0,i.jsx)("small",{className:"text-muted",children:t.data.explain}),t.data.examples&&t.data.examples.map((t,n)=>(0,i.jsxs)("div",{className:"animation-item mt-2",children:[(0,i.jsx)("span",{className:"text-primary",children:(0,d.LA)(t.e,e.gianthe)}),(0,i.jsx)(a.Z,{variant:"outline-danger",onClick:()=>(0,l.Z)(t.e,n+30),size:"sm",children:"\uD83D\uDD0A"}),u&&(0,i.jsx)("div",{className:"text-muted",children:t.p}),(0,i.jsx)("div",{children:t.m})]},"strex_".concat(s,"_").concat(n)))]})},t.key)))})};return(0,i.jsxs)("div",{className:"baihocgiaotiep-tumoi",children:[(0,i.jsx)("h2",{children:"Từ mới"}),(0,i.jsx)(r.Z,{showStrokeArea:N,activeCharacter:v,strokes:g,pathsRef:j,isShowImage:m,dataTranslate:b,dataWrite:S,strokeAreaRef:C}),(0,i.jsx)("ul",{children:t&&t.map((e,t)=>{var s,n;return(0,i.jsxs)("li",{className:"tu-item fade-in",children:[P(e,t),(null===(s=e.means)||void 0===s?void 0:s.length)>0||(null===(n=e.structs)||void 0===n?void 0:n.length)>0?(0,i.jsxs)(h.Z,{show:_[t],onClose:()=>I(t),children:[P(e,t),H(e,t)]}):(0,i.jsx)("div",{className:"text-center",children:R(e,t)}),(0,i.jsx)("div",{className:"d-flex gap-2 mt-2",children:e.means&&e.means.length>0&&(0,i.jsx)(a.Z,{variant:_[t]?"secondary":"info",size:"sm",onClick:()=>I(t),children:_[t]?"Ẩn nghĩa":"Hiện nghĩa"})}),(0,i.jsx)("hr",{})]},t)})})]})}},99362:function(){},60992:function(){}},function(e){e.O(0,[2866,9513,5527,8905,7539,431,67,1953,1207,4358,7481,9208,9461,8765,4974,3539,8472,609,3830,9233,6901,6802,8551,4547,3104,5438,9618,2971,7023,1744],function(){return e(e.s=53711)}),_N_E=e.O()}]);