(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5897],{53711:function(e,t,s){Promise.resolve().then(s.bind(s,20700))},20700:function(e,t,s){"use strict";s.d(t,{default:function(){return f}});var n=s(57437),a=s(2265),i=s(98708),r=s(12808),c=s(19768),l=s(23508),o=s(60516),d=s(65606),h=s(39731),u=s(66648),m=s(87138);s(64379);var x=s(89745),p=s(77761),g=s(38472),j=e=>{let{tumoi:t,isGianthe:s}=e,[i,c]=(0,a.useState)(!1),[l,o]=(0,a.useState)([]),d=(0,a.useRef)([]),[h,u]=(0,a.useState)(null),[m,j]=(0,a.useState)(!1),[f,v]=(0,a.useState)(),[N,y]=(0,a.useState)(),w=(0,a.useRef)(null),S=async e=>{try{o([]),u(e),j(!0),await k(e);let t="https://hocdichchuhan.github.io/huongdanviet/".concat(e.charCodeAt(0),".svg"),s=await b(t),n=await g.Z.get("https://api.hanzii.net/api/search/vi/".concat(encodeURIComponent(e),"?type=kanji&page=1&limit=3"));if(!n.data.found)throw Error("Network response was not ok");let a=await g.Z.get("https://api.hanzii.net/api/search/vi/".concat(encodeURIComponent(e),"?type=word&page=1&limit=50"));if(!a.data.found)throw Error("Network response was not ok");v(n.data),y(a.data),c(s)}catch(e){console.error("Error fetching Hanzi data:",e)}},k=async e=>{try{let t=await fetch("https://api.hanzii.net/api/search/vi/".concat(encodeURIComponent(e),"?type=kanji&page=1&limit=3"));if(!t.ok)throw Error("Network response was not ok");let s=await t.json();if(s.found&&s.result.length>0){let e=JSON.parse(s.result[0].strokes);o(e.strokes)}}catch(e){console.error("Error fetching Hanzi data:",e)}},b=async e=>{try{return(await fetch(e,{method:"HEAD"})).ok}catch(e){return console.error("Lỗi khi kiểm tra đường dẫn:",e),!1}};return(0,a.useEffect)(()=>{let e=e=>{w.current&&!w.current.contains(e.target)&&(u(null),j(!1))};return m&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[m]),(0,a.useEffect)(()=>{l.length>0&&setTimeout(()=>{d.current.forEach((e,t)=>{if(e){let s=e.getTotalLength();e.style.strokeDasharray=s,e.style.strokeDashoffset=s,e.style.animation="draw 1.5s ease-in-out ".concat(1*t,"s forwards")}})},100)},[l]),(0,n.jsxs)("div",{className:"baihocgiaotiep-tumoi",children:[(0,n.jsx)("h2",{children:"Từ mới"}),(0,n.jsx)(p.Z,{showStrokeArea:m,activeCharacter:h,strokes:l,pathsRef:d,isShowImage:i,dataTranslate:N,dataWrite:f,strokeAreaRef:w}),(0,n.jsxs)("ul",{children:[console.log(t),t&&t.map((e,t)=>(0,n.jsxs)("li",{children:[(0,n.jsxs)("div",{className:"d-flex flex-direction-column",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"my-1",children:["Tiếng Trung: ",(0,n.jsx)("strong",{style:{color:"red"},children:s?e.gianthe:e.tiengtrung})]}),e.hanviet&&(0,n.jsxs)("div",{className:"my-1",children:["H\xe1n Việt: ",(0,n.jsx)("strong",{children:e.hanviet})]}),(0,n.jsxs)("div",{className:"my-1",children:["Pinyin: ",(0,n.jsx)("strong",{children:e.pinyin})]}),(0,n.jsxs)("div",{className:"my-1",children:["Nghĩa: ",(0,n.jsx)("strong",{children:e.nghia})]})]}),(0,n.jsx)("div",{className:"ms-3",children:(0,n.jsxs)("div",{className:"chinese-word",children:[!s&&e.tiengtrung.split("").map((e,t)=>(0,n.jsx)("span",{className:"chinese-char tiengtrungText",onClick:()=>S(e),children:e},t)),s&&e.gianthe&&e.gianthe.split("").map((e,t)=>(0,n.jsx)("span",{className:"chinese-char tiengtrungText",onClick:()=>S(e),children:e},t))]})}),(0,n.jsx)(r.Z,{className:"btn-phatamthanh",variant:"danger",onClick:()=>(0,x.Z)(e.tiengtrung,t+10),children:"\uD83D\uDD0A"})]}),(0,n.jsx)("hr",{})]},t))]})]})};function f(e){let{id:t}=e,[s,x]=(0,a.useState)(!0),[p,g]=(0,a.useState)(!1),[f,v]=(0,a.useState)(!1),[N,y]=(0,a.useState)(t),[w,S]=(0,a.useState)(),[k,b]=(0,a.useState)(),[T,C]=(0,a.useState)(),[Z,E]=(0,a.useState)(),[A,H]=(0,a.useState)(),[R,D]=(0,a.useState)([]),[O,L]=(0,a.useState)([]),[_,I]=(0,a.useState)([]),[M,z]=(0,a.useState)([]),[G,P]=(0,a.useState)([]),[U,F]=(0,a.useState)([]),[J,V]=(0,a.useState)(!0),[W,q]=(0,a.useState)(!0),B=(0,a.useRef)(null),K=(0,a.useRef)(null),[Q,X]=(0,a.useState)(!1),[Y,$]=(0,a.useState)(0),[ee,et]=(0,a.useState)(0),[es,en]=(0,a.useState)(1),[ea,ei]=(0,a.useState)(!1),[er,ec]=(0,a.useState)([]),el=e=>e?"".concat(Math.floor(e/60).toString().padStart(2,"0"),":").concat(Math.floor(e%60).toString().padStart(2,"0")):"00:00";(0,a.useEffect)(()=>(K.current=new Audio("https://hocdichchuhan.github.io/mp3/bg/".concat(Math.floor(7*Math.random())+1,".mp3")),K.current.volume=.15,()=>{K.current&&(K.current.pause(),K.current.currentTime=0,K.current=null)}),[N]),(0,a.useEffect)(()=>{let e=(0,l.GJ)(),t=(0,l.bg)();v(e),g(t);let s=async()=>{x(!0);try{let e=(0,o.iH)(d.db,"/users/listen/".concat(N)),t=await (0,o.U2)(e);if(t.exists()){let e=t.val();if(!e)return;S(e.mp3Link),b(e.img),C(e.tieude),E(e.tieudeTiengTrung),H(e.capdo),ec(e.tumoi),D(e.gianthe.split("\n")),L(e.tiengtrung.split("\n")),z(e.pinyin.split("\n")),P(e.nghia.split("\n")),F(e.level.split("\n")),I(e.hanviet.split("\n"))}}catch(e){console.error("Lỗi khi lấy dữ liệu:",e)}finally{x(!1)}},n=localStorage.getItem("isGianthe");null!==n&&ei(JSON.parse(n)),s()},[N]);let eo=async()=>{let e=!ea;ei(e),localStorage.setItem("isGianthe",JSON.stringify(e))};return s?(0,n.jsx)(c.Z,{}):(0,n.jsx)(i.Z,{isStudy:!0,body:(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)("div",{className:"listen-header-container",style:{backgroundColor:"#00586b"},children:(0,n.jsx)("div",{className:"container",children:(0,n.jsxs)("div",{className:"row mb-4",children:[(0,n.jsx)("div",{className:"col-12 col-md-8 ",children:(0,n.jsxs)("div",{className:"p-3 m-3",children:[(0,n.jsx)("h1",{className:"text-white",children:T}),(0,n.jsx)("h3",{className:"text-white",children:Z}),(0,n.jsxs)("div",{className:"text-white",children:["(",A,")"]}),(0,n.jsxs)("div",{className:"btn-group mt-2",children:[(0,n.jsx)(r.Z,{variant:ea?"warning":"primary",onClick:()=>eo(),children:ea?"Change to Traditional Chinese":"Change to Simple Chinese"}),(0,n.jsxs)(r.Z,{variant:J?"danger":"secondary",onClick:()=>V(!J),children:["Pinyin ",J?"On":"Off"]}),(0,n.jsxs)(r.Z,{variant:W?"primary":"secondary",onClick:()=>q(!W),children:["Space ",W?"On":"Off"]}),f&&(0,n.jsx)(m.default,{href:"/listen/".concat(t,"/edit"),target:"_self",children:(0,n.jsx)(r.Z,{variant:"warning",children:"Edit"})})]})]})}),(0,n.jsx)("div",{className:"col-12 col-md-4 image-container",children:(0,n.jsx)(u.default,{src:k||"/placeholder-image.jpg",alt:"H\xecnh ảnh",width:400,height:400,className:"image-style rounded",style:{objectFit:"cover"}})})]})})}),(0,n.jsx)("div",{className:"container",children:(0,n.jsxs)("div",{className:"row",children:[(0,n.jsxs)("div",{className:"col-12 col-md-8",style:{marginTop:"-160px"},children:[(0,n.jsx)(h.Z,{gianthelist:R,tiengtrunglist:O,hanvietlist:_,pinyinlist:M,nghialist:G,levellist:U,isShowPinyin:J,isShowSpace:W,isGianthe:ea,tumoi:er}),w&&(0,n.jsxs)("div",{className:"d-flex align-items-center bg-dark text-white p-3 m-2 rounded",children:[(0,n.jsx)(r.Z,{variant:Q?"warning":"success",onClick:()=>{B.current&&K.current&&(Q?(B.current.pause(),setTimeout(()=>{K.current.pause()},5e3)):(K.current.play(),setTimeout(()=>{B.current.play()},5e3)),X(!Q))},className:"me-2",children:Q?"⏸":"▶"}),(0,n.jsx)("input",{type:"range",min:"0",max:ee||100,value:Y,onChange:e=>{if(B.current&&K.current){let t=parseFloat(e.target.value);B.current.currentTime=t,K.current.currentTime=t,$(t)}},className:"form-range w-50 me-2"}),(0,n.jsxs)("span",{className:"me-2",children:[el(Y)," / ",el(ee)]}),(0,n.jsxs)("select",{value:es.toFixed(1),onChange:e=>{let t=parseFloat(e.target.value);console.log("New playback rate:",t),en(t),B.current&&(B.current.playbackRate=t)},className:"form-select form-select-sm me-2",style:{width:"auto"},children:[(0,n.jsx)("option",{value:"0.5",children:"0.5x"}),(0,n.jsx)("option",{value:"1.0",children:"1.0x"}),(0,n.jsx)("option",{value:"1.5",children:"1.5x"}),(0,n.jsx)("option",{value:"2.0",children:"2.0x"})]}),(0,n.jsx)(r.Z,{variant:"outline-primary",href:w,download:"".concat(T||"audio",".mp3"),className:"ms-5",children:(0,n.jsx)("i",{className:"fa-solid fa-circle-down"})}),(0,n.jsx)("audio",{ref:B,src:w,onTimeUpdate:()=>{B.current&&$(B.current.currentTime)},onLoadedMetadata:()=>{B.current&&et(B.current.duration)},onEnded:()=>{X(!1),K.current&&setTimeout(()=>{K.current.pause(),K.current.currentTime=0},5e3)}})]})]}),(0,n.jsx)("div",{className:"col-12 col-md-4 ",children:(0,n.jsx)("div",{className:"scroll-tumoi-container",children:(0,n.jsx)(j,{tumoi:er,isGianthe:ea})})})]})})]})})}s(99362)},39731:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var n=s(57437);s(2265);var a=s(24539),i=s(59233);function r(e){let{gianthelist:t=[],tiengtrunglist:s=[],hanvietlist:r=[],pinyinlist:c=[],nghialist:l=[],levellist:o=[],isShowPinyin:d=!1,isShowSpace:h=!1,isGianthe:u=!0,tumoi:m=[]}=e,x=new Set(m.flatMap(e=>[e.gianthe,e.tiengtrung]));return(0,n.jsx)("div",{className:"container my-3",children:(0,n.jsxs)("div",{className:"p-3 border rounded vanbanhienthiContainer",children:[u&&t.map((e,t)=>{let s=(0,n.jsxs)(a.Z,{id:"tooltip-".concat(t),className:"custom-tooltip row",children:[(0,n.jsxs)("div",{className:"fs-5",children:["Pinyin: ",(0,n.jsxs)("strong",{className:"text-white",children:[c[t]||"N/A"," ",(0,n.jsxs)("span",{className:"text-success",children:["(",o[t]||"N/A",")"]})]})]}),(0,n.jsxs)("div",{className:"fs-5",children:["H\xe1n Việt: ",(0,n.jsx)("strong",{className:"text-primary",children:r[t]||"N/A"})]}),(0,n.jsxs)("div",{className:"fs-5",children:["Nghĩa: ",(0,n.jsxs)("strong",{className:"text-warning",children:[l[t]||"N/A"," "]})]})]});return"*"===e?(0,n.jsx)("br",{},t):(0,n.jsx)(i.Z,{placement:"top",overlay:s,children:(0,n.jsxs)("span",{className:"".concat(h?"px-1":""," d-inline-block text-center"),style:{cursor:"pointer",lineHeight:"1.2"},children:[d&&(0,n.jsx)("span",{className:"small fs-6",style:{lineHeight:"1",textDecoration:"none",display:"block",color:"rgb(145 145 145)"},children:c[t]||""}),(0,n.jsx)("span",{className:"fs-3 hover-shadow tiengtrungText",style:{color:x.has(e)?"#ff6e6e":void 0},children:e})]})},t)}),!u&&s.map((e,t)=>{let s=(0,n.jsxs)(a.Z,{id:"tooltip-".concat(t),className:"custom-tooltip row",children:[(0,n.jsxs)("div",{className:"fs-5",children:[c[t]||"N/A"," (",o[t]||"N/A",")"]}),(0,n.jsxs)("div",{className:"fs-5",children:[(0,n.jsx)("strong",{})," ",r[t]||"N/A"]}),(0,n.jsx)("div",{className:"fs-5",children:l[t]||"N/A"})]});return"*"===e?(0,n.jsx)("br",{},t):(0,n.jsx)(i.Z,{placement:"top",overlay:s,children:(0,n.jsxs)("span",{className:"".concat(h?"px-1":""," d-inline-block text-center"),style:{cursor:"pointer",lineHeight:"1.2"},children:[d&&(0,n.jsx)("span",{className:"small fs-6",style:{lineHeight:"1",textDecoration:"none",display:"block",color:"rgb(145 145 145)"},children:c[t]||""}),(0,n.jsx)("span",{className:"fs-3 hover-shadow tiengtrungText",style:{color:x.has(e)?"#ff6e6e":void 0},children:e})]})},t)})]})})}s(15120),s(23508)},99362:function(){},15120:function(){}},function(e){e.O(0,[8905,9513,1207,4358,7481,9208,9461,5973,3539,8472,609,9233,6901,7468,7761,2971,7023,1744],function(){return e(e.s=53711)}),_N_E=e.O()}]);