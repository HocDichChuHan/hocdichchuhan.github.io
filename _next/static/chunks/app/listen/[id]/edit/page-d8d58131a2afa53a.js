(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5814],{17602:function(e,t,n){Promise.resolve().then(n.bind(n,72602))},72602:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{default:function(){return ListenEdit}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(57437),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2265),_component_PageForm_PageForm__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(98708),_barrel_optimize_names_Button_react_bootstrap__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(12808),_component_WaitingLoad_WaitingLoad__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(19768),_component_publicFc_PublicFunction__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(23508),firebase_database__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(60516),_component_firebase_Firebase__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(65606),sweetalert2__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(64379),sweetalert2__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(sweetalert2__WEBPACK_IMPORTED_MODULE_7__),_component_publicFc_AutoResizeTextarea__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(34231),_component_vanban_VanBanHienThi__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(39731);function ListenEdit(param){let{id}=param,[loading,setLoading]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!0),[flagLogin,setFlaglogin]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[flagAdmin,setFlagAdmin]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[idBai,setId]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(id),[mp3Link,setMp3Link]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(),[img,setImg]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(),[tieude,setTieude]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(),[tieudeTiengTrung,setTieudeTiengTrung]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(),[capdo,setCapdo]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(),[gianthe,setGianthe]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[tiengtrung,setTiengtrung]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[hanviet,setHanviet]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[pinyin,setPinyin]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[nghia,setNghia]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[level,setLevel]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[gianthelist,setGianthelist]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[tiengtrunglist,setTiengtrunglist]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[hanvietlist,setHanvietlist]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[pinyinlist,setPinyinlist]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[nghialist,setNghialist]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[levellist,setLevellist]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{let e=(0,_component_publicFc_PublicFunction__WEBPACK_IMPORTED_MODULE_4__.GJ)(),t=(0,_component_publicFc_PublicFunction__WEBPACK_IMPORTED_MODULE_4__.bg)();setFlagAdmin(e),setFlaglogin(t),(async()=>{setLoading(!0);try{let e=(0,firebase_database__WEBPACK_IMPORTED_MODULE_5__.iH)(_component_firebase_Firebase__WEBPACK_IMPORTED_MODULE_6__.db,"/users/listen/".concat(idBai)),t=await (0,firebase_database__WEBPACK_IMPORTED_MODULE_5__.U2)(e);if(t.exists()){let e=t.val();if(!e)return;setGianthe(e.gianthe),setTiengtrung(e.tiengtrung),setPinyin(e.pinyin),setNghia(e.nghia),setLevel(e.level),setHanviet(e.hanviet),setMp3Link(e.mp3Link),setImg(e.img),setTieude(e.tieude),setTieudeTiengTrung(e.tieudeTiengTrung),setCapdo(e.capdo),setGianthelist(e.gianthe.split("\n")),setTiengtrunglist(e.tiengtrung.split("\n")),setPinyinlist(e.pinyin.split("\n")),setNghialist(e.nghia.split("\n")),setLevellist(e.level.split("\n")),setHanvietlist(e.hanviet.split("\n"))}}catch(e){console.error("Lỗi khi lấy dữ liệu:",e)}finally{setLoading(!1)}})()},[]);let handleIdChange=e=>{setId(e)},handleAllDataChange=(e,t)=>{let n=t.split("\n");switch(e){case"gianthe":setGianthe(t),setGianthelist(n);break;case"tiengtrung":setTiengtrung(t),setTiengtrunglist(n);break;case"pinyin":setPinyin(t),setPinyinlist(n);break;case"nghia":setNghia(t),setNghialist(n);break;case"level":setLevel(t),setLevellist(n);break;case"hanviet":setHanviet(t),setHanvietlist(n)}},handleInputChange=(e,t,n)=>{console.log(n);let a=(e,t,n)=>{console.log(a);let a=[...e];a[t]=n;let i="";return a.map((e,t)=>{i+=e+"\n"}),i},i=(e,t,n)=>{let a=[...e];return a[t]=n,a};switch(t){case"gianthe":setGianthe(a(gianthelist,e,n)),setGianthelist(i(gianthelist,e,n));break;case"tiengtrung":setTiengtrung(a(tiengtrunglist,e,n)),setTiengtrunglist(i(tiengtrunglist,e,n));break;case"pinyin":setPinyin(a(pinyinlist,e,n)),setPinyinlist(i(pinyinlist,e,n));break;case"nghia":setNghia(a(nghialist,e,n)),setNghialist(i(nghialist,e,n));break;case"level":setLevel(a(levellist,e,n)),setLevellist(i(levellist,e,n));break;case"hanviet":setHanviet(a(levellist,e,n)),setHanvietlist(i(levellist,e,n))}},handleAddItem=()=>{let e=e=>""===e.trim()?"":(e.endsWith("\n"),e+"\n");setGianthe(e(gianthe)+""),setTiengtrung(e(tiengtrung)+""),setPinyin(e(pinyin)+""),setNghia(e(nghia)+""),setLevel(e(level)+""),setHanviet(e(hanviet)+""),setGianthelist([...gianthelist,""]),setTiengtrunglist([...tiengtrunglist,""]),setPinyinlist([...pinyinlist,""]),setNghialist([...nghialist,""]),setLevellist([...levellist,""]),setHanvietlist([...hanvietlist,""])},handleDeleteItem=async e=>{(await sweetalert2__WEBPACK_IMPORTED_MODULE_7___default().fire({title:"Bạn c\xf3 chắc?",text:'Xo\xe1 mục "'.concat(gianthe[e]||"chưa đặt t\xean",'"?'),icon:"warning",showCancelButton:!0,confirmButtonText:"Xo\xe1",cancelButtonText:"Huỷ"})).isConfirmed&&(setGianthe(gianthe.filter((t,n)=>n!==e)),setTiengtrung(tiengtrung.filter((t,n)=>n!==e)),setPinyin(pinyin.filter((t,n)=>n!==e)),setNghia(nghia.filter((t,n)=>n!==e)),setLevel(level.filter((t,n)=>n!==e)),setHanviet(hanviet.filter((t,n)=>n!==e)),setGianthelist(gianthelist.filter((t,n)=>n!==e)),setTiengtrunglist(tiengtrunglist.filter((t,n)=>n!==e)),setPinyinlist(pinyinlist.filter((t,n)=>n!==e)),setNghialist(nghialist.filter((t,n)=>n!==e)),setLevellist(levellist.filter((t,n)=>n!==e)),setHanvietlist(hanvietlist.filter((t,n)=>n!==e)))},saveAllData=async()=>{try{let e="/users/listen/".concat(idBai),t=(0,firebase_database__WEBPACK_IMPORTED_MODULE_5__.iH)(_component_firebase_Firebase__WEBPACK_IMPORTED_MODULE_6__.db,e);await (0,firebase_database__WEBPACK_IMPORTED_MODULE_5__.t8)(t,{gianthe,tiengtrung,pinyin,nghia,level,hanviet,mp3Link,img,tieude,capdo,tieudeTiengTrung}),sweetalert2__WEBPACK_IMPORTED_MODULE_7___default().fire("✅ Th\xe0nh c\xf4ng","Dữ liệu đ\xe3 được lưu.","success")}catch(e){console.error("❌ Lỗi khi lưu:",e),sweetalert2__WEBPACK_IMPORTED_MODULE_7___default().fire("❌ Lỗi","C\xf3 lỗi xảy ra khi lưu dữ liệu.","error")}};return loading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_component_WaitingLoad_WaitingLoad__WEBPACK_IMPORTED_MODULE_3__.Z,{}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_component_PageForm_PageForm__WEBPACK_IMPORTED_MODULE_2__.Z,{body:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"container",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h2",{children:"Edit list c\xe1c đường dẫn"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Button_react_bootstrap__WEBPACK_IMPORTED_MODULE_10__.Z,{onClick:saveAllData,className:"btn btn-success mb-1",children:"\uD83D\uDCBE Lưu dữ liệu"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_component_publicFc_AutoResizeTextarea__WEBPACK_IMPORTED_MODULE_8__.Z,{value:idBai,placeholder:"Nhập ID",onChange:e=>handleIdChange(e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_component_publicFc_AutoResizeTextarea__WEBPACK_IMPORTED_MODULE_8__.Z,{value:tieude,placeholder:"Nhập Ti\xeau Đề",onChange:e=>setTieude(e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_component_publicFc_AutoResizeTextarea__WEBPACK_IMPORTED_MODULE_8__.Z,{value:tieudeTiengTrung,placeholder:"Nhập Ti\xeau Đề Tiếng Trung",onChange:e=>setTieudeTiengTrung(e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_component_publicFc_AutoResizeTextarea__WEBPACK_IMPORTED_MODULE_8__.Z,{value:capdo,placeholder:"Nhập HSK ?",onChange:e=>setCapdo(e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_component_publicFc_AutoResizeTextarea__WEBPACK_IMPORTED_MODULE_8__.Z,{value:mp3Link,placeholder:"Nhập Link MP3",onChange:e=>setMp3Link(e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_component_publicFc_AutoResizeTextarea__WEBPACK_IMPORTED_MODULE_8__.Z,{value:img,placeholder:"Nhập Link Image",onChange:e=>setImg(e.target.value)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_component_vanban_VanBanHienThi__WEBPACK_IMPORTED_MODULE_9__.Z,{gianthelist:gianthelist,tiengtrunglist:tiengtrunglist,hanvietlist:hanvietlist,pinyinlist:pinyinlist,nghialist:nghialist,levellist:levellist,isShowPinyin:!0,isShowSpace:!0}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"row",children:["gianthe","tiengtrung","hanviet","pinyin","nghia","level"].map((field,idx)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"col-12 col-md-3",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_component_publicFc_AutoResizeTextarea__WEBPACK_IMPORTED_MODULE_8__.Z,{value:eval(field),placeholder:field,onChange:e=>handleAllDataChange(field,e.target.value)})},idx))}),gianthelist.map((item,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mb-3 border p-3 rounded position-relative",children:[["gianthe","tiengtrung","hanviet","pinyin","nghia","level"].map(field=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_component_publicFc_AutoResizeTextarea__WEBPACK_IMPORTED_MODULE_8__.Z,{value:eval(field+"list")[index],placeholder:field,onChange:e=>handleInputChange(index,field,e.target.value)},field)),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Button_react_bootstrap__WEBPACK_IMPORTED_MODULE_10__.Z,{variant:"danger",onClick:()=>handleDeleteItem(index),children:"\uD83D\uDDD1 Xo\xe1 mục n\xe0y"})]},index)),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mt-3 d-flex gap-3",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Button_react_bootstrap__WEBPACK_IMPORTED_MODULE_10__.Z,{onClick:handleAddItem,className:"btn btn-primary",children:"➕ Th\xeam mục"})})]})})}},34231:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var a=n(57437),i=n(2265);function l(e){let{value:t,onChange:n,className:l="",placeholder:s="",onKeyDown:r}=e,c=(0,i.useRef)(null),u=()=>{let e=c.current;e&&(e.style.height="auto",e.style.height=e.scrollHeight+"px")};return(0,i.useEffect)(()=>{u()},[t]),(0,i.useEffect)(()=>{u()},[]),(0,a.jsx)("textarea",{ref:c,className:"form-control ".concat(l),value:t,onChange:n,placeholder:s,rows:1,style:{overflow:"hidden",resize:"none"},onKeyDown:r})}},39731:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(57437);n(2265);var i=n(24539),l=n(59233);function s(e){let{gianthelist:t=[],tiengtrunglist:n=[],hanvietlist:s=[],pinyinlist:r=[],nghialist:c=[],levellist:u=[],isShowPinyin:o=!1,isShowSpace:h=!1}=e;return(0,a.jsx)("div",{className:"container my-3",children:(0,a.jsx)("div",{className:"p-3 border rounded bg-light",children:t.map((e,t)=>{let n=(0,a.jsxs)(i.Z,{id:"tooltip-".concat(t),className:"custom-tooltip row",children:[(0,a.jsxs)("div",{className:"fs-5",children:[r[t]||"N/A"," (",u[t]||"N/A",")"]}),(0,a.jsxs)("div",{className:"fs-5",children:[(0,a.jsx)("strong",{})," ",s[t]||"N/A"]}),(0,a.jsx)("div",{className:"fs-5",children:c[t]||"N/A"})]});return(0,a.jsx)(l.Z,{placement:"top",overlay:n,children:(0,a.jsxs)("span",{className:"".concat(h?"px-1":""," d-inline-block text-center"),style:{cursor:"pointer",lineHeight:"1.2"},children:[o&&(0,a.jsx)("span",{className:"small text-muted fs-6",style:{lineHeight:"1",textDecoration:"none",display:"block"},children:r[t]||""}),(0,a.jsx)("span",{className:"fs-3 hover-shadow",children:e})]})},t)})})})}n(15120)},15120:function(){}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[8905,4358,7481,9208,9461,5973,3539,8472,609,9233,6901,7468,2971,7023,1744],function(){return t(17602)}),_N_E=e.O()}]);