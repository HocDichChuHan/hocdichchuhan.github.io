(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5814],{17602:function(e,t,i){Promise.resolve().then(i.bind(i,72602))},72602:function(e,t,i){"use strict";i.d(t,{default:function(){return S}});var l=i(57437),n=i(2265),s=i(66802),a=i(12808),u=i(19768),r=i(23508),h=i(60516),o=i(65606),c=i(64379),p=i.n(c),d=i(34231),g=i(39731),v=i(63806),m=i(50658),x=i(32608),j=i(51146),f=i(85328);function S(e){let{id:t}=e,[i,c]=(0,n.useState)(!0),[S,Z]=(0,n.useState)(!1),[C,N]=(0,n.useState)(!1),[b,k]=(0,n.useState)(t),[y,w]=(0,n.useState)(""),[T,D]=(0,n.useState)(""),[E,I]=(0,n.useState)(""),[L,z]=(0,n.useState)(""),[P,R]=(0,n.useState)(""),[_,V]=(0,n.useState)(""),[B,H]=(0,n.useState)(""),[M,G]=(0,n.useState)(""),[K,O]=(0,n.useState)(""),[A,F]=(0,n.useState)(""),[J,U]=(0,n.useState)(""),[q,Q]=(0,n.useState)([]),[W,X]=(0,n.useState)([]),[Y,$]=(0,n.useState)([]),[ee,et]=(0,n.useState)([]),[ei,el]=(0,n.useState)([]),[en,es]=(0,n.useState)([]),[ea,eu]=(0,n.useState)([]),[er,eh]=(0,n.useState)([]),[eo,ec]=(0,n.useState)([]),[ep,ed]=(0,n.useState)([]),[eg,ev]=(0,n.useState)(""),[em,ex]=(0,n.useState)(),[ej,ef]=(0,n.useState)([]),[eS,eZ]=(0,n.useState)([]),[eC,eN]=(0,n.useState)([]),[eb,ek]=(0,n.useState)([]),[ey,ew]=(0,n.useState)([]),[eT,eD]=(0,n.useState)([]),[eE,eI]=(0,n.useState)(null),eL=(0,n.useRef)(null),ez=(0,n.useRef)(null),eP=(0,n.useRef)(null),eR=(0,n.useRef)(null),e_=(0,n.useRef)(null),eV=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=(0,r.GJ)(),i=(0,r.bg)();N(e),Z(i),e||(window.location.href="/listen/".concat(t)),(async()=>{c(!0);try{let e=(0,h.iH)(o.db,"/users/listen/".concat(b)),t=await (0,h.U2)(e);if(t.exists()){let e=t.val();if(!e)return;V(e.gianthe||""),H(e.tiengtrung||""),O(e.pinyin||""),F(e.nghia||""),U(e.level||""),G(e.hanviet||""),w((0,r.Pw)(e.mp3Link)),D((0,r.Pw)(e.img)),I(e.tieude||""),z(e.tieudeTiengTrung||""),R(e.capdo||""),Q(e.allData||""),ec(e.tumoi||[]),ed(e.nguphaps||[]),eM(e.mp3Timeline),ew(e.mp3timelinelist),ev(e.thamchieu||""),ex(e.cauhoi||[]),eD(e.nguphapimg||[]),$(e.gianthe?e.gianthe.split("\n"):[]),et(e.tiengtrung?e.tiengtrung.split("\n"):[]),es(e.pinyin?e.pinyin.split("\n"):[]),eu(e.nghia?e.nghia.split("\n"):[]),eh(e.level?e.level.split("\n"):[]),el(e.hanviet?e.hanviet.split("\n"):[])}}catch(e){console.error("Lỗi khi lấy dữ liệu:",e)}finally{c(!1)}})()},[]),(0,n.useEffect)(()=>{V(Y.join("\n")),H(ee.join("\n")),O(en.join("\n")),F(ea.join("\n")),U(er.join("\n")),G(ei.join("\n"))},[Y,ee,en,ea,er,ei]);let eB=e=>{k(e)},eH=e=>{Q(e);let t=e.split("\n"),i=[],l=[],n=[],s=[],a=[],u=[];t.forEach(e=>{if(!e.trim()||"*"===e.trim())return;let t=e.split("	");if(t.length<6)return;let[r,h,o,c,p,d]=t;i.push(r.trim()),l.push(h.trim()),n.push(o.trim()),s.push(c.trim()),a.push(p.trim()),u.push(d.trim())}),$(i),et(l),el(n),es(s),eu(a),eh(u)},eM=e=>{if(X(e),!e){ef([]),eZ([]),eN([]),ek([]),setmp3Timelinelist([]);return}let t=e.split("*"),i=[],l=[],n=[],s=[],a=[];t&&t.length>0&&t.forEach((e,t)=>{let u=e.trim().split("\n");if(u.length<4)return;let[r,h,o,c]=u;i.push(r.trim()),l.push(h.trim()),n.push(o.trim()),s.push(c.trim()),a.push(ey[t]||null)}),ef(i),eZ(l),eN(n),ek(s),ew(a)},eG=(e,t)=>{let i=ey?[...ey]:[];i[e]=t,ew(i)},eK=e=>{eI(e),eL.current?eG(e,eL.current.getCurrentTime()):p().fire("⚠️ Cảnh b\xe1o","Kh\xf4ng thể lấy thời gian, vui l\xf2ng kiểm tra MP3.","warning")},eO=async()=>{try{let e=(0,h.iH)(o.db,"/users/listen/".concat(b));console.log(ey),await (0,h.t8)(e,{gianthe:_,tiengtrung:B,pinyin:K,nghia:A,level:J,hanviet:M,mp3Link:y,img:T,tieude:E,capdo:P,tieudeTiengTrung:L,allData:q,tumoi:eo,nguphaps:ep,mp3Timeline:W,mp3timelinelist:ey,thamchieu:eg,cauhoi:em,nguphapimg:eT}),p().fire("✅ Th\xe0nh c\xf4ng","Dữ liệu đ\xe3 được lưu.","success")}catch(e){console.error("❌ Lỗi khi lưu:",e),p().fire("❌ Lỗi","C\xf3 lỗi xảy ra khi lưu dữ liệu.","error")}};return i?(0,l.jsx)(u.Z,{}):(0,l.jsx)(s.Z,{body:(0,l.jsxs)("div",{className:"container",children:[(0,l.jsxs)("div",{style:{position:"fixed",top:"50%",right:"10px",display:"flex",flexDirection:"column",gap:"8px",zIndex:9999},children:[(0,l.jsx)(a.Z,{size:"sm",onClick:()=>{var e;return null===(e=eV.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"SaveData"}),(0,l.jsx)(a.Z,{size:"sm",onClick:()=>{var e;return null===(e=ez.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"\uD83C\uDFB5 Timeline"}),(0,l.jsx)(a.Z,{size:"sm",onClick:()=>{var e;return null===(e=eP.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"\uD83D\uDCDA Từ mới"}),(0,l.jsx)(a.Z,{size:"sm",onClick:()=>{var e;return null===(e=eR.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"✏ Ngữ ph\xe1p"}),(0,l.jsx)(a.Z,{size:"sm",onClick:()=>{var e;return null===(e=e_.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"❓ C\xe2u hỏi"})]}),(0,l.jsx)("h2",{children:"Edit list c\xe1c đường dẫn"}),(0,l.jsx)(a.Z,{ref:eV,onClick:eO,className:"btn btn-success mb-1",children:"\uD83D\uDCBE Lưu dữ liệu"}),(0,l.jsx)(d.Z,{value:b,placeholder:"Nhập ID",onChange:e=>eB(e.target.value)}),(0,l.jsx)(d.Z,{value:E,placeholder:"Nhập Ti\xeau Đề",onChange:e=>I(e.target.value)}),(0,l.jsx)(d.Z,{value:L,placeholder:"Nhập Ti\xeau Đề Tiếng Trung",onChange:e=>z(e.target.value)}),(0,l.jsx)(d.Z,{value:P,placeholder:"Nhập HSK ?",onChange:e=>R(e.target.value)}),(0,l.jsx)(d.Z,{value:y,placeholder:"Nhập Link MP3",onChange:e=>w(e.target.value)}),(0,l.jsx)(d.Z,{value:T,placeholder:"Nhập Link Image",onChange:e=>D(e.target.value)}),(0,l.jsx)(d.Z,{value:eg,placeholder:"Nhập đường dẫn tham chiếu",onChange:e=>ev(e.target.value)}),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-12 col-md-6",children:(0,l.jsx)(d.Z,{value:q,placeholder:"Nhập To\xe0n Bộ Data",onChange:e=>eH(e.target.value)})}),(0,l.jsxs)("div",{className:"col-12 col-md-6",children:[(0,l.jsx)(g.Z,{gianthelist:Y,tiengtrunglist:ee,hanvietlist:ei,pinyinlist:en,nghialist:ea,levellist:er,isShowPinyin:!0,isShowSpace:!0}),(0,l.jsx)(x.Z,{ref:eL,mp3:y,tieude:E}),(0,l.jsx)(d.Z,{value:W,placeholder:"Nhập Mp3 Time Line",onChange:e=>eM(e.target.value)})]})]}),(0,l.jsx)("div",{ref:ez,children:(console.log(ej),(0,l.jsx)("div",{children:ej.map((e,t)=>(0,l.jsxs)("div",{children:[(0,l.jsx)(d.Z,{value:ej[t],placeholder:"mp3gianthelist"}),(0,l.jsx)(d.Z,{value:eS[t],placeholder:"mp3tiengtrunglist"}),(0,l.jsx)(d.Z,{value:eC[t],placeholder:"mp3pinyinlist"}),(0,l.jsx)(d.Z,{value:eb[t],placeholder:"mp3nghialist"}),(0,l.jsx)(d.Z,{value:ey&&ey[t]||null,placeholder:"mp3timelinelist",onChange:e=>{let i=[...ey];i[t]=e.target.value,ew(i)}}),(0,l.jsx)(a.Z,{onClick:()=>eK(t),className:"btn btn-primary",children:"Select to Get Time"}),(0,l.jsx)("hr",{})]},t))}))}),(0,l.jsx)("div",{ref:eP,children:(0,l.jsx)(v.Z,{tumoilist:eo,setTumoilist:ec})}),(0,l.jsxs)("div",{ref:eR,children:[(0,l.jsx)(m.Z,{nguphaps:ep,setNguphap:ed}),(0,l.jsx)(f.Z,{nguphap:eT,setnguphap:eD})]}),(0,l.jsx)("div",{ref:e_,children:(0,l.jsx)(j.Z,{cauhoi:em,setCauhoi:ex})})]})})}}},function(e){e.O(0,[2866,4443,4358,7481,9208,9461,8765,4974,3539,8472,609,3830,9233,6901,6802,658,9238,2971,7023,1744],function(){return e(e.s=17602)}),_N_E=e.O()}]);