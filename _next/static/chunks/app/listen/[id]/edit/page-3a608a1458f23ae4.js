(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5814],{17602:function(e,t,n){Promise.resolve().then(n.bind(n,37294))},37294:function(e,t,n){"use strict";n.d(t,{default:function(){return j}});var s=n(57437),i=n(2265),a=n(98708),l=n(12808),r=n(19768),c=n(23508),u=n(60516),o=n(65606),h=n(64379),d=n.n(h),p=n(34231),g=n(39731),m=n(62474),x=e=>{let{tumoilist:t,setTumoilist:n}=e,i=async e=>{let s=await (0,m.Z)("CN"),i=[...t];i[e].gianthe=s,n(i)},a=async(e,s,i)=>{let a=[...t];a[e][s]=i,n(a)},r=async e=>{let s=await (0,m.Z)("VN"),i=[...t];i[e].nghia=s,n(i)},u=e=>{n(t.filter((t,n)=>n!==e))},o=()=>{let e=[...t];e.push({tiengtrung:"",pinyin:"",nghia:""}),n(e)},h=async(e,s)=>{let i="",a="",l="",r=!1;try{let t=await (0,c.yI)(e);i=t.result[0].cn_vi,a=t.result[0].pinyin,l=t.result[0].content[0].means[0].mean,r=!0}catch(e){console.log("dataHanviet: null")}let u=await (0,c.PA)(e);if(!r){var o;let e=await (0,c.V2)(u);if(console.log(e.sentences),!e||!e.sentences||0===e.sentences.length)return;a=(null===(o=e.sentences[e.sentences.length-1])||void 0===o?void 0:o.src_translit)||"",l=e.sentences.filter(e=>e.trans).map(e=>e.trans.trim()).join(" ")}let h=[...t];h[s].tiengtrung=u,h[s].pinyin=a,h[s].hanviet=i,h[s].nghia=l,n(h)};return(0,s.jsxs)("div",{className:"baihocgiaotiep-tumoi",children:[(0,s.jsx)("h2",{children:"Từ mới"}),(0,s.jsx)("ul",{children:t&&t.map((e,t)=>(0,s.jsxs)("li",{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(l.Z,{variant:"success",onClick:()=>i(t),children:"Get Voice"}),(0,s.jsx)("input",{type:"text",className:"tiengtrungText fs-3",value:e.gianthe?e.gianthe:"",placeholder:"中文简体",onChange:e=>a(t,"gianthe",e.target.value)}),(0,s.jsx)("input",{type:"text",className:"tiengtrungText fs-3",value:e.tiengtrung,placeholder:"中文",onChange:e=>a(t,"tiengtrung",e.target.value)}),(0,s.jsx)("input",{type:"text",className:"pinyinText",placeholder:"pinyin",value:e.pinyin,onChange:e=>a(t,"pinyin",e.target.value)}),(0,s.jsx)("input",{type:"text",className:"nghiaText",placeholder:"H\xe1n Việt",value:e.hanviet,onChange:e=>a(t,"hanviet",e.target.value)}),(0,s.jsx)("input",{type:"text",className:"nghiaText",placeholder:"nghĩa",value:e.nghia,onChange:e=>a(t,"nghia",e.target.value)}),(0,s.jsx)(l.Z,{variant:"success",onClick:()=>r(t),children:"Get Voice Dịch"}),(0,s.jsx)(l.Z,{variant:"warning",onClick:()=>h(e.gianthe,t),children:"GetPinyin"})]}),(0,s.jsx)("div",{children:(0,s.jsx)(l.Z,{variant:"danger",onClick:()=>u(t),children:"X\xf3a từ mới n\xe0y"})})]},t))}),(0,s.jsx)(l.Z,{variant:"info",onClick:()=>o(),children:"Th\xeam Từ Mới"})]})},v=n(50658),f=n(32608);function j(e){let{id:t}=e,[n,h]=(0,i.useState)(!0),[m,j]=(0,i.useState)(!1),[y,N]=(0,i.useState)(!1),[S,w]=(0,i.useState)(t),[C,b]=(0,i.useState)(""),[Z,k]=(0,i.useState)(""),[T,D]=(0,i.useState)(""),[E,H]=(0,i.useState)(""),[A,L]=(0,i.useState)(""),[M,R]=(0,i.useState)(""),[P,V]=(0,i.useState)(""),[_,G]=(0,i.useState)(""),[K,z]=(0,i.useState)(""),[F,I]=(0,i.useState)(""),[O,U]=(0,i.useState)(""),[B,J]=(0,i.useState)([]),[W,X]=(0,i.useState)([]),[q,Q]=(0,i.useState)([]),[Y,$]=(0,i.useState)([]),[ee,et]=(0,i.useState)([]),[en,es]=(0,i.useState)([]),[ei,ea]=(0,i.useState)([]),[el,er]=(0,i.useState)([]),[ec,eu]=(0,i.useState)([]),[eo,eh]=(0,i.useState)([]),[ed,ep]=(0,i.useState)([]),[eg,em]=(0,i.useState)([]),[ex,ev]=(0,i.useState)([]),[ef,ej]=(0,i.useState)([]),[ey,eN]=(0,i.useState)([]),[eS,ew]=(0,i.useState)(null),eC=(0,i.useRef)(null);(0,i.useEffect)(()=>{let e=(0,c.GJ)(),t=(0,c.bg)();N(e),j(t),(async()=>{h(!0);try{let e=(0,u.iH)(o.db,"/users/listen/".concat(S)),t=await (0,u.U2)(e);if(t.exists()){let e=t.val();if(!e)return;R(e.gianthe||""),V(e.tiengtrung||""),z(e.pinyin||""),I(e.nghia||""),U(e.level||""),G(e.hanviet||""),b(e.mp3Link||""),k(e.img||""),D(e.tieude||""),H(e.tieudeTiengTrung||""),L(e.capdo||""),J(e.allData||""),eu(e.tumoi||[]),eh(e.nguphaps||[]),ek(e.mp3Timeline),eN(e.mp3timelinelist),Q(e.gianthe?e.gianthe.split("\n"):[]),$(e.tiengtrung?e.tiengtrung.split("\n"):[]),es(e.pinyin?e.pinyin.split("\n"):[]),ea(e.nghia?e.nghia.split("\n"):[]),er(e.level?e.level.split("\n"):[]),et(e.hanviet?e.hanviet.split("\n"):[])}}catch(e){console.error("Lỗi khi lấy dữ liệu:",e)}finally{h(!1)}})()},[]),(0,i.useEffect)(()=>{R(q.join("\n")),V(Y.join("\n")),z(en.join("\n")),I(ei.join("\n")),U(el.join("\n")),G(ee.join("\n"))},[q,Y,en,ei,el,ee]);let eb=e=>{w(e)},eZ=e=>{J(e);let t=e.split("\n"),n=[],s=[],i=[],a=[],l=[],r=[];t.forEach(e=>{if(!e.trim()||"*"===e.trim())return;let t=e.split("	");if(t.length<6)return;let[c,u,o,h,d,p]=t;n.push(c.trim()),s.push(u.trim()),i.push(o.trim()),a.push(h.trim()),l.push(d.trim()),r.push(p.trim())}),Q(n),$(s),et(i),es(a),ea(l),er(r)},ek=e=>{if(X(e),!e)return;let t=e.split("*"),n=[],s=[],i=[],a=[];t&&t.length>0&&(t.map((e,t)=>{let[l,r,c,u]=e.trim().split("\n");n.push(l.trim()),s.push(r.trim()),i.push(c.trim()),a.push(u.trim())}),ep(n),em(s),ev(i),ej(a))},eT=(e,t)=>{let n=ey?[...ey]:[];n[e]=t,eN(n)},eD=e=>{ew(e),eC.current?eT(e,eC.current.getCurrentTime()):d().fire("⚠️ Cảnh b\xe1o","Kh\xf4ng thể lấy thời gian, vui l\xf2ng kiểm tra MP3.","warning")},eE=async()=>{try{let e=(0,u.iH)(o.db,"/users/listen/".concat(S));await (0,u.t8)(e,{gianthe:M,tiengtrung:P,pinyin:K,nghia:F,level:O,hanviet:_,mp3Link:C,img:Z,tieude:T,capdo:A,tieudeTiengTrung:E,allData:B,tumoi:ec,nguphaps:eo,mp3Timeline:W,mp3timelinelist:ey}),d().fire("✅ Th\xe0nh c\xf4ng","Dữ liệu đ\xe3 được lưu.","success")}catch(e){console.error("❌ Lỗi khi lưu:",e),d().fire("❌ Lỗi","C\xf3 lỗi xảy ra khi lưu dữ liệu.","error")}};return n?(0,s.jsx)(r.Z,{}):(0,s.jsx)(a.Z,{body:(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("h2",{children:"Edit list c\xe1c đường dẫn"}),(0,s.jsx)(l.Z,{onClick:eE,className:"btn btn-success mb-1",children:"\uD83D\uDCBE Lưu dữ liệu"}),(0,s.jsx)(p.Z,{value:S,placeholder:"Nhập ID",onChange:e=>eb(e.target.value)}),(0,s.jsx)(p.Z,{value:T,placeholder:"Nhập Ti\xeau Đề",onChange:e=>D(e.target.value)}),(0,s.jsx)(p.Z,{value:E,placeholder:"Nhập Ti\xeau Đề Tiếng Trung",onChange:e=>H(e.target.value)}),(0,s.jsx)(p.Z,{value:A,placeholder:"Nhập HSK ?",onChange:e=>L(e.target.value)}),(0,s.jsx)(p.Z,{value:C,placeholder:"Nhập Link MP3",onChange:e=>b(e.target.value)}),(0,s.jsx)(p.Z,{value:Z,placeholder:"Nhập Link Image",onChange:e=>k(e.target.value)}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-12 col-md-6",children:(0,s.jsx)(p.Z,{value:B,placeholder:"Nhập To\xe0n Bộ Data",onChange:e=>eZ(e.target.value)})}),(0,s.jsxs)("div",{className:"col-12 col-md-6",children:[(0,s.jsx)(g.Z,{gianthelist:q,tiengtrunglist:Y,hanvietlist:ee,pinyinlist:en,nghialist:ei,levellist:el,isShowPinyin:!0,isShowSpace:!0}),(0,s.jsx)(f.Z,{ref:eC,mp3:C,tieude:T}),(0,s.jsx)(p.Z,{value:W,placeholder:"Nhập Mp3 Time Line",onChange:e=>ek(e.target.value)})]})]}),(console.log(ed),(0,s.jsx)("div",{children:ed.map((e,t)=>(0,s.jsxs)("div",{children:[(0,s.jsx)(p.Z,{value:ed[t],placeholder:"mp3gianthelist"}),(0,s.jsx)(p.Z,{value:eg[t],placeholder:"mp3tiengtrunglist"}),(0,s.jsx)(p.Z,{value:ex[t],placeholder:"mp3pinyinlist"}),(0,s.jsx)(p.Z,{value:ef[t],placeholder:"mp3nghialist"}),(0,s.jsx)(p.Z,{value:ey&&ey[t]||null,placeholder:"mp3timelinelist",onChange:e=>{let n=[...ey];n[t]=e.target.value,eN(n)}}),(0,s.jsx)(l.Z,{onClick:()=>eD(t),className:"btn btn-primary",children:"Select to Get Time"}),(0,s.jsx)("hr",{})]},t))})),(0,s.jsx)(x,{tumoilist:ec,setTumoilist:eu}),(0,s.jsx)(v.Z,{nguphaps:eo,setNguphap:eh})]})})}},89745:function(e,t,n){"use strict";n.d(t,{M:function(){return l}});let s=null,i=-1,a=!1,l=async e=>{console.log(e);for(let t=0;t<e.length;t++)await r(e[t],t),await c(1e3)},r=(e,t)=>new Promise(t=>{speechSynthesis.speaking&&speechSynthesis.cancel();let n=new SpeechSynthesisUtterance(e);n.lang="zh-CN",n.rate=.7,n.onend=()=>{t()},speechSynthesis.speak(n)}),c=e=>new Promise(t=>setTimeout(t,e));t.Z=(e,t)=>{if(speechSynthesis.speaking&&i!==t&&speechSynthesis.cancel(),i===t){speechSynthesis.speaking&&a?(speechSynthesis.pause(),console.log("pause"),a=!1):(speechSynthesis.resume(),console.log("resume"),a=!0);return}a=!0,(s=new SpeechSynthesisUtterance(e)).lang="zh-CN",s.rate=.7,speechSynthesis.speak(s),i=t,s.onend=()=>{i=-1}}},32608:function(e,t,n){"use strict";var s=n(57437),i=n(2265),a=n(12808);n(9339),t.Z=(0,i.forwardRef)((e,t)=>{let{mp3:n,tieude:l,mp3gianthelist:r,mp3tiengtrunglist:c,mp3pinyinlist:u,mp3nghialist:o,mp3timelinelist:h,isShowPinyin:d,isGianthe:p}=e,g=(0,i.useRef)(null),m=(0,i.useRef)(null),[x,v]=(0,i.useState)(!1),[f,j]=(0,i.useState)(0),[y,N]=(0,i.useState)(0),[S,w]=(0,i.useState)(1),[C,b]=(0,i.useState)(-1);function Z(e){if(!e)return 0;let[t,n]=e.split(":").map(Number);return 60*t+n}let k=e=>e?"".concat(Math.floor(e/60).toString().padStart(2,"0"),":").concat(Math.floor(e%60).toString().padStart(2,"0")):"00:00",T=()=>g.current?k(g.current.currentTime):"00:00";return(0,i.useImperativeHandle)(t,()=>({getCurrentTime:T})),(0,i.useEffect)(()=>(m.current=new Audio("https://hocdichchuhan.github.io/mp3/bg/".concat(Math.floor(9*Math.random())+1,".mp3")),m.current.volume=.15,()=>{m.current&&(m.current.pause(),m.current.currentTime=0,m.current=null)}),[n]),(0,s.jsxs)("div",{children:[n&&(0,s.jsxs)("div",{className:"d-flex align-items-center bg-dark text-white p-3 m-2 rounded",children:[(0,s.jsx)(a.Z,{variant:x?"warning":"success",onClick:()=>{g.current&&m.current&&(x?(g.current.pause(),setTimeout(()=>{m.current.pause()},5e3)):(m.current.play(),setTimeout(()=>{g.current.play()},5e3)),v(!x))},className:"me-2",children:x?"⏸":"▶"}),(0,s.jsx)("input",{type:"range",min:"0",max:y||100,value:f,onChange:e=>{if(g.current&&m.current){let t=parseFloat(e.target.value);g.current.currentTime=t,m.current.currentTime=t,j(t)}},className:"form-range w-50 me-2"}),(0,s.jsxs)("span",{className:"me-2",children:[k(f)," / ",k(y)]}),(0,s.jsxs)("select",{value:S.toFixed(1),onChange:e=>{let t=parseFloat(e.target.value);w(t),g.current&&(g.current.playbackRate=t)},className:"form-select form-select-sm me-2",style:{width:"auto"},children:[(0,s.jsx)("option",{value:"0.5",children:"0.5x"}),(0,s.jsx)("option",{value:"0.75",children:"0.75x"}),(0,s.jsx)("option",{value:"1.0",children:"1.0x"}),(0,s.jsx)("option",{value:"1.25",children:"1.25x"}),(0,s.jsx)("option",{value:"1.5",children:"1.5x"}),(0,s.jsx)("option",{value:"2.0",children:"2.0x"})]}),(0,s.jsx)(a.Z,{variant:"outline-primary",href:n,download:"".concat(l||"audio",".mp3"),className:"ms-5",children:(0,s.jsx)("i",{className:"fa-solid fa-circle-down"})}),(0,s.jsx)("audio",{ref:g,src:n,onTimeUpdate:()=>{if(g.current){let e=g.current.currentTime;j(e),console.log(h);let t=-1;for(let n=0;n<h.length;n++){let s=Z(h[n]),i=n<h.length-1?Z(h[n+1]):1/0;if(e>=s&&e<i){t=n;break}}b(t)}},onLoadedMetadata:()=>{g.current&&N(g.current.duration)},onEnded:()=>{v(!1),m.current&&setTimeout(()=>{m.current.pause(),m.current.currentTime=0},5e3)}})]}),C>=0&&r[C]?(0,s.jsxs)("div",{className:"subtitle-container mt-3 p-2 rounded",children:[(0,s.jsx)("h3",{className:"tiengtrungText subtitletiengtrung",style:{fontWeight:"bold",color:"#fff"},children:p?r[C]:c[C]}),d&&(0,s.jsx)("div",{className:"subtitlepinyin",style:{color:"rgb(255 183 183)"},children:u[C]}),(0,s.jsx)("div",{className:"subtitlenghia",style:{color:"rgb(245 255 170)"},children:o[C]})]}):null]})})},62474:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var s=n(64379),i=n.n(s);function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"VN";return new Promise((t,n)=>{if(!("webkitSpeechRecognition"in window)){n("Tr\xecnh duyệt kh\xf4ng hỗ trợ Speech Recognition");return}let s=new window.webkitSpeechRecognition;s.lang=({VN:"vi-VN",CN:"zh-CN"})[e]||"vi-VN",s.continuous=!1,s.interimResults=!1,i().fire({title:"\uD83C\uDFA4 Đang lắng nghe (".concat(e,")"),text:"H\xe3y n\xf3i v\xe0o micro...",allowOutsideClick:!1,allowEscapeKey:!1,position:"top-end",didOpen:()=>{i().showLoading(),s.start()}}),s.onresult=e=>{let n=e.results[0][0].transcript;i().close(),t(n)},s.onerror=e=>{i().close(),n(e.error||"Lỗi kh\xf4ng x\xe1c định")},s.onend=()=>{s.resultReceived||(i().close(),n("Kh\xf4ng nghe thấy \xe2m thanh"))}})}},34231:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var s=n(57437),i=n(2265);function a(e){let{value:t,onChange:n,className:a="",placeholder:l="",onKeyDown:r}=e,c=(0,i.useRef)(null),u=()=>{let e=c.current;e&&(e.style.height="auto",e.style.height=e.scrollHeight+"px")};return(0,i.useEffect)(()=>{u()},[t]),(0,i.useEffect)(()=>{u()},[]),(0,s.jsx)("textarea",{ref:c,className:"form-control ".concat(a),value:t,onChange:n,placeholder:l,rows:1,style:{overflow:"hidden",resize:"none"},onKeyDown:r})}},39731:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var s=n(57437);n(2265);var i=n(24539),a=n(59233);n(15120),n(23508);var l=n(89745);function r(e){let{gianthelist:t=[],tiengtrunglist:n=[],hanvietlist:r=[],pinyinlist:c=[],nghialist:u=[],levellist:o=[],isShowPinyin:h=!1,isShowSpace:d=!1,isGianthe:p=!0,tumoi:g=[]}=e,m=new Set(g.flatMap(e=>[e.gianthe,e.tiengtrung]));return(0,s.jsx)("div",{style:{padding:"0"},children:(0,s.jsxs)("div",{className:"p-3 border rounded vanbanhienthiContainer",children:[p&&t.map((e,t)=>{let n=(0,s.jsxs)(i.Z,{id:"tooltip-".concat(t),className:"custom-tooltip row",children:[(0,s.jsxs)("div",{className:"fs-5",children:["Pinyin: ",(0,s.jsxs)("strong",{className:"text-white",children:[c[t]||"N/A"," ",(0,s.jsxs)("span",{className:"text-success",children:["(",o[t]||"N/A",")"]})]})]}),(0,s.jsxs)("div",{className:"fs-5",children:["H\xe1n Việt: ",(0,s.jsx)("strong",{className:"text-primary",children:r[t]||"N/A"})]}),(0,s.jsxs)("div",{className:"fs-5",children:["Nghĩa: ",(0,s.jsxs)("strong",{className:"text-warning",children:[u[t]||"N/A"," "]})]})]});return"*"===e?(0,s.jsx)("br",{},t):(0,s.jsx)(a.Z,{placement:"top",overlay:n,children:(0,s.jsxs)("span",{onClick:()=>(0,l.Z)(e,t+1),className:"".concat(d?"px-1":""," d-inline-block text-center"),style:{cursor:"pointer",lineHeight:"1.2"},children:[h&&(0,s.jsx)("span",{className:"small fs-6",style:{lineHeight:"1",textDecoration:"none",display:"block",color:"rgb(145 145 145)"},children:c[t]||""}),(0,s.jsx)("span",{className:"fs-3 hover-shadow tiengtrungText",style:{color:m.has(e)?"rgb(255 0 0)":void 0},children:e})]})},t)}),!p&&n.map((e,t)=>{let n=(0,s.jsxs)(i.Z,{id:"tooltip-".concat(t),className:"custom-tooltip row",children:[(0,s.jsxs)("div",{className:"fs-5",children:[c[t]||"N/A"," (",o[t]||"N/A",")"]}),(0,s.jsxs)("div",{className:"fs-5",children:[(0,s.jsx)("strong",{})," ",r[t]||"N/A"]}),(0,s.jsx)("div",{className:"fs-5",children:u[t]||"N/A"})]});return"*"===e?(0,s.jsx)("br",{},t):(0,s.jsx)(a.Z,{placement:"top",overlay:n,children:(0,s.jsxs)("span",{onClick:()=>(0,l.Z)(e,t+1),className:"".concat(d?"px-1":""," d-inline-block text-center"),style:{cursor:"pointer",lineHeight:"1.2"},children:[h&&(0,s.jsx)("span",{className:"small fs-6",style:{lineHeight:"1",textDecoration:"none",display:"block",color:"rgb(145 145 145)"},children:c[t]||""}),(0,s.jsx)("span",{className:"fs-3 hover-shadow tiengtrungText",style:{color:m.has(e)?"#f98866":void 0},children:e})]})},t)})]})})}},9339:function(){},15120:function(){}},function(e){e.O(0,[4443,4358,7481,9208,9461,5973,3539,8472,609,9233,6901,7468,658,2971,7023,1744],function(){return e(e.s=17602)}),_N_E=e.O()}]);