(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5897],{53711:function(e,t,s){Promise.resolve().then(s.bind(s,6670))},6670:function(e,t,s){"use strict";s.d(t,{default:function(){return x}});var a=s(57437),n=s(2265),i=s(98708),l=s(12808),r=s(19768),c=s(23508),o=s(60516),d=s(65606),u=s(39731),h=s(66648),m=s(87138);function x(e){let{id:t}=e,[s,x]=(0,n.useState)(!0),[p,j]=(0,n.useState)(!1),[f,v]=(0,n.useState)(!1),[g,N]=(0,n.useState)(t),[S,y]=(0,n.useState)(),[w,b]=(0,n.useState)(),[k,Z]=(0,n.useState)(),[C,_]=(0,n.useState)(),[E,O]=(0,n.useState)(),[T,A]=(0,n.useState)([]),[F,H]=(0,n.useState)([]),[L,M]=(0,n.useState)([]),[P,R]=(0,n.useState)([]),[U,D]=(0,n.useState)([]),[G,J]=(0,n.useState)([]),[q,z]=(0,n.useState)(!0),[B,I]=(0,n.useState)(!0),K=(0,n.useRef)(null),[Q,V]=(0,n.useState)(!1),[W,X]=(0,n.useState)(0),[Y,$]=(0,n.useState)(0),[ee,et]=(0,n.useState)(1),es=e=>e?"".concat(Math.floor(e/60).toString().padStart(2,"0"),":").concat(Math.floor(e%60).toString().padStart(2,"0")):"00:00";return((0,n.useEffect)(()=>{let e=(0,c.GJ)(),t=(0,c.bg)();v(e),j(t),(async()=>{x(!0);try{let e=(0,o.iH)(d.db,"/users/listen/".concat(g)),t=await (0,o.U2)(e);if(t.exists()){let e=t.val();if(!e)return;y(e.mp3Link),b(e.img),Z(e.tieude),_(e.tieudeTiengTrung),O(e.capdo),A(e.gianthe.split("\n")),H(e.tiengtrung.split("\n")),R(e.pinyin.split("\n")),D(e.nghia.split("\n")),J(e.level.split("\n")),M(e.hanviet.split("\n"))}}catch(e){console.error("Lỗi khi lấy dữ liệu:",e)}finally{x(!1)}})()},[g]),s)?(0,a.jsx)(r.Z,{}):(0,a.jsx)(i.Z,{body:(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("div",{className:"listen-header-container",style:{backgroundColor:"#00586b"},children:(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:"row mb-4",children:[(0,a.jsx)("div",{className:"col-12 col-md-8 ",children:(0,a.jsxs)("div",{className:"p-3 m-3",children:[(0,a.jsx)("h1",{className:"text-white",children:k}),(0,a.jsx)("h3",{className:"text-white",children:C}),(0,a.jsxs)("div",{className:"text-white",children:["(",E,")"]}),(0,a.jsxs)("div",{className:"btn-group mt-2",children:[(0,a.jsxs)(l.Z,{variant:q?"danger":"secondary",onClick:()=>z(!q),children:["Pinyin ",q?"On":"Off"]}),(0,a.jsxs)(l.Z,{variant:B?"primary":"secondary",onClick:()=>I(!B),children:["Space ",B?"On":"Off"]}),f&&(0,a.jsx)(m.default,{href:"/listen/".concat(t,"/edit"),target:"_self",children:(0,a.jsx)(l.Z,{variant:"warning",children:"Edit"})})]})]})}),(0,a.jsx)("div",{className:"col-12 col-md-4 image-container",children:(0,a.jsx)(h.default,{src:w||"/placeholder-image.jpg",alt:"H\xecnh ảnh",width:400,height:400,className:"image-style rounded",style:{objectFit:"cover"}})})]})})}),(0,a.jsx)("div",{className:"container",children:(0,a.jsx)("div",{className:"row",children:(0,a.jsxs)("div",{className:"col-12 col-md-8",style:{marginTop:"-160px"},children:[(0,a.jsx)(u.Z,{gianthelist:T,tiengtrunglist:F,hanvietlist:L,pinyinlist:P,nghialist:U,levellist:G,isShowPinyin:q,isShowSpace:B}),S&&(0,a.jsxs)("div",{className:"d-flex align-items-center bg-dark text-white p-3 m-2 rounded",children:[(0,a.jsx)(l.Z,{variant:Q?"warning":"success",onClick:()=>{K.current&&(Q?K.current.pause():K.current.play(),V(!Q))},className:"me-2",children:Q?"⏸":"▶"}),(0,a.jsx)("input",{type:"range",min:"0",max:Y||100,value:W,onChange:e=>{if(K.current){let t=parseFloat(e.target.value);K.current.currentTime=t,X(t)}},className:"form-range w-50 me-2"}),(0,a.jsxs)("span",{className:"me-2",children:[es(W)," / ",es(Y)]}),(0,a.jsxs)("select",{value:ee.toFixed(1),onChange:e=>{let t=parseFloat(e.target.value);console.log("New playback rate:",t),et(t),K.current&&(K.current.playbackRate=t)},className:"form-select form-select-sm me-2",style:{width:"auto"},children:[(0,a.jsx)("option",{value:"0.5",children:"0.5x"}),(0,a.jsx)("option",{value:"1.0",children:"1.0x"}),(0,a.jsx)("option",{value:"1.5",children:"1.5x"}),(0,a.jsx)("option",{value:"2.0",children:"2.0x"})]}),(0,a.jsx)(l.Z,{variant:"outline-primary",href:S,download:"".concat(k||"audio",".mp3"),className:"ms-5",children:(0,a.jsx)("i",{className:"fa-solid fa-circle-down"})}),(0,a.jsx)("audio",{ref:K,src:S,onTimeUpdate:()=>{K.current&&X(K.current.currentTime)},onLoadedMetadata:()=>{K.current&&$(K.current.duration)},onEnded:()=>V(!1)})]})]})})})]})})}},39731:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(57437);s(2265);var n=s(24539),i=s(59233);function l(e){let{gianthelist:t=[],tiengtrunglist:s=[],hanvietlist:l=[],pinyinlist:r=[],nghialist:c=[],levellist:o=[],isShowPinyin:d=!1,isShowSpace:u=!1}=e;return(0,a.jsx)("div",{className:"container my-3",children:(0,a.jsx)("div",{className:"p-3 border rounded bg-light",children:t.map((e,t)=>{let s=(0,a.jsxs)(n.Z,{id:"tooltip-".concat(t),className:"custom-tooltip row",children:[(0,a.jsxs)("div",{className:"fs-5",children:[r[t]||"N/A"," (",o[t]||"N/A",")"]}),(0,a.jsxs)("div",{className:"fs-5",children:[(0,a.jsx)("strong",{})," ",l[t]||"N/A"]}),(0,a.jsx)("div",{className:"fs-5",children:c[t]||"N/A"})]});return(0,a.jsx)(i.Z,{placement:"top",overlay:s,children:(0,a.jsxs)("span",{className:"".concat(u?"px-1":""," d-inline-block text-center"),style:{cursor:"pointer",lineHeight:"1.2"},children:[d&&(0,a.jsx)("span",{className:"small fs-6",style:{lineHeight:"1",textDecoration:"none",display:"block",color:"rgb(223 52 52)"},children:r[t]||""}),(0,a.jsx)("span",{className:"fs-3 hover-shadow",children:e})]})},t)})})})}s(15120)},15120:function(){}},function(e){e.O(0,[8905,4358,7481,9208,9461,5973,3539,8472,609,9233,6901,7468,2971,7023,1744],function(){return e(e.s=53711)}),_N_E=e.O()}]);