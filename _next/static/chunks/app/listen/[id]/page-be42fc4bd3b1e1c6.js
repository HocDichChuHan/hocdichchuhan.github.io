(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5897],{53711:function(e,t,s){Promise.resolve().then(s.bind(s,20700))},20700:function(e,t,s){"use strict";s.d(t,{default:function(){return N}});var n=s(57437),i=s(2265),a=s(98708),r=s(12808),l=s(19768),c=s(23508),o=s(60516),h=s(65606),u=s(39731),d=s(66648),m=s(87138);s(64379);var p=s(89745),g=s(77761),x=s(38472),f=e=>{let{tumoi:t,isGianthe:s}=e,[a,l]=(0,i.useState)(!1),[c,o]=(0,i.useState)([]),h=(0,i.useRef)([]),[u,d]=(0,i.useState)(null),[m,f]=(0,i.useState)(!1),[j,v]=(0,i.useState)(),[N,y]=(0,i.useState)(),S=(0,i.useRef)(null),w=async e=>{try{o([]),d(e),f(!0),await k(e);let t="https://hocdichchuhan.github.io/huongdanviet/".concat(e.charCodeAt(0),".svg"),s=await b(t),n=await x.Z.get("https://api.hanzii.net/api/search/vi/".concat(encodeURIComponent(e),"?type=kanji&page=1&limit=3"));if(!n.data.found)throw Error("Network response was not ok");let i=await x.Z.get("https://api.hanzii.net/api/search/vi/".concat(encodeURIComponent(e),"?type=word&page=1&limit=50"));if(!i.data.found)throw Error("Network response was not ok");v(n.data),y(i.data),l(s)}catch(e){console.error("Error fetching Hanzi data:",e)}},k=async e=>{try{let t=await fetch("https://api.hanzii.net/api/search/vi/".concat(encodeURIComponent(e),"?type=kanji&page=1&limit=3"));if(!t.ok)throw Error("Network response was not ok");let s=await t.json();if(s.found&&s.result.length>0){let e=JSON.parse(s.result[0].strokes);o(e.strokes)}}catch(e){console.error("Error fetching Hanzi data:",e)}},b=async e=>{try{return(await fetch(e,{method:"HEAD"})).ok}catch(e){return console.error("Lỗi khi kiểm tra đường dẫn:",e),!1}};return(0,i.useEffect)(()=>{let e=e=>{S.current&&!S.current.contains(e.target)&&(d(null),f(!1))};return m&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[m]),(0,i.useEffect)(()=>{c.length>0&&setTimeout(()=>{h.current.forEach((e,t)=>{if(e){let s=e.getTotalLength();e.style.strokeDasharray=s,e.style.strokeDashoffset=s,e.style.animation="draw 1.5s ease-in-out ".concat(1*t,"s forwards")}})},100)},[c]),(0,n.jsxs)("div",{className:"baihocgiaotiep-tumoi",children:[(0,n.jsx)("h2",{children:"Từ mới"}),(0,n.jsx)(g.Z,{showStrokeArea:m,activeCharacter:u,strokes:c,pathsRef:h,isShowImage:a,dataTranslate:N,dataWrite:j,strokeAreaRef:S}),(0,n.jsx)("ul",{children:t&&t.map((e,t)=>(0,n.jsxs)("li",{children:[(0,n.jsxs)("div",{className:"d-flex flex-direction-column",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"my-1",children:["Tiếng Trung: ",(0,n.jsx)("strong",{style:{color:"red"},children:s?e.gianthe:e.tiengtrung})]}),e.hanviet&&(0,n.jsxs)("div",{className:"my-1",children:["H\xe1n Việt: ",(0,n.jsx)("strong",{children:e.hanviet})]}),(0,n.jsxs)("div",{className:"my-1",children:["Pinyin: ",(0,n.jsx)("strong",{children:e.pinyin})]}),(0,n.jsxs)("div",{className:"my-1",children:["Nghĩa: ",(0,n.jsx)("strong",{children:e.nghia})]})]}),(0,n.jsx)("div",{className:"ms-3",children:(0,n.jsxs)("div",{className:"chinese-word",children:[!s&&e.tiengtrung.split("").map((e,t)=>(0,n.jsx)("span",{className:"chinese-char tiengtrungText",onClick:()=>w(e),children:e},t)),s&&e.gianthe&&e.gianthe.split("").map((e,t)=>(0,n.jsx)("span",{className:"chinese-char tiengtrungText",onClick:()=>w(e),children:e},t))]})}),(0,n.jsx)(r.Z,{className:"btn-phatamthanh",variant:"danger",onClick:()=>(0,p.Z)(e.tiengtrung,t+10),children:"\uD83D\uDD0A"})]}),(0,n.jsx)("hr",{})]},t))})]})},j=s(21682),v=s(32608);function N(e){let{id:t}=e,[s,p]=(0,i.useState)(!0),[g,x]=(0,i.useState)(!1),[N,y]=(0,i.useState)(!1),[S,w]=(0,i.useState)(t),[k,b]=(0,i.useState)(),[T,C]=(0,i.useState)(),[Z,E]=(0,i.useState)(),[A,H]=(0,i.useState)(),[R,D]=(0,i.useState)(),[O,L]=(0,i.useState)([]),[G,I]=(0,i.useState)([]),[M,_]=(0,i.useState)([]),[P,U]=(0,i.useState)([]),[z,F]=(0,i.useState)([]),[J,V]=(0,i.useState)([]),[W,q]=(0,i.useState)(!0),[B,K]=(0,i.useState)(!0),[Q,X]=(0,i.useState)(!1),[Y,$]=(0,i.useState)([]),[ee,et]=(0,i.useState)([]),[es,en]=(0,i.useState)([]),[ei,ea]=(0,i.useState)([]),[er,el]=(0,i.useState)([]),[ec,eo]=(0,i.useState)([]),[eh,eu]=(0,i.useState)([]),[ed,em]=(0,i.useState)([]),[ep,eg]=(0,i.useState)();(0,i.useEffect)(()=>{let e=(0,c.GJ)(),t=(0,c.bg)();y(e),x(t);let s=async()=>{p(!0);try{let e=(0,o.iH)(h.db,"/users/listen/".concat(S)),t=await (0,o.U2)(e);if(t.exists()){let e=t.val();if(!e)return;b(e.mp3Link),C(e.img),E(e.tieude),H(e.tieudeTiengTrung),D(e.capdo),$(e.tumoi),et(e.nguphaps),eu(e.mp3timelinelist||[]),console.log(e.mp3timelinelist),ex(e.mp3Timeline),eg(e.thamchieu),L(e.gianthe.split("\n")),I(e.tiengtrung.split("\n")),U(e.pinyin.split("\n")),F(e.nghia.split("\n")),V(e.level.split("\n")),_(e.hanviet.split("\n"))}}catch(e){console.error("Lỗi khi lấy dữ liệu:",e)}finally{p(!1)}},n=localStorage.getItem("isGianthe");null!==n&&X(JSON.parse(n)),s()},[S]),(0,i.useEffect)(()=>{ep&&(async()=>{p(!0);try{let e=(0,o.iH)(h.db,ep),t=await (0,o.U2)(e);if(t.exists()){let e=t.val();if(!e)return;if(console.log(e.hoithoai),et(e.nguphap),e.hoithoai&&Array.isArray(e.hoithoai)){console.log(123);let t=e.hoithoai.flatMap(e=>e.tumoi||[]);Y?$(e=>[...e,...t]):$(t)}}}catch(e){console.error("Lỗi khi lấy dữ liệu:",e)}finally{p(!1)}})()},[ep]);let ex=e=>{if(em(e),!e)return;let t=e.split("*"),s=[],n=[],i=[],a=[];t&&t.length>0&&(t.forEach(e=>{let[t,r,l,c]=e.trim().split("\n");s.push(t.trim()),n.push(r.trim()),i.push(l.trim()),a.push(c.trim())}),en(s),ea(n),el(i),eo(a))},ef=async()=>{let e=!Q;X(e),localStorage.setItem("isGianthe",JSON.stringify(e))};return s?(0,n.jsx)(l.Z,{}):(0,n.jsx)(a.Z,{isStudy:!0,body:(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)("div",{className:"listen-header-container",style:{backgroundColor:"#00586b"},children:(0,n.jsx)("div",{className:"container",children:(0,n.jsxs)("div",{className:"row mb-4",children:[(0,n.jsx)("div",{className:"col-12 col-md-8 ",children:(0,n.jsxs)("div",{className:"p-3 m-3",children:[(0,n.jsx)("h1",{className:"text-white",children:Z}),(0,n.jsx)("h3",{className:"text-white",children:A}),(0,n.jsxs)("div",{className:"text-white fs-1",children:["(",R,")"]}),(0,n.jsxs)("div",{className:"btn-group mt-2",children:[(0,n.jsx)(r.Z,{variant:Q?"warning":"primary",onClick:()=>ef(),children:Q?"Change to Traditional Chinese":"Change to Simple Chinese"}),(0,n.jsxs)(r.Z,{variant:W?"danger":"secondary",onClick:()=>q(!W),children:["Pinyin ",W?"On":"Off"]}),(0,n.jsxs)(r.Z,{variant:B?"primary":"secondary",onClick:()=>K(!B),children:["Space ",B?"On":"Off"]}),N&&(0,n.jsx)(m.default,{href:"/listen/".concat(t,"/edit"),target:"_self",children:(0,n.jsx)(r.Z,{variant:"warning",children:"Edit"})})]})]})}),(0,n.jsx)("div",{className:"col-12 col-md-4 image-container",children:(0,n.jsx)(d.default,{src:T||"/placeholder-image.jpg",alt:"H\xecnh ảnh",width:380,height:380,className:"image-style rounded",style:{objectFit:"cover"}})})]})})}),(0,n.jsx)("div",{className:"container",children:(0,n.jsxs)("div",{className:"row",children:[(0,n.jsxs)("div",{className:"col-12 col-md-8",style:{marginTop:"-160px",padding:"0"},children:[(0,n.jsx)(u.Z,{gianthelist:O,tiengtrunglist:G,hanvietlist:M,pinyinlist:P,nghialist:z,levellist:J,isShowPinyin:W,isShowSpace:B,isGianthe:Q,tumoi:Y}),(0,n.jsx)(v.Z,{mp3:k,tieude:Z,mp3gianthelist:es,mp3tiengtrunglist:ei,mp3pinyinlist:er,mp3nghialist:ec,mp3timelinelist:eh,isShowPinyin:W,isGianthe:Q}),(0,n.jsx)(j.Z,{nguphaps:ee,isGianthe:Q})]}),(0,n.jsx)("div",{className:"col-12 col-md-4",children:(0,n.jsx)("div",{className:"scroll-tumoi-container",children:(0,n.jsx)(f,{tumoi:Y,isGianthe:Q})})})]})})]})})}s(99362)},32608:function(e,t,s){"use strict";var n=s(57437),i=s(2265),a=s(12808);s(9339),t.Z=(0,i.forwardRef)((e,t)=>{let{mp3:s,tieude:r,mp3gianthelist:l,mp3tiengtrunglist:c,mp3pinyinlist:o,mp3nghialist:h,mp3timelinelist:u,isShowPinyin:d,isGianthe:m}=e,p=(0,i.useRef)(null),g=(0,i.useRef)(null),[x,f]=(0,i.useState)(!1),[j,v]=(0,i.useState)(0),[N,y]=(0,i.useState)(0),[S,w]=(0,i.useState)(1),[k,b]=(0,i.useState)(-1);function T(e){if(!e)return 0;let[t,s]=e.split(":").map(Number);return 60*t+s}let C=e=>e?"".concat(Math.floor(e/60).toString().padStart(2,"0"),":").concat(Math.floor(e%60).toString().padStart(2,"0")):"00:00",Z=()=>p.current?C(p.current.currentTime):"00:00";return(0,i.useImperativeHandle)(t,()=>({getCurrentTime:Z})),(0,i.useEffect)(()=>(g.current=new Audio("https://hocdichchuhan.github.io/mp3/bg/".concat(Math.floor(9*Math.random())+1,".mp3")),g.current.volume=.15,()=>{g.current&&(g.current.pause(),g.current.currentTime=0,g.current=null)}),[s]),(0,n.jsxs)("div",{children:[s&&(0,n.jsxs)("div",{className:"d-flex align-items-center bg-dark text-white p-3 m-2 rounded",children:[(0,n.jsx)(a.Z,{variant:x?"warning":"success",onClick:()=>{p.current&&g.current&&(x?(p.current.pause(),setTimeout(()=>{g.current.pause()},5e3)):(g.current.play(),setTimeout(()=>{p.current.play()},5e3)),f(!x))},className:"me-2",children:x?"⏸":"▶"}),(0,n.jsx)("input",{type:"range",min:"0",max:N||100,value:j,onChange:e=>{if(p.current&&g.current){let t=parseFloat(e.target.value);p.current.currentTime=t,g.current.currentTime=t,v(t)}},className:"form-range w-50 me-2"}),(0,n.jsxs)("span",{className:"me-2",children:[C(j)," / ",C(N)]}),(0,n.jsxs)("select",{value:S.toFixed(1),onChange:e=>{let t=parseFloat(e.target.value);w(t),p.current&&(p.current.playbackRate=t)},className:"form-select form-select-sm me-2",style:{width:"auto"},children:[(0,n.jsx)("option",{value:"0.5",children:"0.5x"}),(0,n.jsx)("option",{value:"0.75",children:"0.75x"}),(0,n.jsx)("option",{value:"1.0",children:"1.0x"}),(0,n.jsx)("option",{value:"1.25",children:"1.25x"}),(0,n.jsx)("option",{value:"1.5",children:"1.5x"}),(0,n.jsx)("option",{value:"2.0",children:"2.0x"})]}),(0,n.jsx)(a.Z,{variant:"outline-primary",href:s,download:"".concat(r||"audio",".mp3"),className:"ms-5",children:(0,n.jsx)("i",{className:"fa-solid fa-circle-down"})}),(0,n.jsx)("audio",{ref:p,src:s,onTimeUpdate:()=>{if(p.current){let e=p.current.currentTime;v(e),console.log(u);let t=-1;for(let s=0;s<u.length;s++){let n=T(u[s]),i=s<u.length-1?T(u[s+1]):1/0;if(e>=n&&e<i){t=s;break}}b(t)}},onLoadedMetadata:()=>{p.current&&y(p.current.duration)},onEnded:()=>{f(!1),g.current&&setTimeout(()=>{g.current.pause(),g.current.currentTime=0},5e3)}})]}),k>=0&&l[k]?(0,n.jsxs)("div",{className:"subtitle-container mt-3 p-2 rounded",children:[(0,n.jsx)("h3",{className:"tiengtrungText subtitletiengtrung",style:{fontWeight:"bold",color:"#fff"},children:m?l[k]:c[k]}),d&&(0,n.jsx)("div",{className:"subtitlepinyin",style:{color:"rgb(255 183 183)"},children:o[k]}),(0,n.jsx)("div",{className:"subtitlenghia",style:{color:"rgb(245 255 170)"},children:h[k]})]}):null]})})},39731:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var n=s(57437);s(2265);var i=s(24539),a=s(59233);s(15120),s(23508);var r=s(89745);function l(e){let{gianthelist:t=[],tiengtrunglist:s=[],hanvietlist:l=[],pinyinlist:c=[],nghialist:o=[],levellist:h=[],isShowPinyin:u=!1,isShowSpace:d=!1,isGianthe:m=!0,tumoi:p=[]}=e,g=new Set(p.flatMap(e=>[e.gianthe,e.tiengtrung]));return(0,n.jsx)("div",{style:{padding:"0"},children:(0,n.jsxs)("div",{className:"p-3 border rounded vanbanhienthiContainer",children:[m&&t.map((e,t)=>{let s=(0,n.jsxs)(i.Z,{id:"tooltip-".concat(t),className:"custom-tooltip row",children:[(0,n.jsxs)("div",{className:"fs-5",children:["Pinyin: ",(0,n.jsxs)("strong",{className:"text-white",children:[c[t]||"N/A"," ",(0,n.jsxs)("span",{className:"text-success",children:["(",h[t]||"N/A",")"]})]})]}),(0,n.jsxs)("div",{className:"fs-5",children:["H\xe1n Việt: ",(0,n.jsx)("strong",{className:"text-primary",children:l[t]||"N/A"})]}),(0,n.jsxs)("div",{className:"fs-5",children:["Nghĩa: ",(0,n.jsxs)("strong",{className:"text-warning",children:[o[t]||"N/A"," "]})]})]});return"*"===e?(0,n.jsx)("br",{},t):(0,n.jsx)(a.Z,{placement:"top",overlay:s,children:(0,n.jsxs)("span",{onClick:()=>(0,r.Z)(e,t+1),className:"".concat(d?"px-1":""," d-inline-block text-center"),style:{cursor:"pointer",lineHeight:"1.2"},children:[u&&(0,n.jsx)("span",{className:"small fs-6",style:{lineHeight:"1",textDecoration:"none",display:"block",color:"rgb(120 120 120)"},children:c[t]||""}),(0,n.jsx)("span",{className:"fs-3 hover-shadow tiengtrungText",style:{color:g.has(e)?"rgb(255 0 0)":void 0},children:e})]})},t)}),!m&&s.map((e,t)=>{let s=(0,n.jsxs)(i.Z,{id:"tooltip-".concat(t),className:"custom-tooltip row",children:[(0,n.jsxs)("div",{className:"fs-5",children:[c[t]||"N/A"," (",h[t]||"N/A",")"]}),(0,n.jsxs)("div",{className:"fs-5",children:[(0,n.jsx)("strong",{})," ",l[t]||"N/A"]}),(0,n.jsx)("div",{className:"fs-5",children:o[t]||"N/A"})]});return"*"===e?(0,n.jsx)("br",{},t):(0,n.jsx)(a.Z,{placement:"top",overlay:s,children:(0,n.jsxs)("span",{onClick:()=>(0,r.Z)(e,t+1),className:"".concat(d?"px-1":""," d-inline-block text-center"),style:{cursor:"pointer",lineHeight:"1.2"},children:[u&&(0,n.jsx)("span",{className:"small fs-6",style:{lineHeight:"1",textDecoration:"none",display:"block",color:"rgb(120 120 120)"},children:c[t]||""}),(0,n.jsx)("span",{className:"fs-3 hover-shadow tiengtrungText",style:{color:g.has(e)?"rgb(255 0 0)":void 0},children:e})]})},t)})]})})}},99362:function(){},9339:function(){},15120:function(){}},function(e){e.O(0,[4443,9513,1207,4358,7481,9208,9461,5973,3539,8472,609,9233,6901,7468,1682,2971,7023,1744],function(){return e(e.s=53711)}),_N_E=e.O()}]);