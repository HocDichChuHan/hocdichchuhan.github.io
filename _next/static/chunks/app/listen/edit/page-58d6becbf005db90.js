(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2784],{2720:function(e,t,n){Promise.resolve().then(n.bind(n,4668))},4668:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return ListenEdit}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7437),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2265),_component_PageForm_PageForm__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8708),_barrel_optimize_names_Button_react_bootstrap__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(2808),_component_WaitingLoad_WaitingLoad__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9768),_component_publicFc_PublicFunction__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3508),firebase_database__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(516),_component_firebase_Firebase__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5606),sweetalert2__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(4379),sweetalert2__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(sweetalert2__WEBPACK_IMPORTED_MODULE_7__),_component_publicFc_AutoResizeTextarea__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(8433);function ListenEdit(){let[loading,setLoading]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!0),[flagLogin,setFlaglogin]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[flagAdmin,setFlagAdmin]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[gianthe,setGianthe]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[tiengtrung,setTiengtrung]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[pinyin,setPinyin]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[nghia,setNghia]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[level,setLevel]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[gianthelist,setGianthelist]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[tiengtrunglist,setTiengtrunglist]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[pinyinlist,setPinyinlist]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[nghialist,setNghialist]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[levellist,setLevellist]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{let e=(0,_component_publicFc_PublicFunction__WEBPACK_IMPORTED_MODULE_4__.GJ)(),t=(0,_component_publicFc_PublicFunction__WEBPACK_IMPORTED_MODULE_4__.bg)();setFlagAdmin(e),setFlaglogin(t),(async()=>{setLoading(!0);try{let e=(0,firebase_database__WEBPACK_IMPORTED_MODULE_5__.iH)(_component_firebase_Firebase__WEBPACK_IMPORTED_MODULE_6__.db,"/users/listen"),t=await (0,firebase_database__WEBPACK_IMPORTED_MODULE_5__.U2)(e);if(t.exists()){let e=t.val();if(!e)return;setGianthe(e.gianthe),setTiengtrung(e.tiengtrung),setPinyin(e.pinyin),setNghia(e.nghia),setLevel(e.level)}}catch(e){console.error("Lỗi khi lấy dữ liệu:",e)}finally{setLoading(!1)}})()},[]);let handleAllDataChange=(e,t)=>{let n=t.split("\n");switch(e){case"gianthe":setGianthe(t),setGianthelist(n);break;case"tiengtrung":setTiengtrung(t),setTiengtrunglist(n);break;case"pinyin":setPinyin(t),setPinyinlist(n);break;case"nghia":setNghia(t),setNghialist(n);break;case"level":setLevel(t),setLevellist(n)}},handleInputChange=(e,t,n)=>{console.log(n);let i=(e,t,n)=>{console.log(i);let i=[...e];i[t]=n;let a="";return i.map((e,t)=>{a+=e+"\n"}),a},a=(e,t,n)=>{let i=[...e];return i[t]=n,i};switch(t){case"gianthe":setGianthe(i(gianthelist,e,n)),setGianthelist(a(gianthelist,e,n));break;case"tiengtrung":setTiengtrung(i(tiengtrunglist,e,n)),setTiengtrunglist(a(tiengtrunglist,e,n));break;case"pinyin":setPinyin(i(pinyinlist,e,n)),setPinyinlist(a(pinyinlist,e,n));break;case"nghia":setNghia(i(nghialist,e,n)),setNghialist(a(nghialist,e,n));break;case"level":setLevel(i(levellist,e,n)),setLevellist(a(levellist,e,n))}},handleAddItem=()=>{setGianthe([...gianthe,""]),setTiengtrung([...tiengtrung,""]),setPinyin([...pinyin,""]),setNghia([...nghia,""]),setLevel([...level,""]),setGianthelist([...gianthelist,""]),setTiengtrunglist([...tiengtrunglist,""]),setPinyinlist([...pinyinlist,""]),setNghialist([...nghialist,""]),setLevellist([...levellist,""])},handleDeleteItem=async e=>{(await sweetalert2__WEBPACK_IMPORTED_MODULE_7___default().fire({title:"Bạn c\xf3 chắc?",text:'Xo\xe1 mục "'.concat(gianthe[e]||"chưa đặt t\xean",'"?'),icon:"warning",showCancelButton:!0,confirmButtonText:"Xo\xe1",cancelButtonText:"Huỷ"})).isConfirmed&&(setGianthe(gianthe.filter((t,n)=>n!==e)),setTiengtrung(tiengtrung.filter((t,n)=>n!==e)),setPinyin(pinyin.filter((t,n)=>n!==e)),setNghia(nghia.filter((t,n)=>n!==e)),setLevel(level.filter((t,n)=>n!==e)),setGianthelist(gianthelist.filter((t,n)=>n!==e)),setTiengtrunglist(tiengtrunglist.filter((t,n)=>n!==e)),setPinyinlist(pinyinlist.filter((t,n)=>n!==e)),setNghialist(nghialist.filter((t,n)=>n!==e)),setLevellist(levellist.filter((t,n)=>n!==e)))},saveAllData=async()=>{try{let e="/users/listen",t=(0,firebase_database__WEBPACK_IMPORTED_MODULE_5__.iH)(_component_firebase_Firebase__WEBPACK_IMPORTED_MODULE_6__.db,e);await (0,firebase_database__WEBPACK_IMPORTED_MODULE_5__.t8)(t,{gianthe,tiengtrung,pinyin,nghia,level}),sweetalert2__WEBPACK_IMPORTED_MODULE_7___default().fire("✅ Th\xe0nh c\xf4ng","Dữ liệu đ\xe3 được lưu.","success")}catch(e){console.error("❌ Lỗi khi lưu:",e),sweetalert2__WEBPACK_IMPORTED_MODULE_7___default().fire("❌ Lỗi","C\xf3 lỗi xảy ra khi lưu dữ liệu.","error")}};return loading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_component_WaitingLoad_WaitingLoad__WEBPACK_IMPORTED_MODULE_3__.Z,{}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_component_PageForm_PageForm__WEBPACK_IMPORTED_MODULE_2__.Z,{body:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"container",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h2",{children:"Edit list c\xe1c đường dẫn"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"row",children:["gianthe","tiengtrung","pinyin","nghia","level"].map((field,idx)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"col-12 col-md-3",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_component_publicFc_AutoResizeTextarea__WEBPACK_IMPORTED_MODULE_8__.Z,{value:eval(field),placeholder:field,onChange:e=>handleAllDataChange(field,e.target.value)})},idx))}),gianthelist.map((item,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mb-3 border p-3 rounded position-relative",children:[["gianthe","tiengtrung","pinyin","nghia","level"].map(field=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_component_publicFc_AutoResizeTextarea__WEBPACK_IMPORTED_MODULE_8__.Z,{value:eval(field+"list")[index],placeholder:field,onChange:e=>handleInputChange(index,field,e.target.value)},field)),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Button_react_bootstrap__WEBPACK_IMPORTED_MODULE_9__.Z,{variant:"danger",onClick:()=>handleDeleteItem(index),children:"\uD83D\uDDD1 Xo\xe1 mục n\xe0y"})]},index)),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mt-3 d-flex gap-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Button_react_bootstrap__WEBPACK_IMPORTED_MODULE_9__.Z,{onClick:handleAddItem,className:"btn btn-primary",children:"➕ Th\xeam mục"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Button_react_bootstrap__WEBPACK_IMPORTED_MODULE_9__.Z,{onClick:saveAllData,className:"btn btn-success",children:"\uD83D\uDCBE Lưu dữ liệu"})]})]})})}},8433:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var i=n(7437),a=n(2265);function l(e){let{value:t,onChange:n,className:l="",placeholder:s="",onKeyDown:r}=e,c=(0,a.useRef)(null),u=()=>{let e=c.current;e&&(e.style.height="auto",e.style.height=e.scrollHeight+"px")};return(0,a.useEffect)(()=>{u()},[t]),(0,a.useEffect)(()=>{u()},[]),(0,i.jsx)("textarea",{ref:c,className:"form-control ".concat(l),value:t,onChange:n,placeholder:s,rows:1,style:{overflow:"hidden",resize:"none"},onKeyDown:r})}}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[4358,7481,9208,9461,5973,7143,8472,609,6901,7468,2971,7023,1744],function(){return t(2720)}),_N_E=e.O()}]);