(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9294],{9969:function(e,n,t){Promise.resolve().then(t.bind(t,6627))},6627:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return h}});var c=t(7437);t(998);var o=t(2265),r=t(5606),i=t(5735),a=t(516);function l(){let[e,n]=(0,o.useState)(null),t=async()=>{let e=new i.hJ;e.setCustomParameters({prompt:"select_account"});try{let t=(await (0,i.rh)(r.I8,e)).user;console.log(t);let c="user/account/".concat(t.uid),o=(0,a.iH)(r.db,c);if((await (0,a.U2)(o)).exists())console.log("\uD83D\uDCE6 User đ\xe3 tồn tại tr\xean Realtime Database");else{let e={uid:t.uid,name:t.displayName,email:t.email,photoURL:t.photoURL,createdAt:new Date().toISOString()};await (0,a.t8)(o,e),console.log("\uD83C\uDD95 Tạo user mới tr\xean Realtime Database")}let l={uid:t.uid,name:t.displayName,email:t.email,photoURL:t.photoURL};localStorage.setItem("user",JSON.stringify(l)),n(l)}catch(e){console.error("❌ Lỗi đăng nhập:",e)}};return(0,c.jsxs)("div",{children:[(0,c.jsx)("button",{onClick:t,className:"p-2 bg-blue-500 text-white rounded",children:"Đăng nhập bằng Google"}),e&&(0,c.jsxs)("div",{className:"mt-4",children:[(0,c.jsxs)("p",{children:["Xin ch\xe0o, ",e.name]}),(0,c.jsx)("img",{src:e.photoURL,className:"w-12 h-12 rounded-full"})]})]})}var s=t(6463);function u(){let e=(0,s.useRouter)(),n=(0,i.v0)(r.default),t=async()=>{try{if(await (0,i.w7)(n),localStorage.clear(),sessionStorage.clear(),"caches"in window){let e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e)))}e.push("/login")}catch(e){console.error("❌ Lỗi khi đăng xuất:",e)}};return(0,c.jsx)("button",{onClick:t,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Đăng xuất"})}function h(){return(0,c.jsxs)("div",{className:"container d-flex flex-column align-items-center justify-content-center vh-100",children:[(0,c.jsx)("h1",{className:"mb-4 text-center",children:"Ch\xe0o mừng bạn đến với App Học Tiếng Trung!"}),(0,c.jsx)(l,{}),(0,c.jsx)(u,{})]})}},5606:function(e,n,t){"use strict";t.d(n,{F3:function(){return m},Gd:function(){return b},I8:function(){return w},Je:function(){return s},Pf:function(){return h},Tn:function(){return u},UD:function(){return v},VP:function(){return f},Z6:function(){return g},_g:function(){return d},db:function(){return l},eO:function(){return y},kX:function(){return x}});var c=t(5236);t(9675);var o=t(5735),r=t(516),i=t(9842);let a=(0,c.ZF)({apiKey:"AIzaSyD9IyIValBX6xooTZ3wsBPfKsyYvNwAWik",authDomain:"dichchuhan-55a4d.firebaseapp.com",databaseURL:"https://dichchuhan-55a4d-default-rtdb.firebaseio.com",projectId:"dichchuhan-55a4d",storageBucket:"dichchuhan-55a4d.appspot.com",messagingSenderId:"589658521880",appId:"1:589658521880:web:65694d6b4f17f4ca6b1e6d",measurementId:"G-G02KSBMR52"}),l=(0,r.N8)(a);function s(){var e=document.getElementById("fileList").value,n=document.querySelector(".content-right").value,t={[e]:n},c="/users/user1/kecheng/".concat(e),o="/users/user1/contents/".concat(e),i=(0,r.iH)(l,o);(0,r.t8)(i,t).then(()=>{console.log("Dữ liệu b\xe0i dịch đ\xe3 được ghi th\xe0nh c\xf4ng l\xean Firebase.")}).catch(e=>{console.error("Lỗi khi ghi dữ liệu b\xe0i dịch:",e)}),i=(0,r.iH)(l,c),t={[e]:n=document.querySelector(".content-left").value},(0,r.t8)(i,t).then(()=>{console.log("Dữ liệu kecheng đ\xe3 được ghi th\xe0nh c\xf4ng l\xean Firebase.")}).catch(e=>{console.error("Lỗi khi ghi dữ liệu kecheng:",e)})}function u(e){var n={[e]:"".concat(e," phần dịch")},t="/users/user1/kecheng/".concat(e),c="/users/user1/contents/".concat(e),o=(0,r.iH)(l,c);(0,r.t8)(o,n).then(()=>{console.log("Dữ liệu b\xe0i dịch đ\xe3 được ghi th\xe0nh c\xf4ng l\xean Firebase.")}).catch(e=>{console.error("Lỗi khi ghi dữ liệu b\xe0i dịch:",e)}),o=(0,r.iH)(l,t),n={[e]:"".concat(e," 中文")},(0,r.t8)(o,n).then(()=>{console.log("Dữ liệu kecheng đ\xe3 được ghi th\xe0nh c\xf4ng l\xean Firebase.")}).catch(e=>{console.error("Lỗi khi ghi dữ liệu kecheng:",e)})}async function h(e,n){var t=(0,r.iH)(l,e);try{return await (0,r.t8)(t,n),!0}catch(e){throw console.error("C\xf3 lỗi xảy ra:",e),e}}function d(e){var n=(0,r.iH)(l,"/users/user1/contents/".concat(e));(0,r.Od)(n).then(()=>{console.log("Dữ liệu b\xe0i dịch đ\xe3 được x\xf3a th\xe0nh c\xf4ng từ Firebase.")}).catch(e=>{console.error("Lỗi khi x\xf3a dữ liệu b\xe0i dịch:",e)}),n=(0,r.iH)(l,"/users/user1/kecheng/".concat(e)),(0,r.Od)(n).then(()=>{console.log("Dữ liệu kecheng đ\xe3 được x\xf3a th\xe0nh c\xf4ng từ Firebase.")}).catch(e=>{console.error("Lỗi khi x\xf3a dữ liệu kecheng:",e)})}async function g(e){var n=(0,r.iH)(l,e);try{return await (0,r.Od)(n),!0}catch(e){throw console.error("C\xf3 lỗi xảy ra:",e),e}}function f(){var e=document.getElementById("fileList").value,n="/users/user1/kecheng/".concat(e,"/").concat(e),t="/users/user1/contents/".concat(e,"/").concat(e);console.log(n),console.log(m(t)),m(t).then(e=>{null!==e&&(document.querySelector(".content-right").value=e)}).catch(e=>{console.error("C\xf3 lỗi xảy ra:",e)}),m(n).then(e=>{null!==e&&(document.querySelector(".content-left").value=e)}).catch(e=>{console.error("C\xf3 lỗi xảy ra:",e)})}function m(e){return new Promise((n,t)=>{var c=(0,r.iH)(l,e);(0,r.U2)(c).then(e=>{e.exists()?n(e.val()):(console.log("Kh\xf4ng c\xf3 dữ liệu tại đường dẫn n\xe0y."),n(null))}).catch(e=>{console.error("Lỗi khi đọc dữ liệu:",e),t(e)})})}async function y(e){var n=(0,r.iH)(l,e);try{var t=await (0,r.U2)(n);if(t.exists())return t.val();return null}catch(e){return console.error("Lỗi khi đọc dữ liệu:",e),null}}function v(e){return new Promise((n,t)=>{var c=(0,r.iH)(l,e);(0,r.U2)(c).then(e=>{e.exists()?n(Object.entries(e.val()).map(e=>{let[n,t]=e;return{key:n,value:t}})):n(null)}).catch(e=>{console.error("Lỗi khi đọc dữ liệu:",e),t(e)})})}(0,i.ad)(a);let p="users/user1/contents";async function b(){let e=(0,r.iH)(l,p),n=await (0,r.U2)(e);n.exists()?(k(Object.keys(n.val())),f()):console.log("Kh\xf4ng c\xf3 dữ liệu tại đường dẫn n\xe0y.")}async function x(e){let n=(0,r.iH)(l,p),t=await (0,r.U2)(n);if(t.exists()){var c,o;k(Object.keys(t.val())),c="/users/user1/kecheng/".concat(e,"/").concat(e),o="/users/user1/contents/".concat(e,"/").concat(e),document.getElementById("fileList").value=e,m(o).then(e=>{null!==e&&(document.querySelector(".content-right").value=e)}).catch(e=>{console.error("C\xf3 lỗi xảy ra:",e)}),m(c).then(e=>{null!==e&&(document.querySelector(".content-left").value=e)}).catch(e=>{console.error("C\xf3 lỗi xảy ra:",e)})}else console.log("Kh\xf4ng c\xf3 dữ liệu tại đường dẫn n\xe0y.")}function k(e){let n=document.getElementById("fileList");for(;n.firstChild;)n.removeChild(n.firstChild);e.forEach(e=>{let t=document.createElement("option");t.value=e,t.textContent=e,n.appendChild(t)})}let w=(0,o.v0)(a),L=new o.hJ;(0,o.rh)(w,L).then(e=>{console.log("111 signInWithPopup")}).catch(e=>{console.error("❌ Lỗi đăng nhập:",e)})}},function(e){e.O(0,[4358,7481,9208,8765,998,2971,7023,1744],function(){return e(e.s=9969)}),_N_E=e.O()}]);