(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9294],{4422:function(e,n,t){Promise.resolve().then(t.bind(t,9307))},1409:function(e,n,t){"use strict";function c(e){let{src:n,width:t,quality:c}=e;return"".concat("").concat(n)}t.r(n),t.d(n,{default:function(){return c}})},9307:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return s}});var c=t(7437);t(998);var r=t(5202),o=t(5735),i=t(6463);t(2265);var a=t(5606);function l(){let e=(0,i.useRouter)(),n=(0,o.v0)(a.default),t=async()=>{try{if(await (0,o.w7)(n),localStorage.clear(),sessionStorage.clear(),"caches"in window){let e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e)))}e.push("/login")}catch(e){console.error("❌ Lỗi khi đăng xuất:",e)}};return(0,c.jsx)("button",{onClick:()=>t(),className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Đăng xuất"})}function s(){return(0,c.jsxs)("div",{className:"container d-flex flex-column align-items-center justify-content-center vh-100",children:[(0,c.jsx)("h1",{className:"mb-4 text-center",children:"Ch\xe0o mừng bạn đến với App Học Tiếng Trung!"}),(0,c.jsx)(r.Z,{}),(0,c.jsx)(l,{})]})}},5202:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var c=t(7437),r=t(2265),o=t(5606),i=t(516),a=t(2808),l=t(7143),s=t(6648);function u(){let[e,n]=(0,r.useState)(null);(0,r.useRef)(null),(0,r.useEffect)(()=>{let e=localStorage.getItem("userLogin");e&&n(JSON.parse(e))},[]);let t=async()=>{try{let e=await (0,o.Cb)();console.log(e);let t=e.user,c="user/account/".concat(t.uid),r=(0,i.iH)(o.db,c);if((await (0,i.U2)(r)).exists())console.log("\uD83D\uDCE6 User đ\xe3 tồn tại tr\xean Realtime Database");else{let e={uid:t.uid,name:t.displayName,email:t.email,photoURL:t.photoURL,createdAt:new Date().toISOString()};await (0,i.t8)(r,e),console.log("\uD83C\uDD95 Tạo user mới tr\xean Realtime Database")}let a={uid:t.uid,name:t.displayName,email:t.email,photoURL:t.photoURL};localStorage.setItem("userLogin",JSON.stringify(a)),n(a)}catch(e){console.error("❌ Lỗi đăng nhập:",e)}},u=async()=>{(0,o.kS)(),localStorage.removeItem("userLogin"),n(null)};return(0,c.jsx)("div",{className:"d-flex align-items-center gap-3",children:e?(0,c.jsxs)("div",{className:"d-flex align-items-center position-relative",children:[(0,c.jsx)("span",{className:"me-2 fw-semibold text-white d-none d-sm-inline",children:e.name}),(0,c.jsxs)(l.Z,{align:"end",children:[(0,c.jsx)(l.Z.Toggle,{variant:"light",id:"dropdown-avatar",className:"p-0 border-0 bg-transparent",children:(0,c.jsx)(s.default,{src:e.photoURL,alt:"avatar",width:"40",height:"40",className:"rounded-circle border border-1"})}),(0,c.jsxs)(l.Z.Menu,{children:[(0,c.jsx)(l.Z.Item,{href:"/profile",children:"Trang c\xe1 nh\xe2n"}),(0,c.jsx)(l.Z.Divider,{}),(0,c.jsx)(l.Z.Item,{onClick:()=>u(),children:"Đăng xuất"})]})]})]}):(0,c.jsx)(a.Z,{onClick:()=>t(),className:"btn btn-primary",children:"Đăng nhập bằng Google"})})}},5606:function(e,n,t){"use strict";t.d(n,{Cb:function(){return L},F3:function(){return m},Gd:function(){return b},Je:function(){return s},Pf:function(){return h},Tn:function(){return u},UD:function(){return v},VP:function(){return f},Z6:function(){return g},_g:function(){return d},db:function(){return l},eO:function(){return y},kS:function(){return j},kX:function(){return p}});var c=t(5236);t(9675);var r=t(5735),o=t(516),i=t(9842);let a=(0,c.ZF)({apiKey:"AIzaSyD9IyIValBX6xooTZ3wsBPfKsyYvNwAWik",authDomain:"dichchuhan-55a4d.firebaseapp.com",databaseURL:"https://dichchuhan-55a4d-default-rtdb.firebaseio.com",projectId:"dichchuhan-55a4d",storageBucket:"dichchuhan-55a4d.appspot.com",messagingSenderId:"589658521880",appId:"1:589658521880:web:65694d6b4f17f4ca6b1e6d",measurementId:"G-G02KSBMR52"}),l=(0,o.N8)(a);function s(){var e=document.getElementById("fileList").value,n=document.querySelector(".content-right").value,t={[e]:n},c="/users/user1/kecheng/".concat(e),r="/users/user1/contents/".concat(e),i=(0,o.iH)(l,r);(0,o.t8)(i,t).then(()=>{console.log("Dữ liệu b\xe0i dịch đ\xe3 được ghi th\xe0nh c\xf4ng l\xean Firebase.")}).catch(e=>{console.error("Lỗi khi ghi dữ liệu b\xe0i dịch:",e)}),i=(0,o.iH)(l,c),t={[e]:n=document.querySelector(".content-left").value},(0,o.t8)(i,t).then(()=>{console.log("Dữ liệu kecheng đ\xe3 được ghi th\xe0nh c\xf4ng l\xean Firebase.")}).catch(e=>{console.error("Lỗi khi ghi dữ liệu kecheng:",e)})}function u(e){var n={[e]:"".concat(e," phần dịch")},t="/users/user1/kecheng/".concat(e),c="/users/user1/contents/".concat(e),r=(0,o.iH)(l,c);(0,o.t8)(r,n).then(()=>{console.log("Dữ liệu b\xe0i dịch đ\xe3 được ghi th\xe0nh c\xf4ng l\xean Firebase.")}).catch(e=>{console.error("Lỗi khi ghi dữ liệu b\xe0i dịch:",e)}),r=(0,o.iH)(l,t),n={[e]:"".concat(e," 中文")},(0,o.t8)(r,n).then(()=>{console.log("Dữ liệu kecheng đ\xe3 được ghi th\xe0nh c\xf4ng l\xean Firebase.")}).catch(e=>{console.error("Lỗi khi ghi dữ liệu kecheng:",e)})}async function h(e,n){var t=(0,o.iH)(l,e);try{return await (0,o.t8)(t,n),!0}catch(e){throw console.error("C\xf3 lỗi xảy ra:",e),e}}function d(e){var n=(0,o.iH)(l,"/users/user1/contents/".concat(e));(0,o.Od)(n).then(()=>{console.log("Dữ liệu b\xe0i dịch đ\xe3 được x\xf3a th\xe0nh c\xf4ng từ Firebase.")}).catch(e=>{console.error("Lỗi khi x\xf3a dữ liệu b\xe0i dịch:",e)}),n=(0,o.iH)(l,"/users/user1/kecheng/".concat(e)),(0,o.Od)(n).then(()=>{console.log("Dữ liệu kecheng đ\xe3 được x\xf3a th\xe0nh c\xf4ng từ Firebase.")}).catch(e=>{console.error("Lỗi khi x\xf3a dữ liệu kecheng:",e)})}async function g(e){var n=(0,o.iH)(l,e);try{return await (0,o.Od)(n),!0}catch(e){throw console.error("C\xf3 lỗi xảy ra:",e),e}}function f(){var e=document.getElementById("fileList").value,n="/users/user1/kecheng/".concat(e,"/").concat(e),t="/users/user1/contents/".concat(e,"/").concat(e);console.log(n),console.log(m(t)),m(t).then(e=>{null!==e&&(document.querySelector(".content-right").value=e)}).catch(e=>{console.error("C\xf3 lỗi xảy ra:",e)}),m(n).then(e=>{null!==e&&(document.querySelector(".content-left").value=e)}).catch(e=>{console.error("C\xf3 lỗi xảy ra:",e)})}function m(e){return new Promise((n,t)=>{var c=(0,o.iH)(l,e);(0,o.U2)(c).then(e=>{e.exists()?n(e.val()):(console.log("Kh\xf4ng c\xf3 dữ liệu tại đường dẫn n\xe0y."),n(null))}).catch(e=>{console.error("Lỗi khi đọc dữ liệu:",e),t(e)})})}async function y(e){var n=(0,o.iH)(l,e);try{var t=await (0,o.U2)(n);if(t.exists())return t.val();return null}catch(e){return console.error("Lỗi khi đọc dữ liệu:",e),null}}function v(e){return new Promise((n,t)=>{var c=(0,o.iH)(l,e);(0,o.U2)(c).then(e=>{e.exists()?n(Object.entries(e.val()).map(e=>{let[n,t]=e;return{key:n,value:t}})):n(null)}).catch(e=>{console.error("Lỗi khi đọc dữ liệu:",e),t(e)})})}(0,i.ad)(a);let x="users/user1/contents";async function b(){let e=(0,o.iH)(l,x),n=await (0,o.U2)(e);n.exists()?(k(Object.keys(n.val())),f()):console.log("Kh\xf4ng c\xf3 dữ liệu tại đường dẫn n\xe0y.")}async function p(e){let n=(0,o.iH)(l,x),t=await (0,o.U2)(n);if(t.exists()){var c,r;k(Object.keys(t.val())),c="/users/user1/kecheng/".concat(e,"/").concat(e),r="/users/user1/contents/".concat(e,"/").concat(e),document.getElementById("fileList").value=e,m(r).then(e=>{null!==e&&(document.querySelector(".content-right").value=e)}).catch(e=>{console.error("C\xf3 lỗi xảy ra:",e)}),m(c).then(e=>{null!==e&&(document.querySelector(".content-left").value=e)}).catch(e=>{console.error("C\xf3 lỗi xảy ra:",e)})}else console.log("Kh\xf4ng c\xf3 dữ liệu tại đường dẫn n\xe0y.")}function k(e){let n=document.getElementById("fileList");for(;n.firstChild;)n.removeChild(n.firstChild);e.forEach(e=>{let t=document.createElement("option");t.value=e,t.textContent=e,n.appendChild(t)})}let w=(0,r.v0)(a);async function L(){let e=new r.hJ;try{return await (0,r.rh)(w,e)}catch(e){throw console.error("Lỗi đăng nhập:",e),e}}new r.hJ;let j=async()=>{if(!w.currentUser){console.warn("No user currently signed in.");return}try{await (0,r.w7)(w),console.log("User signed out")}catch(e){console.error("Logout failed:",e)}}}},function(e){e.O(0,[4358,7481,9208,5617,7143,998,2971,7023,1744],function(){return e(e.s=4422)}),_N_E=e.O()}]);