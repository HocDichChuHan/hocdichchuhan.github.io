(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4011],{82078:function(e,t,n){Promise.resolve().then(n.bind(n,93813))},21409:function(e,t,n){"use strict";function s(e){let{src:t,width:n,quality:s}=e;return"".concat("").concat(t)}n.r(t),n.d(t,{default:function(){return s}})},3216:function(e,t,n){"use strict";var s=n(2265);let i=[{background:"#192A51",color:"#FFFFFF",primaryColor:"#967AA1"},{background:"#1A1A2E",color:"#FFFFFF",primaryColor:"#0F3460"},{background:"#461220",color:"#FFFFFF",primaryColor:"#E94560"},{background:"#F7B267",color:"#000000",primaryColor:"#F4845F"},{background:"#F25F5C",color:"#000000",primaryColor:"#642B36"},{background:"#231F20",color:"#FFF",primaryColor:"#BB4430"}],r=e=>{let t=document.querySelector(":root");t.style.setProperty("--background",e.background),t.style.setProperty("--color",e.color),t.style.setProperty("--primary-color",e.primaryColor),t.style.setProperty("--glass-color",e.glassColor)};t.Z=()=>((0,s.useEffect)(()=>{let e=document.querySelector(".theme-btn-container");i.forEach(t=>{let n=document.createElement("div");n.className="theme-btn",n.style.cssText="background: ".concat(t.background,"; width: 25px; height: 25px"),e.appendChild(n),n.addEventListener("click",()=>r(t))})},[]),null)},93813:function(e,t,n){"use strict";n.r(t);var s=n(57437),i=n(2265),r=n(3216),o=n(64379),a=n.n(o),c=n(97796),l=n(65606),u=n(87138),h=n(66648),d=n(16463);class g extends i.Component{componentDidUpdate(){this.state.user&&(0,d.redirect)("/login")}render(){let{user:e,error:t,showPassword:n,showConfirmPassword:i}=this.state;return(0,s.jsxs)("section",{className:"container-show",children:[(0,s.jsxs)("div",{className:"login-container",children:[t&&(0,s.jsx)("p",{children:t.message}),(0,s.jsx)("div",{className:"circle circle-one"}),(0,s.jsxs)("div",{className:"form-container",children:[(0,s.jsx)(h.default,{src:c.Z,alt:"illustration",className:"illustration"}),(0,s.jsx)("h1",{className:"opacity",children:"Đăng k\xfd"}),(0,s.jsxs)("form",{onSubmit:this.handleSubmit,children:[(0,s.jsx)("input",{type:"text",name:"name",placeholder:"Họ V\xe0 T\xean"}),(0,s.jsx)("input",{type:"text",name:"email",placeholder:"Email"}),(0,s.jsx)("input",{type:"text",name:"username",placeholder:"T\xean đăng nhập"}),(0,s.jsxs)("div",{className:"input-password",children:[(0,s.jsx)("input",{type:n?"text":"password",name:"password",placeholder:"mật khẩu"}),(0,s.jsx)("div",{className:n?"hide":"positsionPassword",onClick:this.togglePasswordVisibility,children:(0,s.jsx)("i",{className:"fa-solid fa-eye"})}),(0,s.jsx)("div",{className:n?"positsionPassword":"hide",onClick:this.togglePasswordVisibility,children:(0,s.jsx)("i",{className:"fa-regular fa-eye-slash"})})]}),(0,s.jsxs)("div",{className:"input-password",children:[(0,s.jsx)("input",{type:i?"text":"password",name:"confirmPassword",placeholder:"X\xe1c nhận mật khẩu"}),(0,s.jsx)("div",{className:i?"hide":"positsionPassword",onClick:this.toggleConfirmPasswordVisibility,children:(0,s.jsx)("i",{className:"fa-solid fa-eye"})}),(0,s.jsx)("div",{className:i?"positsionPassword":"hide",onClick:this.toggleConfirmPasswordVisibility,children:(0,s.jsx)("i",{className:"fa-regular fa-eye-slash"})})]}),(0,s.jsx)("button",{type:"submit",className:"opacity",children:"Đăng k\xfd"})]}),(0,s.jsx)("div",{className:"register-forget opacity",children:(0,s.jsx)(u.default,{href:"/login",children:"Đăng nhập"})})]}),(0,s.jsx)("div",{className:"circle circle-two"})]}),(0,s.jsx)("div",{className:"theme-btn-container"}),(0,s.jsx)(r.Z,{})]})}constructor(...e){super(...e),this.state={user:null,error:null,showPassword:!1,showConfirmPassword:!1},this.togglePasswordVisibility=()=>{this.setState(e=>({showPassword:!e.showPassword}))},this.toggleConfirmPasswordVisibility=()=>{this.setState(e=>({showConfirmPassword:!e.showConfirmPassword}))},this.handleSubmit=async e=>{e.preventDefault();let t=new FormData(e.target),n=t.get("name"),s=t.get("username"),i=t.get("password"),r=t.get("email"),o=t.get("confirmPassword"),c="/users/account/".concat(s,"/username");try{if(n&&s&&i&&o&&r){if(/[.#$[\]]/.test(s)){let e={message:"T\xean đăng nhập ".concat(s," kh\xf4ng được chứa c\xe1c k\xfd tự: '.', '#', '$', '[', hoặc ']'")};a().fire(e.message,"","info"),this.setState({error:e})}else if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)){if(i!=o){let e={message:"Mật khẩu x\xe1c nhận kh\xf4ng giống nhau"};a().fire(e.message,"","info"),this.setState({error:e})}else if(/^.{8,}$/.test(i)){if(await this.getInfo(c)){let e={message:"T\xean đăng nhập: ".concat(s," đ\xe3 tồn tại, vui l\xf2ng d\xf9ng t\xe0i khoản kh\xe1c")};a().fire(e.message,"","info"),this.setState({error:e})}else{var u=await (0,l.Pf)(c,s),h=await (0,l.Pf)("/users/account/".concat(s,"/password"),i),d=await (0,l.Pf)("/users/account/".concat(s,"/name"),n),g=await (0,l.Pf)("/users/account/".concat(s,"/email"),r);if(u&&h&&g&&d)await a().fire("Đăng k\xfd th\xe0nh c\xf4ng. Vui l\xf2ng đăng nhập lại để tiếp tục","","success"),this.setState({user:!0});else{let e={message:"Đăng k\xfd thất bại, vui l\xf2ng thử lại"};a().fire(e.message,"","info"),this.setState({error:e})}}}else{let e={message:"Mật khẩu phải c\xf3 \xedt nhất 8 k\xfd tự"};a().fire(e.message,"","info"),this.setState({error:e})}}else{let e={message:"Email kh\xf4ng hợp lệ, vui l\xf2ng thử lại"};a().fire(e.message,"","info"),this.setState({error:e})}}else{let e={message:"Vui l\xf2ng điền đầy đủ th\xf4ng tin v\xe0 thử lại"};a().fire(e.message,"","info"),this.setState({error:e})}}catch(t){console.error("Lỗi đăng k\xfd:",t);let e={message:"Lỗi đăng k\xfd: "+t.message};a().fire(t.message,"","info"),this.setState({error:e})}},this.getInfo=async e=>{try{let t=await (0,l.F3)(e);if(null!==t)return console.log("data return:",t),t}catch(e){throw console.error("C\xf3 lỗi xảy ra:",e),e}}}}t.default=g},65606:function(e,t,n){"use strict";n.d(t,{Cb:function(){return b},F3:function(){return f},Gd:function(){return k},Je:function(){return l},Pf:function(){return h},Tn:function(){return u},UD:function(){return p},VP:function(){return m},Z3:function(){return F},Z6:function(){return g},_g:function(){return d},db:function(){return c},eO:function(){return w},kS:function(){return v},kX:function(){return x},o3:function(){return C}});var s=n(15236);n(19675);var i=n(75735),r=n(60516),o=n(69842);let a=(0,s.ZF)({apiKey:"AIzaSyD9IyIValBX6xooTZ3wsBPfKsyYvNwAWik",authDomain:"dichchuhan-55a4d.firebaseapp.com",databaseURL:"https://dichchuhan-55a4d-default-rtdb.firebaseio.com",projectId:"dichchuhan-55a4d",storageBucket:"dichchuhan-55a4d.appspot.com",messagingSenderId:"589658521880",appId:"1:589658521880:web:65694d6b4f17f4ca6b1e6d",measurementId:"G-G02KSBMR52"}),c=(0,r.N8)(a);function l(){var e=document.getElementById("fileList").value,t=document.querySelector(".content-right").value,n={[e]:t},s="/users/user1/kecheng/".concat(e),i="/users/user1/contents/".concat(e),o=(0,r.iH)(c,i);(0,r.t8)(o,n).then(()=>{console.log("Dữ liệu b\xe0i dịch đ\xe3 được ghi th\xe0nh c\xf4ng l\xean Firebase.")}).catch(e=>{console.error("Lỗi khi ghi dữ liệu b\xe0i dịch:",e)}),o=(0,r.iH)(c,s),n={[e]:t=document.querySelector(".content-left").value},(0,r.t8)(o,n).then(()=>{console.log("Dữ liệu kecheng đ\xe3 được ghi th\xe0nh c\xf4ng l\xean Firebase.")}).catch(e=>{console.error("Lỗi khi ghi dữ liệu kecheng:",e)})}function u(e){var t={[e]:"".concat(e," phần dịch")},n="/users/user1/kecheng/".concat(e),s="/users/user1/contents/".concat(e),i=(0,r.iH)(c,s);(0,r.t8)(i,t).then(()=>{console.log("Dữ liệu b\xe0i dịch đ\xe3 được ghi th\xe0nh c\xf4ng l\xean Firebase.")}).catch(e=>{console.error("Lỗi khi ghi dữ liệu b\xe0i dịch:",e)}),i=(0,r.iH)(c,n),t={[e]:"".concat(e," 中文")},(0,r.t8)(i,t).then(()=>{console.log("Dữ liệu kecheng đ\xe3 được ghi th\xe0nh c\xf4ng l\xean Firebase.")}).catch(e=>{console.error("Lỗi khi ghi dữ liệu kecheng:",e)})}async function h(e,t){var n=(0,r.iH)(c,e);try{return await (0,r.t8)(n,t),!0}catch(e){throw console.error("C\xf3 lỗi xảy ra:",e),e}}function d(e){var t=(0,r.iH)(c,"/users/user1/contents/".concat(e));(0,r.Od)(t).then(()=>{console.log("Dữ liệu b\xe0i dịch đ\xe3 được x\xf3a th\xe0nh c\xf4ng từ Firebase.")}).catch(e=>{console.error("Lỗi khi x\xf3a dữ liệu b\xe0i dịch:",e)}),t=(0,r.iH)(c,"/users/user1/kecheng/".concat(e)),(0,r.Od)(t).then(()=>{console.log("Dữ liệu kecheng đ\xe3 được x\xf3a th\xe0nh c\xf4ng từ Firebase.")}).catch(e=>{console.error("Lỗi khi x\xf3a dữ liệu kecheng:",e)})}async function g(e){var t=(0,r.iH)(c,e);try{return await (0,r.Od)(t),!0}catch(e){throw console.error("C\xf3 lỗi xảy ra:",e),e}}function m(){var e=document.getElementById("fileList").value,t="/users/user1/kecheng/".concat(e,"/").concat(e),n="/users/user1/contents/".concat(e,"/").concat(e);console.log(t),console.log(f(n)),f(n).then(e=>{null!==e&&(document.querySelector(".content-right").value=e)}).catch(e=>{console.error("C\xf3 lỗi xảy ra:",e)}),f(t).then(e=>{null!==e&&(document.querySelector(".content-left").value=e)}).catch(e=>{console.error("C\xf3 lỗi xảy ra:",e)})}function f(e){return new Promise((t,n)=>{var s=(0,r.iH)(c,e);(0,r.U2)(s).then(e=>{e.exists()?t(e.val()):(console.log("Kh\xf4ng c\xf3 dữ liệu tại đường dẫn n\xe0y."),t(null))}).catch(e=>{console.error("Lỗi khi đọc dữ liệu:",e),n(e)})})}async function w(e){var t=(0,r.iH)(c,e);try{var n=await (0,r.U2)(t);if(n.exists())return n.val();return null}catch(e){return console.error("Lỗi khi đọc dữ liệu:",e),null}}function p(e){return new Promise((t,n)=>{var s=(0,r.iH)(c,e);(0,r.U2)(s).then(e=>{e.exists()?t(Object.entries(e.val()).map(e=>{let[t,n]=e;return{key:t,value:n}})):t(null)}).catch(e=>{console.error("Lỗi khi đọc dữ liệu:",e),n(e)})})}(0,o.ad)(a);let y="users/user1/contents";async function k(){let e=(0,r.iH)(c,y),t=await (0,r.U2)(e);t.exists()?(S(Object.keys(t.val())),m()):console.log("Kh\xf4ng c\xf3 dữ liệu tại đường dẫn n\xe0y.")}async function x(e){let t=(0,r.iH)(c,y),n=await (0,r.U2)(t);if(n.exists()){var s,i;S(Object.keys(n.val())),s="/users/user1/kecheng/".concat(e,"/").concat(e),i="/users/user1/contents/".concat(e,"/").concat(e),document.getElementById("fileList").value=e,f(i).then(e=>{null!==e&&(document.querySelector(".content-right").value=e)}).catch(e=>{console.error("C\xf3 lỗi xảy ra:",e)}),f(s).then(e=>{null!==e&&(document.querySelector(".content-left").value=e)}).catch(e=>{console.error("C\xf3 lỗi xảy ra:",e)})}else console.log("Kh\xf4ng c\xf3 dữ liệu tại đường dẫn n\xe0y.")}function S(e){let t=document.getElementById("fileList");for(;t.firstChild;)t.removeChild(t.firstChild);e.forEach(e=>{let n=document.createElement("option");n.value=e,n.textContent=e,t.appendChild(n)})}let A=(0,i.v0)(a);async function b(){let e=new i.hJ;try{return await (0,i.rh)(A,e)}catch(e){throw console.error("Lỗi đăng nhập:",e),e}}new i.hJ;let v=async()=>{if(!A.currentUser){console.warn("No user currently signed in.");return}try{await (0,i.w7)(A),console.log("User signed out")}catch(e){console.error("Logout failed:",e)}},C=async e=>{let t=new Date().toISOString().slice(0,10),n=(0,r.iH)(c,"user/activityLogs/".concat(e,"/").concat(t)),s=(0,r.iH)(c,"user/status/".concat(e));(await (0,r.U2)(n)).exists()?await (0,r.Vx)(n,{currentSessionStart:new Date().toISOString()}):await (0,r.t8)(n,{currentSessionStart:new Date().toISOString(),totalSeconds:0}),console.log("markUserOnline"),await (0,r.t8)(s,{isOnline:!0,timestamp:new Date().toISOString()}),(0,r.ae)(s).set({isOnline:!1,timestamp:new Date().toISOString()})},F=async e=>{let t=new Date().toISOString().slice(0,10),n=(0,r.iH)(c,"user/activityLogs/".concat(e,"/").concat(t)),s=(0,r.iH)(c,"user/status/".concat(e)),i=await (0,r.U2)(n);if(i.exists()){let e=i.val(),t=new Date(e.currentSessionStart),s=new Date;if(isNaN(t.getTime())){console.warn("⚠️ currentSessionStart kh\xf4ng hợp lệ:",e.currentSessionStart);return}let o=Math.floor((s-t)/1e3),a="number"==typeof e.totalSeconds?e.totalSeconds:0;if(isNaN(o)||isNaN(a)){console.warn("⚠️ Gi\xe1 trị thời gian kh\xf4ng hợp lệ:",{sessionSeconds:o,previousTotal:a});return}await (0,r.Vx)(n,{endTime:s.toISOString(),totalSeconds:a+o,currentSessionStart:null})}await (0,r.t8)(s,{isOnline:!1,timestamp:new Date().toISOString()})}},97796:function(e,t){"use strict";t.Z={src:"/_next/static/media/phat3.d6a20f0b.png",height:708,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAICAMAAAAGL8UJAAAAJ1BMVEVQVFRMaXEVFRoMDBAEBAYGCRBxcVUHBwcEBAUHBwoYGCAMDBIEBASJEeowAAAADXRSTlMLAClSuRsEq6CBPmPQywfSqwAAAAlwSFlzAAALEwAACxMBAJqcGAAAACtJREFUeJwlxMkBACAIBLFZDgG1/3p9mEeQTYusG4l3xYCfSJC5WH9sCwF6EUkAlkkl+ZEAAAAASUVORK5CYII=",blurWidth:5,blurHeight:8}}},function(e){e.O(0,[4358,7481,9208,9461,5973,2971,7023,1744],function(){return e(e.s=82078)}),_N_E=e.O()}]);