(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[148],{5132:function(e,t,s){Promise.resolve().then(s.bind(s,1655))},1655:function(e,t,s){"use strict";s.d(t,{default:function(){return j}});var a=s(7437),n=s(2265),i=s(8708),r=s(35);s(4379);var l=s(5606);s(8833),s(1795);var c=s(9768),h=s(7138),d=s(6648),o=s(8472);s(6726);let u=null,m=-1,g=!1;var p=(e,t)=>{if(speechSynthesis.speaking&&m!==t&&speechSynthesis.cancel(),m===t){speechSynthesis.speaking&&g?(speechSynthesis.pause(),console.log("pause"),g=!1):(speechSynthesis.resume(),console.log("resume"),g=!0);return}g=!0,(u=new SpeechSynthesisUtterance(e)).lang="zh-CN",u.rate=.8,speechSynthesis.speak(u),m=t,u.onend=()=>{m=-1}};function x(e,t,s){let n=s.result,i=(e,t)=>e.split(RegExp("(".concat(t,")"),"gi")).map((e,s)=>e.toLowerCase()===t.toLowerCase()?(0,a.jsx)("span",{style:{color:"red"},children:e},s):e),l=t.result[0];return(console.log(l),t&&s)?(0,a.jsx)("div",{className:"tumoi-item",children:(0,a.jsxs)("div",{className:"tumoi-display",children:[(0,a.jsx)("div",{className:"tumoi-display-header",children:(0,a.jsxs)("h4",{children:[e,"  【",n[0].cn_vi,"】(",n[0].pinyin,")  Bộ thủ:(",l.sets,")   H\xecnh th\xe1i: (",l.hinhthai,")"]})}),n[0].content[0].means.map((t,s)=>{let n=t.examples?t.examples:null,l=t.mean;return(0,a.jsxs)("div",{className:"tumoi-nghia",children:[(0,a.jsxs)("h4",{className:"tumoi-nghia-shower",children:["Nghĩa ",s+1,": ",l]}),n&&n.map((t,s)=>{let n=t.e,l=t.m,c=t.p;return(0,a.jsxs)("div",{className:"tumoi-vidu",children:[(0,a.jsxs)("h5",{children:["V\xed dụ ",s+1]}),(0,a.jsx)("span",{children:i(n,e)}),(0,a.jsx)(r.Z,{className:"btn-phatamthanh",style:{maxWidth:"50px",maxHeight:"50px"},variant:"danger",onClick:()=>p(n,s),children:"\uD83D\uDD0A"}),(0,a.jsx)("p",{children:c}),(0,a.jsx)("p",{children:l})]},s)}),(0,a.jsx)("hr",{})]},s)})]})}):null}function j(e){let{id:t}=e,[s,u]=(0,n.useState)({user:null,allData:null}),[m,g]=(0,n.useState)(!0),[j,v]=(0,n.useState)(),[y,f]=(0,n.useState)(!1),[w,N]=(0,n.useState)(!1),[k,S]=(0,n.useState)(),[b,D]=(0,n.useState)([]),C=(0,n.useRef)([]),[E,L]=(0,n.useState)(null),[A,H]=(0,n.useState)(!1),[I,O]=(0,n.useState)(),[Z,z]=(0,n.useState)(),[R,T]=(0,n.useState)(!1),W=(0,n.useRef)(null),[_,V]=(0,n.useState)(0);(0,n.useEffect)(()=>{B(),J(),P()},[]),(0,n.useEffect)(()=>{let e=document.querySelector(".render-item-container");e&&V(e.clientHeight)},[j]);let B=async()=>{try{var e=JSON.parse(localStorage.getItem("allData"));e||await U(),e=await JSON.parse(localStorage.getItem("allData"));let s=await e.find(e=>"luanngu"===e.key),a=await s.value.hocnhi[t];v(a),S(a.tumoi),g(!1)}catch(e){g(!1),console.error("Error getting dichthuat data: ",e)}},U=async()=>{try{let e=(await (0,l.UD)("/users")).map(e=>{if("account"===e.key&&e.value){let t={};for(let s in e.value)if(e.value.hasOwnProperty(s)){let{username:a,password:n,...i}=e.value[s];t[s]=i}return{...e,value:t}}return e});await localStorage.setItem("allData",JSON.stringify(e))}catch(e){console.error("Error fetching data:",e)}},J=()=>{localStorage.getItem("name")&&f(!0)},P=()=>{"duong171099"==localStorage.getItem("user")&&N(!0)},q=(e,t,s)=>m?null:e.split("\n").map((e,n)=>{let i=[],l="";for(let t=0;t<e.length;t++){let s=e[t];/[.,:;?!：；。“’”！，？」「 ]/.test(s)?l+=s:(l&&(i.push(l),l=""),l=s)}l&&i.push(l);let c=t.split("\n")[n].replace(/\s+/g," ").split(" "),h=s.split("\n")[n].replace(/\s+/g," ").split(" ");return(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"chuHanListComponentDiv",children:[i.map((e,t)=>G(e,c[t],h[t],t)),(0,a.jsx)(r.Z,{className:"btn-phatamthanh",variant:"danger",onClick:()=>p(e,n),children:"\uD83D\uDD0A"})]})},n)}),G=(e,t,s,n)=>(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"chuHanPrint card",style:{borderLeftWidth:0,borderRightWidth:0},children:(0,a.jsxs)("div",{className:"card-body",style:{padding:0},children:[(0,a.jsx)("div",{className:"card-header",style:{padding:0},children:(0,a.jsx)("button",{onClick:()=>K(e),className:"btnChuHan",id:"btnChuHan0",style:{borderLeftWidth:0,borderRightWidth:0},children:e})}),(0,a.jsx)("div",{className:"row",style:{padding:1,margin:1,fontSize:18},children:(0,a.jsx)("small",{children:t})}),(0,a.jsx)("div",{className:"row",style:{padding:1,margin:1},children:(0,a.jsx)("button",{className:"btnBacKinh",children:s})})]})})},n),K=async e=>{try{D([]),L(e),H(!0),await F(e);let t="https://hocdichchuhan.github.io/huongdanviet/".concat(e.charCodeAt(0),".svg"),s=await M(t),a=await o.Z.get("https://api.hanzii.net/api/search/vi/".concat(encodeURIComponent(e),"?type=kanji&page=1&limit=3"));if(!a.data.found)throw Error("Network response was not ok");let n=await o.Z.get("https://api.hanzii.net/api/search/vi/".concat(encodeURIComponent(e),"?type=word&page=1&limit=3"));if(!n.data.found)throw Error("Network response was not ok");O(a.data),z(n.data),T(s)}catch(e){console.error("Error fetching Hanzi data:",e)}},F=async e=>{try{let t=await fetch("https://api.hanzii.net/api/search/vi/".concat(encodeURIComponent(e),"?type=kanji&page=1&limit=3"));if(!t.ok)throw Error("Network response was not ok");let s=await t.json();if(s.found&&s.result.length>0){let e=JSON.parse(s.result[0].strokes);D(e.strokes)}}catch(e){console.error("Error fetching Hanzi data:",e)}};(0,n.useEffect)(()=>{let e=e=>{W.current&&!W.current.contains(e.target)&&(L(null),H(!1))};return A&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[A]),(0,n.useEffect)(()=>{b.length>0&&setTimeout(()=>{C.current.forEach((e,t)=>{if(e){let s=e.getTotalLength();e.style.strokeDasharray=s,e.style.strokeDashoffset=s,e.style.animation="draw 1.5s ease-in-out ".concat(1*t,"s forwards")}})},100)},[b]);let M=async e=>{try{return(await fetch(e,{method:"HEAD"})).ok}catch(e){return console.error("Lỗi khi kiểm tra đường dẫn:",e),!1}};return m?(0,a.jsx)(c.Z,{}):(0,a.jsx)(i.Z,{body:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("h1",{children:j.tieude}),(0,a.jsx)("hr",{}),w&&(0,a.jsx)("div",{children:(0,a.jsx)(h.default,{href:"/luanngu/hocnhi/edit/".concat(t),children:(0,a.jsx)(r.Z,{variant:"info",children:"Chỉnh sửa"})})}),(()=>{if(!A)return null;let e="https://hocdichchuhan.github.io/huongdanviet/".concat(E.charCodeAt(0),".svg");return R?(0,a.jsx)("div",{className:"strokeAreaOverlay",children:(0,a.jsx)("div",{className:"strokeArea",ref:W,children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"col-md-6 col-12",children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,a.jsxs)("h2",{children:["Viết chữ: ",E]}),(0,a.jsx)(r.Z,{className:"btn-phatamthanh",variant:"danger",onClick:()=>p(E,-2),children:"\uD83D\uDD0A"})]}),(0,a.jsx)(d.default,{className:"image-hanzi",src:e,width:500,height:500})]}),(0,a.jsx)("div",{className:"col-md-6 col-12",children:(0,a.jsx)("div",{className:"view-nghiacuatu",children:Z&&E&&x(E,I,Z)})})]})})}):(0,a.jsx)("div",{className:"strokeAreaOverlay",children:(0,a.jsx)("div",{className:"strokeArea",ref:W,children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"col-md-6 col-12",children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,a.jsxs)("h2",{children:["Viết chữ: ",E]}),(0,a.jsx)(r.Z,{className:"btn-phatamthanh",variant:"danger",onClick:()=>p(E,-2),children:"\uD83D\uDD0A"})]}),(0,a.jsx)("svg",{width:"400",height:"600",viewBox:"0 0 1000 1000",xmlns:"http://www.w3.org/2000/svg",className:"strokeGuide",children:(0,a.jsx)("g",{transform:"translate(0, 800) scale(1, -1)",children:b.map((e,t)=>(0,a.jsx)("path",{d:e,fill:"none",stroke:"black",strokeOpacity:"0.2",strokeWidth:"5",strokeLinecap:"round",strokeLinejoin:"round"},t))})}),(0,a.jsx)("svg",{width:"400",height:"600",viewBox:"0 0 1000 1000",xmlns:"http://www.w3.org/2000/svg",className:"strokeAnimation",children:(0,a.jsx)("g",{transform:"translate(0, 800) scale(1, -1)",children:b.map((e,t)=>(0,a.jsx)("path",{ref:e=>C.current[t]=e,d:e,fill:"none",stroke:"black",strokeWidth:"5",strokeLinecap:"round",strokeLinejoin:"round",style:{strokeDasharray:"0",strokeDashoffset:"0"}},t))})})]}),(0,a.jsx)("div",{className:"col-md-6 col-12",children:(0,a.jsx)("div",{className:"view-nghiacuatu",children:Z&&E&&x(E,I,Z)})})]})})})})(),(0,a.jsx)("h3",{children:"Nội dung"}),(0,a.jsx)("span",{style:{whiteSpace:"pre-line"},children:j.giangrong}),(0,a.jsx)("hr",{}),(0,a.jsx)("h3",{children:"Ch\xfa th\xedch"}),(0,a.jsx)("span",{style:{whiteSpace:"pre-line"},children:j.chuthich}),(0,a.jsx)("hr",{}),(0,a.jsxs)("div",{className:"luanngu-viewer row",children:[(0,a.jsxs)("div",{className:"col-md-6 col-12 render-item-container",children:[(0,a.jsx)("h2",{children:"Bạch Thoại"}),q(j.bachthoai.tiengtrung,j.bachthoai.hanviet,j.bachthoai.pinyin),(0,a.jsx)("h2",{children:"Văn Ng\xf4n"}),q(j.vanngon.tiengtrung,j.vanngon.hanviet,j.vanngon.pinyin)]}),(0,a.jsx)("div",{className:"col-md-6 col-12 col-6",children:(0,a.jsx)("div",{className:"luanngu-table-container",style:{height:_},children:k?(0,a.jsx)("div",{className:"luanngu-table-container",children:(0,a.jsxs)("table",{className:"luanngu-table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{style:{width:"10%"},children:"STT"}),(0,a.jsx)("th",{style:{width:"15%"},children:"Tiếng Trung"}),(0,a.jsx)("th",{style:{width:"15%"},children:"H\xe1n Việt"}),(0,a.jsx)("th",{style:{width:"10%"},children:"Phi\xean \xc2m"}),(0,a.jsx)("th",{style:{width:"20%"},children:"Nghĩa"}),(0,a.jsx)("th",{style:{width:"30%"},children:"V\xed dụ"})]})}),(0,a.jsx)("tbody",{children:k.map((e,t)=>(0,a.jsxs)("tr",{className:"luanngu-tumoi",children:[(0,a.jsx)("td",{children:t+1}),(0,a.jsx)("td",{children:e.tiengtrung}),(0,a.jsx)("td",{children:e.hanviet}),(0,a.jsx)("td",{children:e.pinyin}),(0,a.jsx)("td",{children:e.nghia}),(0,a.jsxs)("td",{children:[e.vidutiengtrung,"\n",e.vidupinyin,"	",e.vidunghia]})]},t))})]})}):null})})]})]})})}}},function(e){e.O(0,[481,461,809,630,648,439,708,151,971,23,560],function(){return e(e.s=5132)}),_N_E=e.O()}]);