(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7792:function(e,t,a){Promise.resolve().then(a.bind(a,185))},185:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var n=a(7437),c=a(2265),i=a(7073),s=a(5606),l=a(9768),r=a(9782),o=a(1213),m=a(7138);a(5103);var d=a(5749),u=a(6648);let h=c.memo(e=>{var t;let[a,i]=(0,c.useState)(!1),s=()=>{i(!a)},[l,h]=(0,c.useState)(!1),[g,k]=(0,c.useState)(""),f=t=>{e.onChangeHandle&&e.onChangeHandle(t)};return(0,n.jsxs)("div",{className:"itemCard-container-dashboard",onClick:e.cardClick,onMouseEnter:e.cardClick,children:[(0,n.jsxs)("div",{className:"itemCard-UserName",children:[(0,n.jsxs)("div",{className:"itemCard-UserName-1",children:[(0,n.jsx)(u.default,{src:e.imgUser?e.imgUser:d.Z,alt:"img",width:50,height:50}),(0,n.jsxs)("div",{className:"itemCard-UserName-container",children:[(0,n.jsx)("h4",{className:"username-card",children:e.username}),(0,n.jsx)("p",{style:{margin:"0"},children:(e=>{if(!e)return"";try{let t=new Date(e);return(0,r.WU)(t,"h:mm a, dd 'Th\xe1ng' MM, yyyy",{locale:o.vi})}catch(t){return console.error("Invalid date format:",e),e}})(e.dateTime)})]})]}),(()=>{let t=localStorage.getItem("name");return e.username==t?(0,n.jsx)("div",{className:"itemCard-UserName-1",children:(0,n.jsx)("button",{className:"btn btn-options",onClick:e.removeClick,style:{padding:"0",margin:"0"},children:(0,n.jsx)("i",{className:"fa-solid fa-trash"})})}):null})()]}),(0,n.jsx)("div",{className:"itemCard-baiDich",children:e.img?(0,n.jsx)("pre",{onDoubleClick:()=>s(),children:(t=e.baidich,!a&&t&&t.length>300?(0,n.jsxs)(n.Fragment,{children:[t.substring(0,300),"...",(0,n.jsx)("span",{className:"see-more",onClick:()=>s(),style:{cursor:"pointer",color:"blue"},children:"xem th\xeam"})]}):t)}):(0,n.jsx)("pre",{children:e.baidich})}),e.img&&(0,n.jsx)(m.default,{href:e.link,passHref:!0,legacyBehavior:!0,children:(0,n.jsx)("a",{className:"itemCard-title-dashboard",onClick:e.cardClick,children:(0,n.jsx)(u.default,{src:e.img,alt:"null",width:500,height:500})})}),(0,n.jsxs)("div",{className:"itemCard-content",children:[e.img&&(0,n.jsx)("h3",{className:"itemCard-content-title",children:e.title}),e.img&&(0,n.jsx)("div",{className:"itemCard-content-description",children:(0,n.jsx)("span",{children:e.tieudeTiengTrung})}),(0,n.jsxs)("div",{className:"ItemCard-dashboard-footer",children:[(0,n.jsxs)("div",{className:"ItemCard-interact",children:[(0,n.jsxs)("div",{className:"ItemCard-interact-likeview",children:[(0,n.jsx)("div",{className:"liked-view",children:(0,n.jsx)("i",{className:"fa-solid fa-thumbs-up"})}),(0,n.jsx)("span",{className:"ItemCard-interact-liked",children:(0,n.jsx)("div",{children:e.likes})})]}),(0,n.jsx)("hr",{}),localStorage.getItem("name")?(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"col-6 ItemCard-interact-item",onClick:()=>{h(!l),e.likeClick()},children:(0,n.jsxs)("div",{className:"ItemCard-interact-item-flex ".concat(e.isLiked?"liked":""),children:[(0,n.jsx)("i",{className:"fa-regular fa-thumbs-up ".concat(e.isLiked?"liked-icon":"")}),(0,n.jsx)("span",{children:"Th\xedch"})]})}),(0,n.jsx)("div",{className:"col-6 ItemCard-interact-item",onClick:e.cmtClick,children:(0,n.jsxs)("div",{className:"ItemCard-interact-item-flex",children:[(0,n.jsx)("i",{className:"fa-regular fa-comment"}),(0,n.jsx)("span",{children:"B\xecnh luận"})]})})]}):null]}),(0,n.jsx)("div",{className:"itemCard-comment",children:(0,n.jsxs)("div",{className:"itemCard-comment-container",children:[(0,n.jsx)("div",{className:"itemCard-comment-viewer",children:e.comment}),(()=>{let t=localStorage.getItem("name"),a=localStorage.getItem("userImage")||d.Z;return t?(0,n.jsxs)("div",{className:"itemCard-comment-write",children:[(0,n.jsx)("div",{className:"itemCard-user-image",children:(0,n.jsx)(u.default,{src:a,alt:"img",width:500,height:500})}),(0,n.jsxs)("div",{className:"comment-input-container",children:[(0,n.jsx)("textarea",{className:"form-control comment-input",name:e.name,"aria-describedby":"helpId",placeholder:"B\xecnh luận với vai tr\xf2 "+t,onChange:f,value:e.commentText}),(0,n.jsx)("div",{className:"itemCard-comment-send  ".concat(e.commentText?"active1":"no-item"),onClick:e.sendCmtHandle,children:(0,n.jsx)("i",{className:"fa-solid fa-paper-plane"})})]})]}):null})()]})})]})]})]})});h.displayName="ItemCardDashboard";var g=a(3508);a(7663);var k=e=>{let{likes:t}=e,[a,i]=(0,c.useState)(!1),[s,l]=(0,c.useState)(!1);(0,c.useEffect)(()=>{o()});let r=localStorage.getItem("name"),o=()=>{t&&t.map(e=>{e.username===r&&l(!0)})};return(0,n.jsxs)("div",{className:"likeView-controller",children:[(0,n.jsx)("div",{className:"likeView-header",onClick:()=>{i(!a)},children:t[0]?(s?"Bạn":t[0].username)+(t[1]?" v\xe0 "+(t.length-1)+" người kh\xe1c":""):null}),(0,n.jsx)("div",{className:a?"likeView-detailes":"hidden",children:t&&t.map((e,t)=>(0,n.jsx)("div",{className:"liked-user",children:(0,n.jsx)("span",{children:e.username})},t))})]})};a(1656),a(594);class f extends c.Component{componentDidMount(){this.getData()}render(){return(0,n.jsx)(i.Z,{body:(0,n.jsxs)("div",{className:"container",children:[this.showBaidich(),this.state.loading?(0,n.jsx)(l.Z,{}):null]})})}constructor(e){var t;super(e),t=this,this.getData=async()=>{this.setState({loading:!0});let e=localStorage.getItem("user"),t=localStorage.getItem("name"),a="/users/dashboard",n="/users/account";try{let c=await (0,s.UD)(a),i=await Promise.all(c.map(async t=>{let c=t.key,i=await (0,s.UD)("".concat(a,"/").concat(c)),l=await Promise.all(i.map(async t=>{let i="".concat(c,"&").concat(t.key),[l,r,o,m,d,u,h,g,k,f,v,y,x]=await Promise.all([(0,s.UD)("".concat(a,"/").concat(c,"/").concat(t.key,"/comment")),(0,s.UD)("".concat(a,"/").concat(c,"/").concat(t.key,"/like")),(0,s.eO)("".concat(n,"/").concat(c,"/name")),(0,s.eO)("".concat(n,"/").concat(c,"/img")),(0,s.eO)("".concat(a,"/").concat(c,"/").concat(t.key,"/tieude")),(0,s.eO)("".concat(a,"/").concat(c,"/").concat(t.key,"/tieudeTiengTrung")),(0,s.eO)("".concat(a,"/").concat(c,"/").concat(t.key,"/author")),(0,s.eO)("".concat(a,"/").concat(c,"/").concat(t.key,"/imgAuthor")),(0,s.eO)("".concat(a,"/").concat(c,"/").concat(t.key,"/link")),(0,s.eO)("".concat(a,"/").concat(c,"/").concat(t.key,"/weblink")),(0,s.eO)("".concat(a,"/").concat(c,"/").concat(t.key,"/dateTime")),(0,s.eO)("".concat(a,"/").concat(c,"/").concat(t.key,"/id")),(0,s.eO)("".concat(a,"/").concat(c,"/").concat(t.key,"/baidich"))]),C=null,b=null,j=!1;return l&&(C=await Promise.all(l.map(async e=>{let i=await (0,s.eO)("".concat(a,"/").concat(c,"/").concat(t.key,"/comment/").concat(e.key,"/user")),[l,r,o,m]=await Promise.all([(0,s.eO)("".concat(n,"/").concat(i,"/name")),(0,s.eO)("".concat(n,"/").concat(i,"/img")),(0,s.eO)("".concat(a,"/").concat(c,"/").concat(t.key,"/comment/").concat(e.key,"/cmt")),(0,s.eO)("".concat(a,"/").concat(c,"/").concat(t.key,"/comment/").concat(e.key,"/dateTime"))]);return{username:l,userImage:r,cmt:o,dateTime:m,id:e.key}}))),r&&(b=await Promise.all(r.map(async n=>{n.key===e&&(j=!0);let[i,l]=await Promise.all([(0,s.eO)("".concat(a,"/").concat(c,"/").concat(t.key,"/like/").concat(n.key,"/name")),(0,s.eO)("".concat(a,"/").concat(c,"/").concat(t.key,"/like/").concat(n.key,"/image"))]);return{username:i,userImage:l}}))),{baivietKey:i,username:o,userImage:m,tieude:d,tieudeTiengTrung:u,author:h,imgAuthor:g,link:k,weblink:f,dateTime:v,comment:C,likes:b,id:y,baidich:x,isLiked:j}}));return{key:c,baivietDatas:l}})),l=[];i.forEach(e=>{l=l.concat(e.baivietDatas)}),l.sort((e,t)=>new Date(t.dateTime)-new Date(e.dateTime));let r={},o={},m={},d={},u={},h={},g={},k={},f={},v={},y={},x={},C={},b={};l.forEach(e=>{r[e.baivietKey]=e.weblink,o[e.baivietKey]=e.tieudeTiengTrung,m[e.baivietKey]=e.author,d[e.baivietKey]=e.link,u[e.baivietKey]=e.imgAuthor,h[e.baivietKey]=e.username,k[e.baivietKey]=e.tieude,g[e.baivietKey]=e.dateTime,f[e.baivietKey]=e.comment,v[e.baivietKey]=e.likes,y[e.baivietKey]=e.id,x[e.baivietKey]=e.userImage,C[e.baivietKey]=e.baidich,b[e.baivietKey]=e.isLiked}),this.setState({datas:l,myUser:e,MyUserName:t,baidichs:C,weblinks:r,tieudeTiengTrungs:o,authors:m,imgAuthors:u,links:d,usernames:h,userImages:x,tieudes:k,dateTimes:g,comments:f,likes:v,ids:y,isLikedMap:b,loading:!1})}catch(e){this.setState({error:e,loading:!1}),console.error("Error fetching data:",e)}},this.removeClick=async function(e,a){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(await (0,s.Z6)(e),n){let n=e.split("/").pop();t.setState(e=>({comments:{...e.comments,[a]:e.comments[a].filter(e=>e.id!==n)}}))}else t.setState(e=>({datas:e.datas.filter(e=>e.baivietKey!==a),baidichs:t.filterOutKey(e.baidichs,a),weblinks:t.filterOutKey(e.weblinks,a),tieudeTiengTrungs:t.filterOutKey(e.tieudeTiengTrungs,a),authors:t.filterOutKey(e.authors,a),imgAuthors:t.filterOutKey(e.imgAuthors,a),links:t.filterOutKey(e.links,a),usernames:t.filterOutKey(e.usernames,a),userImages:t.filterOutKey(e.userImages,a),tieudes:t.filterOutKey(e.tieudes,a),dateTimes:t.filterOutKey(e.dateTimes,a),comments:t.filterOutKey(e.comments,a),likes:t.filterOutKey(e.likes,a),ids:t.filterOutKey(e.ids,a)}))},this.filterOutKey=(e,t)=>{let{[t]:a,...n}=e;return n},this.sendCmtHandle=async(e,t)=>{let a=this.state.commentTexts[t],n=localStorage.getItem("user"),c=localStorage.getItem("name"),i=localStorage.getItem("userImage");if(n){let l="".concat(e,"/comment"),r=await (0,s.UD)(l),o=new Date().toISOString(),m=null;m=r?r.length+1:1;let d="".concat(m,"-").concat((0,g.o0)(o));await (0,s.Pf)("".concat(l,"/").concat(d,"/user"),n),await (0,s.Pf)("".concat(l,"/").concat(d,"/cmt"),a),await (0,s.Pf)("".concat(l,"/").concat(d,"/dateTime"),o);let u={username:c,userImage:i,cmt:a,dateTime:o,id:d};this.setState(e=>({comments:{...e.comments,[t]:[...e.comments[t]||[],u]},commentTexts:{...e.commentTexts,[t]:""}}))}},this.likeClick=async(e,t,a)=>{let n=localStorage.getItem("user"),c=localStorage.getItem("name"),i=localStorage.getItem("userImage");if(n){let l="".concat(e,"/like");if(a)await (0,s.Z6)("".concat(l,"/").concat(n)),this.setState(e=>({likes:{...e.likes,[t]:e.likes[t].filter(e=>e.username!==c)},isLikedMap:{...e.isLikedMap,[t]:!1}}));else{await (0,s.Pf)("".concat(l,"/").concat(n,"/name"),c),await (0,s.Pf)("".concat(l,"/").concat(n,"/image"),i);let e={username:c,userImage:i};this.setState(a=>({likes:{...a.likes,[t]:[...a.likes[t]||[],e]},isLikedMap:{...a.isLikedMap,[t]:!0}}))}}},this.handleCommentChange=(e,t)=>{console.log(this.state.commentTexts),this.setState(a=>({commentTexts:{...a.commentTexts,[e]:t.target.value}}))},this.showBaidich=()=>{let{datas:e,baidichs:t,userImages:a,usernames:c,commentTexts:i,likes:s,dateTimes:l,comments:r,tieudes:o,tieudeTiengTrungs:m,ids:d,isLikedMap:u}=this.state;return e&&e.length>0?e.map((e,g)=>{let f=e.baivietKey,v=f.split("&")[0],y="/users/dashboard/".concat(v,"/").concat(f.split("&")[1]);return(0,n.jsx)(h,{username:c[f]||null,dateTime:l[f]||null,imgUser:a[f]||null,comment:r[f]?this.showComment(y,r[f],f):null,likes:s[f]?(0,n.jsx)(k,{likes:s[f]}):null,tieudeTiengTrung:m[f]||null,link:f?"/dashboard/".concat(v,"/").concat(f.split("&")[1]):null,title:o[f]||null,baidich:t[f]||null,img:d[f]?"https://img.youtube.com/vi/".concat(d[f],"/sddefault.jpg"):null,removeClick:()=>this.removeClick(y,f,!1),sendCmtHandle:()=>this.sendCmtHandle(y,f),commentText:i[f]||"",onChangeHandle:e=>this.handleCommentChange(f,e),likeClick:()=>this.likeClick(y,f,u[f]),isLiked:u[f]},g)}):null},this.showComment=(e,t,a)=>(0,n.jsx)("div",{children:t&&t.map((t,c)=>(0,n.jsx)(y,{imgUser:t.userImage,username:t.username,cmt:t.cmt,dateTime:t.dateTime,removeClick:()=>this.removeClick("".concat(e,"/comment/").concat(t.id),a,!0)},c))}),this.state={datas:null,usernames:null,dateTimes:null,tieudes:null,links:null,likes:null,comments:null,weblinks:null,tieudeTiengTrungs:null,authors:null,imgAuthors:null,baidichs:null,error:null,nav:!1,loading:!1,commentTexts:{},isLikedMap:{}}}}var v=f;function y(e){return(0,n.jsxs)("div",{className:"itemCard-UserName",children:[(0,n.jsxs)("div",{className:"itemCard-UserName-2",children:[(0,n.jsx)(u.default,{src:e.imgUser?e.imgUser:d.Z,alt:"img",width:500,height:500}),(0,n.jsxs)("div",{className:"itemCard-UserName-container",children:[(0,n.jsxs)("div",{className:"itemCard-UserName-container-1",children:[(0,n.jsx)("h6",{className:"username-card1",children:e.username}),(0,n.jsx)("p",{children:e.cmt})]}),(0,n.jsx)("span",{className:"Time",style:{margin:"0"},children:(0,g.o0)(e.dateTime)})]})]}),localStorage.getItem("name")==e.username?(0,n.jsx)("div",{className:"itemCard-UserName-1",children:(0,n.jsx)("button",{className:"btn btn-options",onClick:e.removeClick,style:{padding:"0",margin:"0"},children:(0,n.jsx)("i",{className:"fa-solid fa-trash"})})}):null]})}},9768:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var n=a(7437),c=a(2265);a(4779);var i={src:"/_next/static/media/Loading.3170e5c7.gif",height:480,width:475,blurWidth:0,blurHeight:0},s=a(6648);class l extends c.Component{render(){return(0,n.jsx)("div",{className:"loadingData",children:(0,n.jsxs)("div",{className:"loadingData-container",children:[(0,n.jsx)(s.default,{src:i,alt:"Loading...",width:100,height:100}),(0,n.jsx)("h2",{children:"Website đang tải dữ liệu, xin vui l\xf2ng chờ trong gi\xe2y l\xe1t"})]})})}}},5606:function(e,t,a){"use strict";a.d(t,{F3:function(){return h},Gd:function(){return v},Je:function(){return l},Pf:function(){return o},Tn:function(){return r},UD:function(){return k},VP:function(){return u},Z6:function(){return d},_g:function(){return m},eO:function(){return g},kX:function(){return y}});var n=a(5236);a(9675);var c=a(516);let i=(0,n.ZF)({apiKey:"AIzaSyD9IyIValBX6xooTZ3wsBPfKsyYvNwAWik",authDomain:"dichchuhan-55a4d.firebaseapp.com",databaseURL:"https://dichchuhan-55a4d-default-rtdb.firebaseio.com",projectId:"dichchuhan-55a4d",storageBucket:"dichchuhan-55a4d.appspot.com",messagingSenderId:"589658521880",appId:"1:589658521880:web:65694d6b4f17f4ca6b1e6d",measurementId:"G-G02KSBMR52"}),s=(0,c.N8)(i);function l(){var e=document.getElementById("fileList").value,t=document.querySelector(".content-right").value,a={[e]:t},n="/users/user1/kecheng/".concat(e),i="/users/user1/contents/".concat(e),l=(0,c.iH)(s,i);(0,c.t8)(l,a).then(()=>{console.log("Dữ liệu b\xe0i dịch đ\xe3 được ghi th\xe0nh c\xf4ng l\xean Firebase.")}).catch(e=>{console.error("Lỗi khi ghi dữ liệu b\xe0i dịch:",e)}),l=(0,c.iH)(s,n),a={[e]:t=document.querySelector(".content-left").value},(0,c.t8)(l,a).then(()=>{console.log("Dữ liệu kecheng đ\xe3 được ghi th\xe0nh c\xf4ng l\xean Firebase.")}).catch(e=>{console.error("Lỗi khi ghi dữ liệu kecheng:",e)})}function r(e){var t={[e]:"".concat(e," phần dịch")},a="/users/user1/kecheng/".concat(e),n="/users/user1/contents/".concat(e),i=(0,c.iH)(s,n);(0,c.t8)(i,t).then(()=>{console.log("Dữ liệu b\xe0i dịch đ\xe3 được ghi th\xe0nh c\xf4ng l\xean Firebase.")}).catch(e=>{console.error("Lỗi khi ghi dữ liệu b\xe0i dịch:",e)}),i=(0,c.iH)(s,a),t={[e]:"".concat(e," 中文")},(0,c.t8)(i,t).then(()=>{console.log("Dữ liệu kecheng đ\xe3 được ghi th\xe0nh c\xf4ng l\xean Firebase.")}).catch(e=>{console.error("Lỗi khi ghi dữ liệu kecheng:",e)})}async function o(e,t){var a=(0,c.iH)(s,e);try{return await (0,c.t8)(a,t),!0}catch(e){throw console.error("C\xf3 lỗi xảy ra:",e),e}}function m(e){var t=(0,c.iH)(s,"/users/user1/contents/".concat(e));(0,c.Od)(t).then(()=>{console.log("Dữ liệu b\xe0i dịch đ\xe3 được x\xf3a th\xe0nh c\xf4ng từ Firebase.")}).catch(e=>{console.error("Lỗi khi x\xf3a dữ liệu b\xe0i dịch:",e)}),t=(0,c.iH)(s,"/users/user1/kecheng/".concat(e)),(0,c.Od)(t).then(()=>{console.log("Dữ liệu kecheng đ\xe3 được x\xf3a th\xe0nh c\xf4ng từ Firebase.")}).catch(e=>{console.error("Lỗi khi x\xf3a dữ liệu kecheng:",e)})}async function d(e){var t=(0,c.iH)(s,e);try{return await (0,c.Od)(t),!0}catch(e){throw console.error("C\xf3 lỗi xảy ra:",e),e}}function u(){var e=document.getElementById("fileList").value,t="/users/user1/kecheng/".concat(e,"/").concat(e),a="/users/user1/contents/".concat(e,"/").concat(e);console.log(t),console.log(h(a)),h(a).then(e=>{null!==e&&(document.querySelector(".content-right").value=e)}).catch(e=>{console.error("C\xf3 lỗi xảy ra:",e)}),h(t).then(e=>{null!==e&&(document.querySelector(".content-left").value=e)}).catch(e=>{console.error("C\xf3 lỗi xảy ra:",e)})}function h(e){return new Promise((t,a)=>{var n=(0,c.iH)(s,e);(0,c.U2)(n).then(e=>{e.exists()?t(e.val()):(console.log("Kh\xf4ng c\xf3 dữ liệu tại đường dẫn n\xe0y."),t(null))}).catch(e=>{console.error("Lỗi khi đọc dữ liệu:",e),a(e)})})}async function g(e){var t=(0,c.iH)(s,e);try{var a=await (0,c.U2)(t);if(a.exists())return a.val();return null}catch(e){return console.error("Lỗi khi đọc dữ liệu:",e),null}}function k(e){return new Promise((t,a)=>{var n=(0,c.iH)(s,e);(0,c.U2)(n).then(e=>{e.exists()?t(Object.entries(e.val()).map(e=>{let[t,a]=e;return{key:t,value:a}})):t(null)}).catch(e=>{console.error("Lỗi khi đọc dữ liệu:",e),a(e)})})}let f="users/user1/contents";async function v(){let e=(0,c.iH)(s,f),t=await (0,c.U2)(e);t.exists()?(x(Object.keys(t.val())),u()):console.log("Kh\xf4ng c\xf3 dữ liệu tại đường dẫn n\xe0y.")}async function y(e){let t=(0,c.iH)(s,f),a=await (0,c.U2)(t);if(a.exists()){var n,i;x(Object.keys(a.val())),n="/users/user1/kecheng/".concat(e,"/").concat(e),i="/users/user1/contents/".concat(e,"/").concat(e),document.getElementById("fileList").value=e,h(i).then(e=>{null!==e&&(document.querySelector(".content-right").value=e)}).catch(e=>{console.error("C\xf3 lỗi xảy ra:",e)}),h(n).then(e=>{null!==e&&(document.querySelector(".content-left").value=e)}).catch(e=>{console.error("C\xf3 lỗi xảy ra:",e)})}else console.log("Kh\xf4ng c\xf3 dữ liệu tại đường dẫn n\xe0y.")}function x(e){let t=document.getElementById("fileList");for(;t.firstChild;)t.removeChild(t.firstChild);e.forEach(e=>{let a=document.createElement("option");a.value=e,a.textContent=e,t.appendChild(a)})}},1656:function(){},594:function(){},5103:function(){},7663:function(){},4779:function(){}},function(e){e.O(0,[425,296,777,734,320,610,461,481,288,609,885,354,971,23,744],function(){return e(e.s=7792)}),_N_E=e.O()}]);