(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3177,7295],{29474:function(e,s,t){Promise.resolve().then(t.bind(t,67116))},67116:function(e,s,t){"use strict";t.d(s,{default:function(){return S}});var i=t(57437),n=t(2265),a=t(66802),l=t(12808);t(19768);var r=t(23508),c=t(60516),d=t(65606),o=t(39731),h=t(66648),m=t(87138),u=t(64379),x=t.n(u),g=t(57295),p=t(21682),v=t(32608),j=t(34070),f=t(39898),N=t(76879),y=t(27220);function S(e){let{id:s}=e,[t,u]=(0,n.useState)(!0),[S,w]=(0,n.useState)(!1),[b,k]=(0,n.useState)(!1),[C,Z]=(0,n.useState)(s),[D,T]=(0,n.useState)(),[E,L]=(0,n.useState)(),[I,O]=(0,n.useState)(),[P,_]=(0,n.useState)(),[H,R]=(0,n.useState)(),[A,B]=(0,n.useState)([]),[G,z]=(0,n.useState)([]),[F,V]=(0,n.useState)([]),[J,M]=(0,n.useState)([]),[U,W]=(0,n.useState)([]),[q,K]=(0,n.useState)([]),[Q,X]=(0,n.useState)(!0),[Y,$]=(0,n.useState)(!0),[ee,es]=(0,n.useState)(!1),[et,ei]=(0,n.useState)([]),[en,ea]=(0,n.useState)([]),[el,er]=(0,n.useState)([]),[ec,ed]=(0,n.useState)([]),[eo,eh]=(0,n.useState)([]),[em,eu]=(0,n.useState)([]),[ex,eg]=(0,n.useState)([]),[ep,ev]=(0,n.useState)([]),[ej,ef]=(0,n.useState)(),[eN,ey]=(0,n.useState)([]),[eS,ew]=(0,n.useState)([]),[eb,ek]=(0,n.useState)(!1),[eC,eZ]=(0,n.useState)(""),eD=(0,n.useRef)(null),eT=(0,n.useRef)(null),eE=(0,n.useRef)(null),eL=(0,n.useRef)(null),[eI,eO]=(0,n.useState)("1"),[eP,e_]=(0,n.useState)(!1),eH=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=(0,r.GJ)(),s=(0,r.bg)();k(e),w(s),eZ((0,r.sq)());let t=async()=>{x().fire({title:"Đang tải dữ liệu...",allowOutsideClick:!1,didOpen:()=>{x().showLoading()}});try{let e=(0,c.iH)(d.db,"/users/music/".concat(C)),s=await (0,c.U2)(e);if(s.exists()){let e=s.val();if(!e)return;T((0,r.Pw)(e.mp3Link)),L((0,r.Pw)(e.img)),O(e.tieude),_(e.tieudeTiengTrung),R(e.capdo),ei(e.tumoi),ea(e.nguphaps),eg(e.mp3timelinelist||[]),eR(e.mp3Timeline),ef(e.thamchieu),ew(e.cauhoi||[]),ey(e.nguphapimg||[]),eO(e.isPlayBgMusic||"1"),B(e.gianthe.split("\n")),z(e.tiengtrung.split("\n")),M(e.pinyin.split("\n")),W(e.nghia.split("\n")),K(e.level.split("\n")),V(e.hanviet.split("\n"))}let t=()=>{if(!eL.current)return;let e=eL.current.getBoundingClientRect();e.top<=window.innerHeight&&e_(!0),e.top>window.innerHeight&&e_(!1)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)}catch(e){console.error("Lỗi khi lấy dữ liệu:",e),x().fire({icon:"error",title:"Lỗi",text:"Kh\xf4ng thể lấy dữ liệu. Vui l\xf2ng thử lại sau!"})}finally{x().close()}},i=localStorage.getItem("isGianthe"),n=localStorage.getItem("isShowPinyin"),a=localStorage.getItem("isShowSpace");null!==i&&es(JSON.parse(i)),null!==n&&X(JSON.parse(n)),null!==a&&$(JSON.parse(a)),t()},[C]),(0,n.useEffect)(()=>{ej&&(async()=>{try{let e=(0,c.iH)(d.db,ej),s=await (0,c.U2)(e);if(s.exists()){let e=s.val();if(!e)return;if(en?ea(s=>[...s,...e.nguphap]):ea(e.nguphap),eN?ey(s=>[...s,...e.nguphapimg]):ey(e.nguphapimg),e.hoithoai&&Array.isArray(e.hoithoai)){let s=e.hoithoai.flatMap(e=>e.tumoi||[]);et?ei(e=>[...e,...s]):ei(s)}}}catch(e){console.error("Lỗi khi lấy dữ liệu:",e)}finally{}})()},[ej]),(0,n.useEffect)(()=>{},[]);let eR=e=>{if(ev(e),!e)return;let s=e.split("*"),t=[],i=[],n=[],a=[];s&&s.length>0&&(s.forEach(e=>{let[s,l,r,c]=e.trim().split("\n");t.push(s.trim()),i.push(l.trim()),n.push(r.trim()),a.push(c.trim())}),er(t),ed(i),eh(n),eu(a))},eA=async()=>{let e=!ee;es(e),localStorage.setItem("isGianthe",JSON.stringify(e))},eB=async()=>{let e=!Q;X(e),localStorage.setItem("isShowPinyin",JSON.stringify(e))},eG=async()=>{let e=!Y;$(e),localStorage.setItem("isShowSpace",JSON.stringify(e))};return(0,i.jsx)(a.Z,{isStudy:!0,body:(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("div",{className:"listen-header-container",style:{backgroundColor:"#00586b"},children:(0,i.jsx)("div",{className:"container",children:(0,i.jsxs)("div",{className:"row mb-4",children:[(0,i.jsx)("div",{className:"col-12 col-lg-8 ",children:(0,i.jsxs)("div",{className:"p-3 m-3",children:[(0,i.jsx)("h1",{className:"text-linearWhiteBlue",children:I}),(0,i.jsx)("h2",{className:"text-linearWhiteBlue fw-bold tiengtrungText",children:P}),(0,i.jsxs)("div",{className:"text-linearWhiteBlue fs-1",children:["(",H,")"]}),(0,i.jsxs)("div",{className:"btn-group mt-2",children:[(0,i.jsx)(l.Z,{variant:ee?"warning":"primary",onClick:()=>eA(),children:ee?"Change to Traditional Chinese":"Change to Simple Chinese"}),(0,i.jsxs)(l.Z,{variant:Q?"danger":"secondary",onClick:()=>eB(),children:["Pinyin ",Q?"On":"Off"]}),(0,i.jsxs)(l.Z,{variant:Y?"primary":"secondary",onClick:()=>eG(),children:["Space ",Y?"On":"Off"]}),b&&(0,i.jsx)(m.default,{href:"/listenmusic/".concat(s,"/edit"),target:"_self",children:(0,i.jsx)(l.Z,{variant:"warning",children:"Edit"})})]})]})}),(0,i.jsx)("div",{className:"col-12 col-lg-4 image-container transitionImage",children:(0,i.jsx)(h.default,{src:E||"/placeholder-image.jpg",alt:"H\xecnh ảnh",width:380,height:380,className:"image-style rounded",style:{objectFit:"cover"}})})]})})}),(0,i.jsxs)("div",{className:"container",children:[(0,i.jsxs)("div",{className:"row",children:[(0,i.jsxs)("div",{ref:eD,className:"col-12 col-md-8",style:{marginTop:"-160px",padding:"0"},children:[(0,i.jsx)(o.Z,{gianthelist:A,tiengtrunglist:G,hanvietlist:F,pinyinlist:J,nghialist:U,levellist:q,isShowPinyin:Q,isShowSpace:Y,isGianthe:ee,tumoi:et}),(0,i.jsx)(v.Z,{mp3:D,tieude:I,mp3gianthelist:el,mp3tiengtrunglist:ec,mp3pinyinlist:eo,mp3nghialist:em,mp3timelinelist:ex,isShowPinyin:Q,isGianthe:ee,isPlayBgMusic:eI}),(0,i.jsx)("div",{ref:eT,className:eb?"fullscreen-wrapper":"",children:(0,i.jsx)(j.Z,{mp3:D,tieude:I,mp3gianthelist:el,mp3tiengtrunglist:ec,mp3pinyinlist:eo,mp3nghialist:em,mp3timelinelist:ex,isShowPinyin:Q,isGianthe:ee,imgsrc:E,tieudeTiengTrung:P,capdo:H,isFullScreen:eb,setIsFullScreen:ek,tumoi:et,isPlayBgMusic:eI})}),(0,i.jsxs)("div",{ref:eE,children:[(0,i.jsx)(p.Z,{ref:eE,nguphaps:en,isGianthe:ee}),(0,i.jsx)(f.Z,{nguphap:eN})]})]}),(0,i.jsx)("div",{className:"col-12 col-md-4 ",children:(0,i.jsx)("div",{className:"scroll-tumoi-container",ref:eH,children:(0,i.jsx)(g.Z,{tumoi:et,isGianthe:ee})})})]}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-12 col-md-8",style:{pointerEvents:S?"auto":"none",opacity:S?1:.5},children:(0,i.jsxs)("div",{ref:eL,children:[(0,i.jsx)("div",{className:"fs-3 mb-3",children:"Bạn Cần Đăng Nhập Để C\xf3 Thể Trả Lời C\xe2u Hỏi"}),(0,i.jsx)(N.Z,{cauHoi:eS,isGianthe:ee,uid:eC,id:s})]})}),(0,i.jsx)("div",{className:"col-12 col-md-4",children:eP&&(0,i.jsx)("div",{className:"viewUserDiem",children:(0,i.jsx)(y.Z,{hsk:"listen",id:s})})})]})]},eb),!eb&&(0,i.jsxs)("div",{style:{position:"fixed",top:"50%",right:"10px",display:"flex",flexDirection:"column",gap:"8px",zIndex:9999},children:[(0,i.jsx)(l.Z,{size:"sm",onClick:()=>{var e;return null===(e=eD.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"Reading"}),(0,i.jsx)(l.Z,{size:"sm",onClick:()=>{var e;return null===(e=eT.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"\uD83C\uDFB5 Listen"}),(0,i.jsx)(l.Z,{size:"sm",onClick:()=>{var e;return null===(e=eE.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"✏ Ngữ ph\xe1p"}),(0,i.jsx)(l.Z,{size:"sm",onClick:()=>{var e;return null===(e=eL.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"❓ C\xe2u hỏi"})]})]})})}t(87233),t(20357)},57295:function(e,s,t){"use strict";var i=t(57437),n=t(2265),a=t(12808),l=t(89745),r=t(77761),c=t(66648),d=t(64379),o=t.n(d);t(60992);var h=t(23508),m=t(91654),u=t(27593);s.Z=e=>{let{tumoi:s,isGianthe:t,isShowpinyin:d=!0}=e,[x,g]=(0,n.useState)(!1),[p,v]=(0,n.useState)([]),j=(0,n.useRef)([]),[f,N]=(0,n.useState)(null),[y,S]=(0,n.useState)(!1),[w,b]=(0,n.useState)(),[k,C]=(0,n.useState)(),Z=(0,n.useRef)(null),[D,T]=(0,n.useState)({}),[E,L]=(0,n.useState)({}),[I,O]=(0,n.useState)([]);(0,n.useEffect)(()=>{let e=e=>{Z.current&&!Z.current.contains(e.target)&&(N(null),S(!1))};return y&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[y]),(0,n.useEffect)(()=>{p.length>0&&setTimeout(()=>{j.current.forEach((e,s)=>{if(e){let t=e.getTotalLength();e.style.strokeDasharray=t,e.style.strokeDashoffset=t,e.style.animation="draw 1.5s ease-in-out ".concat(1*s,"s forwards")}})},100)},[p]);let P=e=>{T(s=>({...s,[e]:!s[e]}))},_=e=>{L(s=>({...s,[e]:!s[e]}))},H=(e,s)=>{var n;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"row align-items-center",children:[(0,i.jsx)("div",{className:"col-6 ps-4 col-md-6 d-flex flex-column  align-items-end",children:(0,i.jsxs)("div",{className:"align-items-start",children:[(0,i.jsxs)("div",{className:"mb-2 text-danger align-items-start",children:[(0,i.jsx)("strong",{}),(0,i.jsx)(m.Z,{chineseList:t?e.gianthe:e.tiengtrung,isGianthe:t,isHighlight:!0}),(0,i.jsx)(a.Z,{variant:"danger",className:"btn-phatamthanh ms-2",onClick:()=>(0,l.Z)(e.tiengtrung,s+10),children:"\uD83D\uDD0A"})]}),e.hanviet&&(0,i.jsxs)("div",{children:["H\xe1n Việt: ",(0,i.jsx)("strong",{children:e.hanviet})]}),(0,i.jsxs)("div",{children:["Pinyin: ",(0,i.jsx)("strong",{children:e.pinyin})]}),(0,i.jsxs)("div",{children:["Nghĩa: ",(0,i.jsx)("strong",{children:null===(n=e.means)||void 0===n?void 0:n.map(e=>e.mean).join(" / ")})]})]})}),(0,i.jsx)("div",{className:"col-6 col-md-6 d-flex justify-content-start align-items-center",children:(0,i.jsx)(c.default,{src:"https://th.bing.com/th?q=".concat(encodeURIComponent(e.gianthe||e.tiengtrung),"&w=450&h=450"),alt:"H\xecnh ảnh",width:150,height:150,style:{objectFit:"cover",borderRadius:6},className:"shadow-sm"})})]})})},R=(e,s)=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"my-1",children:["Nghĩa: ",(0,i.jsx)("strong",{children:e.nghia})]}),(0,i.jsx)("div",{className:"row example-list mt-2 ".concat(D[s]?"show":"hide"),children:D[s]&&e.examples&&e.examples.map((t,n)=>(0,i.jsxs)("div",{className:"col-12 col-md-6 mt-3 border rounded pt-2 fade-in",children:[(0,i.jsxs)("div",{children:["V\xed dụ ",n+1]}),(0,i.jsxs)("div",{className:"my-1",children:["Tiếng Trung: ",(0,i.jsx)("span",{className:"fs-3 text-primary",children:(0,h.LA)(t.e,e.gianthe)}),(0,i.jsx)(a.Z,{className:"btn-phatamthanh",variant:"outline-danger",onClick:()=>(0,l.Z)(t.e,n+20),children:"\uD83D\uDD0A"})]}),d&&(0,i.jsxs)("div",{className:"my-1",children:["Pinyin: ",(0,i.jsx)("span",{className:"fs-4 text-muted",children:t.p})]}),(0,i.jsxs)("div",{className:"my-1",children:["Nghĩa: ",(0,i.jsx)("span",{className:"fs-4",children:t.m})]})]},"".concat(s,"_").concat(n)))}),e.examples&&(0,i.jsx)(a.Z,{variant:D[s]?"secondary":"info",size:"sm",className:"mt-2",onClick:()=>P(s),children:D[s]?"Ẩn v\xed dụ":"Hiện v\xed dụ"})]}),A=(e,s)=>{let t=e.means&&e.means.length>0&&E[s],n=e.structs&&e.structs.length>0&&E[s];if(!t&&!n)return null;let r=[];t&&e.means.forEach((e,s)=>{r.push({type:"mean",data:e,key:"mean_".concat(s)})}),n&&e.structs.forEach((e,s)=>{r.push({type:"struct",data:e,key:"struct_".concat(s)})});let c=0,o=0;return(0,i.jsx)("div",{className:"row mt-3 g-2",children:r.map((s,t)=>("struct"===s.type&&c++,"mean"===s.type&&o++,(0,i.jsx)("div",{className:"col-12 col-md-6 border rounded p-2 animation-item",children:"mean"===s.type?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"my-1",children:[(0,i.jsxs)("span",{children:["Nghĩa ",1==o?"":o,": ",(0,i.jsx)("strong",{className:"text-danger fs-5",children:s.data.mean})]}),(0,i.jsx)("div",{className:"text-muted small",children:s.data.explain})]}),s.data.examples&&s.data.examples.length>0&&(0,i.jsxs)("div",{className:"mt-2",children:[(0,i.jsx)("div",{className:"fw-semibold mb-1",children:"V\xed dụ:"}),s.data.examples.map((s,n)=>(0,i.jsxs)("div",{className:"border-3 rounded-2 p-2 m-2 animation-item",children:[(0,i.jsxs)("div",{className:"my-1",children:[(0,i.jsx)("span",{className:"fs-5 text-primary",children:(0,h.LA)(s.e,e.gianthe)}),(0,i.jsx)(a.Z,{className:"btn-phatamthanh",variant:"outline-danger",onClick:()=>(0,l.Z)(s.e,n+20),children:"\uD83D\uDD0A"})]}),d&&(0,i.jsx)("div",{className:"text-muted",children:s.p}),(0,i.jsx)("div",{children:s.m})]},"meanex_".concat(t,"_").concat(n)))]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"fs-5",children:[(0,i.jsxs)("span",{children:["Cấu tr\xfac ",c,": "]}),(0,i.jsx)("span",{className:"text-danger fw-semibold",children:s.data.struct})]}),(0,i.jsx)("small",{className:"text-muted",children:s.data.explain}),s.data.examples&&s.data.examples.map((s,n)=>(0,i.jsxs)("div",{className:"animation-item mt-2",children:[(0,i.jsx)("span",{className:"text-primary",children:(0,h.LA)(s.e,e.gianthe)}),(0,i.jsx)(a.Z,{variant:"outline-danger",onClick:()=>(0,l.Z)(s.e,n+30),size:"sm",children:"\uD83D\uDD0A"}),d&&(0,i.jsx)("div",{className:"text-muted",children:s.p}),(0,i.jsx)("div",{children:s.m})]},"strex_".concat(t,"_").concat(n)))]})},s.key)))})};return(0,i.jsxs)("div",{className:"baihocgiaotiep-tumoi",children:[(0,i.jsx)("h2",{children:"Từ mới"}),(0,i.jsx)(a.Z,{variant:"primary",className:" mb-3",onClick:()=>{let e=s.map(e=>t?e.gianthe:e.tiengtrung).filter(Boolean);o().fire({title:"Tất cả từ mới trong b\xe0i",html:'\n        <div class="tiengtrungText" style="font-size:25px; line-height:1.8">\n          '.concat(e.join("、	"),"\n        </div>\n      "),confirmButtonText:"Đ\xf3ng"})},children:"Hiện tất cả Từ Mới"}),(0,i.jsx)(r.Z,{showStrokeArea:y,activeCharacter:f,strokes:p,pathsRef:j,isShowImage:x,dataTranslate:k,dataWrite:w,strokeAreaRef:Z}),(0,i.jsx)("ul",{children:s&&s.map((e,s)=>{var t,n;return(0,i.jsxs)("li",{className:"tu-item fade-in",children:[H(e,s),(null===(t=e.means)||void 0===t?void 0:t.length)>0||(null===(n=e.structs)||void 0===n?void 0:n.length)>0?(0,i.jsxs)(u.Z,{show:E[s],onClose:()=>_(s),children:[H(e,s),A(e,s)]}):(0,i.jsx)("div",{className:"text-center",children:R(e,s)}),(0,i.jsx)("div",{className:"d-flex gap-2 mt-2",children:e.means&&e.means.length>0&&(0,i.jsx)(a.Z,{variant:E[s]?"secondary":"info",size:"sm",onClick:()=>_(s),children:E[s]?"Ẩn nghĩa":"Hiện nghĩa"})}),(0,i.jsx)("hr",{})]},s)})})]})}},87233:function(){},60992:function(){}},function(e){e.O(0,[2866,9513,5527,8905,7539,431,67,1953,2721,4358,7481,9208,9461,8765,4974,3539,8472,609,3830,9233,6901,6802,8551,4547,3104,5438,9618,2971,7023,1744],function(){return e(e.s=29474)}),_N_E=e.O()}]);