(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3177],{29474:function(e,i,t){Promise.resolve().then(t.bind(t,67116))},67116:function(e,i,t){"use strict";t.d(i,{default:function(){return w}});var s=t(57437),n=t(2265),l=t(66802),a=t(12808);t(19768);var r=t(23508),c=t(60516),o=t(65606),u=t(39731),h=t(66648),d=t(87138),m=t(64379),p=t.n(m),g=t(57295),S=t(21682),f=t(32608),x=t(34070),v=t(39898),j=t(76879),y=t(27220);function w(e){let{id:i}=e,[t,m]=(0,n.useState)(!0),[w,N]=(0,n.useState)(!1),[C,b]=(0,n.useState)(!1),[k,Z]=(0,n.useState)(i),[O,I]=(0,n.useState)(),[P,E]=(0,n.useState)(),[G,B]=(0,n.useState)(),[L,T]=(0,n.useState)(),[J,R]=(0,n.useState)(),[_,H]=(0,n.useState)([]),[z,V]=(0,n.useState)([]),[D,F]=(0,n.useState)([]),[M,U]=(0,n.useState)([]),[W,A]=(0,n.useState)([]),[q,K]=(0,n.useState)([]),[Q,X]=(0,n.useState)(!0),[Y,$]=(0,n.useState)(!0),[ee,ei]=(0,n.useState)(!1),[et,es]=(0,n.useState)([]),[en,el]=(0,n.useState)([]),[ea,er]=(0,n.useState)([]),[ec,eo]=(0,n.useState)([]),[eu,eh]=(0,n.useState)([]),[ed,em]=(0,n.useState)([]),[ep,eg]=(0,n.useState)([]),[eS,ef]=(0,n.useState)([]),[ex,ev]=(0,n.useState)(),[ej,ey]=(0,n.useState)([]),[ew,eN]=(0,n.useState)([]),[eC,eb]=(0,n.useState)(!1),[ek,eZ]=(0,n.useState)(""),eO=(0,n.useRef)(null),eI=(0,n.useRef)(null),eP=(0,n.useRef)(null),eE=(0,n.useRef)(null),[eG,eB]=(0,n.useState)("1"),[eL,eT]=(0,n.useState)(!1),eJ=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=(0,r.GJ)(),i=(0,r.bg)();b(e),N(i),eZ((0,r.sq)());let t=async()=>{p().fire({title:"Đang tải dữ liệu...",allowOutsideClick:!1,didOpen:()=>{p().showLoading()}});try{let e=(0,c.iH)(o.db,"/users/music/".concat(k)),i=await (0,c.U2)(e);if(i.exists()){let e=i.val();if(!e)return;I((0,r.Pw)(e.mp3Link)),E((0,r.Pw)(e.img)),B(e.tieude),T(e.tieudeTiengTrung),R(e.capdo),es(e.tumoi),el(e.nguphaps),eg(e.mp3timelinelist||[]),eR(e.mp3Timeline),ev(e.thamchieu),eN(e.cauhoi||[]),ey(e.nguphapimg||[]),eB(e.isPlayBgMusic||"1"),H(e.gianthe.split("\n")),V(e.tiengtrung.split("\n")),U(e.pinyin.split("\n")),A(e.nghia.split("\n")),K(e.level.split("\n")),F(e.hanviet.split("\n"))}let t=()=>{if(!eE.current)return;let e=eE.current.getBoundingClientRect();e.top<=window.innerHeight&&eT(!0),e.top>window.innerHeight&&eT(!1)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)}catch(e){console.error("Lỗi khi lấy dữ liệu:",e),p().fire({icon:"error",title:"Lỗi",text:"Kh\xf4ng thể lấy dữ liệu. Vui l\xf2ng thử lại sau!"})}finally{p().close()}},s=localStorage.getItem("isGianthe"),n=localStorage.getItem("isShowPinyin"),l=localStorage.getItem("isShowSpace");null!==s&&ei(JSON.parse(s)),null!==n&&X(JSON.parse(n)),null!==l&&$(JSON.parse(l)),t()},[k]),(0,n.useEffect)(()=>{ex&&(async()=>{try{let e=(0,c.iH)(o.db,ex),i=await (0,c.U2)(e);if(i.exists()){let e=i.val();if(!e)return;if(en?el(i=>[...i,...e.nguphap]):el(e.nguphap),ej?ey(i=>[...i,...e.nguphapimg]):ey(e.nguphapimg),e.hoithoai&&Array.isArray(e.hoithoai)){let i=e.hoithoai.flatMap(e=>e.tumoi||[]);et?es(e=>[...e,...i]):es(i)}}}catch(e){console.error("Lỗi khi lấy dữ liệu:",e)}finally{}})()},[ex]),(0,n.useEffect)(()=>{},[]);let eR=e=>{if(ef(e),!e)return;let i=e.split("*"),t=[],s=[],n=[],l=[];i&&i.length>0&&(i.forEach(e=>{let[i,a,r,c]=e.trim().split("\n");t.push(i.trim()),s.push(a.trim()),n.push(r.trim()),l.push(c.trim())}),er(t),eo(s),eh(n),em(l))},e_=async()=>{let e=!ee;ei(e),localStorage.setItem("isGianthe",JSON.stringify(e))},eH=async()=>{let e=!Q;X(e),localStorage.setItem("isShowPinyin",JSON.stringify(e))},ez=async()=>{let e=!Y;$(e),localStorage.setItem("isShowSpace",JSON.stringify(e))};return(0,s.jsx)(l.Z,{isStudy:!0,body:(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"listen-header-container",style:{backgroundColor:"#00586b"},children:(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"row mb-4",children:[(0,s.jsx)("div",{className:"col-12 col-lg-8 ",children:(0,s.jsxs)("div",{className:"p-3 m-3",children:[(0,s.jsx)("h1",{className:"text-linearWhiteBlue",children:G}),(0,s.jsx)("h2",{className:"text-linearWhiteBlue fw-bold tiengtrungText",children:L}),(0,s.jsxs)("div",{className:"text-linearWhiteBlue fs-1",children:["(",J,")"]}),(0,s.jsxs)("div",{className:"btn-group mt-2",children:[(0,s.jsx)(a.Z,{variant:ee?"warning":"primary",onClick:()=>e_(),children:ee?"Change to Traditional Chinese":"Change to Simple Chinese"}),(0,s.jsxs)(a.Z,{variant:Q?"danger":"secondary",onClick:()=>eH(),children:["Pinyin ",Q?"On":"Off"]}),(0,s.jsxs)(a.Z,{variant:Y?"primary":"secondary",onClick:()=>ez(),children:["Space ",Y?"On":"Off"]}),C&&(0,s.jsx)(d.default,{href:"/listenmusic/".concat(i,"/edit"),target:"_self",children:(0,s.jsx)(a.Z,{variant:"warning",children:"Edit"})})]})]})}),(0,s.jsx)("div",{className:"col-12 col-lg-4 image-container transitionImage",children:(0,s.jsx)(h.default,{src:P||"/placeholder-image.jpg",alt:"H\xecnh ảnh",width:380,height:380,className:"image-style rounded",style:{objectFit:"cover"}})})]})})}),(0,s.jsxs)("div",{className:"container",children:[(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{ref:eO,className:"col-12 col-md-8",style:{marginTop:"-160px",padding:"0"},children:[(0,s.jsx)(u.Z,{gianthelist:_,tiengtrunglist:z,hanvietlist:D,pinyinlist:M,nghialist:W,levellist:q,isShowPinyin:Q,isShowSpace:Y,isGianthe:ee,tumoi:et}),(0,s.jsx)(f.Z,{mp3:O,tieude:G,mp3gianthelist:ea,mp3tiengtrunglist:ec,mp3pinyinlist:eu,mp3nghialist:ed,mp3timelinelist:ep,isShowPinyin:Q,isGianthe:ee,isPlayBgMusic:eG}),(0,s.jsx)("div",{ref:eI,className:eC?"fullscreen-wrapper":"",children:(0,s.jsx)(x.Z,{mp3:O,tieude:G,mp3gianthelist:ea,mp3tiengtrunglist:ec,mp3pinyinlist:eu,mp3nghialist:ed,mp3timelinelist:ep,isShowPinyin:Q,isGianthe:ee,imgsrc:P,tieudeTiengTrung:L,capdo:J,isFullScreen:eC,setIsFullScreen:eb,tumoi:et,isPlayBgMusic:eG})}),(0,s.jsxs)("div",{ref:eP,children:[(0,s.jsx)(S.Z,{ref:eP,nguphaps:en,isGianthe:ee}),(0,s.jsx)(v.Z,{nguphap:ej})]})]}),(0,s.jsx)("div",{className:"col-12 col-md-4 ",children:(0,s.jsx)("div",{className:"scroll-tumoi-container ms-5",ref:eJ,children:(0,s.jsx)(g.Z,{tumoi:et,isGianthe:ee})})})]}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-12 col-md-8",children:(0,s.jsx)("div",{ref:eE,children:(0,s.jsx)(j.Z,{cauHoi:ew,isGianthe:ee,uid:ek,id:i})})}),(0,s.jsx)("div",{className:"col-12 col-md-4",children:eL&&(0,s.jsx)("div",{className:"viewUserDiem",children:(0,s.jsx)(y.Z,{hsk:"listen",id:i})})})]})]},eC),!eC&&(0,s.jsxs)("div",{style:{position:"fixed",top:"50%",right:"10px",display:"flex",flexDirection:"column",gap:"8px",zIndex:9999},children:[(0,s.jsx)(a.Z,{size:"sm",onClick:()=>{var e;return null===(e=eO.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"Reading"}),(0,s.jsx)(a.Z,{size:"sm",onClick:()=>{var e;return null===(e=eI.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"\uD83C\uDFB5 Listen"}),(0,s.jsx)(a.Z,{size:"sm",onClick:()=>{var e;return null===(e=eP.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"✏ Ngữ ph\xe1p"}),(0,s.jsx)(a.Z,{size:"sm",onClick:()=>{var e;return null===(e=eE.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"❓ C\xe2u hỏi"})]})]})})}t(87233),t(20357)},87233:function(){}},function(e){e.O(0,[2866,4443,9513,67,1953,2721,4358,7481,9208,9461,8765,4974,3539,8472,609,3830,9233,6901,6802,2408,4547,1682,3104,5438,250,2971,7023,1744],function(){return e(e.s=29474)}),_N_E=e.O()}]);