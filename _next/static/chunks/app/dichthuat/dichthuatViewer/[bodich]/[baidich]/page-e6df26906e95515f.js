(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2794],{923:function(e,t,i){Promise.resolve().then(i.bind(i,4278))},4278:function(e,t,i){"use strict";i.d(t,{default:function(){return v}});var a=i(7437),n=i(2265),s=i(8708),l=i(2808),o=i(4379),c=i.n(o),r=i(5606),u=i(8833),d=i(1795),h=i(9768),g=i(8728),m=i(8433);function v(e){let{bodich:t,baidich:i}=e,[o,v]=(0,n.useState)({dichthuat:null,youtubeLink:null,webLink:null,tieude:null,tieudeTiengTrung:null,author:null,imgAuthor:null,id:null,error:null,nav:!1,tuMois:{},tuMoiNghias:{},tuMoiNghiaGets:{},tuMoiPinyins:{},tumoiViduGets:{},tuMoiVidus:{},tuMoiViduDichs:{},tuMoiViduPinyins:{},hanviets:{},baiDich:null,tiengTrungs:{},dichNghias:{},BaidichData:{},user:null,allData:null}),[f,y]=(0,n.useState)(!0),[p,b]=(0,n.useState)(!1),x=(0,n.useRef)(null),j=(0,n.useRef)(null),[N,k]=(0,n.useState)({}),[w,S]=(0,n.useState)({}),[P,D]=(0,n.useState)([]),[T,C]=(0,n.useState)(!1),[L,O]=(0,n.useState)(!1);(0,n.useEffect)(()=>{Z(),I(),V()},[T]);let I=()=>{localStorage.getItem("name")&&C(!0)},V=()=>{"duong171099"==localStorage.getItem("user")&&O(!0)},M=async()=>{y(!0);let e=localStorage.getItem("user"),t=localStorage.getItem("name"),a=localStorage.getItem("userImage"),n="/users/dashboard/".concat(e,"/").concat(i),s="".concat(n,"/tiengTrung"),l="".concat(n,"/noidung"),u="".concat(n,"/dichNghia"),{BaidichData:d,tieude:h,tiengTrungs:g,dichNghias:m,youtubeLink:f,webLink:p,tieudeTiengTrung:b,author:x,imgAuthor:j,embedLink:N}=o,k=new Date().toISOString(),w=Object.values(m).filter(e=>null!==e),S=d&&d.noidung&&Object.values(d.noidung).filter(e=>null!==e),P=Object.values(g);try{let e=_(f);await Promise.all([(0,r.Pf)("".concat(n,"/username"),t),(0,r.Pf)("".concat(n,"/weblink"),f),(0,r.Pf)("".concat(n,"/tieudeTiengTrung"),b),(0,r.Pf)("".concat(n,"/tieude"),h),(0,r.Pf)("".concat(n,"/link"),N),(0,r.Pf)("".concat(n,"/author"),x),(0,r.Pf)("".concat(n,"/imgAuthor"),j),(0,r.Pf)("".concat(n,"/dateTime"),k),(0,r.Pf)("".concat(n,"/id"),e),(0,r.Pf)("".concat(n,"/userImage"),a)]),await Promise.all(w.map((e,t)=>{let i="".concat(u,"/").concat(t);(0,r.Pf)(i,e)})),await Promise.all(P.map((e,t)=>{let i="".concat(s,"/").concat(t);(0,r.Pf)(i,e)})),await Promise.all(S.map((e,t)=>{let i="".concat(l,"/").concat(t,"/hanviet"),a="".concat(l,"/").concat(t,"/pinyin"),n="".concat(l,"/").concat(t,"/tiengtrung");(0,r.Pf)(i,e.hanviet),(0,r.Pf)(a,e.pinyin),(0,r.Pf)(n,e.tiengTrung)})),y(!1),await c().fire({position:"center",icon:"success",title:"Đăng b\xe0i th\xe0nh c\xf4ng",showConfirmButton:!1,timer:1500}),v(e=>({...e,nav:!0}))}catch(t){console.error("Lỗi tạo b\xe0i mới:",t);let e={message:"Lỗi tạo b\xe0i mới: "+t.message};c().fire(t.message,"","info"),v(t=>({...t,error:e}))}finally{y(!1)}},Z=async()=>{let e=localStorage.getItem("user");y(!0),await B();let a=JSON.parse(localStorage.getItem("allData")),n=a.find(e=>"dichthuat"===e.key),s=n.value[t],l=n.value[t].listBaihoc[i],o=n.value[t].listBaihoc[i][e];var c=null,r=null;o&&(c=o.tumoi?Object.entries(o.tumoi).map(e=>{let[t,i]=e;return{key:t,value:i}}):null,r=o.baidich?Object.entries(o.baidich).map(e=>{let[t,i]=e;return{key:t,value:i}}):null);let u=l.noidung?Object.entries(l.noidung).map(e=>{let[t,i]=e;return{key:t,value:i}}):null,d="/users/dichthuat/".concat(t,"/listBaihoc/").concat(i);"".concat(d,"/").concat(e,"/baidich"),"".concat(d,"/").concat(e,"/tumoi");let[h,g,m,f,p,b,x,j,N]=await Promise.all([c,l.tieude,l.link,l.weblink,l.tieudeTiengTrung,s.author,s.imgAuthor,r,u]),k=m?"https://www.youtube.com/embed/".concat(_(m)):null,w={},S={},P={},D={},T={},C={},L={},O={};h&&await Promise.all(h.map(async(e,t)=>{let i=h.find(t=>t.key===e.key);w[e.key]=Object.entries(i.value.nghia).map(e=>{let[t,i]=e;return{key:t,value:i}}),P[e.key]=i.value.pinyin,O[e.key]=i.value.hanviet,w[e.key]&&await Promise.all(w[e.key].map(async(t,i)=>{let a=o.tumoi[e.key].nghia[t.key];S[t.key]=a.nghia,D[t.key]=a.vidu?await Object.entries(a.vidu).map(e=>{let[t,i]=e;return{key:t,value:i}}):null,D[t.key]&&await Promise.all(D[t.key].map(async e=>{C[e.key]=a.vidu[e.key].nghia,T[e.key]=a.vidu[e.key].vidu,L[e.key]=a.vidu[e.key].pinyin}))}))}));let I={},V={};N&&await Promise.all(N.map(async e=>{l.noidung[e.key]&&(I[e.key]=l.noidung[e.key].tiengTrung)})),j&&await Promise.all(j.map(async e=>{j[e.key]&&(V[e.key]=j[e.key].value)})),v(t=>({...t,webLink:f,tieudeTiengTrung:p,tieude:g,author:b,imgAuthor:x,youtubeLink:m,noiDungBaiDich:N,user:e,tuMoiNghias:S,tuMoiNghiaGets:w,tuMoiPinyins:P,tuMoiViduPinyins:L,tumoiViduGets:D,tuMoiVidus:T,tuMoiViduDichs:C,tuMois:h,baiDich:j,embedLink:k,hanviets:O,tiengTrungs:I,dichNghias:V,user:e,allData:a,BaidichData:l})),y(!1)},B=async()=>{try{let e=(await (0,r.UD)("/users")).map(e=>{if("account"===e.key&&e.value){let t={};for(let i in e.value)if(e.value.hasOwnProperty(i)){let{username:a,password:n,...s}=e.value[i];t[i]=s}return{...e,value:t}}return e});await localStorage.setItem("allData",JSON.stringify(e))}catch(e){console.error("Error fetching data:",e)}},A=async()=>{y(!0);let{baiDich:e,dichNghias:a={}}=o,n=localStorage.getItem("user"),s="/users/dichthuat/".concat(t,"/listBaihoc/").concat(i,"/").concat(n,"/baidich");try{let e=Object.values(a).filter(e=>null!==e);if(!e.length)throw Error("No valid dichNghias to save.");await Promise.all(e.map((e,t)=>{let i="".concat(s,"/").concat(t);return(0,r.Pf)(i,e)})),await c().fire({position:"center",icon:"success",title:"Tạo b\xe0i mới th\xe0nh c\xf4ng",showConfirmButton:!1,timer:1500})}catch(e){y(!1),console.error("Lỗi tạo b\xe0i mới:",e),await c().fire("Lỗi tạo b\xe0i mới: "+e.message,"","info")}finally{y(!1)}},E=(e,t)=>e.split(RegExp("(".concat(t,")"),"gi")).map((e,i)=>e.toLowerCase()===t.toLowerCase()?(0,a.jsx)("span",{style:{color:"red"},children:e},i):e),_=e=>{var t=e.split("=");return t[1]?t[1].split("&")[0]:"null"},H=()=>{j.current&&j.current.scrollIntoView({behavior:"smooth"})},U=e=>{S({...w,[e]:!w[e]})},G=(e,t)=>{k({...N,[e+"-"+t]:!0})},J=(e,t)=>{k({...N,[e+"-"+t]:!1})},R=(e,t)=>{v(i=>({...i,dichNghias:{...i.dichNghias,[t]:e.target.value}}))},K=e=>{D(t=>{let i=[...t];return i[e]=!i[e],i})},W=async(e,t)=>{let i=await (0,g.y)(e);console.log(e),v(e=>({...e,dichNghias:{...e.dichNghias,[t]:i}}))},{tieude:Y,baiDich:z,webLink:F,tieudeTiengTrung:q,author:Q,imgAuthor:X,embedLink:$,noiDungBaiDich:ee,tiengTrungs:et,dichNghias:ei}=o;return(0,a.jsx)(s.Z,{body:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"dichthuat-container row",ref:j,children:[(0,a.jsxs)("div",{className:"col-12 col-md-5",children:[(0,a.jsx)("div",{children:(0,a.jsx)(u.Z,{videoLink:$||null,webLink:F||null,tieudeTiengTrung:q||null,author:Q||null,imgAuthor:X||null,title:Y||null})}),(0,a.jsxs)("div",{style:{display:"flex"},children:[(0,a.jsx)(l.Z,{className:T?"button-css":"button-css disable",disabled:!T,variant:"info",onClick:A,children:"Lưu b\xe0i dịch"}),(0,a.jsx)(l.Z,{className:T?"button-css":"button-css disable",disabled:!T,variant:"danger",onClick:M,children:"Đăng b\xe0i"})]})]}),(0,a.jsx)("div",{className:"col",children:(0,a.jsx)("div",{className:"card border-primary cardPhandich",children:(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("div",{className:"",style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:(0,a.jsx)("h4",{className:"card-title",children:"Phần Dịch"})}),(()=>{let{BaidichData:e,tiengTrungs:t,dichNghias:i=[]}=o;return(Object.values(t),e&&e.noidung)?(0,a.jsx)("div",{className:"showNguyenVan",children:e.noidung.map((e,t)=>e&&(0,a.jsxs)("div",{className:"phanDich",children:[(0,a.jsx)("div",{className:"tiengTrung",onClick:()=>K(t),children:e.tiengTrung||""}),e.pinyin&&P[t]&&(0,a.jsx)("div",{className:"showNguyenVan-pinyin",children:e.pinyin||""}),e.hanviet&&P[t]&&(0,a.jsx)("div",{className:"showNguyenVan-hanviet",children:e.hanviet||""}),(0,a.jsx)(m.Z,{value:i[t-1]||"",placeholder:"Nhập b\xe0i dịch của bạn",className:"fs-3 colorBlue",onChange:e=>R(e,t-1)}),(0,a.jsx)(l.Z,{variant:"danger",onClick:()=>W(e.tiengTrung,t-1),children:"Translate"}),(0,a.jsx)("hr",{})]},t))}):null})()]})})})]}),(0,a.jsxs)("div",{className:"tumoi-area",children:[(0,a.jsxs)("div",{className:"tumoi-area-header",children:[(0,a.jsx)("h2",{className:"card-title",children:"Từ mới"}),(0,a.jsx)(l.Z,{className:T?"button-css":"button-css disable",disabled:!T,variant:"info",onClick:()=>{b(!p),x.current&&x.current.scrollIntoView({behavior:"smooth"})},children:"Th\xeam từ mới"})]}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col",children:(0,a.jsxs)("div",{className:"tumoi-container",children:[(0,a.jsx)("div",{className:"tumoi-header"}),(()=>{let{user:e,allData:n,tuMois:s,tuMoiNghias:c,tuMoiNghiaGets:r,tuMoiPinyins:u,tumoiViduGets:d,tuMoiVidus:h,tuMoiViduDichs:g,tuMoiViduPinyins:m,hanviets:v}=o;return n&&(n.find(e=>"dichthuat"===e.key).value[t].listBaihoc[i][e],s&&s.length>0)?s.map((e,t)=>{let i=e.value.nghia,n=e.value.pinyin,s=e.value.hanviet,o=w[e.key];return(0,a.jsx)("div",{className:"tumoi-item",children:(0,a.jsxs)("div",{className:"tumoi-display",children:[(0,a.jsxs)("div",{className:"tumoi-display-header",children:[(0,a.jsxs)("h4",{children:[t+1,", ",e.key,"  【",s,"】(",n,")"]}),(0,a.jsx)(l.Z,{variant:o?"danger":"warning",onClick:()=>U(e.key),children:o?"Ẩn bớt nghĩa của từ":"Hiển thị nghĩa của từ"})]}),o&&i&&i.map((t,i)=>{let n=t.vidu?t.vidu:null,s=t.nghia,o=N[e.key+"-"+t.key];return(0,a.jsxs)("div",{className:"tumoi-nghia",children:[(0,a.jsxs)("h4",{className:"tumoi-nghia-shower",children:["Nghĩa ",i+1,": ",s]}),n&&n.map((t,i)=>{let n=t.vidu,s=t.nghia,l=t.pinyin;return o||0===i?(0,a.jsxs)("div",{className:"tumoi-vidu",children:[(0,a.jsxs)("h5",{children:["V\xed dụ ",i+1]}),(0,a.jsx)("p",{children:E(n,e.key)}),(0,a.jsx)("p",{children:l}),(0,a.jsx)("p",{children:s})]},i):null}),o?(0,a.jsx)(l.Z,{variant:"warning",onClick:()=>J(e.key,nghia.key),children:"Ẩn bớt v\xed dụ"}):(0,a.jsx)(l.Z,{variant:"info",onClick:()=>G(e.key,nghia.key),children:"Hiển thị th\xeam v\xed dụ"}),(0,a.jsx)("hr",{})]},i)})]})},t)}):null})()]})}),(0,a.jsx)("div",{ref:x,children:(0,a.jsx)(d.Z,{flagLogin:T,scrollBaidich:()=>H(),bodich:t,baidich:i})})]})]}),f?(0,a.jsx)(h.Z,{}):null]})})}},8708:function(e,t,i){"use strict";i.d(t,{Z:function(){return v}});var a=i(7437),n=i(2265),s=i(6463),l=i(4379),o=i.n(l),c=i(7138),r=i(5202);class u extends n.Component{componentDidMount(){let e=localStorage.getItem("name"),t=localStorage.getItem("user");this.setState({userName:e,user:t}),this.isAdmin(),this.isLogin(),window.addEventListener("scroll",this.handleScroll)}componentWillUnmount(){window.removeEventListener("scroll",this.handleScroll)}isLogin(){localStorage.getItem("name")&&this.setState({flagLogin:!0})}isAdmin(){"duong171099"==localStorage.getItem("user")&&this.setState({flagAdmin:!0})}componentDidUpdate(e,t){this.state.logout&&!t.logout&&(0,s.redirect)("/login")}render(){let{isDropdownOpen:e,logout:t,userName:i,user:n}=this.state,{isNavbarVisible:s}=this.state;return(0,a.jsxs)("nav",{className:"sb-topnav navbar navbar-expand navbar-dark bg-dark ".concat(s?"":"navbar-hidden"),children:[(0,a.jsxs)("div",{className:"logo-tieude",style:{display:"flex",flexDirection:"row"},children:[(0,a.jsx)(c.default,{href:"/hsk",className:"navbar-brand header-logo",children:(0,a.jsx)("span",{className:"ml-2 header-logo-span",children:(0,a.jsx)("h1",{children:"DTips Hanzi"})})}),(0,a.jsx)(d,{toggleMenuSideVisibility:this.toggleMenuSideVisibility})]}),(0,a.jsxs)("ul",{className:"menuSide-column",children:[(0,a.jsx)(h,{path:"/hsk",itemName:"Gi\xe1o Tr\xecnh HSK",icon:(0,a.jsx)("i",{className:"nav-icon fa-solid  fa-newspaper"})}),(0,a.jsx)(h,{path:"/luanngu/hocnhi",itemName:"Gi\xe1o Tr\xecnh Luận Ngữ",icon:(0,a.jsx)("i",{className:"nav-icon fa-solid fa-book"})}),(0,a.jsx)(h,{path:"/thamkhao",itemName:"T\xe0i Liệu Tham Khảo",icon:(0,a.jsx)("i",{className:"nav-icon fa-solid fa-pen-to-square"})})]}),(0,a.jsx)("ul",{className:"navbar-nav ms-md-0 me-3 me-lg-4",children:(0,a.jsx)(r.Z,{isStudy:this.props.isStudy})})]})}constructor(e){super(e),this.handleScroll=()=>{let{lastScrollY:e}=this.state,t=window.scrollY,{isNavbarVisible:i}=this.state;t>e?this.setState({isNavbarVisible:!1}):this.setState({isNavbarVisible:!0}),this.setState({lastScrollY:t})},this.toggleDropdown=()=>{this.setState(e=>({isDropdownOpen:!e.isDropdownOpen}))},this.toggleMenuSideVisibility=()=>{this.props.toggleMenuSide()},this.loginFunction=()=>{this.setState({logout:!0})},this.LogoutFunction=()=>{localStorage.clear(),o().fire({position:"center",icon:"success",title:"Logout Success",showConfirmButton:!1,timer:1500}),this.setState({logout:!0})},this.state={isDropdownOpen:!1,logout:!1,flagLogin:!1,flagAdmin:!1,userName:null,user:null,isNavbarVisible:!0,lastScrollY:0}}}let d=e=>{let{toggleMenuSideVisibility:t}=e;return(0,a.jsx)("button",{className:"btn btn-link btn-sm order-lg-0 me-4 me-lg-0",id:"sidebarToggle",onClick:t,children:(0,a.jsx)("i",{className:"fas fa-bars"})})};function h(e){return(0,a.jsx)("li",{children:(0,a.jsx)(c.default,{href:e.path,legacyBehavior:!0,children:(0,a.jsxs)("a",{className:"nav-link1",children:[e.icon,(0,a.jsx)("div",{className:"isShowitemName",children:e.itemName})]})})})}var g=i(5606);class m extends n.Component{componentDidMount(){this.getAllData()}render(){return(0,a.jsxs)("div",{className:"sb-nav-fixed",children:[(0,a.jsx)(u,{toggleMenuSide:this.toggleMenuSideVisibility,flagLogin:this.props.flagLogin,flagAdmin:this.props.flagAdmin,isStudy:this.props.isStudy}),(0,a.jsx)("div",{className:"UserContainer d-md-inline-block",children:(0,a.jsx)("div",{className:"UserContainer-block",children:(0,a.jsx)("div",{className:"table-container col",id:"table-container",style:{backgroundColor:"rgb(243, 243, 243)"},children:(0,a.jsx)("div",{className:"table-container-header",children:this.props.body})})})})]})}constructor(e){super(e),this.toggleMenuSideVisibility=()=>{this.setState(e=>({isMenuSideVisible:!e.isMenuSideVisible}))},this.getData=async()=>{localStorage.getItem("user"),localStorage.getItem("name"),localStorage.getItem("allData")},this.getAllData=async()=>{try{let e=(await (0,g.UD)("/users")).map(e=>{if("account"===e.key&&e.value){let t={};for(let i in e.value)if(e.value.hasOwnProperty(i)){let{username:a,password:n,...s}=e.value[i];t[i]=s}return{...e,value:t}}return e});await localStorage.setItem("allData",JSON.stringify(e))}catch(e){console.error("Error fetching data:",e)}},this.state={isMenuSideVisible:!0}}}var v=m},9768:function(e,t,i){"use strict";i.d(t,{Z:function(){return o}});var a=i(7437),n=i(2265),s={src:"/_next/static/media/Loading.3170e5c7.gif",height:480,width:475,blurWidth:0,blurHeight:0},l=i(6648);class o extends n.Component{render(){return(0,a.jsx)("div",{className:"loadingData",children:(0,a.jsxs)("div",{className:"loadingData-container",children:[(0,a.jsx)(l.default,{src:s,alt:"Loading...",width:100,height:100}),(0,a.jsx)("h2",{children:"Website đang tải dữ liệu, xin vui l\xf2ng chờ trong gi\xe2y l\xe1t"})]})})}}},8433:function(e,t,i){"use strict";i.d(t,{Z:function(){return s}});var a=i(7437),n=i(2265);function s(e){let{value:t,onChange:i,className:s="",placeholder:l="",onKeyDown:o}=e,c=(0,n.useRef)(null),r=()=>{let e=c.current;e&&(e.style.height="auto",e.style.height=e.scrollHeight+"px")};return(0,n.useEffect)(()=>{r()},[t]),(0,n.useEffect)(()=>{r()},[]),(0,a.jsx)("textarea",{ref:c,className:"form-control ".concat(s),value:t,onChange:i,placeholder:l,rows:1,style:{overflow:"hidden",resize:"none"},onKeyDown:o})}},8728:function(e,t,i){"use strict";async function a(e){let t=await fetch("/api/translate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e})}),i=await t.json();return console.log(i),i.result}i.d(t,{y:function(){return a}})}},function(e){e.O(0,[4358,7481,9208,9461,5973,7143,8472,6901,4547,2971,7023,1744],function(){return e(e.s=923)}),_N_E=e.O()}]);