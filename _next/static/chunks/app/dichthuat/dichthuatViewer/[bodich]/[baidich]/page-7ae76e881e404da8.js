(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[794],{923:function(e,a,i){Promise.resolve().then(i.bind(i,4278))},4278:function(e,a,i){"use strict";i.d(a,{default:function(){return m}});var t=i(7437),c=i(2265),n=i(8708),s=i(35),l=i(4379),o=i.n(l),r=i(5606),u=i(8833),h=i(1795),d=i(9768);function m(e){let{bodich:a,baidich:i}=e,[l,m]=(0,c.useState)({dichthuat:null,youtubeLink:null,webLink:null,tieude:null,tieudeTiengTrung:null,author:null,imgAuthor:null,id:null,error:null,nav:!1,tuMois:{},tuMoiNghias:{},tuMoiNghiaGets:{},tuMoiPinyins:{},tumoiViduGets:{},tuMoiVidus:{},tuMoiViduDichs:{},tuMoiViduPinyins:{},hanviets:{},baiDich:null,tiengTrungs:{},dichNghias:{}}),[y,g]=(0,c.useState)(!0),[k,v]=(0,c.useState)(!1),[j,x]=(0,c.useState)({}),[w,f]=(0,c.useState)({});(0,c.useEffect)(()=>{N()},[]);let p=async()=>{g(!0);let e=localStorage.getItem("user"),a=localStorage.getItem("name"),t=localStorage.getItem("userImage"),c="/users/dashboard/".concat(e,"/").concat(i),n="".concat(c,"/tiengTrung"),s="".concat(c,"/dichNghia"),{tieude:u,tiengTrungs:h,dichNghias:d,youtubeLink:y,webLink:k,tieudeTiengTrung:v,author:j,imgAuthor:x,embedLink:w}=l,f=new Date().toISOString(),p=Object.values(d).filter(e=>null!==e),N=Object.values(h);try{let e=O(y);await Promise.all([(0,r.Pf)("".concat(c,"/username"),a),(0,r.Pf)("".concat(c,"/weblink"),y),(0,r.Pf)("".concat(c,"/tieudeTiengTrung"),v),(0,r.Pf)("".concat(c,"/tieude"),u),(0,r.Pf)("".concat(c,"/link"),w),(0,r.Pf)("".concat(c,"/author"),j),(0,r.Pf)("".concat(c,"/imgAuthor"),x),(0,r.Pf)("".concat(c,"/dateTime"),f),(0,r.Pf)("".concat(c,"/id"),e),(0,r.Pf)("".concat(c,"/userImage"),t)]),await Promise.all(p.map((e,a)=>{let i="".concat(s,"/").concat(a);(0,r.Pf)(i,e)})),await Promise.all(N.map((e,a)=>{let i="".concat(n,"/").concat(a);(0,r.Pf)(i,e)})),await o().fire({position:"center",icon:"success",title:"Đăng b\xe0i th\xe0nh c\xf4ng",showConfirmButton:!1,timer:1500}),m(e=>({...e,nav:!0}))}catch(a){console.error("Lỗi tạo b\xe0i mới:",a);let e={message:"Lỗi tạo b\xe0i mới: "+a.message};o().fire(a.message,"","info"),m(a=>({...a,error:e}))}finally{g(!1)}},N=async()=>{g(!0);let e=localStorage.getItem("user"),t="/users/dichthuat/".concat(a),c="/users/dichthuat/".concat(a,"/listBaihoc/").concat(i),n="".concat(c,"/noidung"),s="".concat(c,"/").concat(e,"/baidich"),l="".concat(c,"/").concat(e,"/tumoi"),[o,u,h,d,y,k,v,j,x]=await Promise.all([(0,r.UD)(l),(0,r.eO)("".concat(c,"/tieude")),(0,r.eO)("".concat(c,"/link")),(0,r.eO)("".concat(c,"/weblink")),(0,r.eO)("".concat(c,"/tieudeTiengTrung")),(0,r.eO)("".concat(t,"/author")),(0,r.eO)("".concat(t,"/imgAuthor")),(0,r.UD)(s),(0,r.UD)(n)]),w=h?"https://www.youtube.com/embed/".concat(O(h)):null,f={},p={},N={},b={},P={},C={},T={},D={};o&&await Promise.all(o.map(async e=>{f[e.key]=await (0,r.UD)("/".concat(l,"/").concat(e.key,"/nghia")),N[e.key]=await (0,r.eO)("/".concat(l,"/").concat(e.key,"/pinyin")),D[e.key]=await (0,r.eO)("/".concat(l,"/").concat(e.key,"/hanviet")),f[e.key]&&await Promise.all(f[e.key].map(async a=>{p[a.key]=await (0,r.eO)("/".concat(l,"/").concat(e.key,"/nghia/").concat(a.key,"/nghia")),b[a.key]=await (0,r.UD)("/".concat(l,"/").concat(e.key,"/nghia/").concat(a.key,"/vidu")),b[a.key]&&await Promise.all(b[a.key].map(async i=>{C[i.key]=await (0,r.eO)("/".concat(l,"/").concat(e.key,"/nghia/").concat(a.key,"/vidu/").concat(i.key,"/nghia")),P[i.key]=await (0,r.eO)("/".concat(l,"/").concat(e.key,"/nghia/").concat(a.key,"/vidu/").concat(i.key,"/vidu")),T[i.key]=await (0,r.eO)("/".concat(l,"/").concat(e.key,"/nghia/").concat(a.key,"/vidu/").concat(i.key,"/pinyin"))}))}))}));let S={},L={};x&&await Promise.all(x.map(async e=>{S[e.key]=await (0,r.eO)("/".concat(n,"/").concat(e.key,"/tiengTrung"))})),j&&await Promise.all(j.map(async e=>{L[e.key]=await (0,r.eO)("/".concat(s,"/").concat(e.key))})),m(a=>({...a,webLink:d,tieudeTiengTrung:y,tieude:u,author:k,imgAuthor:v,youtubeLink:h,noiDungBaiDich:x,user:e,tuMoiNghias:p,tuMoiNghiaGets:f,tuMoiPinyins:N,tuMoiViduPinyins:T,tumoiViduGets:b,tuMoiVidus:P,tuMoiViduDichs:C,tuMois:o,baiDich:j,embedLink:w,hanviets:D,tiengTrungs:S,dichNghias:L})),g(!1)},b=async()=>{g(!0);let{baiDich:e,dichNghias:t={}}=l,c=localStorage.getItem("user"),n="/users/dichthuat/".concat(a,"/listBaihoc/").concat(i,"/").concat(c,"/baidich");console.log(t);try{let e=Object.values(t).filter(e=>null!==e);if(!e.length)throw Error("No valid dichNghias to save.");await Promise.all(e.map((e,a)=>{let i="".concat(n,"/").concat(a);return(0,r.Pf)(i,e)})),await o().fire({position:"center",icon:"success",title:"Tạo b\xe0i mới th\xe0nh c\xf4ng",showConfirmButton:!1,timer:1500})}catch(e){g(!1),console.error("Lỗi tạo b\xe0i mới:",e),await o().fire("Lỗi tạo b\xe0i mới: "+e.message,"","info")}finally{g(!1)}},P=(e,a)=>e.split(RegExp("(".concat(a,")"),"gi")).map((e,i)=>e.toLowerCase()===a.toLowerCase()?(0,t.jsx)("span",{style:{color:"red"},children:e},i):e),O=e=>{var a=e.split("=");return a[1]?a[1].split("&")[0]:"null"},C=()=>{v(!k)},T=e=>{f({...w,[e]:!w[e]})},D=(e,a)=>{x({...j,[e+"-"+a]:!0})},S=(e,a)=>{x({...j,[e+"-"+a]:!1})},L=(e,a)=>{m(i=>({...i,dichNghias:{...i.dichNghias,[a]:e.target.value}}))},{tieude:Z,baiDich:I,webLink:M,tieudeTiengTrung:B,author:E,imgAuthor:_,embedLink:U,noiDungBaiDich:V,tiengTrungs:A,dichNghias:H}=l;return(0,t.jsx)(n.Z,{body:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"dichthuat-container row",children:[(0,t.jsx)("div",{className:"col-5",children:(0,t.jsx)("div",{children:(0,t.jsx)(u.Z,{videoLink:U||null,webLink:M||null,tieudeTiengTrung:B||null,author:E||null,imgAuthor:_||null,title:Z||null})})}),(0,t.jsx)("div",{className:"col",children:(0,t.jsx)("div",{className:"card border-primary cardPhandich",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("div",{className:"",style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[(0,t.jsx)("h4",{className:"card-title",children:"Phần Dịch"}),(0,t.jsxs)("div",{style:{display:"flex"},children:[(0,t.jsx)(s.Z,{className:"button-css",variant:"info",onClick:b,children:"Lưu b\xe0i dịch"}),(0,t.jsx)(s.Z,{className:"button-css",variant:"danger",onClick:p,children:"Đăng b\xe0i"})]})]}),(()=>{let{tiengTrungs:e,dichNghias:a=[]}=l,i=Object.values(e);return i&&i.length>0?(0,t.jsx)("div",{className:"",children:i.map((e,i)=>(0,t.jsxs)("div",{className:"phanDich",children:[(0,t.jsx)("div",{children:e||""}),(0,t.jsx)("textarea",{value:a[i]||"",onChange:e=>L(e,i),placeholder:"Nhập b\xe0i dịch của bạn"}),(0,t.jsx)("hr",{})]},i))}):null})()]})})})]}),(0,t.jsxs)("div",{className:"tumoi-area",children:[(0,t.jsxs)("div",{className:"tumoi-area-header",children:[(0,t.jsx)("h2",{className:"card-title",children:"Từ mới"}),k?(0,t.jsx)(s.Z,{variant:"danger",onClick:C,children:"Hủy"}):(0,t.jsx)(s.Z,{variant:"info",onClick:C,children:"Th\xeam từ mới"})]}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col",children:(0,t.jsxs)("div",{className:"tumoi-container",children:[(0,t.jsx)("div",{className:"tumoi-header"}),(()=>{let{tuMois:e,tuMoiNghias:a,tuMoiNghiaGets:i,tuMoiPinyins:c,tumoiViduGets:n,tuMoiVidus:o,tuMoiViduDichs:r,tuMoiViduPinyins:u,hanviets:h}=l;return e&&e.length>0?e.map((e,l)=>{let d=i[e.key],m=c[e.key],y=h[e.key],g=w[e.key];return(0,t.jsx)("div",{className:"tumoi-item",children:(0,t.jsxs)("div",{className:"tumoi-display",children:[(0,t.jsxs)("div",{className:"tumoi-display-header",children:[(0,t.jsxs)("h4",{children:[l+1,", ",e.key,"  【",y,"】"]}),(0,t.jsx)(s.Z,{variant:g?"danger":"warning",onClick:()=>T(e.key),children:g?"Ẩn bớt nghĩa của từ":"Hiển thị nghĩa của từ"})]}),g&&d&&d.map((i,c)=>{let l=n[i.key],h=a[i.key],d=j[e.key+"-"+i.key];return(0,t.jsxs)("div",{className:"tumoi-nghia",children:[(0,t.jsxs)("h5",{children:[e.key,"/ ",m]}),(0,t.jsx)("hr",{}),(0,t.jsxs)("h4",{className:"tumoi-nghia-shower",children:["Nghĩa ",c+1,": ",h]}),l&&l.map((a,i)=>{let c=o[a.key],n=r[a.key],s=u[a.key];return d||0===i?(0,t.jsxs)("div",{className:"tumoi-vidu",children:[(0,t.jsxs)("h5",{children:["V\xed dụ ",i+1]}),(0,t.jsx)("p",{children:P(c,e.key)}),(0,t.jsx)("p",{children:s}),(0,t.jsx)("p",{children:n})]},i):null}),d?(0,t.jsx)(s.Z,{variant:"warning",onClick:()=>S(e.key,i.key),children:"Ẩn bớt v\xed dụ"}):(0,t.jsx)(s.Z,{variant:"info",onClick:()=>D(e.key,i.key),children:"Hiển thị th\xeam v\xed dụ"})]},c)})]})},l)}):null})()]})}),k?(0,t.jsx)(h.Z,{getData:N,luuBaiDich:()=>b()}):null]})]}),y?(0,t.jsx)(d.Z,{}):null]})})}}},function(e){e.O(0,[461,481,291,648,885,439,708,151,971,23,560],function(){return e(e.s=923)}),_N_E=e.O()}]);