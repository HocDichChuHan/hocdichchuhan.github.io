(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2794],{923:function(e,t,n){Promise.resolve().then(n.bind(n,7684))},7684:function(e,t,n){"use strict";n.d(t,{default:function(){return y}});var i=n(7437),a=n(2265),s=n(8708),l=n(35),c=n(4379),r=n.n(c),o=n(5606),A=n(8833),u=n(1795),d=n(9768);n(3508);var h=n(2811),g=n(357);let m=new h.ZP({apiKey:g.env.OPENAI_API_KEY,dangerouslyAllowBrowser:!0});async function v(e){try{let t=await m.chat.completions.create({model:"gpt-4o-mini",messages:[{role:"system",content:"Bạn l\xe0 một dịch giả tiếng Trung sang tiếng Việt. Dịch ch\xednh x\xe1c từng c\xe2u, giữ nguy\xean độ d\xe0i tương đương với c\xe2u gốc để dễ lồng tiếng. Kh\xf4ng cắt nghĩa ngắn gọn, kh\xf4ng giải th\xedch th\xeam."},{role:"user",content:e}],temperature:.3});return console.log(123),t.choices[0].message.content.trim()}catch(e){throw console.error("Lỗi khi dịch:",e),e}}function y(e){let{bodich:t,baidich:n}=e,[c,h]=(0,a.useState)({dichthuat:null,youtubeLink:null,webLink:null,tieude:null,tieudeTiengTrung:null,author:null,imgAuthor:null,id:null,error:null,nav:!1,tuMois:{},tuMoiNghias:{},tuMoiNghiaGets:{},tuMoiPinyins:{},tumoiViduGets:{},tuMoiVidus:{},tuMoiViduDichs:{},tuMoiViduPinyins:{},hanviets:{},baiDich:null,tiengTrungs:{},dichNghias:{},BaidichData:{},user:null,allData:null}),[g,m]=(0,a.useState)(!0),[y,p]=(0,a.useState)(!1),x=(0,a.useRef)(null),f=(0,a.useRef)(null),[j,b]=(0,a.useState)({}),[k,w]=(0,a.useState)({}),[N,P]=(0,a.useState)([]),[B,E]=(0,a.useState)(!1),[C,I]=(0,a.useState)(!1);(0,a.useEffect)(()=>{S(),O(),Q();let e=document.querySelectorAll(".phanDich textarea");return e.forEach(e=>{e.addEventListener("input",function(){this.style.height="auto",this.style.height=this.scrollHeight+"px"})}),()=>{e.forEach(e=>{e.removeEventListener("input",function(){this.style.height="auto",this.style.height=this.scrollHeight+"px"})})}},[]);let O=()=>{localStorage.getItem("name")&&E(!0)},Q=()=>{"duong171099"==localStorage.getItem("user")&&I(!0)},T=async()=>{m(!0);let e=localStorage.getItem("user"),t=localStorage.getItem("name"),i=localStorage.getItem("userImage"),a="/users/dashboard/".concat(e,"/").concat(n),s="".concat(a,"/tiengTrung"),l="".concat(a,"/noidung"),A="".concat(a,"/dichNghia"),{BaidichData:u,tieude:d,tiengTrungs:g,dichNghias:v,youtubeLink:y,webLink:p,tieudeTiengTrung:x,author:f,imgAuthor:j,embedLink:b}=c,k=new Date().toISOString(),w=Object.values(v).filter(e=>null!==e),N=u&&u.noidung&&Object.values(u.noidung).filter(e=>null!==e),P=Object.values(g);try{let e=z(y);await Promise.all([(0,o.Pf)("".concat(a,"/username"),t),(0,o.Pf)("".concat(a,"/weblink"),y),(0,o.Pf)("".concat(a,"/tieudeTiengTrung"),x),(0,o.Pf)("".concat(a,"/tieude"),d),(0,o.Pf)("".concat(a,"/link"),b),(0,o.Pf)("".concat(a,"/author"),f),(0,o.Pf)("".concat(a,"/imgAuthor"),j),(0,o.Pf)("".concat(a,"/dateTime"),k),(0,o.Pf)("".concat(a,"/id"),e),(0,o.Pf)("".concat(a,"/userImage"),i)]),await Promise.all(w.map((e,t)=>{let n="".concat(A,"/").concat(t);(0,o.Pf)(n,e)})),await Promise.all(P.map((e,t)=>{let n="".concat(s,"/").concat(t);(0,o.Pf)(n,e)})),await Promise.all(N.map((e,t)=>{let n="".concat(l,"/").concat(t,"/hanviet"),i="".concat(l,"/").concat(t,"/pinyin"),a="".concat(l,"/").concat(t,"/tiengtrung");(0,o.Pf)(n,e.hanviet),(0,o.Pf)(i,e.pinyin),(0,o.Pf)(a,e.tiengTrung)})),m(!1),await r().fire({position:"center",icon:"success",title:"Đăng b\xe0i th\xe0nh c\xf4ng",showConfirmButton:!1,timer:1500}),h(e=>({...e,nav:!0}))}catch(t){console.error("Lỗi tạo b\xe0i mới:",t);let e={message:"Lỗi tạo b\xe0i mới: "+t.message};r().fire(t.message,"","info"),h(t=>({...t,error:e}))}finally{m(!1)}},S=async()=>{let e=localStorage.getItem("user");m(!0);let i=JSON.parse(localStorage.getItem("allData")),a=i.find(e=>"dichthuat"===e.key),s=a.value[t],l=a.value[t].listBaihoc[n],c=a.value[t].listBaihoc[n][e];var r=null,o=null;c&&(r=c.tumoi?Object.entries(c.tumoi).map(e=>{let[t,n]=e;return{key:t,value:n}}):null,o=c.baidich?Object.entries(c.baidich).map(e=>{let[t,n]=e;return{key:t,value:n}}):null);let A=l.noidung?Object.entries(l.noidung).map(e=>{let[t,n]=e;return{key:t,value:n}}):null,u="/users/dichthuat/".concat(t,"/listBaihoc/").concat(n);"".concat(u,"/").concat(e,"/baidich"),"".concat(u,"/").concat(e,"/tumoi");let[d,g,v,y,p,x,f,j,b]=await Promise.all([r,l.tieude,l.link,l.weblink,l.tieudeTiengTrung,s.author,s.imgAuthor,o,A]),k=v?"https://www.youtube.com/embed/".concat(z(v)):null,w={},N={},P={},B={},E={},C={},I={},O={};d&&await Promise.all(d.map(async(e,t)=>{let n=d.find(t=>t.key===e.key);w[e.key]=Object.entries(n.value.nghia).map(e=>{let[t,n]=e;return{key:t,value:n}}),P[e.key]=n.value.pinyin,O[e.key]=n.value.hanviet,w[e.key]&&await Promise.all(w[e.key].map(async(t,n)=>{let i=c.tumoi[e.key].nghia[t.key];N[t.key]=i.nghia,B[t.key]=i.vidu?await Object.entries(i.vidu).map(e=>{let[t,n]=e;return{key:t,value:n}}):null,B[t.key]&&await Promise.all(B[t.key].map(async e=>{C[e.key]=i.vidu[e.key].nghia,E[e.key]=i.vidu[e.key].vidu,I[e.key]=i.vidu[e.key].pinyin}))}))}));let Q={},T={};b&&await Promise.all(b.map(async e=>{l.noidung[e.key]&&(Q[e.key]=l.noidung[e.key].tiengTrung)})),j&&await Promise.all(j.map(async e=>{j[e.key]&&(T[e.key]=j[e.key].value)})),h(t=>({...t,webLink:y,tieudeTiengTrung:p,tieude:g,author:x,imgAuthor:f,youtubeLink:v,noiDungBaiDich:b,user:e,tuMoiNghias:N,tuMoiNghiaGets:w,tuMoiPinyins:P,tuMoiViduPinyins:I,tumoiViduGets:B,tuMoiVidus:E,tuMoiViduDichs:C,tuMois:d,baiDich:j,embedLink:k,hanviets:O,tiengTrungs:Q,dichNghias:T,user:e,allData:i,BaidichData:l})),m(!1)},D=async()=>{m(!0);let{baiDich:e,dichNghias:i={}}=c,a=localStorage.getItem("user"),s="/users/dichthuat/".concat(t,"/listBaihoc/").concat(n,"/").concat(a,"/baidich");try{let e=Object.values(i).filter(e=>null!==e);if(!e.length)throw Error("No valid dichNghias to save.");await Promise.all(e.map((e,t)=>{let n="".concat(s,"/").concat(t);return(0,o.Pf)(n,e)})),await r().fire({position:"center",icon:"success",title:"Tạo b\xe0i mới th\xe0nh c\xf4ng",showConfirmButton:!1,timer:1500})}catch(e){m(!1),console.error("Lỗi tạo b\xe0i mới:",e),await r().fire("Lỗi tạo b\xe0i mới: "+e.message,"","info")}finally{m(!1)}},L=(e,t)=>e.split(RegExp("(".concat(t,")"),"gi")).map((e,n)=>e.toLowerCase()===t.toLowerCase()?(0,i.jsx)("span",{style:{color:"red"},children:e},n):e),z=e=>{var t=e.split("=");return t[1]?t[1].split("&")[0]:"null"},M=()=>{f.current&&f.current.scrollIntoView({behavior:"smooth"})},Z=e=>{w({...k,[e]:!k[e]})},U=(e,t)=>{b({...j,[e+"-"+t]:!0})},V=(e,t)=>{b({...j,[e+"-"+t]:!1})},R=(e,t)=>{h(n=>({...n,dichNghias:{...n.dichNghias,[t]:e.target.value}}))},_=e=>{P(t=>{let n=[...t];return n[e]=!n[e],n})},{tieude:H,baiDich:F,webLink:G,tieudeTiengTrung:q,author:K,imgAuthor:J,embedLink:W,noiDungBaiDich:Y,tiengTrungs:X,dichNghias:$}=c;return(0,i.jsx)(s.Z,{body:(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"dichthuat-container row",ref:f,children:[(0,i.jsxs)("div",{className:"col-12 col-md-5",children:[(0,i.jsx)("div",{children:(0,i.jsx)(A.Z,{videoLink:W||null,webLink:G||null,tieudeTiengTrung:q||null,author:K||null,imgAuthor:J||null,title:H||null})}),(0,i.jsxs)("div",{style:{display:"flex"},children:[(0,i.jsx)(l.Z,{className:B?"button-css":"button-css disable",disabled:!B,variant:"info",onClick:D,children:"Lưu b\xe0i dịch"}),(0,i.jsx)(l.Z,{className:B?"button-css":"button-css disable",disabled:!B,variant:"danger",onClick:T,children:"Đăng b\xe0i"})]})]}),(0,i.jsx)("div",{className:"col",children:(0,i.jsx)("div",{className:"card border-primary cardPhandich",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("div",{className:"",style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:(0,i.jsx)("h4",{className:"card-title",children:"Phần Dịch"})}),(()=>{let{BaidichData:e,tiengTrungs:t,dichNghias:n=[]}=c;return(Object.values(t),e&&e.noidung)?(0,i.jsx)("div",{className:"showNguyenVan",children:e.noidung.map((e,t)=>e&&(0,i.jsxs)("div",{className:"phanDich",children:[(0,i.jsx)("div",{className:"tiengTrung",onClick:()=>_(t),children:e.tiengTrung||""}),e.pinyin&&N[t]&&(0,i.jsx)("div",{className:"showNguyenVan-pinyin",children:e.pinyin||""}),e.hanviet&&N[t]&&(0,i.jsx)("div",{className:"showNguyenVan-hanviet",children:e.hanviet||""}),(0,i.jsx)("textarea",{value:n[t-1]||"",onChange:e=>R(e,t-1),placeholder:"Nhập b\xe0i dịch của bạn"}),(0,i.jsx)(l.Z,{variant:"danger",onClick:()=>v(e.tiengTrung),children:"Translate"}),(0,i.jsx)("hr",{})]},t))}):null})()]})})})]}),(0,i.jsxs)("div",{className:"tumoi-area",children:[(0,i.jsxs)("div",{className:"tumoi-area-header",children:[(0,i.jsx)("h2",{className:"card-title",children:"Từ mới"}),(0,i.jsx)(l.Z,{className:B?"button-css":"button-css disable",disabled:!B,variant:"info",onClick:()=>{p(!y),x.current&&x.current.scrollIntoView({behavior:"smooth"})},children:"Th\xeam từ mới"})]}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col",children:(0,i.jsxs)("div",{className:"tumoi-container",children:[(0,i.jsx)("div",{className:"tumoi-header"}),(()=>{let{user:e,allData:a,tuMois:s,tuMoiNghias:r,tuMoiNghiaGets:o,tuMoiPinyins:A,tumoiViduGets:u,tuMoiVidus:d,tuMoiViduDichs:h,tuMoiViduPinyins:g,hanviets:m}=c;return a&&(a.find(e=>"dichthuat"===e.key).value[t].listBaihoc[n][e],s&&s.length>0)?s.map((e,t)=>{let n=e.value.nghia,a=e.value.pinyin,s=e.value.hanviet,c=k[e.key];return(0,i.jsx)("div",{className:"tumoi-item",children:(0,i.jsxs)("div",{className:"tumoi-display",children:[(0,i.jsxs)("div",{className:"tumoi-display-header",children:[(0,i.jsxs)("h4",{children:[t+1,", ",e.key,"  【",s,"】(",a,")"]}),(0,i.jsx)(l.Z,{variant:c?"danger":"warning",onClick:()=>Z(e.key),children:c?"Ẩn bớt nghĩa của từ":"Hiển thị nghĩa của từ"})]}),c&&n&&n.map((t,n)=>{let a=t.vidu?t.vidu:null,s=t.nghia,c=j[e.key+"-"+t.key];return(0,i.jsxs)("div",{className:"tumoi-nghia",children:[(0,i.jsxs)("h4",{className:"tumoi-nghia-shower",children:["Nghĩa ",n+1,": ",s]}),a&&a.map((t,n)=>{let a=t.vidu,s=t.nghia,l=t.pinyin;return c||0===n?(0,i.jsxs)("div",{className:"tumoi-vidu",children:[(0,i.jsxs)("h5",{children:["V\xed dụ ",n+1]}),(0,i.jsx)("p",{children:L(a,e.key)}),(0,i.jsx)("p",{children:l}),(0,i.jsx)("p",{children:s})]},n):null}),c?(0,i.jsx)(l.Z,{variant:"warning",onClick:()=>V(e.key,nghia.key),children:"Ẩn bớt v\xed dụ"}):(0,i.jsx)(l.Z,{variant:"info",onClick:()=>U(e.key,nghia.key),children:"Hiển thị th\xeam v\xed dụ"}),(0,i.jsx)("hr",{})]},n)})]})},t)}):null})()]})}),(0,i.jsx)("div",{ref:x,children:(0,i.jsx)(u.Z,{flagLogin:B,scrollBaidich:()=>M(),bodich:t,baidich:n})})]})]}),g?(0,i.jsx)(d.Z,{}):null]})})}},3508:function(e,t,n){"use strict";n.d(t,{GJ:function(){return v},LA:function(){return d},PA:function(){return h},V2:function(){return g},bg:function(){return y},o0:function(){return A},xb:function(){return u},yI:function(){return m}});var i=n(7437),a=n(9782),s=n(1213),l=n(2265),c=n(5749),r=n(6648),o=n(8472);let A=e=>{if(!e)return"";try{let t=new Date(e);return(0,a.WU)(t,"h:mm a, dd 'Th\xe1ng' MM, yyyy",{locale:s.vi})}catch(t){return console.error("Invalid date format:",e),e}};function u(e){return(0,i.jsxs)("div",{className:"itemCard-container-dashboardView",children:[(0,i.jsxs)("div",{className:"itemCard-UserName itemcard-UserName-sticky",children:[(0,i.jsxs)("div",{className:"itemCard-UserName-1",children:[(0,i.jsx)(r.default,{src:e.imgUser?e.imgUser:c.Z,alt:"img",width:30,height:30}),(0,i.jsxs)("div",{className:"itemCard-UserName-container",children:[(0,i.jsx)("h4",{className:"username-card",children:e.username}),(0,i.jsx)("p",{style:{margin:"0"},children:A(e.dateTime)})]})]}),(()=>{let t=localStorage.getItem("name");return e.username==t?(0,i.jsx)("div",{className:"itemCard-UserName-1",children:(0,i.jsx)("button",{className:"btn btn-options",onClick:e.removeClick,style:{padding:"0",margin:"0"},children:(0,i.jsx)("i",{className:"fa-solid fa-trash"})})}):null})()]}),(0,i.jsx)("div",{className:"itemCard-baiDich",children:e.baidich})]})}let d=(e,t)=>e?e.split(RegExp("(".concat(t,")"),"gi")).map((e,n)=>e.toLowerCase()===t.toLowerCase()?(0,i.jsx)("span",{style:{color:"red"},children:e},n):e.split("\n").map((e,t,n)=>t===n.length-1?e:(0,i.jsxs)(l.Fragment,{children:[e,(0,i.jsx)("br",{})]},t))):null,h=async e=>{try{let t=await o.Z.get("https://translate.googleapis.com/translate_a/single?client=gtx&dt=t&dt=bd&dj=1&dt=ex&dt=ld&dt=md&dt=qca&dt=rm&dt=ss&sl=zh-CN&tl=zh-TW&q=".concat(encodeURIComponent(e)));if(t.data)return t.data.sentences.filter(e=>e.trans).map(e=>e.trans.trim()).join(" ");return e}catch(t){return console.error("Lỗi khi gọi API:",t),e}},g=async e=>{try{let t=await o.Z.get("https://translate.googleapis.com/translate_a/single?client=gtx&dt=t&dt=bd&dj=1&dt=ex&dt=ld&dt=md&dt=qca&dt=rm&dt=ss&sl=zh-TW&tl=vi&q=".concat(encodeURIComponent(e)));if(t.data)return t.data;return e}catch(t){return console.error("Lỗi khi gọi API:",t),e}},m=async e=>{let t=encodeURIComponent(e),n=await o.Z.get("https://api.hanzii.net/api/search/vi/".concat(t,"?type=word&page=1&limit=2"));return n.data.found?n.data:null},v=()=>"duong171099"==localStorage.getItem("user"),y=()=>!!localStorage.getItem("name")},5749:function(e,t){"use strict";t.Z={src:"/_next/static/media/user.f64324c2.jpg",height:200,width:200,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wgARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAG0E//EABUQAQEAAAAAAAAAAAAAAAAAABMk/9oACAEBAAEFAlo//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAwEBPwF//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAgEBPwF//8QAGBAAAgMAAAAAAAAAAAAAAAAAABIxQWH/2gAIAQEABj8CRqjT/8QAGBAAAgMAAAAAAAAAAAAAAAAAESEAMbH/2gAIAQEAAT8hGkETU//aAAwDAQACAAMAAAAQ+//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABgQAAIDAAAAAAAAAAAAAAAAAAARQZGh/9oACAEBAAE/ELbi5YP/2Q==",blurWidth:8,blurHeight:8}}},function(e){e.O(0,[7481,9461,630,6648,8472,609,8456,8708,8151,2971,7023,1744],function(){return e(e.s=923)}),_N_E=e.O()}]);