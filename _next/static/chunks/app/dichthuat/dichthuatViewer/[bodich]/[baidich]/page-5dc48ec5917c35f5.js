(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2794],{20923:function(e,i,t){Promise.resolve().then(t.bind(t,4278))},4278:function(e,i,t){"use strict";t.d(i,{default:function(){return v}});var a=t(57437),n=t(2265),l=t(66802),s=t(12808),c=t(64379),r=t.n(c),o=t(65606),u=t(58833),d=t(91795),h=t(19768),m=t(78728),g=t(34231);function v(e){let{bodich:i,baidich:t}=e,[c,v]=(0,n.useState)({dichthuat:null,youtubeLink:null,webLink:null,tieude:null,tieudeTiengTrung:null,author:null,imgAuthor:null,id:null,error:null,nav:!1,tuMois:{},tuMoiNghias:{},tuMoiNghiaGets:{},tuMoiPinyins:{},tumoiViduGets:{},tuMoiVidus:{},tuMoiViduDichs:{},tuMoiViduPinyins:{},hanviets:{},baiDich:null,tiengTrungs:{},dichNghias:{},BaidichData:{},user:null,allData:null}),[y,f]=(0,n.useState)(!0),[j,x]=(0,n.useState)(!1),b=(0,n.useRef)(null),p=(0,n.useRef)(null),[k,w]=(0,n.useState)({}),[N,P]=(0,n.useState)({}),[S,T]=(0,n.useState)([]),[C,O]=(0,n.useState)(!1),[I,L]=(0,n.useState)(!1);(0,n.useEffect)(()=>{V(),Z(),D()},[C]);let Z=()=>{localStorage.getItem("name")&&O(!0)},D=()=>{"duong171099"==localStorage.getItem("user")&&L(!0)},B=async()=>{f(!0);let e=localStorage.getItem("user"),i=localStorage.getItem("name"),a=localStorage.getItem("userImage"),n="/users/dashboard/".concat(e,"/").concat(t),l="".concat(n,"/tiengTrung"),s="".concat(n,"/noidung"),u="".concat(n,"/dichNghia"),{BaidichData:d,tieude:h,tiengTrungs:m,dichNghias:g,youtubeLink:y,webLink:j,tieudeTiengTrung:x,author:b,imgAuthor:p,embedLink:k}=c,w=new Date().toISOString(),N=Object.values(g).filter(e=>null!==e),P=d&&d.noidung&&Object.values(d.noidung).filter(e=>null!==e),S=Object.values(m);try{let e=A(y);await Promise.all([(0,o.Pf)("".concat(n,"/username"),i),(0,o.Pf)("".concat(n,"/weblink"),y),(0,o.Pf)("".concat(n,"/tieudeTiengTrung"),x),(0,o.Pf)("".concat(n,"/tieude"),h),(0,o.Pf)("".concat(n,"/link"),k),(0,o.Pf)("".concat(n,"/author"),b),(0,o.Pf)("".concat(n,"/imgAuthor"),p),(0,o.Pf)("".concat(n,"/dateTime"),w),(0,o.Pf)("".concat(n,"/id"),e),(0,o.Pf)("".concat(n,"/userImage"),a)]),await Promise.all(N.map((e,i)=>{let t="".concat(u,"/").concat(i);(0,o.Pf)(t,e)})),await Promise.all(S.map((e,i)=>{let t="".concat(l,"/").concat(i);(0,o.Pf)(t,e)})),await Promise.all(P.map((e,i)=>{let t="".concat(s,"/").concat(i,"/hanviet"),a="".concat(s,"/").concat(i,"/pinyin"),n="".concat(s,"/").concat(i,"/tiengtrung");(0,o.Pf)(t,e.hanviet),(0,o.Pf)(a,e.pinyin),(0,o.Pf)(n,e.tiengTrung)})),f(!1),await r().fire({position:"center",icon:"success",title:"Đăng b\xe0i th\xe0nh c\xf4ng",showConfirmButton:!1,timer:1500}),v(e=>({...e,nav:!0}))}catch(i){console.error("Lỗi tạo b\xe0i mới:",i);let e={message:"Lỗi tạo b\xe0i mới: "+i.message};r().fire(i.message,"","info"),v(i=>({...i,error:e}))}finally{f(!1)}},V=async()=>{let e=localStorage.getItem("user");f(!0),await E();let a=JSON.parse(localStorage.getItem("allData")),n=a.find(e=>"dichthuat"===e.key),l=n.value[i],s=n.value[i].listBaihoc[t],c=n.value[i].listBaihoc[t][e];var r=null,o=null;c&&(r=c.tumoi?Object.entries(c.tumoi).map(e=>{let[i,t]=e;return{key:i,value:t}}):null,o=c.baidich?Object.entries(c.baidich).map(e=>{let[i,t]=e;return{key:i,value:t}}):null);let u=s.noidung?Object.entries(s.noidung).map(e=>{let[i,t]=e;return{key:i,value:t}}):null,d="/users/dichthuat/".concat(i,"/listBaihoc/").concat(t);"".concat(d,"/").concat(e,"/baidich"),"".concat(d,"/").concat(e,"/tumoi");let[h,m,g,y,j,x,b,p,k]=await Promise.all([r,s.tieude,s.link,s.weblink,s.tieudeTiengTrung,l.author,l.imgAuthor,o,u]),w=g?"https://www.youtube.com/embed/".concat(A(g)):null,N={},P={},S={},T={},C={},O={},I={},L={};h&&await Promise.all(h.map(async(e,i)=>{let t=h.find(i=>i.key===e.key);N[e.key]=Object.entries(t.value.nghia).map(e=>{let[i,t]=e;return{key:i,value:t}}),S[e.key]=t.value.pinyin,L[e.key]=t.value.hanviet,N[e.key]&&await Promise.all(N[e.key].map(async(i,t)=>{let a=c.tumoi[e.key].nghia[i.key];P[i.key]=a.nghia,T[i.key]=a.vidu?await Object.entries(a.vidu).map(e=>{let[i,t]=e;return{key:i,value:t}}):null,T[i.key]&&await Promise.all(T[i.key].map(async e=>{O[e.key]=a.vidu[e.key].nghia,C[e.key]=a.vidu[e.key].vidu,I[e.key]=a.vidu[e.key].pinyin}))}))}));let Z={},D={};k&&await Promise.all(k.map(async e=>{s.noidung[e.key]&&(Z[e.key]=s.noidung[e.key].tiengTrung)})),p&&await Promise.all(p.map(async e=>{p[e.key]&&(D[e.key]=p[e.key].value)})),v(i=>({...i,webLink:y,tieudeTiengTrung:j,tieude:m,author:x,imgAuthor:b,youtubeLink:g,noiDungBaiDich:k,user:e,tuMoiNghias:P,tuMoiNghiaGets:N,tuMoiPinyins:S,tuMoiViduPinyins:I,tumoiViduGets:T,tuMoiVidus:C,tuMoiViduDichs:O,tuMois:h,baiDich:p,embedLink:w,hanviets:L,tiengTrungs:Z,dichNghias:D,user:e,allData:a,BaidichData:s})),f(!1)},E=async()=>{try{let e=(await (0,o.UD)("/users")).map(e=>{if("account"===e.key&&e.value){let i={};for(let t in e.value)if(e.value.hasOwnProperty(t)){let{username:a,password:n,...l}=e.value[t];i[t]=l}return{...e,value:i}}return e});await localStorage.setItem("allData",JSON.stringify(e))}catch(e){console.error("Error fetching data:",e)}},M=async()=>{f(!0);let{baiDich:e,dichNghias:a={}}=c,n=localStorage.getItem("user"),l="/users/dichthuat/".concat(i,"/listBaihoc/").concat(t,"/").concat(n,"/baidich");try{let e=Object.values(a).filter(e=>null!==e);if(!e.length)throw Error("No valid dichNghias to save.");await Promise.all(e.map((e,i)=>{let t="".concat(l,"/").concat(i);return(0,o.Pf)(t,e)})),await r().fire({position:"center",icon:"success",title:"Tạo b\xe0i mới th\xe0nh c\xf4ng",showConfirmButton:!1,timer:1500})}catch(e){f(!1),console.error("Lỗi tạo b\xe0i mới:",e),await r().fire("Lỗi tạo b\xe0i mới: "+e.message,"","info")}finally{f(!1)}},_=(e,i)=>e.split(RegExp("(".concat(i,")"),"gi")).map((e,t)=>e.toLowerCase()===i.toLowerCase()?(0,a.jsx)("span",{style:{color:"red"},children:e},t):e),A=e=>{var i=e.split("=");return i[1]?i[1].split("&")[0]:"null"},H=()=>{p.current&&p.current.scrollIntoView({behavior:"smooth"})},R=e=>{P({...N,[e]:!N[e]})},J=(e,i)=>{w({...k,[e+"-"+i]:!0})},G=(e,i)=>{w({...k,[e+"-"+i]:!1})},W=(e,i)=>{v(t=>({...t,dichNghias:{...t.dichNghias,[i]:e.target.value}}))},z=e=>{T(i=>{let t=[...i];return t[e]=!t[e],t})},K=async(e,i)=>{let t=await (0,m.y)(e);console.log(e),v(e=>({...e,dichNghias:{...e.dichNghias,[i]:t}}))},{tieude:U,baiDich:q,webLink:F,tieudeTiengTrung:Q,author:X,imgAuthor:Y,embedLink:$,noiDungBaiDich:ee,tiengTrungs:ei,dichNghias:et}=c;return(0,a.jsx)(l.Z,{body:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"dichthuat-container row",ref:p,children:[(0,a.jsxs)("div",{className:"col-12 col-md-5",children:[(0,a.jsx)("div",{children:(0,a.jsx)(u.Z,{videoLink:$||null,webLink:F||null,tieudeTiengTrung:Q||null,author:X||null,imgAuthor:Y||null,title:U||null})}),(0,a.jsxs)("div",{style:{display:"flex"},children:[(0,a.jsx)(s.Z,{className:C?"button-css":"button-css disable",disabled:!C,variant:"info",onClick:M,children:"Lưu b\xe0i dịch"}),(0,a.jsx)(s.Z,{className:C?"button-css":"button-css disable",disabled:!C,variant:"danger",onClick:B,children:"Đăng b\xe0i"})]})]}),(0,a.jsx)("div",{className:"col",children:(0,a.jsx)("div",{className:"card border-primary cardPhandich",children:(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("div",{className:"",style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:(0,a.jsx)("h4",{className:"card-title",children:"Phần Dịch"})}),(()=>{let{BaidichData:e,tiengTrungs:i,dichNghias:t=[]}=c;return(Object.values(i),e&&e.noidung)?(0,a.jsx)("div",{className:"showNguyenVan",children:e.noidung.map((e,i)=>e&&(0,a.jsxs)("div",{className:"phanDich",children:[(0,a.jsx)("div",{className:"tiengTrung",onClick:()=>z(i),children:e.tiengTrung||""}),e.pinyin&&S[i]&&(0,a.jsx)("div",{className:"showNguyenVan-pinyin",children:e.pinyin||""}),e.hanviet&&S[i]&&(0,a.jsx)("div",{className:"showNguyenVan-hanviet",children:e.hanviet||""}),(0,a.jsx)(g.Z,{value:t[i-1]||"",placeholder:"Nhập b\xe0i dịch của bạn",className:"fs-3 colorBlue",onChange:e=>W(e,i-1)}),(0,a.jsx)(s.Z,{variant:"danger",onClick:()=>K(e.tiengTrung,i-1),children:"Translate"}),(0,a.jsx)("hr",{})]},i))}):null})()]})})})]}),(0,a.jsxs)("div",{className:"tumoi-area",children:[(0,a.jsxs)("div",{className:"tumoi-area-header",children:[(0,a.jsx)("h2",{className:"card-title",children:"Từ mới"}),(0,a.jsx)(s.Z,{className:C?"button-css":"button-css disable",disabled:!C,variant:"info",onClick:()=>{x(!j),b.current&&b.current.scrollIntoView({behavior:"smooth"})},children:"Th\xeam từ mới"})]}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col",children:(0,a.jsxs)("div",{className:"tumoi-container",children:[(0,a.jsx)("div",{className:"tumoi-header"}),(()=>{let{user:e,allData:n,tuMois:l,tuMoiNghias:r,tuMoiNghiaGets:o,tuMoiPinyins:u,tumoiViduGets:d,tuMoiVidus:h,tuMoiViduDichs:m,tuMoiViduPinyins:g,hanviets:v}=c;return n&&(n.find(e=>"dichthuat"===e.key).value[i].listBaihoc[t][e],l&&l.length>0)?l.map((e,i)=>{let t=e.value.nghia,n=e.value.pinyin,l=e.value.hanviet,c=N[e.key];return(0,a.jsx)("div",{className:"tumoi-item",children:(0,a.jsxs)("div",{className:"tumoi-display",children:[(0,a.jsxs)("div",{className:"tumoi-display-header",children:[(0,a.jsxs)("h4",{children:[i+1,", ",e.key,"  【",l,"】(",n,")"]}),(0,a.jsx)(s.Z,{variant:c?"danger":"warning",onClick:()=>R(e.key),children:c?"Ẩn bớt nghĩa của từ":"Hiển thị nghĩa của từ"})]}),c&&t&&t.map((i,t)=>{let n=i.vidu?i.vidu:null,l=i.nghia,c=k[e.key+"-"+i.key];return(0,a.jsxs)("div",{className:"tumoi-nghia",children:[(0,a.jsxs)("h4",{className:"tumoi-nghia-shower",children:["Nghĩa ",t+1,": ",l]}),n&&n.map((i,t)=>{let n=i.vidu,l=i.nghia,s=i.pinyin;return c||0===t?(0,a.jsxs)("div",{className:"tumoi-vidu",children:[(0,a.jsxs)("h5",{children:["V\xed dụ ",t+1]}),(0,a.jsx)("p",{children:_(n,e.key)}),(0,a.jsx)("p",{children:s}),(0,a.jsx)("p",{children:l})]},t):null}),c?(0,a.jsx)(s.Z,{variant:"warning",onClick:()=>G(e.key,nghia.key),children:"Ẩn bớt v\xed dụ"}):(0,a.jsx)(s.Z,{variant:"info",onClick:()=>J(e.key,nghia.key),children:"Hiển thị th\xeam v\xed dụ"}),(0,a.jsx)("hr",{})]},t)})]})},i)}):null})()]})}),(0,a.jsx)("div",{ref:b,children:(0,a.jsx)(d.Z,{flagLogin:C,scrollBaidich:()=>H(),bodich:i,baidich:t})})]})]}),y?(0,a.jsx)(h.Z,{}):null]})})}},19768:function(e,i,t){"use strict";t.d(i,{Z:function(){return c}});var a=t(57437),n=t(2265),l={src:"/_next/static/media/Loading.3170e5c7.gif",height:480,width:475,blurWidth:0,blurHeight:0},s=t(66648);class c extends n.Component{render(){return(0,a.jsx)("div",{className:"loadingData",children:(0,a.jsxs)("div",{className:"loadingData-container",children:[(0,a.jsx)(s.default,{src:l,alt:"Loading...",width:100,height:100}),(0,a.jsx)("h2",{children:"Website đang tải dữ liệu, xin vui l\xf2ng chờ trong gi\xe2y l\xe1t"})]})})}}},34231:function(e,i,t){"use strict";t.d(i,{Z:function(){return l}});var a=t(57437),n=t(2265);function l(e){let{value:i,onChange:t,className:l="",placeholder:s="",onKeyDown:c}=e,r=(0,n.useRef)(null),o=()=>{let e=r.current;e&&(e.style.height="auto",e.style.height=e.scrollHeight+"px")};return(0,n.useEffect)(()=>{o()},[i]),(0,n.useEffect)(()=>{o()},[]),(0,a.jsx)("textarea",{ref:r,className:"form-control ".concat(l),value:i,onChange:t,placeholder:s,rows:1,style:{overflow:"hidden",resize:"none"},onKeyDown:c})}},78728:function(e,i,t){"use strict";async function a(e){let i=await fetch("/api/translate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e})}),t=await i.json();return console.log(t),t.result}t.d(i,{y:function(){return a}})}},function(e){e.O(0,[2866,4358,7481,9208,9461,8765,4974,3539,8472,6901,6802,4547,2971,7023,1744],function(){return e(e.s=20923)}),_N_E=e.O()}]);