(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[492],{70089:function(e,a,i){Promise.resolve().then(i.bind(i,44382))},44382:function(e,a,i){"use strict";i.d(a,{default:function(){return y}});var n=i(57437),t=i(2265),c=i(66802),s=i(12808),l=i(64379),o=i.n(l),r=i(65606),u=i(58833),d=i(91795),h=i(19768),m=i(23508);function y(e){let{bodich:a,baidich:i}=e,[l,y]=(0,t.useState)({dichthuat:null,youtubeLink:null,webLink:null,tieude:null,tieudeTiengTrung:null,author:null,imgAuthor:null,id:null,error:null,nav:!1,tuMois:{},tuMoiNghias:{},tuMoiNghiaGets:{},tuMoiPinyins:{},tumoiViduGets:{},tuMoiVidus:{},tuMoiViduDichs:{},tuMoiViduPinyins:{},hanviets:{},baiDich:null}),[k,g]=(0,t.useState)(!0),[x,j]=(0,t.useState)(!1),[v,b]=(0,t.useState)({}),[f,w]=(0,t.useState)({}),[p,N]=(0,t.useState)(!1),[P,O]=(0,t.useState)(!1);(0,t.useEffect)(()=>{S();let e=(0,m.GJ)(),a=(0,m.bg)();O(e),N(a)},[]);let C=async()=>{g(!0);let e=localStorage.getItem("user"),a=localStorage.getItem("name"),n=localStorage.getItem("userImage"),t="/users/dashboard/".concat(e,"/").concat(i),{tieude:c,baiDich:s,youtubeLink:u,webLink:d,tieudeTiengTrung:h,author:m,imgAuthor:k,embedLink:x}=l,j=new Date().toISOString();try{let e=Z(u);await Promise.all([(0,r.Pf)("".concat(t,"/username"),a),(0,r.Pf)("".concat(t,"/weblink"),u),(0,r.Pf)("".concat(t,"/tieudeTiengTrung"),h),(0,r.Pf)("".concat(t,"/tieude"),c),(0,r.Pf)("".concat(t,"/link"),x),(0,r.Pf)("".concat(t,"/author"),m),(0,r.Pf)("".concat(t,"/imgAuthor"),k),(0,r.Pf)("".concat(t,"/baidich"),s),(0,r.Pf)("".concat(t,"/dateTime"),j),(0,r.Pf)("".concat(t,"/id"),e),(0,r.Pf)("".concat(t,"/userImage"),n)]),await o().fire({position:"center",icon:"success",title:"Đăng b\xe0i th\xe0nh c\xf4ng",showConfirmButton:!1,timer:1500}),y(e=>({...e,nav:!0}))}catch(a){console.error("Lỗi tạo b\xe0i mới:",a);let e={message:"Lỗi tạo b\xe0i mới: "+a.message};o().fire(a.message,"","info"),y(a=>({...a,error:e}))}finally{g(!1)}},S=async()=>{g(!0);let e=localStorage.getItem("user"),n="/users/dichthuat/".concat(a),t="/users/dichthuat/".concat(a,"/listBaihoc/").concat(i),c="".concat(t,"/").concat(e,"/baidich"),s="".concat(t,"/").concat(e,"/tumoi"),[l,o,u,d,h,m,k,x,j]=await Promise.all([(0,r.UD)(s),(0,r.eO)("".concat(t,"/tieude")),(0,r.eO)("".concat(t,"/link")),(0,r.eO)("".concat(t,"/weblink")),(0,r.eO)("".concat(t,"/tieudeTiengTrung")),(0,r.eO)("".concat(n,"/author")),(0,r.eO)("".concat(n,"/imgAuthor")),(0,r.eO)(c),(0,r.eO)("".concat(t,"/noidung"))]),v=u?"https://www.youtube.com/embed/".concat(Z(u)):null,b={},f={},w={},p={},N={},P={},O={},C={};l&&await Promise.all(l.map(async e=>{b[e.key]=await (0,r.UD)("/".concat(s,"/").concat(e.key,"/nghia")),w[e.key]=await (0,r.eO)("/".concat(s,"/").concat(e.key,"/pinyin")),C[e.key]=await (0,r.eO)("/".concat(s,"/").concat(e.key,"/hanviet")),b[e.key]&&await Promise.all(b[e.key].map(async a=>{f[a.key]=await (0,r.eO)("/".concat(s,"/").concat(e.key,"/nghia/").concat(a.key,"/nghia")),p[a.key]=await (0,r.UD)("/".concat(s,"/").concat(e.key,"/nghia/").concat(a.key,"/vidu")),p[a.key]&&await Promise.all(p[a.key].map(async i=>{P[i.key]=await (0,r.eO)("/".concat(s,"/").concat(e.key,"/nghia/").concat(a.key,"/vidu/").concat(i.key,"/nghia")),N[i.key]=await (0,r.eO)("/".concat(s,"/").concat(e.key,"/nghia/").concat(a.key,"/vidu/").concat(i.key,"/vidu")),O[i.key]=await (0,r.eO)("/".concat(s,"/").concat(e.key,"/nghia/").concat(a.key,"/vidu/").concat(i.key,"/pinyin"))}))}))})),y(a=>({...a,webLink:d,tieudeTiengTrung:h,tieude:o,author:m,imgAuthor:k,youtubeLink:u,noiDungBaiDich:j,user:e,tuMoiNghias:f,tuMoiNghiaGets:b,tuMoiPinyins:w,tuMoiViduPinyins:O,tumoiViduGets:p,tuMoiVidus:N,tuMoiViduDichs:P,tuMois:l,baiDich:x,embedLink:v,hanviets:C})),g(!1)},T=async()=>{console.log(123),g(!0);let{baiDich:e}=l,n=localStorage.getItem("user"),t="/users/dichthuat/".concat(a,"/listBaihoc/").concat(i,"/").concat(n,"/baidich");try{await (0,r.Pf)(t,e),await o().fire({position:"center",icon:"success",title:"Tạo b\xe0i mới th\xe0nh c\xf4ng",showConfirmButton:!1,timer:1500})}catch(e){console.error("Lỗi tạo b\xe0i mới:",e),o().fire("Lỗi tạo b\xe0i mới: "+e.message,"","info")}finally{g(!1)}},L=(e,a)=>e.split(RegExp("(".concat(a,")"),"gi")).map((e,i)=>e.toLowerCase()===a.toLowerCase()?(0,n.jsx)("span",{style:{color:"red"},children:e},i):e),Z=e=>{var a=e.split("=");return a[1]?a[1].split("&")[0]:"null"},D=e=>{y(a=>({...a,baiDich:e.target.value}))},I=()=>{j(!x)},M=e=>{w({...f,[e]:!f[e]})},B=(e,a)=>{b({...v,[e+"-"+a]:!0})},_=(e,a)=>{b({...v,[e+"-"+a]:!1})},{tieude:E,baiDich:V,webLink:A,tieudeTiengTrung:G,author:H,imgAuthor:U,embedLink:J,noiDungBaiDich:R}=l;return(0,n.jsx)(c.Z,{body:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"dichthuat-container row",children:[(0,n.jsx)("div",{className:"col-5",children:(0,n.jsx)("div",{children:(0,n.jsx)(u.Z,{videoLink:J||null,webLink:A||null,tieudeTiengTrung:G||null,author:H||null,imgAuthor:U||null,title:E||null})})}),R&&(0,n.jsxs)("div",{className:"noiDungBaiDich col-3",children:[console.log(R),(0,n.jsx)("pre",{children:R||""})]}),(0,n.jsx)("div",{className:"col",children:(0,n.jsx)("div",{className:"card border-primary",children:(0,n.jsxs)("div",{className:"card-body oldTextcss",children:[(0,n.jsxs)("div",{className:"",style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[(0,n.jsx)("h4",{className:"card-title",children:"Phần Dịch"}),(0,n.jsxs)("div",{style:{display:"flex"},children:[(0,n.jsx)(s.Z,{className:p?"button-css":"button-css disable",disabled:!p,variant:"info",onClick:T,children:"Lưu b\xe0i dịch"}),(0,n.jsx)(s.Z,{className:p?"button-css":"button-css disable",disabled:!p,variant:"danger",onClick:C,children:"Đăng b\xe0i"})]})]}),(0,n.jsx)("textarea",{value:V||"",onChange:e=>D(e),placeholder:"Nhập b\xe0i dịch của bạn"})]})})})]}),(0,n.jsxs)("div",{className:"tumoi-area",children:[(0,n.jsxs)("div",{className:"tumoi-area-header",children:[(0,n.jsx)("h2",{className:"card-title",children:"Từ mới"}),x?(0,n.jsx)(s.Z,{variant:"danger",onClick:I,children:"Hủy"}):(0,n.jsx)(s.Z,{variant:"info",onClick:I,children:"Th\xeam từ mới"})]}),(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"col",children:(0,n.jsxs)("div",{className:"tumoi-container",children:[(0,n.jsx)("div",{className:"tumoi-header"}),(()=>{let{tuMois:e,tuMoiNghias:a,tuMoiNghiaGets:i,tuMoiPinyins:t,tumoiViduGets:c,tuMoiVidus:o,tuMoiViduDichs:r,tuMoiViduPinyins:u,hanviets:d}=l;return e&&e.length>0?e.map((e,l)=>{let h=i[e.key],m=t[e.key],y=d[e.key],k=f[e.key];return(0,n.jsx)("div",{className:"tumoi-item",children:(0,n.jsxs)("div",{className:"tumoi-display",children:[(0,n.jsxs)("div",{className:"tumoi-display-header",children:[(0,n.jsxs)("h4",{children:[l+1,", ",e.key,"  【",y,"】"]}),(0,n.jsx)(s.Z,{variant:k?"danger":"warning",onClick:()=>M(e.key),children:k?"Ẩn bớt nghĩa của từ":"Hiển thị nghĩa của từ"})]}),k&&h&&h.map((i,t)=>{let l=c[i.key],d=a[i.key],h=v[e.key+"-"+i.key];return(0,n.jsxs)("div",{className:"tumoi-nghia",children:[(0,n.jsxs)("h5",{children:[e.key,"/ ",m]}),(0,n.jsx)("hr",{}),(0,n.jsxs)("h4",{className:"tumoi-nghia-shower",children:["Nghĩa ",t+1,": ",d]}),l&&l.map((a,i)=>{let t=o[a.key],c=r[a.key],s=u[a.key];return(console.log(t),h||0===i)?(0,n.jsxs)("div",{className:"tumoi-vidu",children:[(0,n.jsxs)("h5",{children:["V\xed dụ ",i+1]}),(0,n.jsx)("p",{children:L(t,e.key)}),(0,n.jsx)("p",{children:s}),(0,n.jsx)("p",{children:c})]},i):null}),h?(0,n.jsx)(s.Z,{variant:"warning",onClick:()=>_(e.key,i.key),children:"Ẩn bớt v\xed dụ"}):(0,n.jsx)(s.Z,{variant:"info",onClick:()=>B(e.key,i.key),children:"Hiển thị th\xeam v\xed dụ"})]},t)})]})},l)}):null})()]})}),x?(0,n.jsx)(d.Z,{}):null]})]}),k?(0,n.jsx)(h.Z,{}):null]})})}}},function(e){e.O(0,[2866,9513,5527,4358,7481,9208,9461,8765,4974,3539,8472,609,6901,6802,8551,4547,2971,7023,1744],function(){return e(e.s=70089)}),_N_E=e.O()}]);