(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[492],{89:function(e,a,i){Promise.resolve().then(i.bind(i,4382))},4382:function(e,a,i){"use strict";i.d(a,{default:function(){return m}});var n=i(7437),c=i(2265),t=i(8708),s=i(35),l=i(4379),o=i.n(l),r=i(5606),u=i(8833),d=i(1795),h=i(9768);function m(e){let{bodich:a,baidich:i}=e,[l,m]=(0,c.useState)({dichthuat:null,youtubeLink:null,webLink:null,tieude:null,tieudeTiengTrung:null,author:null,imgAuthor:null,id:null,error:null,nav:!1,tuMois:{},tuMoiNghias:{},tuMoiNghiaGets:{},tuMoiPinyins:{},tumoiViduGets:{},tuMoiVidus:{},tuMoiViduDichs:{},tuMoiViduPinyins:{},hanviets:{},baiDich:null}),[y,k]=(0,c.useState)(!0),[g,x]=(0,c.useState)(!1),[j,v]=(0,c.useState)({}),[f,w]=(0,c.useState)({});(0,c.useEffect)(()=>{p()},[]);let b=async()=>{k(!0);let e=localStorage.getItem("user"),a=localStorage.getItem("name"),n=localStorage.getItem("userImage"),c="/users/dashboard/".concat(e,"/").concat(i),{tieude:t,baiDich:s,youtubeLink:u,webLink:d,tieudeTiengTrung:h,author:y,imgAuthor:g,embedLink:x}=l,j=new Date().toISOString();try{let e=O(u);await Promise.all([(0,r.Pf)("".concat(c,"/username"),a),(0,r.Pf)("".concat(c,"/weblink"),u),(0,r.Pf)("".concat(c,"/tieudeTiengTrung"),h),(0,r.Pf)("".concat(c,"/tieude"),t),(0,r.Pf)("".concat(c,"/link"),x),(0,r.Pf)("".concat(c,"/author"),y),(0,r.Pf)("".concat(c,"/imgAuthor"),g),(0,r.Pf)("".concat(c,"/baidich"),s),(0,r.Pf)("".concat(c,"/dateTime"),j),(0,r.Pf)("".concat(c,"/id"),e),(0,r.Pf)("".concat(c,"/userImage"),n)]),await o().fire({position:"center",icon:"success",title:"Đăng b\xe0i th\xe0nh c\xf4ng",showConfirmButton:!1,timer:1500}),m(e=>({...e,nav:!0}))}catch(a){console.error("Lỗi tạo b\xe0i mới:",a);let e={message:"Lỗi tạo b\xe0i mới: "+a.message};o().fire(a.message,"","info"),m(a=>({...a,error:e}))}finally{k(!1)}},p=async()=>{k(!0);let e=localStorage.getItem("user"),n="/users/dichthuat/".concat(a),c="/users/dichthuat/".concat(a,"/listBaihoc/").concat(i),t="".concat(c,"/").concat(e,"/baidich"),s="".concat(c,"/").concat(e,"/tumoi"),[l,o,u,d,h,y,g,x,j]=await Promise.all([(0,r.UD)(s),(0,r.eO)("".concat(c,"/tieude")),(0,r.eO)("".concat(c,"/link")),(0,r.eO)("".concat(c,"/weblink")),(0,r.eO)("".concat(c,"/tieudeTiengTrung")),(0,r.eO)("".concat(n,"/author")),(0,r.eO)("".concat(n,"/imgAuthor")),(0,r.eO)(t),(0,r.eO)("".concat(c,"/noidung"))]),v=u?"https://www.youtube.com/embed/".concat(O(u)):null,f={},w={},b={},p={},N={},P={},C={},T={};l&&await Promise.all(l.map(async e=>{f[e.key]=await (0,r.UD)("/".concat(s,"/").concat(e.key,"/nghia")),b[e.key]=await (0,r.eO)("/".concat(s,"/").concat(e.key,"/pinyin")),T[e.key]=await (0,r.eO)("/".concat(s,"/").concat(e.key,"/hanviet")),f[e.key]&&await Promise.all(f[e.key].map(async a=>{w[a.key]=await (0,r.eO)("/".concat(s,"/").concat(e.key,"/nghia/").concat(a.key,"/nghia")),p[a.key]=await (0,r.UD)("/".concat(s,"/").concat(e.key,"/nghia/").concat(a.key,"/vidu")),p[a.key]&&await Promise.all(p[a.key].map(async i=>{P[i.key]=await (0,r.eO)("/".concat(s,"/").concat(e.key,"/nghia/").concat(a.key,"/vidu/").concat(i.key,"/nghia")),N[i.key]=await (0,r.eO)("/".concat(s,"/").concat(e.key,"/nghia/").concat(a.key,"/vidu/").concat(i.key,"/vidu")),C[i.key]=await (0,r.eO)("/".concat(s,"/").concat(e.key,"/nghia/").concat(a.key,"/vidu/").concat(i.key,"/pinyin"))}))}))})),m(a=>({...a,webLink:d,tieudeTiengTrung:h,tieude:o,author:y,imgAuthor:g,youtubeLink:u,noiDungBaiDich:j,user:e,tuMoiNghias:w,tuMoiNghiaGets:f,tuMoiPinyins:b,tuMoiViduPinyins:C,tumoiViduGets:p,tuMoiVidus:N,tuMoiViduDichs:P,tuMois:l,baiDich:x,embedLink:v,hanviets:T})),k(!1)},N=async()=>{console.log(123),k(!0);let{baiDich:e}=l,n=localStorage.getItem("user"),c="/users/dichthuat/".concat(a,"/listBaihoc/").concat(i,"/").concat(n,"/baidich");try{await (0,r.Pf)(c,e),await o().fire({position:"center",icon:"success",title:"Tạo b\xe0i mới th\xe0nh c\xf4ng",showConfirmButton:!1,timer:1500})}catch(e){console.error("Lỗi tạo b\xe0i mới:",e),o().fire("Lỗi tạo b\xe0i mới: "+e.message,"","info")}finally{k(!1)}},P=(e,a)=>e.split(RegExp("(".concat(a,")"),"gi")).map((e,i)=>e.toLowerCase()===a.toLowerCase()?(0,n.jsx)("span",{style:{color:"red"},children:e},i):e),O=e=>{var a=e.split("=");return a[1]?a[1].split("&")[0]:"null"},C=e=>{m(a=>({...a,baiDich:e.target.value}))},T=()=>{x(!g)},S=e=>{w({...f,[e]:!f[e]})},L=(e,a)=>{v({...j,[e+"-"+a]:!0})},Z=(e,a)=>{v({...j,[e+"-"+a]:!1})},{tieude:D,baiDich:I,webLink:M,tieudeTiengTrung:B,author:_,imgAuthor:E,embedLink:V,noiDungBaiDich:A}=l;return(0,n.jsx)(t.Z,{body:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"dichthuat-container row",children:[(0,n.jsx)("div",{className:"col-5",children:(0,n.jsx)("div",{children:(0,n.jsx)(u.Z,{videoLink:V||null,webLink:M||null,tieudeTiengTrung:B||null,author:_||null,imgAuthor:E||null,title:D||null})})}),A&&(0,n.jsxs)("div",{className:"noiDungBaiDich col-3",children:[console.log(A),(0,n.jsx)("pre",{children:A||""})]}),(0,n.jsx)("div",{className:"col",children:(0,n.jsx)("div",{className:"card border-primary",children:(0,n.jsxs)("div",{className:"card-body oldTextcss",children:[(0,n.jsxs)("div",{className:"",style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[(0,n.jsx)("h4",{className:"card-title",children:"Phần Dịch"}),(0,n.jsxs)("div",{style:{display:"flex"},children:[(0,n.jsx)(s.Z,{className:"button-css",variant:"info",onClick:N,children:"Lưu b\xe0i dịch"}),(0,n.jsx)(s.Z,{className:"button-css",variant:"danger",onClick:b,children:"Đăng b\xe0i"})]})]}),(0,n.jsx)("textarea",{value:I||"",onChange:e=>C(e),placeholder:"Nhập b\xe0i dịch của bạn"})]})})})]}),(0,n.jsxs)("div",{className:"tumoi-area",children:[(0,n.jsxs)("div",{className:"tumoi-area-header",children:[(0,n.jsx)("h2",{className:"card-title",children:"Từ mới"}),g?(0,n.jsx)(s.Z,{variant:"danger",onClick:T,children:"Hủy"}):(0,n.jsx)(s.Z,{variant:"info",onClick:T,children:"Th\xeam từ mới"})]}),(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"col",children:(0,n.jsxs)("div",{className:"tumoi-container",children:[(0,n.jsx)("div",{className:"tumoi-header"}),(()=>{let{tuMois:e,tuMoiNghias:a,tuMoiNghiaGets:i,tuMoiPinyins:c,tumoiViduGets:t,tuMoiVidus:o,tuMoiViduDichs:r,tuMoiViduPinyins:u,hanviets:d}=l;return e&&e.length>0?e.map((e,l)=>{let h=i[e.key],m=c[e.key],y=d[e.key],k=f[e.key];return(0,n.jsx)("div",{className:"tumoi-item",children:(0,n.jsxs)("div",{className:"tumoi-display",children:[(0,n.jsxs)("div",{className:"tumoi-display-header",children:[(0,n.jsxs)("h4",{children:[l+1,", ",e.key,"  【",y,"】"]}),(0,n.jsx)(s.Z,{variant:k?"danger":"warning",onClick:()=>S(e.key),children:k?"Ẩn bớt nghĩa của từ":"Hiển thị nghĩa của từ"})]}),k&&h&&h.map((i,c)=>{let l=t[i.key],d=a[i.key],h=j[e.key+"-"+i.key];return(0,n.jsxs)("div",{className:"tumoi-nghia",children:[(0,n.jsxs)("h5",{children:[e.key,"/ ",m]}),(0,n.jsx)("hr",{}),(0,n.jsxs)("h4",{className:"tumoi-nghia-shower",children:["Nghĩa ",c+1,": ",d]}),l&&l.map((a,i)=>{let c=o[a.key],t=r[a.key],s=u[a.key];return(console.log(c),h||0===i)?(0,n.jsxs)("div",{className:"tumoi-vidu",children:[(0,n.jsxs)("h5",{children:["V\xed dụ ",i+1]}),(0,n.jsx)("p",{children:P(c,e.key)}),(0,n.jsx)("p",{children:s}),(0,n.jsx)("p",{children:t})]},i):null}),h?(0,n.jsx)(s.Z,{variant:"warning",onClick:()=>Z(e.key,i.key),children:"Ẩn bớt v\xed dụ"}):(0,n.jsx)(s.Z,{variant:"info",onClick:()=>L(e.key,i.key),children:"Hiển thị th\xeam v\xed dụ"})]},c)})]})},l)}):null})()]})}),g?(0,n.jsx)(d.Z,{}):null]})]}),y?(0,n.jsx)(h.Z,{}):null]})})}}},function(e){e.O(0,[481,461,630,648,439,708,151,971,23,560],function(){return e(e.s=89)}),_N_E=e.O()}]);