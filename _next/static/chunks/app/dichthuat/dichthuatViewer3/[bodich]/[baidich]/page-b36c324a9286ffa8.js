(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[492],{70089:function(e,t,a){Promise.resolve().then(a.bind(a,44382))},44382:function(e,t,a){"use strict";a.d(t,{default:function(){return m}});var n=a(57437),i=a(2265),c=a(66802),s=a(12808),r=a(64379),l=a.n(r),o=a(65606),A=a(58833),d=a(91795),u=a(19768),h=a(23508);function m(e){let{bodich:t,baidich:a}=e,[r,m]=(0,i.useState)({dichthuat:null,youtubeLink:null,webLink:null,tieude:null,tieudeTiengTrung:null,author:null,imgAuthor:null,id:null,error:null,nav:!1,tuMois:{},tuMoiNghias:{},tuMoiNghiaGets:{},tuMoiPinyins:{},tumoiViduGets:{},tuMoiVidus:{},tuMoiViduDichs:{},tuMoiViduPinyins:{},hanviets:{},baiDich:null}),[g,y]=(0,i.useState)(!0),[x,j]=(0,i.useState)(!1),[k,f]=(0,i.useState)({}),[p,v]=(0,i.useState)({}),[b,w]=(0,i.useState)(!1),[N,C]=(0,i.useState)(!1);(0,i.useEffect)(()=>{B();let e=(0,h.GJ)(),t=(0,h.bg)();C(e),w(t)},[]);let E=async()=>{y(!0);let e=localStorage.getItem("user"),t=localStorage.getItem("name"),n=localStorage.getItem("userImage"),i="/users/dashboard/".concat(e,"/").concat(a),{tieude:c,baiDich:s,youtubeLink:A,webLink:d,tieudeTiengTrung:u,author:h,imgAuthor:g,embedLink:x}=r,j=new Date().toISOString();try{let e=P(A);await Promise.all([(0,o.Pf)("".concat(i,"/username"),t),(0,o.Pf)("".concat(i,"/weblink"),A),(0,o.Pf)("".concat(i,"/tieudeTiengTrung"),u),(0,o.Pf)("".concat(i,"/tieude"),c),(0,o.Pf)("".concat(i,"/link"),x),(0,o.Pf)("".concat(i,"/author"),h),(0,o.Pf)("".concat(i,"/imgAuthor"),g),(0,o.Pf)("".concat(i,"/baidich"),s),(0,o.Pf)("".concat(i,"/dateTime"),j),(0,o.Pf)("".concat(i,"/id"),e),(0,o.Pf)("".concat(i,"/userImage"),n)]),await l().fire({position:"center",icon:"success",title:"Đăng b\xe0i th\xe0nh c\xf4ng",showConfirmButton:!1,timer:1500}),m(e=>({...e,nav:!0}))}catch(t){console.error("Lỗi tạo b\xe0i mới:",t);let e={message:"Lỗi tạo b\xe0i mới: "+t.message};l().fire(t.message,"","info"),m(t=>({...t,error:e}))}finally{y(!1)}},B=async()=>{y(!0);let e=localStorage.getItem("user"),n="/users/dichthuat/".concat(t),i="/users/dichthuat/".concat(t,"/listBaihoc/").concat(a),c="".concat(i,"/").concat(e,"/baidich"),s="".concat(i,"/").concat(e,"/tumoi"),[r,l,A,d,u,h,g,x,j]=await Promise.all([(0,o.UD)(s),(0,o.eO)("".concat(i,"/tieude")),(0,o.eO)("".concat(i,"/link")),(0,o.eO)("".concat(i,"/weblink")),(0,o.eO)("".concat(i,"/tieudeTiengTrung")),(0,o.eO)("".concat(n,"/author")),(0,o.eO)("".concat(n,"/imgAuthor")),(0,o.eO)(c),(0,o.eO)("".concat(i,"/noidung"))]),k=A?"https://www.youtube.com/embed/".concat(P(A)):null,f={},p={},v={},b={},w={},N={},C={},E={};r&&await Promise.all(r.map(async e=>{f[e.key]=await (0,o.UD)("/".concat(s,"/").concat(e.key,"/nghia")),v[e.key]=await (0,o.eO)("/".concat(s,"/").concat(e.key,"/pinyin")),E[e.key]=await (0,o.eO)("/".concat(s,"/").concat(e.key,"/hanviet")),f[e.key]&&await Promise.all(f[e.key].map(async t=>{p[t.key]=await (0,o.eO)("/".concat(s,"/").concat(e.key,"/nghia/").concat(t.key,"/nghia")),b[t.key]=await (0,o.UD)("/".concat(s,"/").concat(e.key,"/nghia/").concat(t.key,"/vidu")),b[t.key]&&await Promise.all(b[t.key].map(async a=>{N[a.key]=await (0,o.eO)("/".concat(s,"/").concat(e.key,"/nghia/").concat(t.key,"/vidu/").concat(a.key,"/nghia")),w[a.key]=await (0,o.eO)("/".concat(s,"/").concat(e.key,"/nghia/").concat(t.key,"/vidu/").concat(a.key,"/vidu")),C[a.key]=await (0,o.eO)("/".concat(s,"/").concat(e.key,"/nghia/").concat(t.key,"/vidu/").concat(a.key,"/pinyin"))}))}))})),m(t=>({...t,webLink:d,tieudeTiengTrung:u,tieude:l,author:h,imgAuthor:g,youtubeLink:A,noiDungBaiDich:j,user:e,tuMoiNghias:p,tuMoiNghiaGets:f,tuMoiPinyins:v,tuMoiViduPinyins:C,tumoiViduGets:b,tuMoiVidus:w,tuMoiViduDichs:N,tuMois:r,baiDich:x,embedLink:k,hanviets:E})),y(!1)},O=async()=>{console.log(123),y(!0);let{baiDich:e}=r,n=localStorage.getItem("user"),i="/users/dichthuat/".concat(t,"/listBaihoc/").concat(a,"/").concat(n,"/baidich");try{await (0,o.Pf)(i,e),await l().fire({position:"center",icon:"success",title:"Tạo b\xe0i mới th\xe0nh c\xf4ng",showConfirmButton:!1,timer:1500})}catch(e){console.error("Lỗi tạo b\xe0i mới:",e),l().fire("Lỗi tạo b\xe0i mới: "+e.message,"","info")}finally{y(!1)}},I=(e,t)=>e.split(RegExp("(".concat(t,")"),"gi")).map((e,a)=>e.toLowerCase()===t.toLowerCase()?(0,n.jsx)("span",{style:{color:"red"},children:e},a):e),P=e=>{var t=e.split("=");return t[1]?t[1].split("&")[0]:"null"},Q=e=>{m(t=>({...t,baiDich:e.target.value}))},D=()=>{j(!x)},L=e=>{v({...p,[e]:!p[e]})},z=(e,t)=>{f({...k,[e+"-"+t]:!0})},S=(e,t)=>{f({...k,[e+"-"+t]:!1})},{tieude:T,baiDich:Z,webLink:U,tieudeTiengTrung:M,author:F,imgAuthor:R,embedLink:G,noiDungBaiDich:_}=r;return(0,n.jsx)(c.Z,{body:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"dichthuat-container row",children:[(0,n.jsx)("div",{className:"col-5",children:(0,n.jsx)("div",{children:(0,n.jsx)(A.Z,{videoLink:G||null,webLink:U||null,tieudeTiengTrung:M||null,author:F||null,imgAuthor:R||null,title:T||null})})}),_&&(0,n.jsxs)("div",{className:"noiDungBaiDich col-3",children:[console.log(_),(0,n.jsx)("pre",{children:_||""})]}),(0,n.jsx)("div",{className:"col",children:(0,n.jsx)("div",{className:"card border-primary",children:(0,n.jsxs)("div",{className:"card-body oldTextcss",children:[(0,n.jsxs)("div",{className:"",style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[(0,n.jsx)("h4",{className:"card-title",children:"Phần Dịch"}),(0,n.jsxs)("div",{style:{display:"flex"},children:[(0,n.jsx)(s.Z,{className:b?"button-css":"button-css disable",disabled:!b,variant:"info",onClick:O,children:"Lưu b\xe0i dịch"}),(0,n.jsx)(s.Z,{className:b?"button-css":"button-css disable",disabled:!b,variant:"danger",onClick:E,children:"Đăng b\xe0i"})]})]}),(0,n.jsx)("textarea",{value:Z||"",onChange:e=>Q(e),placeholder:"Nhập b\xe0i dịch của bạn"})]})})})]}),(0,n.jsxs)("div",{className:"tumoi-area",children:[(0,n.jsxs)("div",{className:"tumoi-area-header",children:[(0,n.jsx)("h2",{className:"card-title",children:"Từ mới"}),x?(0,n.jsx)(s.Z,{variant:"danger",onClick:D,children:"Hủy"}):(0,n.jsx)(s.Z,{variant:"info",onClick:D,children:"Th\xeam từ mới"})]}),(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"col",children:(0,n.jsxs)("div",{className:"tumoi-container",children:[(0,n.jsx)("div",{className:"tumoi-header"}),(()=>{let{tuMois:e,tuMoiNghias:t,tuMoiNghiaGets:a,tuMoiPinyins:i,tumoiViduGets:c,tuMoiVidus:l,tuMoiViduDichs:o,tuMoiViduPinyins:A,hanviets:d}=r;return e&&e.length>0?e.map((e,r)=>{let u=a[e.key],h=i[e.key],m=d[e.key],g=p[e.key];return(0,n.jsx)("div",{className:"tumoi-item",children:(0,n.jsxs)("div",{className:"tumoi-display",children:[(0,n.jsxs)("div",{className:"tumoi-display-header",children:[(0,n.jsxs)("h4",{children:[r+1,", ",e.key,"  【",m,"】"]}),(0,n.jsx)(s.Z,{variant:g?"danger":"warning",onClick:()=>L(e.key),children:g?"Ẩn bớt nghĩa của từ":"Hiển thị nghĩa của từ"})]}),g&&u&&u.map((a,i)=>{let r=c[a.key],d=t[a.key],u=k[e.key+"-"+a.key];return(0,n.jsxs)("div",{className:"tumoi-nghia",children:[(0,n.jsxs)("h5",{children:[e.key,"/ ",h]}),(0,n.jsx)("hr",{}),(0,n.jsxs)("h4",{className:"tumoi-nghia-shower",children:["Nghĩa ",i+1,": ",d]}),r&&r.map((t,a)=>{let i=l[t.key],c=o[t.key],s=A[t.key];return(console.log(i),u||0===a)?(0,n.jsxs)("div",{className:"tumoi-vidu",children:[(0,n.jsxs)("h5",{children:["V\xed dụ ",a+1]}),(0,n.jsx)("p",{children:I(i,e.key)}),(0,n.jsx)("p",{children:s}),(0,n.jsx)("p",{children:c})]},a):null}),u?(0,n.jsx)(s.Z,{variant:"warning",onClick:()=>S(e.key,a.key),children:"Ẩn bớt v\xed dụ"}):(0,n.jsx)(s.Z,{variant:"info",onClick:()=>z(e.key,a.key),children:"Hiển thị th\xeam v\xed dụ"})]},i)})]})},r)}):null})()]})}),x?(0,n.jsx)(d.Z,{}):null]})]}),g?(0,n.jsx)(u.Z,{}):null]})})}},23508:function(e,t,a){"use strict";a.d(t,{FF:function(){return g},GJ:function(){return f},Gv:function(){return m},LA:function(){return h},PA:function(){return y},Pw:function(){return j},V2:function(){return x},bg:function(){return p},o0:function(){return d},sq:function(){return v},xb:function(){return u},yI:function(){return k}});var n=a(57437),i=a(9782),c=a(31213),s=a(2265),r=a(45749),l=a(66648),o=a(38472),A=a(91654);let d=e=>{if(!e)return"";try{let t=new Date(e);return(0,i.WU)(t,"h:mm a, dd 'Th\xe1ng' MM, yyyy",{locale:c.vi})}catch(t){return console.error("Invalid date format:",e),e}};function u(e){return(0,n.jsxs)("div",{className:"itemCard-container-dashboardView",children:[(0,n.jsxs)("div",{className:"itemCard-UserName itemcard-UserName-sticky",children:[(0,n.jsxs)("div",{className:"itemCard-UserName-1",children:[(0,n.jsx)(l.default,{src:e.imgUser?e.imgUser:r.Z,alt:"img",width:30,height:30}),(0,n.jsxs)("div",{className:"itemCard-UserName-container",children:[(0,n.jsx)("h4",{className:"username-card",children:e.username}),(0,n.jsx)("p",{style:{margin:"0"},children:d(e.dateTime)})]})]}),(()=>{let t=localStorage.getItem("name");return e.username==t?(0,n.jsx)("div",{className:"itemCard-UserName-1",children:(0,n.jsx)("button",{className:"btn btn-options",onClick:e.removeClick,style:{padding:"0",margin:"0"},children:(0,n.jsx)("i",{className:"fa-solid fa-trash"})})}):null})()]}),(0,n.jsx)("div",{className:"itemCard-baiDich",children:e.baidich})]})}let h=(e,t)=>e?e.split(RegExp("(".concat(t,")"),"gi")).map((e,a)=>e.toLowerCase()===t.toLowerCase()?(0,n.jsx)("span",{style:{color:"red"},children:e},a):e.split("\n").map((e,t,a)=>t===a.length-1?e:(0,n.jsxs)(s.Fragment,{children:[e,(0,n.jsx)("br",{})]},t))):null,m=(e,t)=>{if(!e||!t||0===t.length)return null;let a=RegExp("(".concat(t.join("|"),")"),"gi");return e.split(a).map((e,a)=>t.some(t=>t.toLowerCase()===e.toLowerCase())?(0,n.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:(0,n.jsx)(A.Z,{chineseList:e,isGianthe:!0})},a):(0,n.jsx)(s.Fragment,{children:e.split("\n").map((e,t,i)=>(0,n.jsxs)(s.Fragment,{children:[(0,n.jsx)(A.Z,{chineseList:e,isGianthe:!0}),t<i.length-1&&(0,n.jsx)("br",{})]},"".concat(a,"-").concat(t)))},a))},g=async e=>{try{let t=await o.Z.get("https://translate.googleapis.com/translate_a/single?client=gtx&dt=t&dt=bd&dj=1&dt=ex&dt=ld&dt=md&dt=qca&dt=rm&dt=ss&sl=vi&tl=en&q=".concat(encodeURIComponent(e)));if(t.data)return t.data.sentences.filter(e=>e.trans).map(e=>e.trans.trim()).join(" ");return e}catch(t){return console.error("Lỗi khi gọi API:",t),e}},y=async e=>{try{let t=await o.Z.get("https://translate.googleapis.com/translate_a/single?client=gtx&dt=t&dt=bd&dj=1&dt=ex&dt=ld&dt=md&dt=qca&dt=rm&dt=ss&sl=zh-CN&tl=zh-TW&q=".concat(encodeURIComponent(e)));if(t.data)return t.data.sentences.filter(e=>e.trans).map(e=>e.trans.trim()).join(" ");return e}catch(t){return console.error("Lỗi khi gọi API:",t),e}},x=async e=>{try{let t=await o.Z.get("https://translate.googleapis.com/translate_a/single?client=gtx&dt=t&dt=bd&dj=1&dt=ex&dt=ld&dt=md&dt=qca&dt=rm&dt=ss&sl=zh-TW&tl=vi&q=".concat(encodeURIComponent(e)));if(t.data)return t.data;return e}catch(t){return console.error("Lỗi khi gọi API:",t),e}},j=e=>e&&e.includes("hocdichchuhan.github.io")?e.replace("hocdichchuhan.github.io","tiengtrungdongyang.com"):e,k=async e=>{let t=encodeURIComponent(e),a=await o.Z.get("https://api.hanzii.net/api/search/vi/".concat(t,"?type=word&page=1&limit=2"));return a.data.found?a.data:null},f=()=>{let e=v();return!!e&&"sDHYFpe6CMazPbsZ0mzSyY8d5Ev1"==e},p=()=>!!v(),v=()=>{let e=JSON.parse(localStorage.getItem("userLogin"));return null==e?void 0:e.uid}},45749:function(e,t){"use strict";t.Z={src:"/_next/static/media/user.f64324c2.jpg",height:200,width:200,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wgARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAG0E//EABUQAQEAAAAAAAAAAAAAAAAAABMk/9oACAEBAAEFAlo//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAwEBPwF//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAgEBPwF//8QAGBAAAgMAAAAAAAAAAAAAAAAAABIxQWH/2gAIAQEABj8CRqjT/8QAGBAAAgMAAAAAAAAAAAAAAAAAESEAMbH/2gAIAQEAAT8hGkETU//aAAwDAQACAAMAAAAQ+//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABgQAAIDAAAAAAAAAAAAAAAAAAARQZGh/9oACAEBAAE/ELbi5YP/2Q==",blurWidth:8,blurHeight:8}}},function(e){e.O(0,[2800,770,5527,4358,7481,9208,9461,8765,4974,3539,8472,609,6901,6802,1654,4547,2971,7023,1744],function(){return e(e.s=70089)}),_N_E=e.O()}]);