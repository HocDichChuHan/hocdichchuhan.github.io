(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[492],{89:function(e,a,i){Promise.resolve().then(i.bind(i,4382))},4382:function(e,a,i){"use strict";i.d(a,{default:function(){return m}});var t=i(7437),n=i(2265),c=i(8708),s=i(2808),l=i(4379),o=i.n(l),r=i(5606),u=i(8833),d=i(1795),h=i(9768);function m(e){let{bodich:a,baidich:i}=e,[l,m]=(0,n.useState)({dichthuat:null,youtubeLink:null,webLink:null,tieude:null,tieudeTiengTrung:null,author:null,imgAuthor:null,id:null,error:null,nav:!1,tuMois:{},tuMoiNghias:{},tuMoiNghiaGets:{},tuMoiPinyins:{},tumoiViduGets:{},tuMoiVidus:{},tuMoiViduDichs:{},tuMoiViduPinyins:{},hanviets:{},baiDich:null}),[y,g]=(0,n.useState)(!0),[k,x]=(0,n.useState)(!1),[j,v]=(0,n.useState)({}),[b,f]=(0,n.useState)({}),[w,p]=(0,n.useState)(!1),[N,P]=(0,n.useState)(!1);(0,n.useEffect)(()=>{T(),O(),S()},[]);let O=()=>{localStorage.getItem("name")&&p(!0)},S=()=>{"duong171099"==localStorage.getItem("user")&&P(!0)},C=async()=>{g(!0);let e=localStorage.getItem("user"),a=localStorage.getItem("name"),t=localStorage.getItem("userImage"),n="/users/dashboard/".concat(e,"/").concat(i),{tieude:c,baiDich:s,youtubeLink:u,webLink:d,tieudeTiengTrung:h,author:y,imgAuthor:k,embedLink:x}=l,j=new Date().toISOString();try{let e=D(u);await Promise.all([(0,r.Pf)("".concat(n,"/username"),a),(0,r.Pf)("".concat(n,"/weblink"),u),(0,r.Pf)("".concat(n,"/tieudeTiengTrung"),h),(0,r.Pf)("".concat(n,"/tieude"),c),(0,r.Pf)("".concat(n,"/link"),x),(0,r.Pf)("".concat(n,"/author"),y),(0,r.Pf)("".concat(n,"/imgAuthor"),k),(0,r.Pf)("".concat(n,"/baidich"),s),(0,r.Pf)("".concat(n,"/dateTime"),j),(0,r.Pf)("".concat(n,"/id"),e),(0,r.Pf)("".concat(n,"/userImage"),t)]),await o().fire({position:"center",icon:"success",title:"Đăng b\xe0i th\xe0nh c\xf4ng",showConfirmButton:!1,timer:1500}),m(e=>({...e,nav:!0}))}catch(a){console.error("Lỗi tạo b\xe0i mới:",a);let e={message:"Lỗi tạo b\xe0i mới: "+a.message};o().fire(a.message,"","info"),m(a=>({...a,error:e}))}finally{g(!1)}},T=async()=>{g(!0);let e=localStorage.getItem("user"),t="/users/dichthuat/".concat(a),n="/users/dichthuat/".concat(a,"/listBaihoc/").concat(i),c="".concat(n,"/").concat(e,"/baidich"),s="".concat(n,"/").concat(e,"/tumoi"),[l,o,u,d,h,y,k,x,j]=await Promise.all([(0,r.UD)(s),(0,r.eO)("".concat(n,"/tieude")),(0,r.eO)("".concat(n,"/link")),(0,r.eO)("".concat(n,"/weblink")),(0,r.eO)("".concat(n,"/tieudeTiengTrung")),(0,r.eO)("".concat(t,"/author")),(0,r.eO)("".concat(t,"/imgAuthor")),(0,r.eO)(c),(0,r.eO)("".concat(n,"/noidung"))]),v=u?"https://www.youtube.com/embed/".concat(D(u)):null,b={},f={},w={},p={},N={},P={},O={},S={};l&&await Promise.all(l.map(async e=>{b[e.key]=await (0,r.UD)("/".concat(s,"/").concat(e.key,"/nghia")),w[e.key]=await (0,r.eO)("/".concat(s,"/").concat(e.key,"/pinyin")),S[e.key]=await (0,r.eO)("/".concat(s,"/").concat(e.key,"/hanviet")),b[e.key]&&await Promise.all(b[e.key].map(async a=>{f[a.key]=await (0,r.eO)("/".concat(s,"/").concat(e.key,"/nghia/").concat(a.key,"/nghia")),p[a.key]=await (0,r.UD)("/".concat(s,"/").concat(e.key,"/nghia/").concat(a.key,"/vidu")),p[a.key]&&await Promise.all(p[a.key].map(async i=>{P[i.key]=await (0,r.eO)("/".concat(s,"/").concat(e.key,"/nghia/").concat(a.key,"/vidu/").concat(i.key,"/nghia")),N[i.key]=await (0,r.eO)("/".concat(s,"/").concat(e.key,"/nghia/").concat(a.key,"/vidu/").concat(i.key,"/vidu")),O[i.key]=await (0,r.eO)("/".concat(s,"/").concat(e.key,"/nghia/").concat(a.key,"/vidu/").concat(i.key,"/pinyin"))}))}))})),m(a=>({...a,webLink:d,tieudeTiengTrung:h,tieude:o,author:y,imgAuthor:k,youtubeLink:u,noiDungBaiDich:j,user:e,tuMoiNghias:f,tuMoiNghiaGets:b,tuMoiPinyins:w,tuMoiViduPinyins:O,tumoiViduGets:p,tuMoiVidus:N,tuMoiViduDichs:P,tuMois:l,baiDich:x,embedLink:v,hanviets:S})),g(!1)},L=async()=>{console.log(123),g(!0);let{baiDich:e}=l,t=localStorage.getItem("user"),n="/users/dichthuat/".concat(a,"/listBaihoc/").concat(i,"/").concat(t,"/baidich");try{await (0,r.Pf)(n,e),await o().fire({position:"center",icon:"success",title:"Tạo b\xe0i mới th\xe0nh c\xf4ng",showConfirmButton:!1,timer:1500})}catch(e){console.error("Lỗi tạo b\xe0i mới:",e),o().fire("Lỗi tạo b\xe0i mới: "+e.message,"","info")}finally{g(!1)}},Z=(e,a)=>e.split(RegExp("(".concat(a,")"),"gi")).map((e,i)=>e.toLowerCase()===a.toLowerCase()?(0,t.jsx)("span",{style:{color:"red"},children:e},i):e),D=e=>{var a=e.split("=");return a[1]?a[1].split("&")[0]:"null"},I=e=>{m(a=>({...a,baiDich:e.target.value}))},M=()=>{x(!k)},B=e=>{f({...b,[e]:!b[e]})},_=(e,a)=>{v({...j,[e+"-"+a]:!0})},E=(e,a)=>{v({...j,[e+"-"+a]:!1})},{tieude:V,baiDich:A,webLink:H,tieudeTiengTrung:U,author:G,imgAuthor:R,embedLink:q,noiDungBaiDich:z}=l;return(0,t.jsx)(c.Z,{body:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"dichthuat-container row",children:[(0,t.jsx)("div",{className:"col-5",children:(0,t.jsx)("div",{children:(0,t.jsx)(u.Z,{videoLink:q||null,webLink:H||null,tieudeTiengTrung:U||null,author:G||null,imgAuthor:R||null,title:V||null})})}),z&&(0,t.jsxs)("div",{className:"noiDungBaiDich col-3",children:[console.log(z),(0,t.jsx)("pre",{children:z||""})]}),(0,t.jsx)("div",{className:"col",children:(0,t.jsx)("div",{className:"card border-primary",children:(0,t.jsxs)("div",{className:"card-body oldTextcss",children:[(0,t.jsxs)("div",{className:"",style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[(0,t.jsx)("h4",{className:"card-title",children:"Phần Dịch"}),(0,t.jsxs)("div",{style:{display:"flex"},children:[(0,t.jsx)(s.Z,{className:w?"button-css":"button-css disable",disabled:!w,variant:"info",onClick:L,children:"Lưu b\xe0i dịch"}),(0,t.jsx)(s.Z,{className:w?"button-css":"button-css disable",disabled:!w,variant:"danger",onClick:C,children:"Đăng b\xe0i"})]})]}),(0,t.jsx)("textarea",{value:A||"",onChange:e=>I(e),placeholder:"Nhập b\xe0i dịch của bạn"})]})})})]}),(0,t.jsxs)("div",{className:"tumoi-area",children:[(0,t.jsxs)("div",{className:"tumoi-area-header",children:[(0,t.jsx)("h2",{className:"card-title",children:"Từ mới"}),k?(0,t.jsx)(s.Z,{variant:"danger",onClick:M,children:"Hủy"}):(0,t.jsx)(s.Z,{variant:"info",onClick:M,children:"Th\xeam từ mới"})]}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col",children:(0,t.jsxs)("div",{className:"tumoi-container",children:[(0,t.jsx)("div",{className:"tumoi-header"}),(()=>{let{tuMois:e,tuMoiNghias:a,tuMoiNghiaGets:i,tuMoiPinyins:n,tumoiViduGets:c,tuMoiVidus:o,tuMoiViduDichs:r,tuMoiViduPinyins:u,hanviets:d}=l;return e&&e.length>0?e.map((e,l)=>{let h=i[e.key],m=n[e.key],y=d[e.key],g=b[e.key];return(0,t.jsx)("div",{className:"tumoi-item",children:(0,t.jsxs)("div",{className:"tumoi-display",children:[(0,t.jsxs)("div",{className:"tumoi-display-header",children:[(0,t.jsxs)("h4",{children:[l+1,", ",e.key,"  【",y,"】"]}),(0,t.jsx)(s.Z,{variant:g?"danger":"warning",onClick:()=>B(e.key),children:g?"Ẩn bớt nghĩa của từ":"Hiển thị nghĩa của từ"})]}),g&&h&&h.map((i,n)=>{let l=c[i.key],d=a[i.key],h=j[e.key+"-"+i.key];return(0,t.jsxs)("div",{className:"tumoi-nghia",children:[(0,t.jsxs)("h5",{children:[e.key,"/ ",m]}),(0,t.jsx)("hr",{}),(0,t.jsxs)("h4",{className:"tumoi-nghia-shower",children:["Nghĩa ",n+1,": ",d]}),l&&l.map((a,i)=>{let n=o[a.key],c=r[a.key],s=u[a.key];return(console.log(n),h||0===i)?(0,t.jsxs)("div",{className:"tumoi-vidu",children:[(0,t.jsxs)("h5",{children:["V\xed dụ ",i+1]}),(0,t.jsx)("p",{children:Z(n,e.key)}),(0,t.jsx)("p",{children:s}),(0,t.jsx)("p",{children:c})]},i):null}),h?(0,t.jsx)(s.Z,{variant:"warning",onClick:()=>E(e.key,i.key),children:"Ẩn bớt v\xed dụ"}):(0,t.jsx)(s.Z,{variant:"info",onClick:()=>_(e.key,i.key),children:"Hiển thị th\xeam v\xed dụ"})]},n)})]})},l)}):null})()]})}),k?(0,t.jsx)(d.Z,{}):null]})]}),y?(0,t.jsx)(h.Z,{}):null]})})}}},function(e){e.O(0,[4358,7481,9208,9461,5973,7143,8472,6901,8708,4547,2971,7023,1744],function(){return e(e.s=89)}),_N_E=e.O()}]);