(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4179],{80901:function(t,e,i){Promise.resolve().then(i.bind(i,28029))},28029:function(t,e,i){"use strict";i.r(e);var a=i(57437),n=i(2265),s=i(98708),l=i(65634),h=i(12808),u=i(65606),o=i(64379),r=i.n(o),c=i(62258),g=i(60495);class d extends n.Component{componentDidMount(){this.setIdState()}render(){return(0,a.jsx)(s.Z,{body:(0,a.jsxs)("div",{children:[this.state.error&&(0,a.jsxs)("div",{className:"dichthuat-showError",children:['Lỗi: "',this.state.error.message,'"']}),(0,a.jsxs)("div",{className:"dichthuat-container row row-cols-6 row-cols-xxxxxl-5 row-cols-xxxxl-4 row-cols-xl-3 row-cols-lg-2 gy-6 gx-xxl-2 gx-xl-3 gx-lg-2",children:[(0,a.jsx)(c.Z,{title:"ID bộ dịch thuật mới",name:"id",placeHolder:"Nhập ID bộ dịch thuật mới",onChangeHandle:t=>this.onChangeHandle(t,"id")}),(0,a.jsx)(c.Z,{title:"Ti\xeau đề bộ dịch thuật mới",name:"dichthuat",placeHolder:"Nhập ti\xeau đề bộ dịch thuật mới",onChangeHandle:t=>this.onChangeHandle(t,"dichthuat")}),(0,a.jsx)(c.Z,{title:"Ti\xeau đề tiếng Trung của dịch thuật mới",name:"tieudeTiengTrung",placeHolder:"Nhập ti\xeau đề tiếng Trung của bộ dịch thuật mới",onChangeHandle:t=>this.onChangeHandle(t,"tieudeTiengTrung")}),(0,a.jsx)(c.Z,{title:"T\xe1c giả",name:"author",placeHolder:"Nhập t\xean t\xe1c giả",onChangeHandle:t=>this.onChangeHandle(t,"author")}),(0,a.jsx)(c.Z,{title:"Đường link ảnh của t\xe1c giả",name:"imgAuthor",placeHolder:"Nhập link ảnh của t\xe1c giả",onChangeHandle:t=>this.onChangeHandle(t,"imgAuthor")}),(0,a.jsx)(c.Z,{title:"Đường link trang chủ của t\xe1c giả",name:"webLink",placeHolder:"Nhập đường link trang chủ của t\xe1c giả",onChangeHandle:t=>this.onChangeHandle(t,"webLink")}),(0,a.jsx)(c.Z,{title:"Đường link của một b\xe0i học trong bộ dịch",name:"youtubeLinkToGetImg",placeHolder:"Nhập đường link của một b\xe0i học trong bộ dịch",onChangeHandle:t=>this.onChangeHandle(t,"youtubeLinkToGetImg")})]}),(0,a.jsxs)("div",{className:"dichthuatAdd-View row",children:[(0,a.jsx)(l.Z,{webLink:this.state.webLink?this.state.webLink:null,tieudeTiengTrung:this.state.tieudeTiengTrung?this.state.tieudeTiengTrung:null,author:this.state.author?this.state.author:null,imgAuthor:this.state.imgAuthor?this.state.imgAuthor:null,link:"#",title:this.state.dichthuat?this.state.dichthuat:null,img:this.state.youtubeId?"https://img.youtube.com/vi/".concat(this.state.youtubeId,"/sddefault.jpg"):null,alt:"IMG Link"}),(0,a.jsx)("div",{className:"col-2 dichthuatAdd-button",children:(0,a.jsxs)(h.Z,{variant:"info",onClick:this.updateBoDichMoi,children:["Add",(0,a.jsx)("i",{className:"fa-solid fa-calendar-plus"})]})})]})]})})}constructor(t){super(t),this.onChangeHandle=(t,e)=>{if(this.setState({[e]:t.target.value}),"youtubeLinkToGetImg"===e){let e=this.getYoutubeId(t.target.value);this.setState({youtubeId:e})}if("dichthuat"===e){let e=(0,g.Z)(t.target.value);this.setState({dichthuat_slug:e})}},this.getYoutubeId=t=>{var e=t.split("=");return e[1]?e[1].split("&")[0]:"null"},this.setIdState=()=>{if(this.state.youtubeLinkToGetImg){let t=this.getYoutubeId(this.state.youtubeLinkToGetImg);this.setState({youtubeId:t})}},this.updateBoDichMoi=async()=>{let{dichthuat:t,dichthuat_slug:e,youtubeLinkToGetImg:i,webLink:a,tieudeTiengTrung:n,author:s,imgAuthor:l,id:h,youtubeId:o}=this.state,c="/users/dichthuat/".concat(h);try{if(!this.isNhapDayDuText()||await this.isTieuDeExistInFirebase())return;var g=await (0,u.Pf)("".concat(c,"/tieude"),t),d=await (0,u.Pf)("".concat(c,"/link"),i),m=await (0,u.Pf)("".concat(c,"/weblink"),a),p=await (0,u.Pf)("".concat(c,"/tieudeTiengTrung"),n),b=await (0,u.Pf)("".concat(c,"/author"),s),f=await (0,u.Pf)("".concat(c,"/imgAuthor"),l),x=await (0,u.Pf)("".concat(c,"/id"),o);if(d&&m&&p&&b&&f&&x&&g)r().fire("Tạo b\xe0i mới th\xe0nh c\xf4ng","","success"),this.setState({nav:!0});else{let t={message:"Tạo b\xe0i mới thất bại!"};r().fire(t.message,"","info"),this.setState({error:t})}}catch(e){console.error("Lỗi tạo b\xe0i mới:",e);let t={message:"Lỗi tạo b\xe0i mới: "+e.message};r().fire(e.message,"","info"),this.setState({error:t})}},this.isTieuDeExistInFirebase=async()=>{let{dichthuat_slug:t,dichthuat:e,id:i}=this.state;if(!await this.getInfo("/users/dichthuat/".concat(i)))return!1;{let t={message:'Id "'.concat(i,'" đ\xe3 tồn tại, vui l\xf2ng tạo id kh\xe1c')};return r().fire(t.message,"","info"),this.setState({error:t}),!0}},this.isNhapDayDuText=()=>{let{dichthuat:t,youtubeLinkToGetImg:e,webLink:i,tieudeTiengTrung:a,author:n,imgAuthor:s,id:l}=this.state;if(t&&i&&n&&l&&s&&a&&e){if(this.isValidYoutubeLink(e))return!0;{let t={message:'Đường link YouTube kh\xf4ng hợp lệ "'.concat(e,'"')};r().fire(t.message,"","info"),this.setState({error:t})}}else{let t={message:"Vui l\xf2ng điền đầy đủ th\xf4ng tin v\xe0 thử lại"};return r().fire(t.message,"","info"),this.setState({error:t}),!1}},this.isValidYoutubeLink=t=>/^(https?:\/\/)?(www\.youtube\.com|youtu\.be)\/.+$/.test(t),this.isValidDichThuat=t=>!/[.#$[\]]/.test(t),this.getInfo=async t=>{try{let e=await (0,u.F3)(t);if(null!==e)return console.log("data return:",e),e}catch(t){throw t}},this.state={dichthuat:null,dichthuat_slug:null,youtubeLinkToGetImg:null,webLink:null,tieudeTiengTrung:null,author:null,imgAuthor:null,id:null,youtubeId:null,error:null,nav:!1}}}e.default=d},62258:function(t,e,i){"use strict";var a=i(57437);i(2265),e.Z=function(t){return(0,a.jsxs)("div",{className:"form-group dichthuat-formInput",children:[(0,a.jsx)("label",{htmlFor:"",children:t.title}),(0,a.jsx)("input",{type:"text",className:"form-control",name:t.name,id:"","aria-describedby":"helpId",placeholder:t.placeHolder,onChange:t.onChangeHandle,value:t.value,defaultValue:t.defaultValue})]})}},60495:function(t,e){"use strict";e.Z=function(t){return t=(t="@"+(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.toLowerCase()).replace(/á|à|ả|ạ|ã|ă|ắ|ằ|ẳ|ẵ|ặ|â|ấ|ầ|ẩ|ẫ|ậ/gi,"a")).replace(/é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ/gi,"e")).replace(/i|í|ì|ỉ|ĩ|ị/gi,"i")).replace(/ó|ò|ỏ|õ|ọ|ô|ố|ồ|ổ|ỗ|ộ|ơ|ớ|ờ|ở|ỡ|ợ/gi,"o")).replace(/ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự/gi,"u")).replace(/ý|ỳ|ỷ|ỹ|ỵ/gi,"y")).replace(/đ/gi,"d")).replace(/\`|\~|\!|\@|\#|\||\$|\%|\^|\&|\*|\(|\)|\+|\=|\,|\.|\/|\?|\>|\<|\'|\"|\:|\;|_/gi,"")).replace(/ /gi,"-")).replace(/\-\-\-\-\-/gi,"-")).replace(/\-\-\-\-/gi,"-")).replace(/\-\-\-/gi,"-")).replace(/\-\-/gi,"-"))+"@").replace(/\@\-|\-\@|\@/gi,"")}}},function(t){t.O(0,[4358,7481,9208,9461,8765,4974,3539,6901,1098,2971,7023,1744],function(){return t(t.s=80901)}),_N_E=t.O()}]);