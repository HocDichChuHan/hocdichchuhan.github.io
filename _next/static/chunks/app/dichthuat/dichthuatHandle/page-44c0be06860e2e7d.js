(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[66],{8670:function(t,e,i){Promise.resolve().then(i.bind(i,1501))},1501:function(t,e,i){"use strict";i.r(e);var a=i(7437),n=i(2265),s=i(7073);i(9595);var h=i(5634),l=i(35),c=i(5606),u=i(4379),o=i.n(u),r=i(2258),g=i(495);class d extends n.Component{componentDidMount(){this.setIdState()}render(){return(0,a.jsx)(s.Z,{body:(0,a.jsxs)("div",{children:[this.state.error&&(0,a.jsxs)("div",{className:"dichthuat-showError",children:['Lỗi: "',this.state.error.message,'"']}),(0,a.jsxs)("div",{className:"dichthuat-container row row-cols-6 row-cols-xxxxxl-5 row-cols-xxxxl-4 row-cols-xl-3 row-cols-lg-2 gy-6 gx-xxl-2 gx-xl-3 gx-lg-2",children:[(0,a.jsx)(r.Z,{title:"Ti\xeau đề bộ dịch thuật mới",name:"dichthuat",placeHolder:"Nhập ti\xeau đề bộ dịch thuật mới",onChangeHandle:t=>this.onChangeHandle(t,"dichthuat")}),(0,a.jsx)(r.Z,{title:"Ti\xeau đề tiếng Trung của dịch thuật mới",name:"tieudeTiengTrung",placeHolder:"Nhập ti\xeau đề tiếng Trung của bộ dịch thuật mới",onChangeHandle:t=>this.onChangeHandle(t,"tieudeTiengTrung")}),(0,a.jsx)(r.Z,{title:"T\xe1c giả",name:"author",placeHolder:"Nhập t\xean t\xe1c giả",onChangeHandle:t=>this.onChangeHandle(t,"author")}),(0,a.jsx)(r.Z,{title:"Đường link ảnh của t\xe1c giả",name:"imgAuthor",placeHolder:"Nhập link ảnh của t\xe1c giả",onChangeHandle:t=>this.onChangeHandle(t,"imgAuthor")}),(0,a.jsx)(r.Z,{title:"Đường link trang chủ của t\xe1c giả",name:"webLink",placeHolder:"Nhập đường link trang chủ của t\xe1c giả",onChangeHandle:t=>this.onChangeHandle(t,"webLink")}),(0,a.jsx)(r.Z,{title:"Đường link của một b\xe0i học trong bộ dịch",name:"youtubeLinkToGetImg",placeHolder:"Nhập đường link của một b\xe0i học trong bộ dịch",onChangeHandle:t=>this.onChangeHandle(t,"youtubeLinkToGetImg")})]}),(0,a.jsxs)("div",{className:"dichthuatAdd-View",children:[(0,a.jsx)(h.Z,{webLink:this.state.webLink?this.state.webLink:null,tieudeTiengTrung:this.state.tieudeTiengTrung?this.state.tieudeTiengTrung:null,author:this.state.author?this.state.author:null,imgAuthor:this.state.imgAuthor?this.state.imgAuthor:null,link:"#",title:this.state.dichthuat?this.state.dichthuat:null,img:this.state.id?"https://img.youtube.com/vi/".concat(this.state.id,"/sddefault.jpg"):null,alt:"IMG Link"}),(0,a.jsx)("div",{className:"col-2 dichthuatAdd-button",children:(0,a.jsxs)(l.Z,{variant:"info",onClick:this.updateBoDichMoi,children:["Add",(0,a.jsx)("i",{className:"fa-solid fa-calendar-plus"})]})})]})]})})}constructor(t){super(t),this.onChangeHandle=(t,e)=>{if(this.setState({[e]:t.target.value}),"youtubeLinkToGetImg"===e){let e=this.getYoutubeId(t.target.value);this.setState({id:e}),console.log(e)}if("dichthuat"===e){let e=(0,g.Z)(t.target.value);this.setState({dichthuat_slug:e})}},this.getYoutubeId=t=>{var e=t.split("=");return e[1]?e[1].split("&")[0]:"null"},this.setIdState=()=>{if(this.state.youtubeLinkToGetImg){let t=this.getYoutubeId(this.state.youtubeLinkToGetImg);this.setState({id:t}),console.log(t)}},this.updateBoDichMoi=async()=>{let{dichthuat:t,dichthuat_slug:e,youtubeLinkToGetImg:i,webLink:a,tieudeTiengTrung:n,author:s,imgAuthor:h,id:l}=this.state,u="/users/dichthuat/".concat(e);try{if(!this.isNhapDayDuText()||await this.isTieuDeExistInFirebase())return;var r=await (0,c.Pf)("".concat(u,"/tieude"),t),g=await (0,c.Pf)("".concat(u,"/link"),i),d=await (0,c.Pf)("".concat(u,"/weblink"),a),m=await (0,c.Pf)("".concat(u,"/tieudeTiengTrung"),n),f=await (0,c.Pf)("".concat(u,"/author"),s),p=await (0,c.Pf)("".concat(u,"/imgAuthor"),h),b=await (0,c.Pf)("".concat(u,"/id"),l);if(g&&d&&m&&f&&p&&b&&r)o().fire("Tạo b\xe0i mới th\xe0nh c\xf4ng","","success"),this.setState({nav:!0});else{let t={message:"Tạo b\xe0i mới thất bại!"};o().fire(t.message,"","info"),this.setState({error:t})}}catch(e){console.error("Lỗi tạo b\xe0i mới:",e);let t={message:"Lỗi tạo b\xe0i mới: "+e.message};o().fire(e.message,"","info"),this.setState({error:t})}},this.isTieuDeExistInFirebase=async()=>{let{dichthuat_slug:t,dichthuat:e}=this.state;if(!await this.getInfo("/users/dichthuat/".concat(t)))return!1;{let t={message:'T\xean bộ dịch thuật "'.concat(e,'" đ\xe3 tồn tại, vui l\xf2ng tạo bộ dịch thuật kh\xe1c')};return o().fire(t.message,"","info"),this.setState({error:t}),!0}},this.isNhapDayDuText=()=>{let{dichthuat:t,youtubeLinkToGetImg:e,webLink:i,tieudeTiengTrung:a,author:n,imgAuthor:s,id:h}=this.state;if(t&&i&&n&&h&&s&&a&&e){if(this.isValidDichThuat(t)){if(this.isValidYoutubeLink(e))return!0;{let t={message:'Đường link YouTube kh\xf4ng hợp lệ "'.concat(e,'"')};o().fire(t.message,"","info"),this.setState({error:t})}}else{let e={message:'T\xean b\xe0i dịch "'.concat(t,"\" kh\xf4ng được chứa c\xe1c k\xfd tự: '.', '#', '$', '[', hoặc ']'")};o().fire(e.message,"","info"),this.setState({error:e})}}else{let t={message:"Vui l\xf2ng điền đầy đủ th\xf4ng tin v\xe0 thử lại"};return o().fire(t.message,"","info"),this.setState({error:t}),!1}},this.isValidYoutubeLink=t=>/^(https?:\/\/)?(www\.youtube\.com|youtu\.be)\/.+$/.test(t),this.isValidDichThuat=t=>!/[.#$[\]]/.test(t),this.getInfo=async t=>{try{let e=await (0,c.F3)(t);if(null!==e)return console.log("data return:",e),e}catch(t){throw t}},this.state={dichthuat:null,dichthuat_slug:null,youtubeLinkToGetImg:null,webLink:null,tieudeTiengTrung:null,author:null,imgAuthor:null,id:null,error:null,nav:!1}}}e.default=d},2258:function(t,e,i){"use strict";var a=i(7437);i(2265),e.Z=function(t){return(0,a.jsxs)("div",{className:"form-group dichthuat-formInput",children:[(0,a.jsx)("label",{htmlFor:"",children:t.title}),(0,a.jsx)("input",{type:"text",className:"form-control",name:t.name,id:"","aria-describedby":"helpId",placeholder:t.placeHolder,onChange:t.onChangeHandle,value:t.value})]})}},495:function(t,e){"use strict";e.Z=function(t){return t=(t="@"+(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.toLowerCase()).replace(/á|à|ả|ạ|ã|ă|ắ|ằ|ẳ|ẵ|ặ|â|ấ|ầ|ẩ|ẫ|ậ/gi,"a")).replace(/é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ/gi,"e")).replace(/i|í|ì|ỉ|ĩ|ị/gi,"i")).replace(/ó|ò|ỏ|õ|ọ|ô|ố|ồ|ổ|ỗ|ộ|ơ|ớ|ờ|ở|ỡ|ợ/gi,"o")).replace(/ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự/gi,"u")).replace(/ý|ỳ|ỷ|ỹ|ỵ/gi,"y")).replace(/đ/gi,"d")).replace(/\`|\~|\!|\@|\#|\||\$|\%|\^|\&|\*|\(|\)|\+|\=|\,|\.|\/|\?|\>|\<|\'|\"|\:|\;|_/gi,"")).replace(/ /gi,"-")).replace(/\-\-\-\-\-/gi,"-")).replace(/\-\-\-\-/gi,"-")).replace(/\-\-\-/gi,"-")).replace(/\-\-/gi,"-"))+"@").replace(/\@\-|\-\@|\@/gi,"")}},9595:function(){}},function(t){t.O(0,[555,621,777,461,481,291,648,885,73,634,971,23,744],function(){return t(t.s=8670)}),_N_E=t.O()}]);