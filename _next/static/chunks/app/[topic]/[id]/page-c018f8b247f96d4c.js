(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8003],{28593:function(e,i,t){Promise.resolve().then(t.bind(t,91331))},91331:function(e,i,t){"use strict";t.d(i,{default:function(){return w}});var s=t(57437),n=t(2265),l=t(66802),a=t(12808);t(19768);var r=t(23508),c=t(60516),o=t(65606),u=t(39731),h=t(66648),d=t(87138),m=t(64379),p=t.n(m),g=t(57295),S=t(21682),v=t(32608),x=t(34070),f=t(39898),j=t(76879),y=t(27220);function w(e){let{topic:i,id:t}=e,[m,w]=(0,n.useState)(!0),[N,C]=(0,n.useState)(!1),[b,k]=(0,n.useState)(!1),[Z,O]=(0,n.useState)(t),[I,E]=(0,n.useState)(),[T,G]=(0,n.useState)(),[L,P]=(0,n.useState)(),[H,J]=(0,n.useState)(),[R,_]=(0,n.useState)(),[B,z]=(0,n.useState)([]),[V,D]=(0,n.useState)([]),[F,U]=(0,n.useState)([]),[W,A]=(0,n.useState)([]),[q,K]=(0,n.useState)([]),[M,Q]=(0,n.useState)([]),[X,Y]=(0,n.useState)(!0),[$,ee]=(0,n.useState)(!0),[ei,et]=(0,n.useState)(!1),[es,en]=(0,n.useState)([]),[el,ea]=(0,n.useState)([]),[er,ec]=(0,n.useState)([]),[eo,eu]=(0,n.useState)([]),[eh,ed]=(0,n.useState)([]),[em,ep]=(0,n.useState)([]),[eg,eS]=(0,n.useState)([]),[ev,ex]=(0,n.useState)([]),[ef,ej]=(0,n.useState)(),[ey,ew]=(0,n.useState)([]),[eN,eC]=(0,n.useState)([]),[eb,ek]=(0,n.useState)(!1),[eZ,eO]=(0,n.useState)(""),eI=(0,n.useRef)(null),eE=(0,n.useRef)(null),eT=(0,n.useRef)(null),eG=(0,n.useRef)(null),[eL,eP]=(0,n.useState)(!1),eH=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=(0,r.GJ)(),t=(0,r.bg)();k(e),C(t),eO((0,r.sq)());let s=async()=>{p().fire({title:"Đang tải dữ liệu...",allowOutsideClick:!1,didOpen:()=>{p().showLoading()}});try{let e=(0,c.iH)(o.db,"/users/".concat(i,"/").concat(Z)),t=await (0,c.U2)(e);if(t.exists()){let e=t.val();if(!e)return;E((0,r.Pw)(e.mp3Link)),G((0,r.Pw)(e.img)),P(e.tieude),J(e.tieudeTiengTrung),_(e.capdo),en(e.tumoi),ea(e.nguphaps),eS(e.mp3timelinelist||[]),eJ(e.mp3Timeline),ej(e.thamchieu),eC(e.cauhoi||[]),ew(e.nguphapimg||[]),console.log(e.cauhoi),z(e.gianthe.split("\n")),D(e.tiengtrung.split("\n")),A(e.pinyin.split("\n")),K(e.nghia.split("\n")),Q(e.level.split("\n")),U(e.hanviet.split("\n"))}let s=()=>{if(!eG.current)return;let e=eG.current.getBoundingClientRect();e.top<=window.innerHeight&&eP(!0),e.top>window.innerHeight&&eP(!1)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)}catch(e){console.error("Lỗi khi lấy dữ liệu:",e),p().fire({icon:"error",title:"Lỗi",text:"Kh\xf4ng thể lấy dữ liệu. Vui l\xf2ng thử lại sau!"})}finally{p().close()}},n=localStorage.getItem("isGianthe"),l=localStorage.getItem("isShowPinyin"),a=localStorage.getItem("isShowSpace");null!==n&&et(JSON.parse(n)),null!==l&&Y(JSON.parse(l)),null!==a&&ee(JSON.parse(a)),s()},[Z]),(0,n.useEffect)(()=>{ef&&(async()=>{try{let e=(0,c.iH)(o.db,ef),i=await (0,c.U2)(e);if(i.exists()){let e=i.val();if(!e)return;if(el?ea(i=>[...i,...e.nguphap]):ea(e.nguphap),ey?ew(i=>[...i,...e.nguphapimg]):ew(e.nguphapimg),e.hoithoai&&Array.isArray(e.hoithoai)){let i=e.hoithoai.flatMap(e=>e.tumoi||[]);es?en(e=>[...e,...i]):en(i)}}}catch(e){console.error("Lỗi khi lấy dữ liệu:",e)}finally{}})()},[ef]),(0,n.useEffect)(()=>{},[]);let eJ=e=>{if(ex(e),!e)return;let i=e.split("*"),t=[],s=[],n=[],l=[];i&&i.length>0&&(i.forEach(e=>{let[i,a,r,c]=e.trim().split("\n");t.push(i.trim()),s.push(a.trim()),n.push(r.trim()),l.push(c.trim())}),ec(t),eu(s),ed(n),ep(l))},eR=async()=>{let e=!ei;et(e),localStorage.setItem("isGianthe",JSON.stringify(e))},e_=async()=>{let e=!X;Y(e),localStorage.setItem("isShowPinyin",JSON.stringify(e))},eB=async()=>{let e=!$;ee(e),localStorage.setItem("isShowSpace",JSON.stringify(e))};return(0,s.jsx)(l.Z,{isStudy:!0,body:(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"listen-header-container",style:{backgroundColor:"#00586b"},children:(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"row mb-4",children:[(0,s.jsx)("div",{className:"col-12 col-lg-8 ",children:(0,s.jsxs)("div",{className:"p-3 m-3",children:[(0,s.jsx)("h1",{className:"text-linearWhiteBlue",children:L}),(0,s.jsx)("h2",{className:"text-linearWhiteBlue fw-bold tiengtrungText",children:H}),(0,s.jsxs)("div",{className:"text-linearWhiteBlue fs-1",children:["(",R,")"]}),(0,s.jsxs)("div",{className:"btn-group mt-2",children:[(0,s.jsx)(a.Z,{variant:ei?"warning":"primary",onClick:()=>eR(),children:ei?"Change to Traditional Chinese":"Change to Simple Chinese"}),(0,s.jsxs)(a.Z,{variant:X?"danger":"secondary",onClick:()=>e_(),children:["Pinyin ",X?"On":"Off"]}),(0,s.jsxs)(a.Z,{variant:$?"primary":"secondary",onClick:()=>eB(),children:["Space ",$?"On":"Off"]}),b&&(0,s.jsx)(d.default,{href:"/".concat(i,"/").concat(t,"/edit"),target:"_self",children:(0,s.jsx)(a.Z,{variant:"warning",children:"Edit"})})]})]})}),(0,s.jsx)("div",{className:"col-12 col-lg-4  image-container transitionImage",children:(0,s.jsx)(h.default,{src:T||"/placeholder-image.jpg",alt:"H\xecnh ảnh",width:380,height:380,className:"image-style rounded",style:{objectFit:"cover"}})})]})})}),(0,s.jsxs)("div",{className:"container",children:[(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{ref:eI,className:"col-12 col-md-8",style:{marginTop:"-160px",padding:"0"},children:[(0,s.jsx)(u.Z,{gianthelist:B,tiengtrunglist:V,hanvietlist:F,pinyinlist:W,nghialist:q,levellist:M,isShowPinyin:X,isShowSpace:$,isGianthe:ei,tumoi:es}),(0,s.jsx)(v.Z,{mp3:I,tieude:L,mp3gianthelist:er,mp3tiengtrunglist:eo,mp3pinyinlist:eh,mp3nghialist:em,mp3timelinelist:eg,isShowPinyin:X,isGianthe:ei}),(0,s.jsx)("div",{ref:eE,className:eb?"fullscreen-wrapper":"",children:(0,s.jsx)(x.Z,{mp3:I,tieude:L,mp3gianthelist:er,mp3tiengtrunglist:eo,mp3pinyinlist:eh,mp3nghialist:em,mp3timelinelist:eg,isShowPinyin:X,isGianthe:ei,imgsrc:T,tieudeTiengTrung:H,capdo:R,isFullScreen:eb,setIsFullScreen:ek,tumoi:es})}),(0,s.jsxs)("div",{ref:eT,children:[(0,s.jsx)(S.Z,{ref:eT,nguphaps:el,isGianthe:ei}),(0,s.jsx)(f.Z,{nguphap:ey})]})]}),(0,s.jsx)("div",{className:"col-12 col-md-4 ",children:(0,s.jsx)("div",{className:"scroll-tumoi-container",ref:eH,children:(0,s.jsx)(g.Z,{tumoi:es,isGianthe:ei})})})]}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-12 col-md-8",style:{pointerEvents:N?"auto":"none",opacity:N?1:.5},children:(0,s.jsxs)("div",{ref:eG,children:[(0,s.jsx)("div",{className:"fs-3 mb-3",children:"Bạn Cần Đăng Nhập Để C\xf3 Thể Trả Lời C\xe2u Hỏi"}),(0,s.jsx)(j.Z,{cauHoi:eN,isGianthe:ei,uid:eZ,id:t})]})}),(0,s.jsx)("div",{className:"col-12 col-md-4",children:eL&&(0,s.jsx)("div",{className:"viewUserDiem",children:(0,s.jsx)(y.Z,{hsk:"listen",id:t})})})]})]},eb),!eb&&(0,s.jsxs)("div",{style:{position:"fixed",top:"50%",right:"10px",display:"flex",flexDirection:"column",gap:"8px",zIndex:9999},children:[(0,s.jsx)(a.Z,{size:"sm",onClick:()=>{var e;return null===(e=eI.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"Reading"}),(0,s.jsx)(a.Z,{size:"sm",onClick:()=>{var e;return null===(e=eE.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"\uD83C\uDFB5 Listen"}),(0,s.jsx)(a.Z,{size:"sm",onClick:()=>{var e;return null===(e=eT.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"✏ Ngữ ph\xe1p"}),(0,s.jsx)(a.Z,{size:"sm",onClick:()=>{var e;return null===(e=eG.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"❓ C\xe2u hỏi"})]})]})})}t(20357)}},function(e){e.O(0,[2866,9513,5527,8905,7539,431,67,1953,4358,7481,9208,9461,8765,4974,3539,8472,609,3830,9233,6901,6802,8551,4547,7295,3104,5438,9618,2971,7023,1744],function(){return e(e.s=28593)}),_N_E=e.O()}]);