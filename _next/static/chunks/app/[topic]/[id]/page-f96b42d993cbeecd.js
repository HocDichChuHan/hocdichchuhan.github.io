(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8003],{28593:function(e,i,t){Promise.resolve().then(t.bind(t,91331))},91331:function(e,i,t){"use strict";t.d(i,{default:function(){return w}});var s=t(57437),n=t(2265),a=t(66802),l=t(12808);t(19768);var r=t(23508),c=t(60516),o=t(65606),u=t(39731),d=t(66648),h=t(87138),m=t(64379),g=t.n(m),p=t(57295),S=t(21682),x=t(32608),v=t(34070),f=t(39898),j=t(76879),y=t(27220);function w(e){let{topic:i,id:t}=e,[m,w]=(0,n.useState)(!0),[N,C]=(0,n.useState)(!1),[b,k]=(0,n.useState)(!1),[Z,O]=(0,n.useState)(t),[I,T]=(0,n.useState)(),[E,G]=(0,n.useState)(),[L,P]=(0,n.useState)(),[D,B]=(0,n.useState)(),[H,J]=(0,n.useState)(),[R,_]=(0,n.useState)([]),[z,V]=(0,n.useState)([]),[F,U]=(0,n.useState)([]),[W,A]=(0,n.useState)([]),[q,K]=(0,n.useState)([]),[M,Q]=(0,n.useState)([]),[X,Y]=(0,n.useState)(!0),[$,ee]=(0,n.useState)(!0),[ei,et]=(0,n.useState)(""),[es,en]=(0,n.useState)(""),[ea,el]=(0,n.useState)(!1),[er,ec]=(0,n.useState)([]),[eo,eu]=(0,n.useState)([]),[ed,eh]=(0,n.useState)([]),[em,eg]=(0,n.useState)([]),[ep,eS]=(0,n.useState)([]),[ex,ev]=(0,n.useState)([]),[ef,ej]=(0,n.useState)([]),[ey,ew]=(0,n.useState)([]),[eN,eC]=(0,n.useState)(),[eb,ek]=(0,n.useState)([]),[eZ,eO]=(0,n.useState)([]),[eI,eT]=(0,n.useState)(!1),[eE,eG]=(0,n.useState)(""),eL=(0,n.useRef)(null),eP=(0,n.useRef)(null),eD=(0,n.useRef)(null),eB=(0,n.useRef)(null),[eH,eJ]=(0,n.useState)(!1),eR=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=(0,r.GJ)(),t=(0,r.bg)();k(e),C(t),eG((0,r.sq)());let s=async()=>{g().fire({title:"Đang tải dữ liệu...",allowOutsideClick:!1,didOpen:()=>{g().showLoading()}});try{let e=(0,c.iH)(o.db,"/users/".concat(i,"/").concat(Z)),t=await (0,c.U2)(e);if(t.exists()){let e=t.val();if(!e)return;et(e.allData),en(e.allDataBachThoai),T((0,r.Pw)(e.mp3Link)),G((0,r.Pw)(e.img)),P(e.tieude),B(e.tieudeTiengTrung),J(e.capdo),ec(e.tumoi),eu(e.nguphaps),ej(e.mp3timelinelist||[]),ew(e.mp3Timeline),eC(e.thamchieu),eO(e.cauhoi||[]),ek(e.nguphapimg||[]),console.log(e.cauhoi),_(e.gianthe.split("\n")),V(e.tiengtrung.split("\n")),A(e.pinyin.split("\n")),K(e.nghia.split("\n")),Q(e.level.split("\n")),U(e.hanviet.split("\n"))}let s=()=>{if(!eB.current)return;let e=eB.current.getBoundingClientRect();e.top<=window.innerHeight&&eJ(!0),e.top>window.innerHeight&&eJ(!1)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)}catch(e){console.error("Lỗi khi lấy dữ liệu:",e),g().fire({icon:"error",title:"Lỗi",text:"Kh\xf4ng thể lấy dữ liệu. Vui l\xf2ng thử lại sau!"})}finally{g().close()}},n=localStorage.getItem("isGianthe"),a=localStorage.getItem("isShowPinyin"),l=localStorage.getItem("isShowSpace");null!==n&&el(JSON.parse(n)),null!==a&&Y(JSON.parse(a)),null!==l&&ee(JSON.parse(l)),s()},[Z]),(0,n.useEffect)(()=>{eN&&(async()=>{try{let e=(0,c.iH)(o.db,eN),i=await (0,c.U2)(e);if(i.exists()){let e=i.val();if(!e)return;if(eo?eu(i=>[...i,...e.nguphap]):eu(e.nguphap),eb?ek(i=>[...i,...e.nguphapimg]):ek(e.nguphapimg),e.hoithoai&&Array.isArray(e.hoithoai)){let i=e.hoithoai.flatMap(e=>e.tumoi||[]);er?ec(e=>[...e,...i]):ec(i)}}}catch(e){console.error("Lỗi khi lấy dữ liệu:",e)}finally{}})()},[eN]),(0,n.useEffect)(()=>{},[]);let e_=async()=>{let e=!ea;el(e),localStorage.setItem("isGianthe",JSON.stringify(e))},ez=async()=>{let e=!X;Y(e),localStorage.setItem("isShowPinyin",JSON.stringify(e))},eV=async()=>{let e=!$;ee(e),localStorage.setItem("isShowSpace",JSON.stringify(e))};return(0,s.jsx)(a.Z,{isStudy:!0,body:(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"listen-header-container",style:{backgroundColor:"#00586b"},children:(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"row mb-4",children:[(0,s.jsx)("div",{className:"col-12 col-lg-8 ",children:(0,s.jsxs)("div",{className:"p-3 m-3",children:[(0,s.jsx)("h1",{className:"text-linearWhiteBlue",children:L}),(0,s.jsx)("h2",{className:"text-linearWhiteBlue fw-bold tiengtrungText",children:D}),(0,s.jsxs)("div",{className:"text-linearWhiteBlue fs-1",children:["(",H,")"]}),(0,s.jsxs)("div",{className:"btn-group mt-2",children:[(0,s.jsx)(l.Z,{variant:ea?"warning":"primary",onClick:()=>e_(),children:ea?"Change to Traditional Chinese":"Change to Simple Chinese"}),(0,s.jsxs)(l.Z,{variant:X?"danger":"secondary",onClick:()=>ez(),children:["Pinyin ",X?"On":"Off"]}),(0,s.jsxs)(l.Z,{variant:$?"primary":"secondary",onClick:()=>eV(),children:["Space ",$?"On":"Off"]}),b&&(0,s.jsx)(h.default,{href:"/".concat(i,"/").concat(t,"/edit"),target:"_self",children:(0,s.jsx)(l.Z,{variant:"warning",children:"Edit"})})]})]})}),(0,s.jsx)("div",{className:"col-12 col-lg-4  image-container transitionImage",children:(0,s.jsx)(d.default,{src:E||"/placeholder-image.jpg",alt:"H\xecnh ảnh",width:380,height:380,className:"image-style rounded",style:{objectFit:"cover"}})})]})})}),(0,s.jsxs)("div",{className:"container",children:[(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{ref:eL,className:"col-12 col-md-8",style:{marginTop:"-160px",padding:"0"},children:[(0,s.jsx)(u.Z,{allData:ei,isShowPinyin:X,isShowSpace:$,isGianthe:ea,tumoi:er}),(0,s.jsx)(x.Z,{mp3:I,tieude:L,isShowPinyin:X,isGianthe:ea}),(0,s.jsx)("div",{ref:eP,className:eI?"fullscreen-wrapper":"",children:(0,s.jsx)(v.Z,{allData:ei,mp3:I,tieude:L,mp3Timeline:ey,isShowPinyin:X,isGianthe:ea,imgsrc:E,tieudeTiengTrung:D,capdo:H,isFullScreen:eI,setIsFullScreen:eT,tumoi:er})}),(0,s.jsxs)("div",{ref:eD,children:[(0,s.jsx)(S.Z,{ref:eD,nguphaps:eo,isGianthe:ea}),(0,s.jsx)(f.Z,{nguphap:eb})]})]}),(0,s.jsx)("div",{className:"col-12 col-md-4 ",children:(0,s.jsx)("div",{className:"scroll-tumoi-container",ref:eR,children:(0,s.jsx)(p.Z,{tumoi:er,isGianthe:ea})})})]}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-12 col-md-8",style:{pointerEvents:N?"auto":"none",opacity:N?1:.5},children:(0,s.jsxs)("div",{ref:eB,children:[(0,s.jsx)("div",{className:"fs-3 mb-3",children:"Bạn Cần Đăng Nhập Để C\xf3 Thể Trả Lời C\xe2u Hỏi"}),(0,s.jsx)(j.Z,{cauHoi:eZ,isGianthe:ea,uid:eE,id:t})]})}),(0,s.jsx)("div",{className:"col-12 col-md-4",children:eH&&(0,s.jsx)("div",{className:"viewUserDiem",children:(0,s.jsx)(y.Z,{hsk:"listen",id:t})})})]})]},eI),!eI&&(0,s.jsxs)("div",{style:{position:"fixed",top:"50%",right:"10px",display:"flex",flexDirection:"column",gap:"8px",zIndex:9999},children:[(0,s.jsx)(l.Z,{size:"sm",onClick:()=>{var e;return null===(e=eL.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"Reading"}),(0,s.jsx)(l.Z,{size:"sm",onClick:()=>{var e;return null===(e=eP.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"\uD83C\uDFB5 Listen"}),(0,s.jsx)(l.Z,{size:"sm",onClick:()=>{var e;return null===(e=eD.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"✏ Ngữ ph\xe1p"}),(0,s.jsx)(l.Z,{size:"sm",onClick:()=>{var e;return null===(e=eB.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"❓ C\xe2u hỏi"})]})]})})}t(20357)}},function(e){e.O(0,[2800,770,5527,8905,7539,431,67,1953,4358,7481,9208,9461,8765,4974,3539,8472,609,3830,9233,6901,6802,1654,4547,5192,3104,5438,5833,2971,7023,1744],function(){return e(e.s=28593)}),_N_E=e.O()}]);