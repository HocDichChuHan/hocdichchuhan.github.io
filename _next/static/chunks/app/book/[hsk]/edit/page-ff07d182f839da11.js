(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5318],{15686:function(e,n,l){Promise.resolve().then(l.bind(l,96395))},96395:function(e,n,l){"use strict";l.d(n,{default:function(){return m}});var i=l(57437),r=l(2265),t=l(66802),s=l(12808);l(19768);var a=l(23508),c=l(60516),o=l(65606),u=l(64379),d=l.n(u),h=l(34231);function m(e){let{hsk:n}=e,[l,u]=(0,r.useState)(!0),[m,x]=(0,r.useState)(!1),[v,g]=(0,r.useState)(!1),[b,f]=(0,r.useState)(n),[p,j]=(0,r.useState)([]);(0,r.useRef)(null);let k=(0,r.useRef)(null),C=(0,r.useRef)(null),D=(0,r.useRef)(null),N=(0,r.useRef)(null),Z=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=(0,a.GJ)(),l=(0,a.bg)();if(g(e),x(l),!e){window.location.href="/book/".concat(n);return}(async()=>{u(!0),d().fire({title:"Đang tải dữ liệu...",html:"Vui l\xf2ng chờ trong gi\xe2y l\xe1t",background:"#f8f9fa",color:"#333",allowOutsideClick:!1,didOpen:()=>{d().showLoading()}});try{let e=(0,c.iH)(o.db,"/users/book/".concat(n)),l=await (0,c.U2)(e);if(l.exists()){let e=l.val();if(!e)return;j(e.mucluc||"")}d().close()}catch(e){console.error("Lỗi khi lấy dữ liệu:",e),d().fire({icon:"error",title:"Lỗi khi tải dữ liệu",text:e.message||"Đ\xe3 xảy ra lỗi kh\xf4ng x\xe1c định. Vui l\xf2ng thử lại sau.",confirmButtonText:"Đ\xf3ng"})}finally{u(!1)}})()},[]);let w=async()=>{try{let e=(0,c.iH)(o.db,"/users/book/".concat(b));await (0,c.t8)(e,{mucluc:p}),d().fire("✅ Th\xe0nh c\xf4ng","Dữ liệu đ\xe3 được lưu.","success")}catch(e){console.error("❌ Lỗi khi lưu:",e),d().fire("❌ Lỗi","C\xf3 lỗi xảy ra khi lưu dữ liệu.","error")}},y=e=>{j(n=>n.map(n=>n.id===e?{...n,content:[...n.content,{number:n.content.length+1,name:"Item ".concat(n.content.length+1),pagenum:0,mp3link:""}]}:n))},I=(e,n)=>{j(l=>l.map(l=>l.id===e?{...l,name:n}:l))},L=(e,n,l,i)=>{j(r=>r.map(r=>r.id===e?{...r,content:r.content.map(e=>e.number===n?{...e,[l]:i}:e)}:r))};return(0,i.jsx)(t.Z,{body:(0,i.jsxs)("div",{className:"container",children:[(0,i.jsxs)("div",{style:{position:"fixed",top:"50%",right:"10px",display:"flex",flexDirection:"column",gap:"8px",zIndex:9999},children:[(0,i.jsx)(s.Z,{size:"sm",onClick:()=>{var e;return null===(e=Z.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"SaveData"}),(0,i.jsx)(s.Z,{size:"sm",onClick:()=>{var e;return null===(e=k.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"\uD83C\uDFB5 Timeline"}),(0,i.jsx)(s.Z,{size:"sm",onClick:()=>{var e;return null===(e=C.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"\uD83D\uDCDA Từ mới"}),(0,i.jsx)(s.Z,{size:"sm",onClick:()=>{var e;return null===(e=D.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"✏ Ngữ ph\xe1p"}),(0,i.jsx)(s.Z,{size:"sm",onClick:()=>{var e;return null===(e=N.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"❓ C\xe2u hỏi"})]}),(0,i.jsx)("h2",{children:"Edit list c\xe1c đường dẫn"}),(0,i.jsx)(s.Z,{ref:Z,onClick:w,className:"btn btn-success mb-1",children:"\uD83D\uDCBE Lưu dữ liệu"}),(0,i.jsx)(h.Z,{value:b,placeholder:"Nhập ID",onChange:e=>handleIdChange(e.target.value)}),(0,i.jsx)("div",{children:p.map(e=>(0,i.jsxs)("div",{className:"border p-2 mb-3 rounded",children:[(0,i.jsxs)("h5",{children:["B\xe0i ",e.id]}),(0,i.jsx)(h.Z,{value:e.name,placeholder:"T\xean b\xe0i học",onChange:n=>I(e.id,n.target.value)}),(0,i.jsx)(s.Z,{size:"sm",className:"mt-2 mb-2",onClick:()=>y(e.id),children:"➕ Th\xeam Item"}),(0,i.jsx)("ul",{children:e.content.map(n=>(0,i.jsxs)("li",{className:"mb-2",children:[(0,i.jsxs)("div",{className:"mb-1",children:[(0,i.jsx)("label",{children:(0,i.jsx)("strong",{children:"T\xean Item:"})}),(0,i.jsx)(h.Z,{value:n.name,placeholder:"T\xean item",onChange:l=>L(e.id,n.number,"name",l.target.value)})]}),(0,i.jsxs)("div",{className:"mb-1",children:[(0,i.jsx)("label",{children:(0,i.jsx)("strong",{children:"Trang:"})}),(0,i.jsx)(h.Z,{value:n.pagenum,placeholder:"Số trang",onChange:l=>L(e.id,n.number,"pagenum",l.target.value)})]}),(0,i.jsxs)("div",{className:"mb-1",children:[(0,i.jsx)("label",{children:(0,i.jsx)("strong",{children:"MP3 Link:"})}),(0,i.jsx)(h.Z,{value:n.mp3link,placeholder:"Link MP3",onChange:l=>L(e.id,n.number,"mp3link",l.target.value)}),n.mp3link&&(0,i.jsxs)("div",{children:["\uD83C\uDFB5 ",(0,i.jsx)("a",{href:n.mp3link,target:"_blank",rel:"noreferrer",children:"Nghe thử"})]})]})]},n.number))})]},e.id))}),(0,i.jsx)(s.Z,{onClick:()=>{let e={id:p.length+1,name:"B\xe0i ".concat(p.length+1),content:[]};j([...p,e])},className:"btn btn-primary mb-1",children:"+ Add Muc Luc"})]})})}l(39731),l(63806),l(50658),l(32608),l(51146),l(85328)}},function(e){e.O(0,[2866,8905,431,4358,7481,9208,9461,8765,4974,3539,8472,609,3830,9233,6901,6802,658,9238,2971,7023,1744],function(){return e(e.s=15686)}),_N_E=e.O()}]);