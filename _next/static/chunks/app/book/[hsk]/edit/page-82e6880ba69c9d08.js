(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5318],{15686:function(e,n,i){Promise.resolve().then(i.bind(i,96395))},96395:function(e,n,i){"use strict";i.d(n,{default:function(){return m}});var l=i(57437),r=i(2265),a=i(66802),t=i(12808);i(19768);var s=i(23508),c=i(60516),o=i(65606),u=i(64379),d=i.n(u),h=i(34231);function m(e){let{hsk:n}=e,[i,u]=(0,r.useState)(!0),[m,p]=(0,r.useState)(!1),[g,v]=(0,r.useState)(!1),[x,b]=(0,r.useState)(n),[j,f]=(0,r.useState)([]);(0,r.useRef)(null);let k=(0,r.useRef)(null),C=(0,r.useRef)(null),y=(0,r.useRef)(null),N=(0,r.useRef)(null),Z=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=(0,s.GJ)(),i=(0,s.bg)();if(v(e),p(i),!e){window.location.href="/book/".concat(n);return}(async()=>{u(!0),d().fire({title:"Đang tải dữ liệu...",html:"Vui l\xf2ng chờ trong gi\xe2y l\xe1t",background:"#f8f9fa",color:"#333",allowOutsideClick:!1,didOpen:()=>{d().showLoading()}});try{let e=(0,c.iH)(o.db,"/users/book/".concat(n)),i=await (0,c.U2)(e);if(i.exists()){let e=i.val();if(!e)return;f(e.mucluc||"")}d().close()}catch(e){console.error("Lỗi khi lấy dữ liệu:",e),d().fire({icon:"error",title:"Lỗi khi tải dữ liệu",text:e.message||"Đ\xe3 xảy ra lỗi kh\xf4ng x\xe1c định. Vui l\xf2ng thử lại sau.",confirmButtonText:"Đ\xf3ng"})}finally{u(!1)}})()},[]);let w=async()=>{try{let e=(0,c.iH)(o.db,"/users/book/".concat(x));await (0,c.t8)(e,{mucluc:j}),d().fire("✅ Th\xe0nh c\xf4ng","Dữ liệu đ\xe3 được lưu.","success")}catch(e){console.error("❌ Lỗi khi lưu:",e),d().fire("❌ Lỗi","C\xf3 lỗi xảy ra khi lưu dữ liệu.","error")}},D=e=>{f(n=>n.map(n=>n.id===e?{...n,content:[...n.content,{number:n.content.length+1,name:"Item ".concat(n.content.length+1),pagenum:0,mp3link:"",nguphap:[]}]}:n))},I=function(e,n,i){let l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];f(r=>r.map(r=>r.id===e?{...r,content:r.content.map(e=>e.number===n?{...e,nguphap:l?(Array.isArray(e.nguphap)?e.nguphap:[]).filter(e=>e!==i):[...Array.isArray(e.nguphap)?e.nguphap:[],i]}:e)}:r))},T=(e,n,i,l)=>{f(r=>r.map(r=>r.id===e?{...r,content:r.content.map(e=>e.number===n?{...e,nguphap:(Array.isArray(e.nguphap)?e.nguphap:[]).map((e,n)=>n===i?l:e)}:e)}:r))},z=(e,n)=>{f(i=>i.map(i=>i.id===e?{...i,name:n}:i))},L=(e,n,i,l)=>{f(r=>r.map(r=>r.id===e?{...r,content:r.content.map(e=>e.number===n?{...e,[i]:l}:e)}:r))};return(0,l.jsx)(a.Z,{body:(0,l.jsxs)("div",{className:"container",children:[(0,l.jsxs)("div",{style:{position:"fixed",top:"50%",right:"10px",display:"flex",flexDirection:"column",gap:"8px",zIndex:9999},children:[(0,l.jsx)(t.Z,{size:"sm",onClick:()=>{var e;return null===(e=Z.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"SaveData"}),(0,l.jsx)(t.Z,{size:"sm",onClick:()=>{var e;return null===(e=k.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"\uD83C\uDFB5 Timeline"}),(0,l.jsx)(t.Z,{size:"sm",onClick:()=>{var e;return null===(e=C.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"\uD83D\uDCDA Từ mới"}),(0,l.jsx)(t.Z,{size:"sm",onClick:()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"✏ Ngữ ph\xe1p"}),(0,l.jsx)(t.Z,{size:"sm",onClick:()=>{var e;return null===(e=N.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"❓ C\xe2u hỏi"})]}),(0,l.jsx)("h2",{children:"Edit list c\xe1c đường dẫn"}),(0,l.jsx)(t.Z,{ref:Z,onClick:w,className:"btn btn-success mb-1",children:"\uD83D\uDCBE Lưu dữ liệu"}),(0,l.jsx)(h.Z,{value:x,placeholder:"Nhập ID",onChange:e=>handleIdChange(e.target.value)}),(0,l.jsx)("div",{children:j.map(e=>(0,l.jsxs)("div",{className:"border p-2 mb-3 rounded",children:[(0,l.jsxs)("h5",{children:["B\xe0i ",e.id]}),(0,l.jsx)(h.Z,{value:e.name,placeholder:"T\xean b\xe0i học",onChange:n=>z(e.id,n.target.value)}),(0,l.jsx)(t.Z,{size:"sm",className:"mt-2 mb-2",onClick:()=>D(e.id),children:"➕ Th\xeam Item"}),(0,l.jsx)("div",{className:"row",children:e.content.map(n=>(0,l.jsxs)("div",{className:"p-2 mb-3 col-12 col-md-6 border rounded",children:[(0,l.jsxs)("div",{className:"mb-1",children:[(0,l.jsx)("label",{children:(0,l.jsx)("strong",{children:"T\xean Item:"})}),(0,l.jsx)(h.Z,{value:n.name,placeholder:"T\xean item",onChange:i=>L(e.id,n.number,"name",i.target.value)})]}),(0,l.jsxs)("div",{className:"mb-1",children:[(0,l.jsx)("label",{children:(0,l.jsx)("strong",{children:"Trang:"})}),(0,l.jsx)(h.Z,{value:n.pagenum,placeholder:"Số trang",onChange:i=>L(e.id,n.number,"pagenum",i.target.value)})]}),(0,l.jsxs)("div",{className:"mb-1",children:[(0,l.jsx)("label",{children:(0,l.jsx)("strong",{children:"MP3 Link:"})}),(0,l.jsx)(h.Z,{value:n.mp3link,placeholder:"Link MP3",onChange:i=>L(e.id,n.number,"mp3link",i.target.value)})]}),(0,l.jsxs)("div",{className:"mb-1",children:[(0,l.jsx)("label",{children:(0,l.jsx)("strong",{children:"Ngữ ph\xe1p:"})}),(0,l.jsx)("ul",{children:n.nguphap&&n.nguphap.map((i,r)=>(0,l.jsxs)("li",{children:[(0,l.jsx)(h.Z,{value:i,placeholder:"Ngữ Ph\xe1p",onChange:i=>T(e.id,n.number,r,i.target.value)}),(0,l.jsx)(t.Z,{variant:"outline-danger",size:"sm",onClick:()=>I(e.id,n.number,i,!0),children:"❌"})]},r))}),(0,l.jsx)(t.Z,{size:"sm",variant:"outline-primary",onClick:()=>{var i;return I(e.id,n.number,"Ngữ ph\xe1p ".concat((null===(i=n.nguphap)||void 0===i?void 0:i.length)||1))},children:"➕ Th\xeam ngữ ph\xe1p"})]})]},n.number))})]},e.id))}),(0,l.jsx)(t.Z,{onClick:()=>{let e={id:j.length+1,name:"B\xe0i ".concat(j.length+1),content:[]};f([...j,e])},className:"btn btn-primary mb-1",children:"+ Add Muc Luc"})]})})}i(39731),i(63806),i(50658),i(32608),i(51146),i(85328)}},function(e){e.O(0,[2866,8905,431,4358,7481,9208,9461,8765,4974,3539,8472,609,3830,9233,6901,6802,658,9238,2971,7023,1744],function(){return e(e.s=15686)}),_N_E=e.O()}]);