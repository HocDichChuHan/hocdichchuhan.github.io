"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1854],{9898:function(e,i,t){var n=t(7437);t(2265),t(3508);var a=t(6648);i.Z=e=>{let{nguphap:i}=e;return(0,n.jsxs)("div",{className:"cauhoi-container",children:[(0,n.jsx)("h1",{children:"Mở Rộng"}),i&&i.map((e,i)=>(0,n.jsxs)("div",{className:"row",children:[(0,n.jsxs)("h2",{children:[i+1,". ",e.tieude]}),e.noidung&&(0,n.jsx)("p",{children:e.noidung}),(0,n.jsx)("div",{className:"image-container",children:(0,n.jsx)(a.default,{src:e.src,alt:"H\xecnh ảnh",width:1200,height:1200,layout:"intrinsic",className:"image-styled",style:{objectFit:"contain"}})})]},i))]})}},3335:function(e,i,t){t.d(i,{Z:function(){return G}});var n=t(7437),a=t(2265),s=t(6648);t(1682);var l=t(7761);t(8472),t(2034);var c="/_next/static/files/correct.mp3",r="/_next/static/files/wrong.mp3",h=t(9745),o=t(4379),u=t.n(o),d=t(2808);function g(e){let{tumoi:i,onFinish:t,isGianthe:l}=e,[o,u]=(0,a.useState)([]),[g,m]=(0,a.useState)([]),[x,p]=(0,a.useState)({pinyin:null,hanzi:null}),[f,j]=(0,a.useState)({pinyin:null,hanzi:null,nghia:null,gianthe:null}),[v,b]=(0,a.useState)([]),[N,y]=(0,a.useState)({id:null,hanziId:null,type:null}),[C,S]=(0,a.useState)([]),[w,D]=(0,a.useState)(!1),[k,M]=(0,a.useState)("https://hocdichchuhan.github.io/img/gif/correct4.gif"),[Z,T]=(0,a.useState)(!1),B=(0,a.useRef)(null),G=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(i&&i.length>0){let e=[...i].sort(()=>Math.random()-.5);u(e.map((e,i)=>({...e,id:i}))),m(e.map((e,i)=>({...e,id:i})).sort(()=>Math.random()-.5)),p({pinyin:null,hanzi:null}),b([]),y({id:null,hanziId:null,type:null}),S([]),D(!1)}},[i]);let L=(e,i)=>{let t={...x,[e]:i};p(t),t.pinyin&&t.hanzi&&!Z&&I(t)},I=e=>{var n,a;T(!0);let{pinyin:s,hanzi:l}=e,c=s.id===l.id,r=()=>{T(!1),p({pinyin:null,hanzi:null}),y({id:null,hanziId:null,type:null})};if(c){j(l),M("https://hocdichchuhan.github.io/img/gif/correct".concat(Math.floor(3*Math.random())+1,".gif"));let e=s.id;y({id:e,hanziId:e,type:"correct"}),null===(n=B.current)||void 0===n||n.play(),S(i=>[...i,e]),setTimeout(()=>{(0,h.Z)(l.gianthe,10+l.id)},300),setTimeout(()=>{b(n=>{let a=[...n,e];return a.length===i.length&&(D(!0),setTimeout(()=>{null==t||t()},300)),a}),S(i=>i.filter(i=>i!==e)),r()},500)}else M("https://hocdichchuhan.github.io/img/gif/wrong".concat(Math.floor(5*Math.random())+1,".gif")),y({id:s.id,hanziId:l.id,type:"wrong"}),null===(a=G.current)||void 0===a||a.play(),setTimeout(()=>{r()},800)},R=(e,i)=>{var t;let n=(null===(t=x[i])||void 0===t?void 0:t.id)===e.id,a=v.includes(e.id),s=C.includes(e.id),l="pinyin"===i&&N.id===e.id||"hanzi"===i&&N.hanziId===e.id;return s?"matchedCorrect bg-green-500 border-green-500 text-white":a?"bg-blue-500 border-green-500 text-white":l&&"wrong"===N.type?"matchedWrong border-red-500 animate-shake":l&&"correct"===N.type?"border-green-500 animate-pulse":n?"bg-blue-400 border-blue-400":"bg-black border-gray-500 text-white"};return(0,n.jsxs)("div",{className:"MatchingGameContaniner",children:[(0,n.jsx)("audio",{ref:B,src:c}),(0,n.jsx)("audio",{ref:G,src:r}),(0,n.jsxs)("div",{className:"d-flex row align-items-center justify-content-center",children:[(0,n.jsx)("div",{className:"col-12 col-md-6 MatchingGameContaniner",children:(0,n.jsx)(s.default,{src:k,alt:"Loading...",width:200,height:200,style:{objectFit:"contain"}})}),f.tiengtrung&&(0,n.jsxs)("div",{className:"col-12 col-md-6 MatchingGameContaniner",children:[(0,n.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-2",children:[(0,n.jsx)("h2",{className:"text-danger",children:l?f.gianthe:f.tiengtrung||null}),(0,n.jsx)(d.Z,{lassName:"btn-phatamthanh",variant:"danger",onClick:()=>(0,h.Z)(f.gianthe,3),children:"\uD83D\uDD0A"})]}),(0,n.jsx)("h2",{className:"text-danger",children:f.pinyin||null}),(0,n.jsx)("h2",{className:"text-danger",children:f.nghia||null})]})]}),(0,n.jsxs)("div",{className:"flex flex-col flex justify-center items-center h-full",children:[(0,n.jsx)("h3",{className:"mb-2",children:"Chữ H\xe1n"}),g.map((e,i)=>(0,n.jsx)("button",{className:"relative flex items-center justify-between w-full py-2 px-4 my-1 rounded border transition-all duration-300 ".concat(R(e,"hanzi")),onClick:()=>L("hanzi",e,i),disabled:v.includes(e.id),children:l?e.gianthe:e.tiengtrung},e.id))]}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("h3",{className:"mb-2",children:"Pinyin"}),o.map((e,i)=>(0,n.jsx)("button",{className:"relative flex items-center justify-between w-full py-2 px-4 my-1 rounded border transition-all duration-300 ".concat(R(e,"pinyin")),onClick:()=>L("pinyin",e,i),disabled:v.includes(e.id),children:e.pinyin},e.id))]})]})}function m(e){let{items:i,onFinish:t,isGianthe:l}=e,[o,u]=(0,a.useState)(0),[g,m]=(0,a.useState)(""),[x,p]=(0,a.useState)(""),[f,j]=(0,a.useState)("https://hocdichchuhan.github.io/img/gif/correct4.gif"),[v,b]=(0,a.useState)(!1),N=(0,a.useRef)(null),y=(0,a.useRef)(null),C=i[o],S=i[o-1]||[],w=()=>{var e,n;let a=g.trim(),s=C.tiengtrung.trim(),l=C.gianthe.trim();a===s||a===l?(null===(e=N.current)||void 0===e||e.play(),setTimeout(()=>{(0,h.Z)(C.gianthe,10+o)},300),j("https://hocdichchuhan.github.io/img/gif/correct".concat(Math.floor(3*Math.random())+1,".gif")),p("correct"),setTimeout(()=>{p(""),m(""),o===i.length-1?(u(0),null==t||t()):u(e=>e+1)},1e3)):(null===(n=y.current)||void 0===n||n.play(),j("https://hocdichchuhan.github.io/img/gif/wrong".concat(Math.floor(5*Math.random())+1,".gif")),p("wrong"),setTimeout(()=>p(""),1e3))};return i&&i.length&&i[o]?(0,n.jsxs)("div",{className:"MatchingGameContaniner",children:[(0,n.jsx)("audio",{ref:N,src:c}),(0,n.jsx)("audio",{ref:y,src:r}),(0,n.jsxs)("div",{className:"row align-items-center justify-content-center",style:{width:"100%"},children:[(0,n.jsxs)("div",{className:"col-12 col-md-6 MatchingGameContaniner",children:[(0,n.jsx)(s.default,{src:f,alt:"Loading...",width:200,height:200,style:!0}),(0,n.jsx)("div",{className:"text-xl font-medium",children:C.nghia}),(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"text",value:g,onChange:e=>m(e.target.value),onKeyDown:e=>{"Enter"===e.key&&w()},className:"w-full p-2 border rounded-lg outline-none text-xl ".concat("correct"===x||v?"border-green-500":"wrong"===x?"border-red-500":"border-gray-300"),placeholder:"中文..."}),(0,n.jsx)(d.Z,{variant:"primary",className:"ms-1",onClick:w,children:"Kiểm tra"})]}),(0,n.jsx)(d.Z,{variant:"secondary",className:"mt-2",onClick:()=>{b(!0),(0,h.Z)(C.gianthe,1e3+o),m(C.tiengtrung),p("correct"),j("https://hocdichchuhan.github.io/img/gif/correct".concat(Math.floor(3*Math.random())+1,".gif")),setTimeout(()=>{b(!1),p(""),m(""),o===i.length-1?(u(0),null==t||t()):u(e=>e+1)},4e3)},children:"❓ Hiện đ\xe1p \xe1n"}),"correct"===x&&(0,n.jsx)("div",{className:"text-green-600",children:"✅ Đ\xfang rồi!"}),"wrong"===x&&(0,n.jsx)("div",{className:"text-red-600",children:"❌ Sai rồi. Thử lại nh\xe9!"})]}),S.tiengtrung&&(0,n.jsxs)("div",{className:"col-12 col-md-6 MatchingGameContaniner",children:[(0,n.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-2",children:[(0,n.jsx)("h2",{className:"text-danger",children:l?S.gianthe:S.tiengtrung||null}),(0,n.jsx)(d.Z,{variant:"danger",onClick:()=>(0,h.Z)(C.gianthe,o+100),children:"\uD83D\uDD0A"})]}),(0,n.jsx)("h2",{className:"text-danger",children:S.pinyin||null}),(0,n.jsx)("h2",{className:"text-danger",children:S.nghia||null})]})]})]}):(0,n.jsx)("div",{children:"Đang tải dữ liệu..."})}var x=t(2474),p=t(5606);let f=e=>e.replace(/[.,!?;:～。！？、，：\s]/g,"").trim();var j=e=>{let{validCau:i,isGianthe:t,onNext:l,congdiem:o,pathBaitap:g}=e,[m,j]=(0,a.useState)(!1),[v,b]=(0,a.useState)(""),[N,y]=(0,a.useState)(null),[C,S]=(0,a.useState)(!1),[w,D]=(0,a.useState)(null),k=(0,a.useRef)(null),M=(0,a.useRef)(null),[Z,T]=(0,a.useState)(0),[B,G]=(0,a.useState)(0),[L,I]=(0,a.useState)(null),[R,z]=(0,a.useState)("https://hocdichchuhan.github.io/img/gif/correct4.gif");(0,a.useEffect)(()=>{if(i){let e=i[B];f(e.gianthe),f(e.tiengtrung),I(e),y(!1),S(!1)}},[B,i]);let E=()=>{let e=B+1;e<i.length?G(e):l()},P=async()=>{let e=Math.floor(10*(Z+100/i.length))/10;await H("".concat(g,"/noi"),e),T(e)},H=async(e,i)=>{try{await Promise.all([(0,p.Pf)(e,i)])}catch(i){console.error("Lỗi update:",i);let e={message:"Lỗi update: "+i.message};u().fire(i.message,"","info"),setState(i=>({...i,error:e}))}finally{}},F=async()=>{var e,i;let t=await (0,x.Z)("CN");b(t);let n=f(t),a=f(L.gianthe);(S(!0),n===a)?(null===(e=k.current)||void 0===e||e.play(),z("https://hocdichchuhan.github.io/img/gif/correct".concat(Math.floor(3*Math.random())+1,".gif")),setTimeout(()=>{(0,h.Z)(L.gianthe,10)},300),y(!0),await P()):(null===(i=M.current)||void 0===i||i.play(),z("https://hocdichchuhan.github.io/img/gif/wrong".concat(Math.floor(5*Math.random())+1,".gif")),y(!1))};return(null==L?void 0:L.gianthe)?(0,n.jsxs)("div",{className:"speech-game MatchingGameContaniner",children:[(0,n.jsx)("audio",{ref:k,src:c}),(0,n.jsx)("audio",{ref:M,src:r}),(0,n.jsxs)("div",{className:"row align-items-center justify-content-center",children:[(0,n.jsx)("div",{className:"col-12 col-md-8 MatchingGameContaniner",children:(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsx)("strong",{className:"tiengtrungText text-danger fs-1",children:t?L.gianthe:L.tiengtrung}),(0,n.jsx)(d.Z,{variant:"success",onClick:()=>(0,h.Z)(L.gianthe,100),children:"\uD83D\uDD0A"}),(0,n.jsx)("p",{className:"fs-2",children:L.pinyin}),(0,n.jsx)("p",{className:"fs-2",children:(0,n.jsx)("em",{children:L.dichnghia})})]})}),(0,n.jsx)("div",{className:"col-12 col-md-4 MatchingGameContaniner",children:(0,n.jsx)(s.default,{src:R,alt:"Loading...",width:200,height:200,style:!0})})]}),(0,n.jsx)("button",{onClick:F,disabled:m,className:"btn btn-primary fs-1",children:"\uD83C\uDF99️ Bắt đầu n\xf3i"}),C&&(0,n.jsxs)("div",{className:"mt-3",children:[v&&(0,n.jsxs)("p",{children:["Bạn n\xf3i: ",(0,n.jsx)("strong",{className:"tiengtrungText fs-2",children:v})]}),!0===N&&(0,n.jsx)("p",{className:"text-success",children:"✅ Ch\xednh x\xe1c!"}),!1===N&&(0,n.jsx)("p",{className:"text-danger",children:"❌ Chưa đ\xfang, h\xe3y thử lại!"})]}),N&&(0,n.jsx)("div",{className:"mt-4 flex justify-between gap-4",children:(0,n.jsx)(d.Z,{variant:"success",onClick:()=>E(),children:"▶️ Tiếp"})}),!N&&(0,n.jsx)("div",{className:"mt-4 flex justify-between gap-4",children:(0,n.jsx)(d.Z,{variant:"danger",onClick:()=>E(),children:"▶️ Bỏ qua"})})]}):null};function v(e){let{correctText:i,userInput:t}=e;return(0,n.jsx)("div",{style:{fontSize:"24px"},children:(()=>{let e=i.split(""),a=t.split(""),s=Math.max(e.length,a.length),l=[];for(let i=0;i<s;i++){let t=e[i]||"",s=a[i]||"";t===s?l.push((0,n.jsx)("span",{style:{marginRight:2},children:t},i)):l.push((0,n.jsx)("span",{style:{textDecoration:"line-through",color:"red",marginRight:2},children:s},i),(0,n.jsx)("span",{style:{color:"green",marginRight:2},children:t},"".concat(i,"-correct")))}return l})()})}let b=e=>e.replace(/[.,!?;:～。！？、，：\s]/g,"").trim(),N=e=>e.trim().split("").filter(Boolean);function y(e){return[...e].sort(()=>Math.random()-.5)}let C=(e,i)=>{let t=N(e),n=N(i);return t.map((e,i)=>({id:"".concat(e,"-").concat(i,"-").concat(Math.random()),value:e,gianthe:t[i],phonthe:n[i],index:i}))};function S(e){let{validCau:i,isGianthe:t,onNext:l,onPrevious:o,congdiem:g,pathBaitap:m}=e,[x,f]=(0,a.useState)([]),[j,S]=(0,a.useState)([]),[w,D]=(0,a.useState)(null),[k,M]=(0,a.useState)(!1),[Z,T]=(0,a.useState)(!1),B=(0,a.useRef)(null),G=(0,a.useRef)(null),[L,I]=(0,a.useState)("https://hocdichchuhan.github.io/img/gif/correct4.gif"),[R,z]=(0,a.useState)(0),[E,P]=(0,a.useState)(null),[H,F]=(0,a.useState)(0),[A,_]=(0,a.useState)([]),[K,V]=(0,a.useState)(""),[U,W]=(0,a.useState)("");(0,a.useEffect)(()=>{if(i&&i.length>1){let e=i[R],t=i[(R+1)%i.length],n=e.gianthe,a=t.gianthe,s=b(n);b(a);let l=e.tiengtrung,c=t.tiengtrung,r=b(l);b(c);let h=C(s,r);P(e),f(y(h)),S([]),_([]),T(!1)}},[R,i]),(0,a.useEffect)(()=>{(null==E?void 0:E.tiengtrung)&&(f(y(N(b(E.tiengtrung)))),S([]),_([]))},[]);let q=async(e,i)=>{try{await Promise.all([(0,p.Pf)(e,i)])}catch(i){console.error("Lỗi update:",i);let e={message:"Lỗi update: "+i.message};u().fire(i.message,"","info"),setState(i=>({...i,error:e}))}finally{}},J=async()=>{let e=Math.floor(10*(H+100/i.length))/10;await q("".concat(m,"/nghe"),e),F(e)},O=(e,i)=>{S(i=>[...i,e]),(0,h.Z)(e.gianthe,e.index+10),f(i=>i.filter(i=>i.id!==e.id))},Q=e=>{f(i=>y([...i,e])),S(i=>i.filter(i=>i.id!==e.id))},X=async e=>{var i,n;e.preventDefault();let a=j.map(e=>t?e.value:e.phonthe).join(""),s=b(t?E.gianthe:E.tiengtrung),l=s.split(""),c=a.split("");V(a),W(s);let r=[],o=0,u=0;for(;o<c.length||u<l.length;){let e=c[o],i=l[u];e===i?(r.push({value:e,isCorrect:!0,isMissing:!1}),o++,u++):e&&!l.includes(e)?(r.push({value:e,isCorrect:!1,isMissing:!1}),o++):(i&&!c.includes(i)?r.push({value:i,isCorrect:!1,isMissing:!0}):(r.push({value:e||i,isCorrect:!1,isMissing:!e}),o++),u++)}(T(!0),r.every(e=>e.isCorrect))?(null===(i=B.current)||void 0===i||i.play(),I("https://hocdichchuhan.github.io/img/gif/correct".concat(Math.floor(3*Math.random())+1,".gif")),setTimeout(()=>(0,h.Z)(E.gianthe,10),300),D(!0),await J(),_([])):(null===(n=G.current)||void 0===n||n.play(),I("https://hocdichchuhan.github.io/img/gif/wrong".concat(Math.floor(5*Math.random())+1,".gif")),D(!1),_(r))},Y=()=>{(null==E?void 0:E.tiengtrung)&&(0,h.Z)(E.gianthe)};if(E)return(0,n.jsxs)("div",{className:"MatchingGameContaniner",children:[(0,n.jsx)("audio",{ref:B,src:c}),(0,n.jsx)("audio",{ref:G,src:r}),(0,n.jsxs)("div",{className:"row",style:{width:""},children:[(k||w)&&(0,n.jsxs)("div",{className:"col-12 col-md-6",children:[(0,n.jsx)("strong",{className:"tiengtrungText text-danger fs-1",children:t?E.gianthe:E.tiengtrung}),(0,n.jsx)(d.Z,{variant:"primary",onClick:Y,className:"px-4 py-2 rounded mt-3",children:"▶️ Nghe"}),(0,n.jsx)("p",{className:"fs-2",children:E.pinyin}),(0,n.jsx)("p",{className:"fs-2",children:(0,n.jsx)("em",{children:E.dichnghia})})]}),(0,n.jsx)("div",{className:"col-12 col-md-6",children:(0,n.jsx)(s.default,{src:L,alt:"Feedback",width:200,height:200})})]}),!w&&!k&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Z,{variant:"primary",onClick:Y,className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 mt-3",children:"▶️ Nghe"}),(0,n.jsx)("div",{className:"mt-4 flex flex-wrap gap-2",children:x.map((e,i)=>(0,n.jsx)(d.Z,{variant:"outline-primary",onClick:()=>O(e,i),className:"text-5xl fs-3 p-3",children:t?e.gianthe:e.phonthe},e.id))}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("h4",{children:"C\xe2u của bạn:"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2 border p-3 rounded min-h-[60px]",children:Z?(0,n.jsx)(v,{correctText:U,userInput:K}):(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:j.map(e=>(0,n.jsx)(d.Z,{variant:"outline-success",onClick:()=>Q(e),className:"text-5xl fs-3 p-3",children:t?e.gianthe:e.phonthe},e.id))})})]}),!Z&&(0,n.jsxs)("form",{onSubmit:X,className:"mt-4",children:[(0,n.jsx)(d.Z,{variant:"success",type:"submit",className:"px-4 py-2",children:"✅ Kiểm tra"}),(0,n.jsx)(d.Z,{variant:"secondary",onClick:()=>{var e;null===(e=G.current)||void 0===e||e.play(),I("https://hocdichchuhan.github.io/img/gif/wrong".concat(Math.floor(5*Math.random())+1,".gif")),D(!1),M(!0),T(!0),setTimeout(()=>(0,h.Z)(E.gianthe,10),300)},className:"px-4 py-2 ms-2",children:"\uD83D\uDC40 Show Kết Quả"})]})]}),Z&&(0,n.jsx)("div",{className:"mt-4 flex justify-between gap-4",children:(0,n.jsx)(d.Z,{variant:"warning",onClick:()=>{D(null),M(!1),R<i.length-1?z(R+1):(u().fire("\uD83C\uDF89 Ho\xe0n th\xe0nh!","Bạn đ\xe3 l\xe0m hết c\xe1c c\xe2u!","success"),l())},children:"▶️ Tiếp"})})]})}var w=t(516),D=t(3137),k=t(3830),M=t(4231);function Z(e){let{dsCau:i,isGianthe:t,pathBaitap:s,hsk:l,id:c}=e,[r,o]=(0,a.useState)(null),[g,m]=(0,a.useState)({}),[x,f]=(0,a.useState)(!1),[j,v]=(0,a.useState)(!1),b=(e,i)=>{u().fire({icon:e,title:i,position:"center",showConfirmButton:!1,timer:1500,timerProgressBar:!0})};(0,a.useEffect)(()=>{let e=localStorage.getItem("userLogin");if(e){let t=JSON.parse(e);o(t),i.forEach(async(e,i)=>{let n="".concat(s,"/cauhoi/").concat(t.uid,"/").concat(i),a=await (0,w.U2)((0,w.iH)(p.db,n));a.exists()&&m(e=>({...e,[i]:{userInput:a.val().userInput||"",nghia:a.val().nghiacuanguoidung||""}}))})}},[i,s]);let N=(e,i,t)=>{m(n=>({...n,[e]:{...n[e],[i]:t}}))},y=async()=>{if(r){for(let l=0;l<i.length;l++){var e,t,n,a;let c=i[l],h=(null===(t=g[l])||void 0===t?void 0:null===(e=t.userInput)||void 0===e?void 0:e.trim())||"",o=(null===(a=g[l])||void 0===a?void 0:null===(n=a.nghia)||void 0===n?void 0:n.trim())||"",u="".concat(s,"/cauhoi/").concat(r.uid,"/").concat(l);await (0,w.t8)((0,w.iH)(p.db,u),{userInput:h,nghia:c.nghia,hanviet:c.gianthe,nghiacuanguoidung:o,time:Date.now()})}b("success","Đ\xe3 lưu to\xe0n bộ b\xe0i l\xe0m!")}},C=async()=>{if(!r)return;let e="".concat(s,"/cauhoi/").concat(r.uid),t="user/baitap/".concat(r.uid,"/").concat(l,"_").concat(c),n=Date.now();try{let a=await (0,w.U2)((0,w.iH)(p.db,e));if(a.exists()){let e=a.val(),s=i.map((i,t)=>{var a,s;return{tiengtrung:i.tiengtrung,gianthe:i.gianthe,pinyin:i.pinyin,nghia:i.nghia,cautraloi:(null===(a=e[t])||void 0===a?void 0:a.userInput)||"",nghiacuanguoidung:(null===(s=e[t])||void 0===s?void 0:s.nghiacuanguoidung)||"",time:n}});await (0,w.t8)((0,w.iH)(p.db,t),{hsk:l,id:c,timeSubmit:n,cauTraLoi:s}),b("success","Đ\xe3 gửi b\xe0i tập th\xe0nh c\xf4ng!")}else b("warning","Chưa c\xf3 dữ liệu để gửi!")}catch(e){console.error("Lỗi:",e),b("error","Lỗi khi gửi b\xe0i tập!")}};return(0,n.jsxs)("div",{className:"container py-4",children:[(0,n.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,n.jsxs)("div",{className:"btn-group",children:[(0,n.jsx)(d.Z,{variant:"outline-primary",onClick:()=>f(!x),children:x?"Ẩn Pinyin":"Hiện Pinyin"}),(0,n.jsx)(d.Z,{variant:"outline-danger",onClick:()=>v(!j),children:j?"Ẩn Nghĩa":"Hiện Nghĩa"})]}),(0,n.jsx)(d.Z,{variant:"success",onClick:C,children:"\uD83D\uDCE4 Gửi B\xe0i Tập"})]}),i.map((e,i)=>{var a,s;return(0,n.jsx)(D.Z,{className:"mb-4 shadow-sm",children:(0,n.jsxs)(D.Z.Body,{children:[(0,n.jsxs)("div",{className:"d-flex",children:[(0,n.jsxs)("h5",{className:"mb-3 text-primary fw-bold fs-3",children:["\uD83D\uDCDD C\xe2u ",i+1,": ",t?e.gianthe:e.tiengtrung]}),(0,n.jsx)(d.Z,{variant:"outline-secondary",onClick:()=>(0,h.Z)(e.gianthe),children:"\uD83D\uDD0A"})]}),x&&(0,n.jsxs)("div",{className:"text-muted mb-2",children:["\uD83D\uDCDA Pinyin: ",e.pinyin]}),j&&(0,n.jsxs)("div",{className:"mb-3",children:["\uD83D\uDCA1 Nghĩa: ",e.nghia]}),(0,n.jsxs)(k.Z.Group,{className:"mb-2",children:[(0,n.jsx)(k.Z.Label,{children:"Nhập c\xe2u trả lời của bạn:"}),(0,n.jsx)(M.Z,{value:(null===(a=g[i])||void 0===a?void 0:a.userInput)||"",className:"form-control fs-3",placeholder:"你的回答",onChange:e=>N(i,"userInput",e.target.value)})]}),(0,n.jsxs)(k.Z.Group,{className:"mb-3",children:[(0,n.jsx)(k.Z.Label,{children:"Nhập nghĩa của c\xe2u:"}),(0,n.jsx)(M.Z,{value:(null===(s=g[i])||void 0===s?void 0:s.nghia)||"",className:"form-control fs-5",placeholder:"Nhập nghĩa của c\xe2u",onChange:e=>N(i,"nghia",e.target.value)})]})]})},i)}),(0,n.jsxs)("div",{className:"d-flex justify-content-end gap-2 mt-4",children:[(0,n.jsx)(d.Z,{variant:"outline-secondary",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"⬆️ Về đầu"}),(0,n.jsx)(d.Z,{variant:"primary",onClick:()=>y(),children:"\uD83D\uDCBE Lưu tạm thời"}),(0,n.jsx)(d.Z,{variant:"success",onClick:()=>C(),children:"\uD83D\uDCE4 Gửi B\xe0i Tập"})]})]})}var T=t(7138);function B(e){let{title:i,link:t,onClose:a}=e;return(0,n.jsx)("div",{className:"loadingData",onClick:()=>{a&&a()},children:(0,n.jsxs)("div",{className:"loadingData-container",onClick:e=>{e.stopPropagation()},children:[(0,n.jsx)(s.default,{src:"https://hocdichchuhan.github.io/img/gif/correct.gif",alt:"Loading...",width:200,height:200,style:{objectFit:"contain"}}),(0,n.jsx)("h2",{children:i}),(0,n.jsx)(T.default,{className:"itemCard-title-luanngu",href:t,target:"_self",children:(0,n.jsx)(d.Z,{className:"btn-phatamthanh",variant:"warning",children:"B\xe0i tiếp theo"})})]})})}var G=e=>{let{baihoc:i,id:t,nguphaps:s,isGianthe:c,hsk:r,pathBaitap:h}=e,[o,d]=(0,a.useState)(!1),[x,f]=(0,a.useState)([]),v=(0,a.useRef)([]),[b,N]=(0,a.useState)(null),[y,C]=(0,a.useState)(!1),[w,D]=(0,a.useState)(),[k,M]=(0,a.useState)(),T=(0,a.useRef)(null),[G,L]=(0,a.useState)(0),[I,R]=(0,a.useState)(0),[z,E]=(0,a.useState)(0),[P,H]=(0,a.useState)(0),[F,A]=(0,a.useState)(!1),[_,K]=(0,a.useState)(!1),[V,U]=(0,a.useState)(!1),[W,q]=(0,a.useState)(!1),[J,O]=(0,a.useState)(!0),[Q,X]=(0,a.useState)(0),[Y,$]=(0,a.useState)(0),[ee,ei]=(0,a.useState)(0),[et,en]=(0,a.useState)(0),[ea,es]=(0,a.useState)(0),[el,ec]=(0,a.useState)(0),[er,eh]=(0,a.useState)("doc"),eo=t.replace(/b0/gi,""),eu=async(e,i)=>{try{await Promise.all([(0,p.Pf)(e,i)])}catch(i){console.error("Lỗi update:",i);let e={message:"Lỗi update: "+i.message};u().fire(i.message,"","info"),setState(i=>({...i,error:e}))}finally{}},ed=async()=>{let e=G+1,t=Math.floor(10*(ea+100/i.hoithoai.length))/10;es(t),await eu("".concat(h,"/doc"),t),e<i.hoithoai.length?L(e):(A(!0),eh("viet"))},eg=async()=>{let e=Math.floor(10*(el+100/i.hoithoai.length))/10;ec(e),console.log(e),await eu("".concat(h,"/viet"),e);let t=I+1;t<i.hoithoai.length?R(t):(O(!0),K(!0),eh("nghe"))},em=(e,i)=>e.tumoi?(0,n.jsx)(g,{tumoi:e.tumoi,onFinish:()=>ed(),isGianthe:c}):null,ex=(e,i)=>e.tumoi?(0,n.jsx)(m,{items:e.tumoi,onFinish:()=>eg(),isGianthe:c}):null,ep=()=>(0,n.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:i.hoithoai[G]&&(0,n.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,n.jsx)("h2",{children:"B\xe0i tập 1: Kĩ năng đọc: Lựa chọn cặp từ ch\xednh x\xe1c."}),(0,n.jsx)("hr",{}),(0,n.jsx)("div",{className:"",children:em(i.hoithoai[G],G)})]})}),ef=()=>(0,n.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:i.hoithoai[I]&&(0,n.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,n.jsxs)("h2",{children:["B\xe0i tập 2: Kĩ năng Viết: Nhập từ tiếng Trung đ\xfang với nghĩa. B\xe0i tập 2.",I+1,":"]}),(0,n.jsx)("hr",{}),ex(i.hoithoai[I])]})}),ej=async()=>{let e=Math.floor(10*(et+100/i.speak.length))/10;await eu("".concat(h,"/noi"),e),en(e)},ev=()=>{O(!0),U(!0)},eb=()=>(console.log(i.speak[0]),(0,n.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:i.speak&&(0,n.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,n.jsx)("h2",{children:"B\xe0i tập 4: Luyện n\xf3i: N\xf3i lại c\xe2u tiếng Trung sau đ\xe2y:"}),(0,n.jsx)("hr",{}),(0,n.jsx)(j,{validCau:i.speak,isGianthe:c,onNext:()=>ev(),congdiem:()=>ej(),pathBaitap:h})]})})),eN=()=>{if(!i.listen)return null;let e=i.listen;return console.log(e),(0,n.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:(0,n.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,n.jsx)("h2",{children:"B\xe0i tập 3: Luyện nghe: Ho\xe0n th\xe0nh c\xe2u m\xe0 bạn nghe được:"}),(0,n.jsx)("hr",{}),(0,n.jsx)(S,{validCau:e,isGianthe:c,pathBaitap:h,onNext:()=>eh("noi")})]})})},ey=()=>{if(!i.cauhoi)return null;let e=i.cauhoi;return console.log(i.cauhoi),(0,n.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:(0,n.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,n.jsx)("h2",{children:"B\xe0i tập 5: Trả lời c\xe2u hỏi trong b\xe0i"}),(0,n.jsx)("hr",{}),(0,n.jsx)(Z,{dsCau:e,isGianthe:c,pathBaitap:h,onNext:()=>eh("noi"),hsk:r,id:t})]})})};return i?(0,n.jsxs)("div",{className:"baihocgiaotiep-container",children:[(0,n.jsx)("div",{className:"MatchingGameContaniner",children:(0,n.jsxs)("div",{className:"flex gap-2 mb-4 ",children:[(0,n.jsx)("button",{onClick:()=>eh("doc"),className:"btn ".concat("doc"===er?"btn-primary":"btn-outline-secondary"),children:"阅读 - Đọc"}),(0,n.jsx)("button",{onClick:()=>eh("viet"),className:"btn ".concat("viet"===er?"btn-primary":"btn-outline-secondary"),children:"写字 - Viết"}),(0,n.jsx)("button",{onClick:()=>eh("nghe"),className:"btn ".concat("nghe"===er?"btn-primary":"btn-outline-secondary"),children:"听力 - Nghe"}),(0,n.jsx)("button",{onClick:()=>eh("noi"),className:"btn ".concat("noi"===er?"btn-primary":"btn-outline-secondary"),children:"说话 - N\xf3i"}),i.cauhoi&&(0,n.jsx)("button",{onClick:()=>eh("cauhoi"),className:"btn ".concat("noi"===er?"btn-primary":"btn-outline-secondary"),children:"问答 - Vấn Đ\xe1p"})]})}),(()=>{if(V&&J){let e=t.replace(/\d+/,e=>String(Number(e)+1).padStart(e.length,"0"));return(0,n.jsx)(B,{link:"/hsk/".concat(r,"/").concat(e),title:"Ch\xfac mừng bạn đ\xe3 ho\xe0n th\xe0nh b\xe0i tập. C\xf9ng học b\xe0i tiếp theo nh\xe9!",onClose:()=>O(!1)})}})(),(0,n.jsxs)("h1",{className:"baihocgiaotiep-title baihocgiaotiep-title-number",children:["B\xe0i ",eo,": "]}),(0,n.jsx)("h1",{className:"baihocgiaotiep-title baihocgiaotiep-title-tiengtrung tiengtrungText",children:c?i.gianthe:i.tieude}),(0,n.jsxs)("h1",{className:"baihocgiaotiep-title baihocgiaotiep-title-tieude",children:["(",i.tieudedich,")"]}),(0,n.jsx)(l.Z,{showStrokeArea:y,activeCharacter:b,strokes:x,pathsRef:v,isShowImage:o,dataTranslate:k,dataWrite:w,strokeAreaRef:T}),(0,n.jsx)("span",{className:"baihocgiaotiep-pinyin",children:i.tieudepinyin}),(0,n.jsx)("div",{children:(()=>{switch(er){case"nghe":return(0,n.jsx)(eN,{});case"noi":return(0,n.jsx)(eb,{});case"doc":return(0,n.jsx)(ep,{});case"viet":return(0,n.jsx)(ef,{});case"cauhoi":return(0,n.jsx)(ey,{});default:return null}})()})]}):null}}}]);