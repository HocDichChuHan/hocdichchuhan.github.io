"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9936],{3394:function(e,t){t.Z="/_next/static/files/correct.mp3"},5839:function(e,t){t.Z="/_next/static/files/wrong.mp3"},1467:function(e,t,n){n.d(t,{Z:function(){return u}});var i=n(7437),a=n(2265);n(4379);var l=n(3394),s=n(5839),r=n(9745),c=n(2808),o=n(6648);let h=e=>e.replace(/[.,!?;:～。！？、，：\s]/g,"").trim();function u(e){let{cau:t,isGianthe:n,onNext:u,onPrevious:d,congdiem:g}=e,[m,f]=(0,a.useState)(""),[x,p]=(0,a.useState)(null),[v,j]=(0,a.useState)(!1),y=(0,a.useRef)(null),b=(0,a.useRef)(null),[N,w]=(0,a.useState)("https://hocdichchuhan.github.io/img/gif/correct4.gif"),C=()=>{(null==t?void 0:t.tiengtrung)&&(0,r.Z)(t.gianthe)},Z=()=>{var e;h(t.tiengtrung),h(t.gianthe),null===(e=b.current)||void 0===e||e.play(),w("https://hocdichchuhan.github.io/img/gif/wrong".concat(Math.floor(5*Math.random())+1,".gif")),p(!1),j(!0),setTimeout(()=>(0,r.Z)(t.gianthe,10),300),f("")};return(0,i.jsxs)("div",{className:"MatchingGameContaniner",children:[(0,i.jsx)("audio",{ref:y,src:l.Z}),(0,i.jsx)("audio",{ref:b,src:s.Z}),(0,i.jsxs)("div",{className:"row",style:{width:""},children:[(v||x)&&(0,i.jsxs)("div",{className:"col-12 col-md-6",children:[(0,i.jsx)("strong",{className:"tiengtrungText text-danger fs-1",children:n?t.gianthe:t.tiengtrung}),(0,i.jsx)(c.Z,{variant:"primary",onClick:C,className:"px-4 py-2 rounded mt-3",children:"▶️ Nghe"}),(0,i.jsx)("p",{className:"fs-2",children:t.pinyin}),(0,i.jsx)("p",{className:"fs-2",children:(0,i.jsx)("em",{children:t.dichnghia})})]}),(0,i.jsx)("div",{className:"col-12 col-md-6",children:(0,i.jsx)(o.default,{src:N,alt:"Feedback",width:200,height:200})})]}),!x&&!v&&(0,i.jsx)(c.Z,{variant:"primary",onClick:C,className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 mt-3",children:"▶️ Nghe"}),!x&&!v&&(0,i.jsxs)("form",{onSubmit:e=>{var n,i;e.preventDefault();let a=h(m.trim()),l=h(t.tiengtrung),s=h(t.gianthe);a===l||a===s?(null===(n=y.current)||void 0===n||n.play(),w("https://hocdichchuhan.github.io/img/gif/correct".concat(Math.floor(3*Math.random())+1,".gif")),setTimeout(()=>(0,r.Z)(t.gianthe,10),300),p(!0)):(null===(i=b.current)||void 0===i||i.play(),w("https://hocdichchuhan.github.io/img/gif/wrong".concat(Math.floor(5*Math.random())+1,".gif")),p(!1)),f("")},className:"mt-4 MatchingGameContaniner",children:[(0,i.jsx)("input",{type:"text",className:"border border-gray-400 rounded px-3 py-2 text-lg",value:m,onChange:e=>f(e.target.value)}),(0,i.jsx)("br",{}),(0,i.jsx)(c.Z,{variant:"danger",type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2",children:"Kiểm tra"}),(0,i.jsx)(c.Z,{variant:"secondary",onClick:()=>Z(),className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2",children:"Show Kết Quả"})]}),(x||v)&&(0,i.jsxs)("div",{className:"mt-4 flex justify-between gap-4",children:[(0,i.jsx)(c.Z,{variant:"success",onClick:()=>{p(null),null==d||d()},className:"bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500",children:"◀️ Trước"}),(0,i.jsx)(c.Z,{variant:"warning",onClick:()=>{p(null),u(),g()},className:"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600",children:"▶️ Tiếp"})]})]})}},9460:function(e,t,n){n.d(t,{Z:function(){return v}});var i=n(7437),a=n(2265),l=n(5606),s=n(4379),r=n.n(s),c=n(3394),o=n(5839),h=n(9745);function u(e){let{correctText:t,userInput:n}=e;return(0,i.jsx)("div",{style:{fontSize:"24px"},children:(()=>{let e=t.split(""),a=n.split(""),l=Math.max(e.length,a.length),s=[];for(let t=0;t<l;t++){let n=e[t]||"",l=a[t]||"";n===l?s.push((0,i.jsx)("span",{style:{marginRight:2},children:n},t)):s.push((0,i.jsx)("span",{style:{textDecoration:"line-through",color:"red",marginRight:2},children:l},t),(0,i.jsx)("span",{style:{color:"green",marginRight:2},children:n},"".concat(t,"-correct")))}return s})()})}var d=n(2808),g=n(6648);let m=e=>e.replace(/[.,!?;:～。！？、，：\s]/g,"").trim(),f=e=>e.trim().split("").filter(Boolean);function x(e){return[...e].sort(()=>Math.random()-.5)}let p=(e,t)=>{let n=f(e),i=f(t);return n.map((e,t)=>({id:"".concat(e,"-").concat(t,"-").concat(Math.random()),value:e,gianthe:n[t],phonthe:i[t],index:t}))};function v(e){let{validCau:t,isGianthe:n,onNext:s,diem:v=100,congdiem:j,pathBaitap:y}=e,[b,N]=(0,a.useState)([]),[w,C]=(0,a.useState)([]),[Z,S]=(0,a.useState)(null),[D,M]=(0,a.useState)(!1),[k,T]=(0,a.useState)(!1),L=(0,a.useRef)(null),R=(0,a.useRef)(null),[z,E]=(0,a.useState)("https://hocdichchuhan.github.io/img/gif/correct4.gif"),[G,I]=(0,a.useState)(0),[P,B]=(0,a.useState)(null),[H,K]=(0,a.useState)(0),[A,F]=(0,a.useState)([]),[_,V]=(0,a.useState)(""),[O,Q]=(0,a.useState)("");(0,a.useEffect)(()=>{if(t&&t.length>1){let e=t[G],n=t[(G+1)%t.length],i=e.gianthe,a=n.gianthe,l=m(i);m(a);let s=e.tiengtrung,r=n.tiengtrung,c=m(s);m(r);let o=p(l,c);B(e),N(x(o)),C([]),F([]),T(!1)}},[G,t]),(0,a.useEffect)(()=>{(null==P?void 0:P.tiengtrung)&&(N(x(f(m(P.tiengtrung)))),C([]),F([]))},[]);let U=async(e,t)=>{try{await Promise.all([(0,l.Pf)(e,t)])}catch(t){console.error("Lỗi update:",t);let e={message:"Lỗi update: "+t.message};r().fire(t.message,"","info"),setState(t=>({...t,error:e}))}finally{}},q=async()=>{let e=Math.floor(10*(H+v/t.length))/10;await U("".concat(y,"/nghe"),e),K(e)},J=(e,t)=>{C(t=>[...t,e]),(0,h.Z)(e.gianthe,e.index+10),N(t=>t.filter(t=>t.id!==e.id))},W=e=>{N(t=>x([...t,e])),C(t=>t.filter(t=>t.id!==e.id))},X=async e=>{var t,i;e.preventDefault();let a=w.map(e=>n?e.value:e.phonthe).join(""),l=m(n?P.gianthe:P.tiengtrung),s=l.split(""),r=a.split("");V(a),Q(l);let c=[],o=0,u=0;for(;o<r.length||u<s.length;){let e=r[o],t=s[u];e===t?(c.push({value:e,isCorrect:!0,isMissing:!1}),o++,u++):e&&!s.includes(e)?(c.push({value:e,isCorrect:!1,isMissing:!1}),o++):(t&&!r.includes(t)?c.push({value:t,isCorrect:!1,isMissing:!0}):(c.push({value:e||t,isCorrect:!1,isMissing:!e}),o++),u++)}(T(!0),c.every(e=>e.isCorrect))?(null===(t=L.current)||void 0===t||t.play(),E("https://hocdichchuhan.github.io/img/gif/correct".concat(Math.floor(3*Math.random())+1,".gif")),setTimeout(()=>(0,h.Z)(P.gianthe,10),300),S(!0),await q(),F([])):(null===(i=R.current)||void 0===i||i.play(),E("https://hocdichchuhan.github.io/img/gif/wrong".concat(Math.floor(5*Math.random())+1,".gif")),S(!1),F(c))},Y=()=>{(null==P?void 0:P.tiengtrung)&&(0,h.Z)(P.gianthe)};if(P)return(0,i.jsxs)("div",{className:"MatchingGameContaniner",children:[(0,i.jsx)("audio",{ref:L,src:c.Z}),(0,i.jsx)("audio",{ref:R,src:o.Z}),(0,i.jsxs)("div",{className:"row",style:{width:""},children:[(D||Z)&&(0,i.jsxs)("div",{className:"col-12 col-md-6",children:[(0,i.jsx)("strong",{className:"tiengtrungText text-danger fs-1",children:n?P.gianthe:P.tiengtrung}),(0,i.jsx)(d.Z,{variant:"primary",onClick:Y,className:"px-4 py-2 rounded mt-3",children:"▶️ Nghe"}),(0,i.jsx)("p",{className:"fs-2",children:P.pinyin}),(0,i.jsx)("p",{className:"fs-2",children:(0,i.jsx)("em",{children:P.dichnghia})})]}),(0,i.jsx)("div",{className:"col-12 col-md-6",children:(0,i.jsx)(g.default,{src:z,alt:"Feedback",width:200,height:200})})]}),!Z&&!D&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Z,{variant:"primary",onClick:Y,className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 mt-3",children:"▶️ Nghe"}),(0,i.jsx)("div",{className:"mt-4 flex flex-wrap gap-2",children:b.map((e,t)=>(0,i.jsx)(d.Z,{variant:"outline-primary",onClick:()=>J(e,t),className:"text-5xl fs-3 p-3",children:n?e.gianthe:e.phonthe},e.id))}),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)("h4",{children:"C\xe2u của bạn:"}),(0,i.jsx)("div",{className:"flex flex-wrap gap-2 border p-3 rounded min-h-[60px]",children:k?(0,i.jsx)(u,{correctText:O,userInput:_}):(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:w.map(e=>(0,i.jsx)(d.Z,{variant:"outline-success",onClick:()=>W(e),className:"text-5xl fs-3 p-3",children:n?e.gianthe:e.phonthe},e.id))})})]}),!k&&(0,i.jsxs)("form",{onSubmit:X,className:"mt-4",children:[(0,i.jsx)(d.Z,{variant:"success",type:"submit",className:"px-4 py-2",children:"✅ Kiểm tra"}),(0,i.jsx)(d.Z,{variant:"secondary",onClick:()=>{var e;null===(e=R.current)||void 0===e||e.play(),E("https://hocdichchuhan.github.io/img/gif/wrong".concat(Math.floor(5*Math.random())+1,".gif")),S(!1),M(!0),T(!0),setTimeout(()=>(0,h.Z)(P.gianthe,10),300)},className:"px-4 py-2 ms-2",children:"\uD83D\uDC40 Show Kết Quả"})]})]}),k&&(0,i.jsx)("div",{className:"mt-4 flex justify-between gap-4",children:(0,i.jsx)(d.Z,{variant:"warning",onClick:()=>{S(null),M(!1),G<t.length-1?I(G+1):(r().fire("\uD83C\uDF89 Ho\xe0n th\xe0nh!","Bạn đ\xe3 l\xe0m hết c\xe1c c\xe2u!","success"),s())},children:"▶️ Tiếp"})})]})}},6793:function(e,t,n){n.d(t,{Z:function(){return g}});var i=n(7437),a=n(2265),l=n(3394),s=n(5839),r=n(9745),c=n(4379),o=n.n(c),h=n(6648),u=n(2808),d=n(5606);function g(e){let{tumoi:t,onFinish:n,isGianthe:c,pathBaitap:g,diem:m=100}=e,[f,x]=(0,a.useState)([]),[p,v]=(0,a.useState)([]),[j,y]=(0,a.useState)({pinyin:null,hanzi:null}),[b,N]=(0,a.useState)({pinyin:null,hanzi:null,nghia:null,gianthe:null}),[w,C]=(0,a.useState)([]),[Z,S]=(0,a.useState)({id:null,hanziId:null,type:null}),[D,M]=(0,a.useState)([]),[k,T]=(0,a.useState)(!1),[L,R]=(0,a.useState)("https://hocdichchuhan.github.io/img/gif/correct4.gif"),[z,E]=(0,a.useState)(!1),[G,I]=(0,a.useState)(0),[P,B]=(0,a.useState)([]),[H,K]=(0,a.useState)(0);(0,a.useEffect)(()=>{if(t&&t.length>0){let e={};t.forEach(t=>{let n=t.gianthe.length;e[n]||(e[n]=[]),e[n].push(t)}),B(Object.values(e)),K(0)}},[t]);let A=P[H]||[],F=(0,a.useRef)(null),_=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(A.length>0){let e=[...A].sort(()=>Math.random()-.5);x(e.map((e,t)=>({...e,id:t}))),v(e.map((e,t)=>({...e,id:t})).sort(()=>Math.random()-.5)),y({pinyin:null,hanzi:null}),C([]),S({id:null,hanziId:null,type:null}),M([]),T(!1)}},[H,P]);let V=async(e,t)=>{try{await Promise.all([(0,d.Pf)(e,t)])}catch(t){console.error("Lỗi update:",t);let e={message:"Lỗi update: "+t.message};o().fire(t.message,"","info"),setState(t=>({...t,error:e}))}finally{}},O=async()=>{let e=Math.floor(1e3*(G+m/t.length))/1e3;await V("".concat(g,"/doc"),e),I(e)},Q=(e,t)=>{let n={...j,[e]:t};y(n),n.pinyin&&n.hanzi&&!z&&U(n)},U=async e=>{var t,i;E(!0);let{pinyin:a,hanzi:l}=e,s=a.id===l.id,c=()=>{E(!1),y({pinyin:null,hanzi:null}),S({id:null,hanziId:null,type:null})};if(s){N(l),R("https://hocdichchuhan.github.io/img/gif/correct".concat(Math.floor(3*Math.random())+1,".gif"));let e=a.id;S({id:e,hanziId:e,type:"correct"}),null===(t=F.current)||void 0===t||t.play(),M(t=>[...t,e]),setTimeout(()=>{(0,r.Z)(l.gianthe,10+l.id)},300),await O(),setTimeout(()=>{C(t=>{let i=[...t,e];return i.length===A.length&&(T(!0),setTimeout(()=>{H+1<P.length?K(H+1):null==n||n()},500)),i}),M(t=>t.filter(t=>t!==e)),c()},500)}else R("https://hocdichchuhan.github.io/img/gif/wrong".concat(Math.floor(5*Math.random())+1,".gif")),S({id:a.id,hanziId:l.id,type:"wrong"}),null===(i=_.current)||void 0===i||i.play(),setTimeout(()=>{c()},800)},q=(e,t)=>{var n;let i=(null===(n=j[t])||void 0===n?void 0:n.id)===e.id,a=w.includes(e.id),l=D.includes(e.id),s="pinyin"===t&&Z.id===e.id||"hanzi"===t&&Z.hanziId===e.id;return l?"matchedCorrect bg-green-500 border-green-500 text-white":a?"bg-blue-500 border-green-500 text-white":s&&"wrong"===Z.type?"matchedWrong border-red-500 animate-shake":s&&"correct"===Z.type?"border-green-500 animate-pulse":i?"bg-blue-400 border-blue-400":"bg-black border-gray-500 text-white"};return(0,i.jsxs)("div",{className:"MatchingGameContaniner",children:[(0,i.jsx)("audio",{ref:F,src:l.Z}),(0,i.jsx)("audio",{ref:_,src:s.Z}),(0,i.jsxs)("div",{className:"d-flex row align-items-center justify-content-center",children:[(0,i.jsx)("div",{className:"col-12 col-md-6 MatchingGameContaniner",children:(0,i.jsx)(h.default,{src:L,alt:"Loading...",width:200,height:200,style:{objectFit:"contain"}})}),b.tiengtrung&&(0,i.jsxs)("div",{className:"col-12 col-md-6 MatchingGameContaniner",children:[(0,i.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-2",children:[(0,i.jsx)("h2",{className:"text-danger",children:c?b.gianthe:b.tiengtrung||null}),(0,i.jsx)(u.Z,{lassName:"btn-phatamthanh",variant:"danger",onClick:()=>(0,r.Z)(b.gianthe,3),children:"\uD83D\uDD0A"})]}),(0,i.jsx)("h2",{className:"text-danger",children:b.pinyin||null}),(0,i.jsx)("h2",{className:"text-danger",children:b.nghia||null})]})]}),(0,i.jsxs)("div",{className:"flex flex-col flex justify-center items-center h-full",children:[(0,i.jsx)("h3",{className:"mb-2",children:"Chữ H\xe1n"}),p.map((e,t)=>(0,i.jsx)("button",{className:"relative flex items-center justify-between w-full py-2 px-4 my-1 rounded border transition-all duration-300 ".concat(q(e,"hanzi")),onClick:()=>Q("hanzi",e,t),disabled:w.includes(e.id),children:c?e.gianthe:e.tiengtrung},e.id))]}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("h3",{className:"mb-2",children:"Pinyin"}),f.map((e,t)=>(0,i.jsx)("button",{className:"relative flex items-center justify-between w-full py-2 px-4 my-1 rounded border transition-all duration-300 ".concat(q(e,"pinyin")),onClick:()=>Q("pinyin",e,t),disabled:w.includes(e.id),children:e.pinyin},e.id))]})]})}},8996:function(e,t,n){n.d(t,{Z:function(){return m}});var i=n(7437),a=n(2265),l=n(9745),s=n(516),r=n(5606),c=n(2808),o=n(3137),h=n(3830),u=n(8433),d=n(4379),g=n.n(d);function m(e){let{dsCau:t,isGianthe:n,pathBaitap:d,hsk:m,id:f,onNext:x,isShowNghia:p=!0}=e,[v,j]=(0,a.useState)(null),[y,b]=(0,a.useState)({}),[N,w]=(0,a.useState)(!1),[C,Z]=(0,a.useState)(!1),S=(e,t)=>{g().fire({icon:e,title:t,position:"center",showConfirmButton:!1,timer:1500,timerProgressBar:!0})};(0,a.useEffect)(()=>{let e=localStorage.getItem("userLogin");if(e){let n=JSON.parse(e);j(n),t.forEach(async(e,t)=>{let i="".concat(d,"/cauhoi/").concat(n.uid,"/").concat(t),a=await (0,s.U2)((0,s.iH)(r.db,i));a.exists()&&b(e=>({...e,[t]:{userInput:a.val().userInput||"",nghia:a.val().nghiacuanguoidung||""}}))})}},[t,d]);let D=(e,t,n)=>{b(i=>({...i,[e]:{...i[e],[t]:n}}))},M=async()=>{if(v){for(let l=0;l<t.length;l++){var e,n,i,a;let c=t[l],o=(null===(n=y[l])||void 0===n?void 0:null===(e=n.userInput)||void 0===e?void 0:e.trim())||"",h=(null===(a=y[l])||void 0===a?void 0:null===(i=a.nghia)||void 0===i?void 0:i.trim())||"",u="".concat(d,"/cauhoi/").concat(v.uid,"/").concat(l);await (0,s.t8)((0,s.iH)(r.db,u),{userInput:o,nghia:c.nghia,hanviet:c.gianthe,nghiacuanguoidung:h,time:Date.now()})}S("success","Đ\xe3 lưu to\xe0n bộ b\xe0i l\xe0m!")}},k=async()=>{if(!v)return;let e="".concat(d,"/cauhoi/").concat(v.uid),n="user/baitap/".concat(v.uid,"/").concat(m,"_").concat(f),i=Date.now();try{let a=await (0,s.U2)((0,s.iH)(r.db,e));if(a.exists()){let e=a.val(),l=t.map((t,n)=>{var a,l;return{tiengtrung:t.tiengtrung,gianthe:t.gianthe,pinyin:t.pinyin,nghia:t.nghia,cautraloi:(null===(a=e[n])||void 0===a?void 0:a.userInput)||"",nghiacuanguoidung:(null===(l=e[n])||void 0===l?void 0:l.nghiacuanguoidung)||"",time:i}});await (0,s.t8)((0,s.iH)(r.db,n),{hsk:m,id:f,timeSubmit:i,cauTraLoi:l}),S("success","Đ\xe3 gửi b\xe0i tập th\xe0nh c\xf4ng!"),x()}else S("warning","Chưa c\xf3 dữ liệu để gửi!")}catch(e){console.error("Lỗi:",e),S("error","Lỗi khi gửi b\xe0i tập!")}};return(0,i.jsxs)("div",{className:"container py-4",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,i.jsxs)("div",{className:"btn-group",children:[(0,i.jsx)(c.Z,{variant:"outline-primary",onClick:()=>w(!N),children:N?"Ẩn Pinyin":"Hiện Pinyin"}),p&&(0,i.jsx)(c.Z,{variant:"outline-danger",onClick:()=>Z(!C),children:C?"Ẩn Nghĩa":"Hiện Nghĩa"})]}),(0,i.jsx)(c.Z,{variant:"success",onClick:k,children:"\uD83D\uDCE4 Gửi B\xe0i Tập"})]}),t.map((e,t)=>{var a,s;return(0,i.jsx)(o.Z,{className:"mb-4 shadow-sm",children:(0,i.jsxs)(o.Z.Body,{children:[(0,i.jsxs)("div",{className:"d-flex",children:[(0,i.jsxs)("h5",{className:"mb-3 text-primary fw-bold fs-3",children:["\uD83D\uDCDD C\xe2u ",t+1,": ",n?e.gianthe:e.tiengtrung]}),(0,i.jsx)(c.Z,{variant:"outline-secondary",onClick:()=>(0,l.Z)(e.gianthe),children:"\uD83D\uDD0A"})]}),N&&(0,i.jsxs)("div",{className:"text-muted mb-2",children:["\uD83D\uDCDA Pinyin: ",e.pinyin]}),C&&(0,i.jsxs)("div",{className:"mb-3",children:["\uD83D\uDCA1 Nghĩa: ",e.nghia]}),(0,i.jsxs)(h.Z.Group,{className:"mb-2",children:[(0,i.jsx)(h.Z.Label,{children:"Nhập c\xe2u trả lời của bạn:"}),(0,i.jsx)(u.Z,{value:(null===(a=y[t])||void 0===a?void 0:a.userInput)||"",className:"form-control fs-3",placeholder:"你的回答",onChange:e=>D(t,"userInput",e.target.value)})]}),(0,i.jsxs)(h.Z.Group,{className:"mb-3",children:[(0,i.jsx)(h.Z.Label,{children:"Nhập nghĩa của c\xe2u trả lời:"}),(0,i.jsx)(u.Z,{value:(null===(s=y[t])||void 0===s?void 0:s.nghia)||"",className:"form-control fs-5",placeholder:"Nhập nghĩa của c\xe2u trả lời",onChange:e=>D(t,"nghia",e.target.value)})]})]})},t)}),(0,i.jsxs)("div",{className:"d-flex justify-content-end gap-2 mt-4",children:[(0,i.jsx)(c.Z,{variant:"outline-secondary",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"⬆️ Về đầu"}),(0,i.jsx)(c.Z,{variant:"primary",onClick:()=>M(),children:"\uD83D\uDCBE Lưu tạm thời"}),(0,i.jsx)(c.Z,{variant:"success",onClick:()=>k(),children:"\uD83D\uDCE4 Gửi B\xe0i Tập"})]})]})}},3492:function(e,t,n){var i=n(7437),a=n(2265),l=n(2474),s=n(4379),r=n.n(s),c=n(3394),o=n(5839),h=n(9745),u=n(2808),d=n(6648),g=n(5606);let m=e=>e.replace(/[.,!?;:～。！？、，：\s]/g,"").trim();t.Z=e=>{let{validCau:t,isGianthe:n,onNext:s,congdiem:f,pathBaitap:x,diem:p=100}=e,[v,j]=(0,a.useState)(!1),[y,b]=(0,a.useState)(""),[N,w]=(0,a.useState)(null),[C,Z]=(0,a.useState)(!1),[S,D]=(0,a.useState)(null),M=(0,a.useRef)(null),k=(0,a.useRef)(null),[T,L]=(0,a.useState)(0),[R,z]=(0,a.useState)(0),[E,G]=(0,a.useState)(null),[I,P]=(0,a.useState)("https://hocdichchuhan.github.io/img/gif/correct4.gif");(0,a.useEffect)(()=>{if(t){let e=t[R];m(e.gianthe),m(e.tiengtrung),G(e),w(!1),Z(!1)}},[R,t]);let B=()=>{let e=R+1;e<t.length?z(e):s()},H=async()=>{let e=Math.floor(10*(T+p/t.length))/10;await K("".concat(x,"/noi"),e),L(e)},K=async(e,t)=>{try{await Promise.all([(0,g.Pf)(e,t)])}catch(t){console.error("Lỗi update:",t);let e={message:"Lỗi update: "+t.message};r().fire(t.message,"","info"),setState(t=>({...t,error:e}))}finally{}},A=async()=>{var e,t;let n=await (0,l.Z)("CN");b(n);let i=m(n),a=m(E.gianthe);(Z(!0),i===a)?(null===(e=M.current)||void 0===e||e.play(),P("https://hocdichchuhan.github.io/img/gif/correct".concat(Math.floor(3*Math.random())+1,".gif")),setTimeout(()=>{(0,h.Z)(E.gianthe,10)},300),w(!0),await H()):(null===(t=k.current)||void 0===t||t.play(),P("https://hocdichchuhan.github.io/img/gif/wrong".concat(Math.floor(5*Math.random())+1,".gif")),w(!1))};return(null==E?void 0:E.gianthe)?(0,i.jsxs)("div",{className:"speech-game MatchingGameContaniner",children:[(0,i.jsx)("audio",{ref:M,src:c.Z}),(0,i.jsx)("audio",{ref:k,src:o.Z}),(0,i.jsxs)("div",{className:"row align-items-center justify-content-center",children:[(0,i.jsx)("div",{className:"col-12 col-md-8 MatchingGameContaniner",children:(0,i.jsxs)("div",{className:"mb-2",children:[(0,i.jsx)("strong",{className:"tiengtrungText text-danger fs-1",children:n?E.gianthe:E.tiengtrung}),(0,i.jsx)(u.Z,{variant:"success",onClick:()=>(0,h.Z)(E.gianthe,100),children:"\uD83D\uDD0A"}),(0,i.jsx)("p",{className:"fs-2",children:E.pinyin}),(0,i.jsx)("p",{className:"fs-2",children:(0,i.jsx)("em",{children:E.dichnghia})})]})}),(0,i.jsx)("div",{className:"col-12 col-md-4 MatchingGameContaniner",children:(0,i.jsx)(d.default,{src:I,alt:"Loading...",width:200,height:200,style:!0})})]}),(0,i.jsx)("button",{onClick:A,disabled:v,className:"btn btn-primary fs-1",children:"\uD83C\uDF99️ Bắt đầu n\xf3i"}),C&&(0,i.jsxs)("div",{className:"mt-3",children:[y&&(0,i.jsxs)("p",{children:["Bạn n\xf3i: ",(0,i.jsx)("strong",{className:"tiengtrungText fs-2",children:y})]}),!0===N&&(0,i.jsx)("p",{className:"text-success",children:"✅ Ch\xednh x\xe1c!"}),!1===N&&(0,i.jsx)("p",{className:"text-danger",children:"❌ Chưa đ\xfang, h\xe3y thử lại!"})]}),N&&(0,i.jsx)("div",{className:"mt-4 flex justify-between gap-4",children:(0,i.jsx)(u.Z,{variant:"success",onClick:()=>B(),children:"▶️ Tiếp"})}),!N&&(0,i.jsx)("div",{className:"mt-4 flex justify-between gap-4",children:(0,i.jsx)(u.Z,{variant:"danger",onClick:()=>B(),children:"▶️ Bỏ qua"})})]}):null}},5527:function(e,t,n){n.d(t,{Z:function(){return u}});var i=n(7437),a=n(2265),l=n(6648),s=n(3394),r=n(5839),c=n(9745),o=n(2808),h=n(5606);function u(e){let{items:t,onFinish:n,isGianthe:u,pathBaitap:d,diem:g=100}=e,[m,f]=(0,a.useState)(0),[x,p]=(0,a.useState)(""),[v,j]=(0,a.useState)(""),[y,b]=(0,a.useState)("https://hocdichchuhan.github.io/img/gif/correct4.gif"),[N,w]=(0,a.useState)(!1),[C,Z]=(0,a.useState)(0),S=(0,a.useRef)(null),D=(0,a.useRef)(null),M=t[m],k=t[m-1]||[],T=async(e,t)=>{try{await Promise.all([(0,h.Pf)(e,t)])}catch(t){console.error("Lỗi update:",t);let e={message:"Lỗi update: "+t.message};Swal.fire(t.message,"","info"),setState(t=>({...t,error:e}))}finally{}},L=async()=>{let e=Math.floor(10*(C+g/t.length))/10;await T("".concat(d,"/viet"),e),Z(e)},R=async()=>{var e,i;let a=x.trim(),l=M.tiengtrung.trim(),s=M.gianthe.trim();a===l||a===s?(await L(),null===(e=S.current)||void 0===e||e.play(),setTimeout(()=>{(0,c.Z)(M.gianthe,10+m)},300),b("https://hocdichchuhan.github.io/img/gif/correct".concat(Math.floor(3*Math.random())+1,".gif")),j("correct"),setTimeout(()=>{j(""),p(""),m===t.length-1?(f(0),null==n||n()):f(e=>e+1)},1e3)):(null===(i=D.current)||void 0===i||i.play(),b("https://hocdichchuhan.github.io/img/gif/wrong".concat(Math.floor(5*Math.random())+1,".gif")),j("wrong"),setTimeout(()=>j(""),1e3))};return t&&t.length&&t[m]?(0,i.jsxs)("div",{className:"MatchingGameContaniner",children:[(0,i.jsx)("audio",{ref:S,src:s.Z}),(0,i.jsx)("audio",{ref:D,src:r.Z}),(0,i.jsxs)("div",{className:"row align-items-center justify-content-center",style:{width:"100%"},children:[(0,i.jsxs)("div",{className:"col-12 col-md-6 MatchingGameContaniner",children:[(0,i.jsx)(l.default,{src:y,alt:"Loading...",width:200,height:200,style:!0}),(0,i.jsx)("div",{className:"text-xl font-medium",children:M.nghia}),(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"text",value:x,onChange:e=>p(e.target.value),onKeyDown:e=>{"Enter"===e.key&&R()},className:"w-full p-2 border rounded-lg outline-none text-xl ".concat("correct"===v||N?"border-green-500":"wrong"===v?"border-red-500":"border-gray-300"),placeholder:"中文..."}),(0,i.jsx)(o.Z,{variant:"primary",className:"ms-1",onClick:R,children:"Kiểm tra"})]}),(0,i.jsx)(o.Z,{variant:"secondary",className:"mt-2",onClick:()=>{w(!0),(0,c.Z)(M.gianthe,1e3+m),p(M.tiengtrung),j("correct"),b("https://hocdichchuhan.github.io/img/gif/correct".concat(Math.floor(3*Math.random())+1,".gif")),setTimeout(()=>{w(!1),j(""),p(""),m===t.length-1?(f(0),null==n||n()):f(e=>e+1)},4e3)},children:"❓ Hiện đ\xe1p \xe1n"}),"correct"===v&&(0,i.jsx)("div",{className:"text-green-600",children:"✅ Đ\xfang rồi!"}),"wrong"===v&&(0,i.jsx)("div",{className:"text-red-600",children:"❌ Sai rồi. Thử lại nh\xe9!"})]}),k.tiengtrung&&(0,i.jsxs)("div",{className:"col-12 col-md-6 MatchingGameContaniner",children:[(0,i.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-2",children:[(0,i.jsx)("h2",{className:"text-danger",children:u?k.gianthe:k.tiengtrung||null}),(0,i.jsx)(o.Z,{variant:"danger",onClick:()=>(0,c.Z)(M.gianthe,m+100),children:"\uD83D\uDD0A"})]}),(0,i.jsx)("h2",{className:"text-danger",children:k.pinyin||null}),(0,i.jsx)("h2",{className:"text-danger",children:k.nghia||null})]})]})]}):(0,i.jsx)("div",{children:"Đang tải dữ liệu..."})}},2474:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(4379),a=n.n(i);function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"VN";return new Promise((t,n)=>{if(!("webkitSpeechRecognition"in window)){n("Tr\xecnh duyệt kh\xf4ng hỗ trợ Speech Recognition");return}let i=new window.webkitSpeechRecognition;i.lang=({VN:"vi-VN",CN:"zh-CN"})[e]||"vi-VN",i.continuous=!1,i.interimResults=!1,a().fire({title:"\uD83C\uDFA4 Đang lắng nghe (".concat(e,")"),text:"H\xe3y n\xf3i v\xe0o micro...",allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>{a().showLoading(),i.start()}}),i.onresult=e=>{let n=e.results[0][0].transcript;a().close(),t(n)},i.onerror=e=>{a().close(),n(e.error||"Lỗi kh\xf4ng x\xe1c định")},i.onend=()=>{i.resultReceived||(a().close(),n("Kh\xf4ng nghe thấy \xe2m thanh"))}})}},8433:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(7437),a=n(2265);function l(e){let{value:t,onChange:n,className:l="",placeholder:s="",onKeyDown:r}=e,c=(0,a.useRef)(null),o=()=>{let e=c.current;e&&(e.style.height="auto",e.style.height=e.scrollHeight+"px")};return(0,a.useEffect)(()=>{o()},[t]),(0,a.useEffect)(()=>{o()},[]),(0,i.jsx)("textarea",{ref:c,className:"form-control ".concat(l),value:t,onChange:n,placeholder:s,rows:1,style:{overflow:"hidden",resize:"none"},onKeyDown:r})}}}]);