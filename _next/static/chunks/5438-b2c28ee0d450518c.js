"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5438],{39898:function(e,i,n){var t=n(57437);n(2265),n(23508);var a=n(66648);i.Z=e=>{let{nguphap:i}=e;return(0,t.jsxs)("div",{className:"cauhoi-container",children:[(0,t.jsx)("h1",{children:"Mở Rộng"}),i&&i.map((e,i)=>{var n;let l=(null===(n=e.src)||void 0===n?void 0:n.includes("hocdichchuhan.github.io"))?e.src.replace("hocdichchuhan.github.io","tiengtrungdongyang.com"):e.src;return(0,t.jsxs)("div",{className:"row",children:[(0,t.jsxs)("h2",{children:[i+1,". ",e.tieude]}),e.noidung&&(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:e.noidung}}),l?(0,t.jsx)("div",{className:"image-container",children:(0,t.jsx)(a.default,{src:l,alt:"H\xecnh ảnh",width:1200,height:1200,layout:"intrinsic",className:"image-styled",style:{objectFit:"contain"}})}):null]},i)})]})}},85151:function(e,i,n){n.d(i,{Z:function(){return w}});var t=n(57437),a=n(2265),l=n(66648);n(21682);var s=n(77761);n(62034);var r=n(46289),c=n(23394),o=n(85839),h=n(89745),d=n(64379),u=n.n(d),g=n(12808),m=n(65606);function x(e){let{tumoi:i,onFinish:n,isGianthe:s,pathBaitap:r,diem:d=100}=e,[x,p]=(0,a.useState)([]),[j,v]=(0,a.useState)([]),[f,b]=(0,a.useState)({pinyin:null,nghia:null}),[y,N]=(0,a.useState)({pinyin:null,hanzi:null,nghia:null,gianthe:null}),[S,C]=(0,a.useState)([]),[w,k]=(0,a.useState)({id:null,hanziId:null,type:null}),[Z,D]=(0,a.useState)([]),[B,M]=(0,a.useState)(!1),[T,I]=(0,a.useState)("https://tiengtrungdongyang.com/img/gif/correct4.gif"),[z,G]=(0,a.useState)(!1),[L,P]=(0,a.useState)(0),[E,H]=(0,a.useState)([]),[R,F]=(0,a.useState)(0);(0,a.useEffect)(()=>{if(i&&i.length>0){let e={};i.forEach(i=>{let n=i.gianthe.length;e[n]||(e[n]=[]),e[n].push(i)}),H(Object.values(e)),F(0)}},[i]);let A=E[R]||[],_=(0,a.useRef)(null),V=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(A.length>0){let e=[...A].sort(()=>Math.random()-.5);p(e.map((e,i)=>({...e,id:i}))),v(e.map((e,i)=>({...e,id:i})).sort(()=>Math.random()-.5)),b({pinyin:null,nghia:null}),C([]),k({id:null,hanziId:null,type:null}),D([]),M(!1)}},[R,E]);let O=async(e,i)=>{try{await Promise.all([(0,m.Pf)(e,i)])}catch(i){console.error("Lỗi update:",i);let e={message:"Lỗi update: "+i.message};u().fire(i.message,"","info"),setState(i=>({...i,error:e}))}finally{}},W=async()=>{let e=Math.floor(1e3*(L+d/i.length))/1e3;await O("".concat(r,"/pinyin"),e),P(e)},U=(e,i)=>{let n={...f,[e]:i};b(n),n.pinyin&&n.nghia&&!z&&J(n)},J=async e=>{var i,t;G(!0);let{pinyin:a,nghia:l}=e,s=a.id===l.id,r=()=>{G(!1),b({pinyin:null,nghia:null}),k({id:null,hanziId:null,type:null})};if(s){N(l),I("https://tiengtrungdongyang.com/img/gif/correct".concat(Math.floor(3*Math.random())+1,".gif"));let e=a.id;k({id:e,hanziId:e,type:"correct"}),null===(i=_.current)||void 0===i||i.play(),D(i=>[...i,e]),setTimeout(()=>{(0,h.Z)(l.gianthe,10+l.id)},300),await W(),setTimeout(()=>{C(i=>{let t=[...i,e];return t.length===A.length&&(M(!0),setTimeout(()=>{R+1<E.length?F(R+1):null==n||n()},500)),t}),D(i=>i.filter(i=>i!==e)),r()},500)}else I("https://tiengtrungdongyang.com/img/gif/wrong".concat(Math.floor(5*Math.random())+1,".gif")),k({id:a.id,hanziId:l.id,type:"wrong"}),null===(t=V.current)||void 0===t||t.play(),setTimeout(()=>{r()},800)},q=(e,i)=>{var n;let t=(null===(n=f[i])||void 0===n?void 0:n.id)===e.id,a=S.includes(e.id),l=Z.includes(e.id),s="pinyin"===i&&w.id===e.id||"nghia"===i&&w.hanziId===e.id;return l?"matchedCorrect bg-green-500 border-green-500 text-white":a?"bg-blue-500 border-green-500 text-white":s&&"wrong"===w.type?"matchedWrong border-red-500 animate-shake":s&&"correct"===w.type?"border-green-500 animate-pulse":t?"bg-blue-400 border-blue-400":"bg-black border-gray-500 text-white"};return(0,t.jsxs)("div",{className:"MatchingGameContaniner",children:[(0,t.jsx)("audio",{ref:_,src:c.Z}),(0,t.jsx)("audio",{ref:V,src:o.Z}),(0,t.jsxs)("div",{className:"d-flex row align-items-center justify-content-center",children:[(0,t.jsx)("div",{className:"col-12 col-md-6 MatchingGameContaniner",children:(0,t.jsx)(l.default,{src:T,alt:"Loading...",width:200,height:200,style:{objectFit:"contain"}})}),y.tiengtrung&&(0,t.jsxs)("div",{className:"col-12 col-md-6 MatchingGameContaniner",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-2",children:[(0,t.jsx)("h2",{className:"text-danger",children:s?y.gianthe:y.tiengtrung||null}),(0,t.jsx)(g.Z,{lassName:"btn-phatamthanh",variant:"danger",onClick:()=>(0,h.Z)(y.gianthe,3),children:"\uD83D\uDD0A"})]}),y.hanviet&&(0,t.jsxs)("h2",{children:["H\xe1n Việt: ",(0,t.jsx)("strong",{className:"text-danger",children:y.hanviet||null})]}),(0,t.jsxs)("h2",{className:"text-primary",children:["Pinyin: ",(0,t.jsx)("strong",{children:y.pinyin||null})]}),(0,t.jsxs)("h2",{children:["Nghĩa ",(0,t.jsx)("strong",{className:"text-primary",children:y.nghia||null})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col flex justify-center items-center h-full",children:[(0,t.jsx)("h3",{className:"mb-2",children:"Nghĩa"}),j.map((e,i)=>(0,t.jsx)("button",{className:"relative flex items-center justify-between w-full py-2 px-4 my-1 rounded border transition-all duration-300 fs-3 ".concat(q(e,"nghia")),onClick:()=>U("nghia",e,i),disabled:S.includes(e.id),children:e.nghia},e.id))]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("h3",{className:"mb-2",children:"Pinyin"}),x.map((e,i)=>(0,t.jsx)("button",{className:"relative flex items-center justify-between w-full py-2 px-4 my-1 rounded border transition-all duration-300 fs-3  ".concat(q(e,"pinyin")),onClick:()=>U("pinyin",e,i),disabled:S.includes(e.id),children:e.pinyin},e.id))]})]})}var p=n(16793),j=n(25527),v=n(3492),f=n(9761);function b(e){let{items:i,onFinish:n,isGianthe:s,pathBaitap:r,diem:d=100}=e,[u,m]=(0,a.useState)(0),[x,p]=(0,a.useState)(""),[j,v]=(0,a.useState)(""),[b,y]=(0,a.useState)("https://tiengtrungdongyang.com/img/gif/correct4.gif"),[N,S]=(0,a.useState)("https://tiengtrungdongyang.com/img/gif/correct4.gif"),[C,w]=(0,a.useState)(!1),[k,Z]=(0,a.useState)(!1),D=(0,a.useRef)(null),B=(0,a.useRef)(null),M=i[u];i[u-1],(0,a.useEffect)(()=>{(async()=>{S(await (0,f.o)(M.nghia))})()},[M.gianthe]);let T=()=>{Z(!1),u>=i.length-1?null==n||n():m(u+1)},I=()=>{u>0&&m(u-1)};return i&&i.length&&i[u]?(0,t.jsxs)("div",{className:"MatchingGameContaniner",children:[(0,t.jsx)("audio",{ref:D,src:c.Z}),(0,t.jsx)("audio",{ref:B,src:o.Z}),(0,t.jsx)("div",{className:"row align-items-center justify-content-center",style:{width:"100%"},children:M.tiengtrung&&(0,t.jsxs)("div",{className:"MatchingGameContaniner",children:[(0,t.jsx)("div",{className:"image-container",children:(0,t.jsx)(l.default,{src:N,alt:"H\xecnh ảnh",width:400,height:400,className:"image-styled",style:{objectFit:"cover"}})}),k&&(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-2",children:[(0,t.jsxs)("h2",{children:["Tiếng Trung: ",(0,t.jsx)("strong",{className:"text-danger",children:s?M.gianthe:M.tiengtrung||null})," "]}),(0,t.jsx)(g.Z,{variant:"danger",onClick:()=>(0,h.Z)(M.gianthe,u+100),children:"\uD83D\uDD0A"})]}),M.hanviet&&(0,t.jsxs)("h2",{children:["H\xe1n Việt: ",(0,t.jsx)("strong",{className:"text-success",children:M.hanviet||null})]}),k&&(0,t.jsxs)("h2",{children:["Pinyin: ",(0,t.jsx)("strong",{className:"text-primary",children:M.pinyin||null})]}),(0,t.jsxs)("h2",{children:["Nghĩa: ",(0,t.jsx)("strong",{children:M.nghia||null})]}),(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-2",children:[(0,t.jsx)(g.Z,{className:"p-3",variant:"secondary",onClick:()=>I(),children:"Previous"}),k?(0,t.jsx)(g.Z,{className:"p-3",variant:"primary",onClick:()=>T(),children:"Next"}):(0,t.jsx)(g.Z,{variant:"warning",className:"p-3",onClick:()=>Z(!0),children:"Đ\xe1p \xe1n"})]})]})})]}):(0,t.jsx)("div",{children:"Đang tải dữ liệu..."})}n(31467);var y=n(9460),N=n(28996),S=n(87138);function C(e){let{title:i,link:n,onClose:a}=e;return(0,t.jsx)("div",{className:"loadingData",onClick:()=>{a&&a()},children:(0,t.jsxs)("div",{className:"loadingData-container",onClick:e=>{e.stopPropagation()},children:[(0,t.jsx)(l.default,{src:"https://tiengtrungdongyang.com/img/gif/correct.gif",alt:"Loading...",width:200,height:200,style:{objectFit:"contain"}}),(0,t.jsx)("h2",{children:i}),(0,t.jsx)(S.default,{className:"itemCard-title-luanngu",href:n,target:"_self",children:(0,t.jsx)(g.Z,{className:"btn-phatamthanh",variant:"warning",children:"B\xe0i tiếp theo"})})]})})}var w=e=>{let{baihoc:i,id:n,nguphaps:l,isGianthe:c,hsk:o,pathBaitap:h}=e,[d,g]=(0,a.useState)(!1),[f,S]=(0,a.useState)([]),w=(0,a.useRef)([]),[k,Z]=(0,a.useState)(null),[D,B]=(0,a.useState)(!1),[M,T]=(0,a.useState)(),[I,z]=(0,a.useState)(),G=(0,a.useRef)(null),[L,P]=(0,a.useState)(0),[E,H]=(0,a.useState)(0),[R,F]=(0,a.useState)(0),[A,_]=(0,a.useState)(0),[V,O]=(0,a.useState)(!1),[W,U]=(0,a.useState)(!1),[J,q]=(0,a.useState)(!1),[K,Q]=(0,a.useState)(!1),[X,Y]=(0,a.useState)(!0),[$,ee]=(0,a.useState)(0),[ei,en]=(0,a.useState)(0),[et,ea]=(0,a.useState)(0),[el,es]=(0,a.useState)(0),[er,ec]=(0,a.useState)(0),[eo,eh]=(0,a.useState)(0),[ed,eu]=(0,a.useState)("tumoi"),eg=n.replace(/b0/gi,""),em=async(e,i)=>{try{await Promise.all([(0,m.Pf)(e,i)])}catch(i){console.error("Lỗi update:",i);let e={message:"Lỗi update: "+i.message};u().fire(i.message,"","info"),setState(i=>({...i,error:e}))}finally{}},ex=async()=>{O(!0),eu("nghia")},ep=()=>{var e,n,a;let l=null===(a=i.hoithoai)||void 0===a?void 0:null===(n=a.map(e=>e.tumoi))||void 0===n?void 0:null===(e=n.filter(Boolean))||void 0===e?void 0:e.flat();return(0,t.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:l.length>0&&(0,t.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,t.jsx)("h2",{children:"B\xe0i tập 1: T\xecm \xe2m pinyin của từ tiếng Trung."}),(0,t.jsx)("hr",{}),(0,t.jsx)(p.Z,{tumoi:l,onFinish:()=>ex(),isGianthe:c,pathBaitap:h})]})})},ej=()=>{var e,n,a;let l=null===(a=i.hoithoai)||void 0===a?void 0:null===(n=a.map(e=>e.tumoi))||void 0===n?void 0:null===(e=n.filter(Boolean))||void 0===e?void 0:e.flat();return(0,t.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:l.length>0&&(0,t.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,t.jsx)("h2",{children:"B\xe0i tập 2: T\xecm \xfd nghĩa của từ tiếng Trung."}),(0,t.jsx)("hr",{}),(0,t.jsx)(r.Z,{tumoi:l,onFinish:()=>ex(),isGianthe:c,pathBaitap:h})]})})},ev=()=>{var e,n,a;let l=null===(a=i.hoithoai)||void 0===a?void 0:null===(n=a.map(e=>e.tumoi))||void 0===n?void 0:null===(e=n.filter(Boolean))||void 0===e?void 0:e.flat();return(0,t.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:l.length>0&&(0,t.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,t.jsx)("h2",{children:"B\xe0i tập: T\xecm \xfd nghĩa của từ Pinyin."}),(0,t.jsx)("hr",{}),(0,t.jsx)(x,{tumoi:l,onFinish:()=>{eu("doc")},isGianthe:c,pathBaitap:h})]})})},ef=async()=>{U(!0),eu("nghe")},eb=()=>{var e,n,a;let l=null===(a=i.hoithoai)||void 0===a?void 0:null===(n=a.map(e=>e.tumoi))||void 0===n?void 0:null===(e=n.filter(Boolean))||void 0===e?void 0:e.flat();return(0,t.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:l.length>0&&(0,t.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,t.jsx)("h2",{children:"B\xe0i tập 3: Nhập từ vựng tiếng Trung c\xf3 nghĩa như đề đ\xe3 cho v\xe0o \xf4 trống:"}),(0,t.jsx)("hr",{}),(0,t.jsx)(j.Z,{items:l,onFinish:()=>ef(),isGianthe:c,pathBaitap:h})]})})},ey=()=>{var e,n,a;let l=null===(a=i.hoithoai)||void 0===a?void 0:null===(n=a.map(e=>e.tumoi))||void 0===n?void 0:null===(e=n.filter(Boolean))||void 0===e?void 0:e.flat();return(0,t.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:l.length>0&&(0,t.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,t.jsxs)("h2",{children:["\xd4n tập từ mới",E+1,":"]}),(0,t.jsx)("hr",{}),(0,t.jsx)(b,{items:l,onFinish:()=>eu("pinyin"),isGianthe:c,pathBaitap:h})]})})},eN=async()=>{let e=Math.floor(1e3*(el+100/i.speak.length))/1e3;await em("".concat(h,"/noi"),e),es(e)},eS=()=>{eu("cauhoi")},eC=()=>(console.log(i.speak[0]),(0,t.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:i.speak&&(0,t.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,t.jsx)("h2",{children:"B\xe0i tập 5: Mời bạn ph\xe1t \xe2m lại c\xe2u tiếng Trung sau đ\xe2y:"}),(0,t.jsx)("hr",{}),(0,t.jsx)(v.Z,{validCau:i.speak,isGianthe:c,onNext:()=>eS(),congdiem:()=>eN(),pathBaitap:h})]})})),ew=()=>{if(!i.listen)return null;let e=i.listen;return console.log(e),(0,t.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:(0,t.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,t.jsx)("h2",{children:"B\xe0i tập 4: Ho\xe0n th\xe0nh c\xe2u thoại m\xe0 bạn nghe được:"}),(0,t.jsx)("hr",{}),(0,t.jsx)(y.Z,{validCau:e,isGianthe:c,pathBaitap:h,onNext:()=>eu("noi")})]})})},ek=()=>{if(!i.cauhoi)return null;let e=i.cauhoi;return console.log(i.cauhoi),(0,t.jsx)("div",{className:"baihocgiaotiep-hoithoai",children:(0,t.jsxs)("div",{className:"baihocgiaotiep-hoithoai-item",children:[(0,t.jsx)("h2",{children:"B\xe0i tập 6: Trả lời c\xe2u hỏi trong b\xe0i"}),(0,t.jsx)("hr",{}),(0,t.jsx)(N.Z,{dsCau:e,isGianthe:c,pathBaitap:h,hsk:o,id:n,onNext:()=>q(!0)})]})})};return i?(0,t.jsxs)("div",{className:"baihocgiaotiep-container",children:[(0,t.jsx)("div",{className:"MatchingGameContaniner",children:(0,t.jsxs)("div",{className:"flex gap-2 mb-4 ",children:[(0,t.jsx)("button",{onClick:()=>eu("tumoi"),className:"btn ".concat("tumoi"===ed?"btn-primary":"btn-outline-secondary"),children:"生词 - Từ Mới"}),(0,t.jsx)("button",{onClick:()=>eu("pinyin"),className:"btn ".concat("pinyin"===ed?"btn-primary":"btn-outline-secondary"),children:"拼音 - Pinyin"}),(0,t.jsx)("button",{onClick:()=>eu("doc"),className:"btn ".concat("doc"===ed?"btn-primary":"btn-outline-secondary"),children:"阅读 - Đọc"}),(0,t.jsx)("button",{onClick:()=>eu("nghia"),className:"btn ".concat("nghia"===ed?"btn-primary":"btn-outline-secondary"),children:"意义 - Nghĩa"}),(0,t.jsx)("button",{onClick:()=>eu("viet"),className:"btn ".concat("viet"===ed?"btn-primary":"btn-outline-secondary"),children:"写字 - Viết"}),(0,t.jsx)("button",{onClick:()=>eu("nghe"),className:"btn ".concat("nghe"===ed?"btn-primary":"btn-outline-secondary"),children:"听力 - Nghe"}),(0,t.jsx)("button",{onClick:()=>eu("noi"),className:"btn ".concat("noi"===ed?"btn-primary":"btn-outline-secondary"),children:"说话 - N\xf3i"}),i.cauhoi&&(0,t.jsx)("button",{onClick:()=>eu("cauhoi"),className:"btn ".concat("cauhoi"===ed?"btn-primary":"btn-outline-secondary"),children:"问答 - Vấn Đ\xe1p"})]})}),(()=>{if(J&&X){let e=n.replace(/\d+/,e=>String(Number(e)+1).padStart(e.length,"0"));return(0,t.jsx)(C,{link:"/hsk/".concat(o,"/").concat(e),title:"Ch\xfac mừng bạn đ\xe3 ho\xe0n th\xe0nh b\xe0i tập. C\xf9ng học b\xe0i tiếp theo nh\xe9!",onClose:()=>Y(!1)})}})(),(0,t.jsxs)("h1",{className:"baihocgiaotiep-title baihocgiaotiep-title-number",children:["B\xe0i ",eg,": "]}),(0,t.jsx)("h1",{className:"baihocgiaotiep-title baihocgiaotiep-title-tiengtrung tiengtrungText",children:c?i.gianthe:i.tieude}),(0,t.jsxs)("h1",{className:"baihocgiaotiep-title baihocgiaotiep-title-tieude",children:["(",i.tieudedich,")"]}),(0,t.jsx)(s.Z,{showStrokeArea:D,activeCharacter:k,strokes:f,pathsRef:w,isShowImage:d,dataTranslate:I,dataWrite:M,strokeAreaRef:G}),(0,t.jsx)("span",{className:"baihocgiaotiep-pinyin",children:i.tieudepinyin}),(0,t.jsx)("div",{children:(()=>{switch(ed){case"pinyin":return(0,t.jsx)(ev,{});case"nghia":return(0,t.jsx)(ej,{});case"tumoi":return(0,t.jsx)(ey,{});case"nghe":return(0,t.jsx)(ew,{});case"noi":return(0,t.jsx)(eC,{});case"doc":return(0,t.jsx)(ep,{});case"viet":return(0,t.jsx)(eb,{});case"cauhoi":return(0,t.jsx)(ek,{});default:return null}})()})]}):null}},46289:function(e,i,n){n.d(i,{Z:function(){return g}});var t=n(57437),a=n(2265),l=n(23394),s=n(85839),r=n(89745),c=n(64379),o=n.n(c),h=n(66648),d=n(12808),u=n(65606);function g(e){let{tumoi:i,onFinish:n,isGianthe:c,pathBaitap:g,diem:m=100}=e,[x,p]=(0,a.useState)([]),[j,v]=(0,a.useState)([]),[f,b]=(0,a.useState)({nghia:null,hanzi:null}),[y,N]=(0,a.useState)({pinyin:null,hanzi:null,nghia:null,gianthe:null}),[S,C]=(0,a.useState)([]),[w,k]=(0,a.useState)({id:null,hanziId:null,type:null}),[Z,D]=(0,a.useState)([]),[B,M]=(0,a.useState)(!1),[T,I]=(0,a.useState)("https://tiengtrungdongyang.com/img/gif/correct4.gif"),[z,G]=(0,a.useState)(!1),[L,P]=(0,a.useState)(0),[E,H]=(0,a.useState)([]),[R,F]=(0,a.useState)(0);(0,a.useEffect)(()=>{if(i&&i.length>0){let e={};i.forEach(i=>{let n=i.gianthe.length;e[n]||(e[n]=[]),e[n].push(i)}),H(Object.values(e)),F(0)}},[i]);let A=E[R]||[],_=(0,a.useRef)(null),V=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(A.length>0){let e=[...A].sort(()=>Math.random()-.5);p(e.map((e,i)=>({...e,id:i}))),v(e.map((e,i)=>({...e,id:i})).sort(()=>Math.random()-.5)),b({nghia:null,hanzi:null}),C([]),k({id:null,hanziId:null,type:null}),D([]),M(!1)}},[R,E]);let O=async(e,i)=>{try{await Promise.all([(0,u.Pf)(e,i)])}catch(i){console.error("Lỗi update:",i);let e={message:"Lỗi update: "+i.message};o().fire(i.message,"","info"),setState(i=>({...i,error:e}))}finally{}},W=async()=>{let e=Math.floor(1e3*(L+m/i.length))/1e3;await O("".concat(g,"/nghia"),e),P(e)},U=(e,i)=>{let n={...f,[e]:i};b(n),console.log(n),n.nghia&&n.hanzi&&!z&&J(n)},J=async e=>{var i,t;G(!0);let{nghia:a,hanzi:l}=e,s=a.id===l.id;console.log(a);let c=()=>{G(!1),b({nghia:null,hanzi:null}),k({id:null,hanziId:null,type:null})};if(s){N(l),I("https://tiengtrungdongyang.com/img/gif/correct".concat(Math.floor(3*Math.random())+1,".gif"));let e=a.id;k({id:e,hanziId:e,type:"correct"}),null===(i=_.current)||void 0===i||i.play(),D(i=>[...i,e]),setTimeout(()=>{(0,r.Z)(l.gianthe,10+l.id)},300),await W(),setTimeout(()=>{C(i=>{let t=[...i,e];return t.length===A.length&&(M(!0),setTimeout(()=>{R+1<E.length?F(R+1):null==n||n()},500)),t}),D(i=>i.filter(i=>i!==e)),c()},500)}else I("https://tiengtrungdongyang.com/img/gif/wrong".concat(Math.floor(5*Math.random())+1,".gif")),k({id:a.id,hanziId:l.id,type:"wrong"}),null===(t=V.current)||void 0===t||t.play(),setTimeout(()=>{c()},800)},q=(e,i)=>{var n;let t=(null===(n=f[i])||void 0===n?void 0:n.id)===e.id,a=S.includes(e.id),l=Z.includes(e.id),s="pinyin"===i&&w.id===e.id||"nghia"===i&&w.id===e.id||"hanzi"===i&&w.hanziId===e.id;return l?"matchedCorrect bg-green-500 border-green-500 text-white":a?"bg-blue-500 border-green-500 text-white":s&&"wrong"===w.type?"matchedWrong border-red-500 animate-shake":s&&"correct"===w.type?"border-green-500 animate-pulse":t?"bg-blue-400 border-blue-400":"bg-black border-gray-500 text-white"};return(0,t.jsxs)("div",{className:"MatchingGameContaniner",children:[(0,t.jsx)("audio",{ref:_,src:l.Z}),(0,t.jsx)("audio",{ref:V,src:s.Z}),(0,t.jsxs)("div",{className:"d-flex row align-items-center justify-content-center",children:[(0,t.jsx)("div",{className:"col-12 col-md-6 MatchingGameContaniner",children:(0,t.jsx)(h.default,{src:T,alt:"Loading...",width:200,height:200,style:{objectFit:"contain"}})}),y.tiengtrung&&(0,t.jsxs)("div",{className:"col-12 col-md-6 MatchingGameContaniner",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-2",children:[(0,t.jsx)("h2",{className:"text-danger",children:c?y.gianthe:y.tiengtrung||null}),(0,t.jsx)(d.Z,{lassName:"btn-phatamthanh",variant:"danger",onClick:()=>(0,r.Z)(y.gianthe,3),children:"\uD83D\uDD0A"})]}),(0,t.jsx)("h2",{className:"text-danger",children:y.pinyin||null}),(0,t.jsx)("h2",{className:"text-danger",children:y.nghia||null})]})]}),(0,t.jsxs)("div",{className:"flex flex-col flex justify-center items-center h-full",children:[(0,t.jsx)("h3",{className:"mb-2",children:"Chữ H\xe1n"}),j.map((e,i)=>(0,t.jsx)("button",{className:"relative flex items-center justify-between w-full py-2 px-4 my-1 rounded border transition-all duration-300 fs-3 ".concat(q(e,"hanzi")),onClick:()=>U("hanzi",e,i),disabled:S.includes(e.id),children:c?e.gianthe:e.tiengtrung},e.id))]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("h3",{className:"mb-2",children:"Nghĩa"}),x.map((e,i)=>(0,t.jsx)("button",{className:"relative flex items-center justify-between w-full py-2 px-4 my-1 rounded border transition-all duration-300 fs-3 ".concat(q(e,"nghia")),onClick:()=>U("nghia",e,i),disabled:S.includes(e.id),children:e.nghia},e.id))]})]})}},28996:function(e,i,n){n.d(i,{Z:function(){return m}});var t=n(57437),a=n(2265),l=n(89745),s=n(60516),r=n(65606),c=n(12808),o=n(73137),h=n(23830),d=n(34231),u=n(64379),g=n.n(u);function m(e){let{dsCau:i,isGianthe:n,pathBaitap:u,hsk:m,id:x,onNext:p,isShowNghia:j=!0}=e,[v,f]=(0,a.useState)(null),[b,y]=(0,a.useState)({}),[N,S]=(0,a.useState)(!1),[C,w]=(0,a.useState)(!1),k=(e,i)=>{g().fire({icon:e,title:i,position:"center",showConfirmButton:!1,timer:1500,timerProgressBar:!0})};(0,a.useEffect)(()=>{let e=localStorage.getItem("userLogin");if(e){let n=JSON.parse(e);f(n),i.forEach(async(e,i)=>{let t="".concat(u,"/cauhoi/").concat(n.uid,"/").concat(i),a=await (0,s.U2)((0,s.iH)(r.db,t));a.exists()&&y(e=>({...e,[i]:{userInput:a.val().userInput||"",nghia:a.val().nghiacuanguoidung||""}}))})}},[i,u]);let Z=(e,i,n)=>{y(t=>({...t,[e]:{...t[e],[i]:n}}))},D=async()=>{if(v){for(let l=0;l<i.length;l++){var e,n,t,a;let c=i[l],o=(null===(n=b[l])||void 0===n?void 0:null===(e=n.userInput)||void 0===e?void 0:e.trim())||"",h=(null===(a=b[l])||void 0===a?void 0:null===(t=a.nghia)||void 0===t?void 0:t.trim())||"",d="".concat(u,"/cauhoi/").concat(v.uid,"/").concat(l);await (0,s.t8)((0,s.iH)(r.db,d),{userInput:o,nghia:c.nghia,hanviet:c.gianthe,nghiacuanguoidung:h,time:Date.now()})}k("success","Đ\xe3 lưu to\xe0n bộ b\xe0i l\xe0m!")}},B=async()=>{if(!v)return;console.log(123);let e="".concat(u,"/cauhoi/").concat(v.uid),n="user/baitap/".concat(v.uid,"/").concat(m,"_").concat(x),t=Date.now();try{let a=await (0,s.U2)((0,s.iH)(r.db,e));if(a.exists()){let e=a.val(),l=i.map((i,n)=>{var a,l;return{tiengtrung:i.tiengtrung,gianthe:i.gianthe,pinyin:i.pinyin,nghia:i.nghia,cautraloi:(null===(a=e[n])||void 0===a?void 0:a.userInput)||"",nghiacuanguoidung:(null===(l=e[n])||void 0===l?void 0:l.nghiacuanguoidung)||"",time:t}});await (0,s.t8)((0,s.iH)(r.db,n),{hsk:m,id:x,timeSubmit:t,cauTraLoi:l}),k("success","Đ\xe3 gửi b\xe0i tập th\xe0nh c\xf4ng!"),p()}else k("warning","Chưa c\xf3 dữ liệu để gửi!")}catch(e){console.error("Lỗi:",e),k("error","Lỗi khi gửi b\xe0i tập!")}};return(0,t.jsxs)("div",{className:"container py-4",children:[(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,t.jsxs)("div",{className:"btn-group",children:[(0,t.jsx)(c.Z,{variant:"outline-primary",onClick:()=>S(!N),children:N?"Ẩn Pinyin":"Hiện Pinyin"}),j&&(0,t.jsx)(c.Z,{variant:"outline-danger",onClick:()=>w(!C),children:C?"Ẩn Nghĩa":"Hiện Nghĩa"})]}),(0,t.jsx)(c.Z,{variant:"success",onClick:B,children:"\uD83D\uDCE4 Gửi B\xe0i Tập"})]}),i.map((e,i)=>{var a,s;return(0,t.jsx)(o.Z,{className:"mb-4 shadow-sm",children:(0,t.jsxs)(o.Z.Body,{children:[(0,t.jsxs)("div",{className:"d-flex",children:[(0,t.jsxs)("h5",{className:"mb-3 text-primary fw-bold fs-3",children:["\uD83D\uDCDD C\xe2u ",i+1,": ",n?e.gianthe:e.tiengtrung]}),(0,t.jsx)(c.Z,{variant:"outline-secondary",onClick:()=>(0,l.Z)(e.gianthe),children:"\uD83D\uDD0A"})]}),N&&(0,t.jsxs)("div",{className:"text-muted mb-2",children:["\uD83D\uDCDA Pinyin: ",e.pinyin]}),C&&(0,t.jsxs)("div",{className:"mb-3",children:["\uD83D\uDCA1 Nghĩa: ",e.nghia]}),(0,t.jsxs)(h.Z.Group,{className:"mb-2",children:[(0,t.jsx)(h.Z.Label,{children:"Nhập c\xe2u trả lời của bạn:"}),(0,t.jsx)(d.Z,{value:(null===(a=b[i])||void 0===a?void 0:a.userInput)||"",className:"form-control fs-3",placeholder:"你的回答",onChange:e=>Z(i,"userInput",e.target.value)})]}),(0,t.jsxs)(h.Z.Group,{className:"mb-3",children:[(0,t.jsx)(h.Z.Label,{children:"Nhập nghĩa của c\xe2u trả lời:"}),(0,t.jsx)(d.Z,{value:(null===(s=b[i])||void 0===s?void 0:s.nghia)||"",className:"form-control fs-5",placeholder:"Nhập nghĩa của c\xe2u trả lời",onChange:e=>Z(i,"nghia",e.target.value)})]})]})},i)}),(0,t.jsxs)("div",{className:"d-flex justify-content-end gap-2 mt-4",children:[(0,t.jsx)(c.Z,{variant:"outline-secondary",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"⬆️ Về đầu"}),(0,t.jsx)(c.Z,{variant:"primary",onClick:()=>D(),children:"\uD83D\uDCBE Lưu tạm thời"}),(0,t.jsx)(c.Z,{variant:"success",onClick:()=>B(),children:"\uD83D\uDCE4 Gửi B\xe0i Tập"})]})]})}}}]);